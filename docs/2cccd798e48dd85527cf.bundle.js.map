{"version":3,"file":"2cccd798e48dd85527cf.bundle.js","mappings":";UAAIA,EACAC,+BCCJC,EAAQC,WAuCR,SAAqBC,GACnB,IAAIC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAC3B,OAAuC,GAA9BE,EAAWC,GAAuB,EAAKA,CAClD,EA3CAN,EAAQO,YAiDR,SAAsBL,GACpB,IAAIM,EAcAC,EAbAN,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAEvBO,EAAM,IAAIC,EAVhB,SAAsBT,EAAKG,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,CAClD,CAQoBM,CAAYV,EAAKG,EAAUC,IAEzCO,EAAU,EAGVC,EAAMR,EAAkB,EACxBD,EAAW,EACXA,EAGJ,IAAKI,EAAI,EAAGA,EAAIK,EAAKL,GAAK,EACxBD,EACGO,EAAUb,EAAIc,WAAWP,KAAO,GAChCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,GACpCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,EACrCM,EAAUb,EAAIc,WAAWP,EAAI,IAC/BC,EAAIG,KAAcL,GAAO,GAAM,IAC/BE,EAAIG,KAAcL,GAAO,EAAK,IAC9BE,EAAIG,KAAmB,IAANL,EAGK,IAApBF,IACFE,EACGO,EAAUb,EAAIc,WAAWP,KAAO,EAChCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,EACvCC,EAAIG,KAAmB,IAANL,GAGK,IAApBF,IACFE,EACGO,EAAUb,EAAIc,WAAWP,KAAO,GAChCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,EACpCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,EACvCC,EAAIG,KAAcL,GAAO,EAAK,IAC9BE,EAAIG,KAAmB,IAANL,GAGnB,OAAOE,CACT,EA5FAV,EAAQiB,cAkHR,SAAwBC,GAQtB,IAPA,IAAIV,EACAM,EAAMI,EAAMC,OACZC,EAAaN,EAAM,EACnBO,EAAQ,GACRC,EAAiB,MAGZb,EAAI,EAAGc,EAAOT,EAAMM,EAAYX,EAAIc,EAAMd,GAAKa,EACtDD,EAAMG,KAAKC,EAAYP,EAAOT,EAAIA,EAAIa,EAAkBC,EAAOA,EAAQd,EAAIa,IAI1D,IAAfF,GACFZ,EAAMU,EAAMJ,EAAM,GAClBO,EAAMG,KACJE,EAAOlB,GAAO,GACdkB,EAAQlB,GAAO,EAAK,IACpB,OAEsB,IAAfY,IACTZ,GAAOU,EAAMJ,EAAM,IAAM,GAAKI,EAAMJ,EAAM,GAC1CO,EAAMG,KACJE,EAAOlB,GAAO,IACdkB,EAAQlB,GAAO,EAAK,IACpBkB,EAAQlB,GAAO,EAAK,IACpB,MAIJ,OAAOa,EAAMM,KAAK,GACpB,EA1IA,IALA,IAAID,EAAS,GACTX,EAAY,GACZJ,EAA4B,oBAAfiB,WAA6BA,WAAaC,MAEvDC,EAAO,mEACFrB,EAAI,EAAsBA,EAAbqB,KAAwBrB,EAC5CiB,EAAOjB,GAAKqB,EAAKrB,GACjBM,EAAUe,EAAKd,WAAWP,IAAMA,EAQlC,SAASL,EAASF,GAChB,IAAIY,EAAMZ,EAAIiB,OAEd,GAAIL,EAAM,EAAI,EACZ,MAAM,IAAIiB,MAAM,kDAKlB,IAAI1B,EAAWH,EAAI8B,QAAQ,KAO3B,OANkB,IAAd3B,IAAiBA,EAAWS,GAMzB,CAACT,EAJcA,IAAaS,EAC/B,EACA,EAAKT,EAAW,EAGtB,CAmEA,SAASoB,EAAaP,EAAOe,EAAOC,GAGlC,IAFA,IAAI1B,EARoB2B,EASpBC,EAAS,GACJ3B,EAAIwB,EAAOxB,EAAIyB,EAAKzB,GAAK,EAChCD,GACIU,EAAMT,IAAM,GAAM,WAClBS,EAAMT,EAAI,IAAM,EAAK,QACP,IAAfS,EAAMT,EAAI,IACb2B,EAAOZ,KAdFE,GADiBS,EAeM3B,IAdT,GAAK,IACxBkB,EAAOS,GAAO,GAAK,IACnBT,EAAOS,GAAO,EAAI,IAClBT,EAAa,GAANS,IAaT,OAAOC,EAAOT,KAAK,GACrB,CAlGAZ,EAAU,IAAIC,WAAW,IAAM,GAC/BD,EAAU,IAAIC,WAAW,IAAM,gCCT/B,MAAMqB,EAAS,EAAQ,MACjBC,EAAU,EAAQ,KAClBC,EACe,mBAAXC,QAAkD,mBAAlBA,OAAY,IAChDA,OAAY,IAAE,8BACd,KAENxC,EAAQyC,OAASA,EACjBzC,EAAQ0C,WAyTR,SAAqBvB,IACdA,GAAUA,IACbA,EAAS,GAEX,OAAOsB,EAAOE,OAAOxB,EACvB,EA7TAnB,EAAQ4C,kBAAoB,GAE5B,MAAMC,EAAe,WAwDrB,SAASC,EAAc3B,GACrB,GAAIA,EAAS0B,EACX,MAAM,IAAIE,WAAW,cAAgB5B,EAAS,kCAGhD,MAAM6B,EAAM,IAAIpB,WAAWT,GAE3B,OADA8B,OAAOC,eAAeF,EAAKP,EAAOU,WAC3BH,CACT,CAYA,SAASP,EAAQW,EAAKC,EAAkBlC,GAEtC,GAAmB,iBAARiC,EAAkB,CAC3B,GAAgC,iBAArBC,EACT,MAAM,IAAIC,UACR,sEAGJ,OAAOC,EAAYH,EACrB,CACA,OAAOI,EAAKJ,EAAKC,EAAkBlC,EACrC,CAIA,SAASqC,EAAMC,EAAOJ,EAAkBlC,GACtC,GAAqB,iBAAVsC,EACT,OAqHJ,SAAqBC,EAAQC,GACH,iBAAbA,GAAsC,KAAbA,IAClCA,EAAW,QAGb,IAAKlB,EAAOmB,WAAWD,GACrB,MAAM,IAAIL,UAAU,qBAAuBK,GAG7C,MAAMxC,EAAwC,EAA/BlB,EAAWyD,EAAQC,GAClC,IAAIX,EAAMF,EAAa3B,GAEvB,MAAM0C,EAASb,EAAIc,MAAMJ,EAAQC,GAE7BE,IAAW1C,IAIb6B,EAAMA,EAAIe,MAAM,EAAGF,IAGrB,OAAOb,CACT,CA3IWgB,CAAWP,EAAOJ,GAG3B,GAAIY,YAAYC,OAAOT,GACrB,OAkJJ,SAAwBU,GACtB,GAAIC,EAAWD,EAAWvC,YAAa,CACrC,MAAMyC,EAAO,IAAIzC,WAAWuC,GAC5B,OAAOG,EAAgBD,EAAKE,OAAQF,EAAKG,WAAYH,EAAKpE,WAC5D,CACA,OAAOwE,EAAcN,EACvB,CAxJWO,CAAcjB,GAGvB,GAAa,MAATA,EACF,MAAM,IAAIH,UACR,yHACiDG,GAIrD,GAAIW,EAAWX,EAAOQ,cACjBR,GAASW,EAAWX,EAAMc,OAAQN,aACrC,OAAOK,EAAgBb,EAAOJ,EAAkBlC,GAGlD,GAAiC,oBAAtBwD,oBACNP,EAAWX,EAAOkB,oBAClBlB,GAASW,EAAWX,EAAMc,OAAQI,oBACrC,OAAOL,EAAgBb,EAAOJ,EAAkBlC,GAGlD,GAAqB,iBAAVsC,EACT,MAAM,IAAIH,UACR,yEAIJ,MAAMsB,EAAUnB,EAAMmB,SAAWnB,EAAMmB,UACvC,GAAe,MAAXA,GAAmBA,IAAYnB,EACjC,OAAOhB,EAAOe,KAAKoB,EAASvB,EAAkBlC,GAGhD,MAAM0D,EAkJR,SAAqBC,GACnB,GAAIrC,EAAOsC,SAASD,GAAM,CACxB,MAAMhE,EAA4B,EAAtBkE,EAAQF,EAAI3D,QAClB6B,EAAMF,EAAahC,GAEzB,OAAmB,IAAfkC,EAAI7B,QAIR2D,EAAIT,KAAKrB,EAAK,EAAG,EAAGlC,GAHXkC,CAKX,CAEA,QAAmBiC,IAAfH,EAAI3D,OACN,MAA0B,iBAAf2D,EAAI3D,QAAuB+D,EAAYJ,EAAI3D,QAC7C2B,EAAa,GAEf2B,EAAcK,GAGvB,GAAiB,WAAbA,EAAIK,MAAqBtD,MAAMuD,QAAQN,EAAIO,MAC7C,OAAOZ,EAAcK,EAAIO,KAE7B,CAzKYC,CAAW7B,GACrB,GAAIoB,EAAG,OAAOA,EAEd,GAAsB,oBAAXrC,QAAgD,MAAtBA,OAAO+C,aACH,mBAA9B9B,EAAMjB,OAAO+C,aACtB,OAAO9C,EAAOe,KAAKC,EAAMjB,OAAO+C,aAAa,UAAWlC,EAAkBlC,GAG5E,MAAM,IAAImC,UACR,yHACiDG,EAErD,CAmBA,SAAS+B,EAAYC,GACnB,GAAoB,iBAATA,EACT,MAAM,IAAInC,UAAU,0CACf,GAAImC,EAAO,EAChB,MAAM,IAAI1C,WAAW,cAAgB0C,EAAO,iCAEhD,CA0BA,SAASlC,EAAakC,GAEpB,OADAD,EAAWC,GACJ3C,EAAa2C,EAAO,EAAI,EAAoB,EAAhBT,EAAQS,GAC7C,CAuCA,SAAShB,EAAeiB,GACtB,MAAMvE,EAASuE,EAAMvE,OAAS,EAAI,EAA4B,EAAxB6D,EAAQU,EAAMvE,QAC9C6B,EAAMF,EAAa3B,GACzB,IAAK,IAAIV,EAAI,EAAGA,EAAIU,EAAQV,GAAK,EAC/BuC,EAAIvC,GAAgB,IAAXiF,EAAMjF,GAEjB,OAAOuC,CACT,CAUA,SAASsB,EAAiBoB,EAAOlB,EAAYrD,GAC3C,GAAIqD,EAAa,GAAKkB,EAAMzF,WAAauE,EACvC,MAAM,IAAIzB,WAAW,wCAGvB,GAAI2C,EAAMzF,WAAauE,GAAcrD,GAAU,GAC7C,MAAM,IAAI4B,WAAW,wCAGvB,IAAIC,EAYJ,OAVEA,OADiBiC,IAAfT,QAAuCS,IAAX9D,EACxB,IAAIS,WAAW8D,QACDT,IAAX9D,EACH,IAAIS,WAAW8D,EAAOlB,GAEtB,IAAI5C,WAAW8D,EAAOlB,EAAYrD,GAI1C8B,OAAOC,eAAeF,EAAKP,EAAOU,WAE3BH,CACT,CA2BA,SAASgC,EAAS7D,GAGhB,GAAIA,GAAU0B,EACZ,MAAM,IAAIE,WAAW,0DACaF,EAAa8C,SAAS,IAAM,UAEhE,OAAgB,EAATxE,CACT,CAsGA,SAASlB,EAAYyD,EAAQC,GAC3B,GAAIlB,EAAOsC,SAASrB,GAClB,OAAOA,EAAOvC,OAEhB,GAAI8C,YAAYC,OAAOR,IAAWU,EAAWV,EAAQO,aACnD,OAAOP,EAAOzD,WAEhB,GAAsB,iBAAXyD,EACT,MAAM,IAAIJ,UACR,kGAC0BI,GAI9B,MAAM5C,EAAM4C,EAAOvC,OACbyE,EAAaC,UAAU1E,OAAS,IAAsB,IAAjB0E,UAAU,GACrD,IAAKD,GAAqB,IAAR9E,EAAW,OAAO,EAGpC,IAAIgF,GAAc,EAClB,OACE,OAAQnC,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAO7C,EACT,IAAK,OACL,IAAK,QACH,OAAOiF,EAAYrC,GAAQvC,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAANL,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAOkF,EAActC,GAAQvC,OAC/B,QACE,GAAI2E,EACF,OAAOF,GAAa,EAAIG,EAAYrC,GAAQvC,OAE9CwC,GAAY,GAAKA,GAAUsC,cAC3BH,GAAc,EAGtB,CAGA,SAASI,EAAcvC,EAAU1B,EAAOC,GACtC,IAAI4D,GAAc,EAclB,SALcb,IAAVhD,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQkE,KAAKhF,OACf,MAAO,GAOT,SAJY8D,IAAR/C,GAAqBA,EAAMiE,KAAKhF,UAClCe,EAAMiE,KAAKhF,QAGTe,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACTD,KAAW,GAGT,MAAO,GAKT,IAFK0B,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOyC,EAASD,KAAMlE,EAAOC,GAE/B,IAAK,OACL,IAAK,QACH,OAAOmE,EAAUF,KAAMlE,EAAOC,GAEhC,IAAK,QACH,OAAOoE,EAAWH,KAAMlE,EAAOC,GAEjC,IAAK,SACL,IAAK,SACH,OAAOqE,EAAYJ,KAAMlE,EAAOC,GAElC,IAAK,SACH,OAAOsE,EAAYL,KAAMlE,EAAOC,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOuE,EAAaN,KAAMlE,EAAOC,GAEnC,QACE,GAAI4D,EAAa,MAAM,IAAIxC,UAAU,qBAAuBK,GAC5DA,GAAYA,EAAW,IAAIsC,cAC3BH,GAAc,EAGtB,CAUA,SAASY,EAAM7B,EAAG8B,EAAGC,GACnB,MAAMnG,EAAIoE,EAAE8B,GACZ9B,EAAE8B,GAAK9B,EAAE+B,GACT/B,EAAE+B,GAAKnG,CACT,CA2IA,SAASoG,EAAsBtC,EAAQuC,EAAKtC,EAAYb,EAAUoD,GAEhE,GAAsB,IAAlBxC,EAAOpD,OAAc,OAAQ,EAmBjC,GAhB0B,iBAAfqD,GACTb,EAAWa,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAGZU,EADJV,GAAcA,KAGZA,EAAauC,EAAM,EAAKxC,EAAOpD,OAAS,GAItCqD,EAAa,IAAGA,EAAaD,EAAOpD,OAASqD,GAC7CA,GAAcD,EAAOpD,OAAQ,CAC/B,GAAI4F,EAAK,OAAQ,EACZvC,EAAaD,EAAOpD,OAAS,CACpC,MAAO,GAAIqD,EAAa,EAAG,CACzB,IAAIuC,EACC,OAAQ,EADJvC,EAAa,CAExB,CAQA,GALmB,iBAARsC,IACTA,EAAMrE,EAAOe,KAAKsD,EAAKnD,IAIrBlB,EAAOsC,SAAS+B,GAElB,OAAmB,IAAfA,EAAI3F,QACE,EAEH6F,EAAazC,EAAQuC,EAAKtC,EAAYb,EAAUoD,GAClD,GAAmB,iBAARD,EAEhB,OADAA,GAAY,IACgC,mBAAjClF,WAAWuB,UAAUnB,QAC1B+E,EACKnF,WAAWuB,UAAUnB,QAAQiF,KAAK1C,EAAQuC,EAAKtC,GAE/C5C,WAAWuB,UAAU+D,YAAYD,KAAK1C,EAAQuC,EAAKtC,GAGvDwC,EAAazC,EAAQ,CAACuC,GAAMtC,EAAYb,EAAUoD,GAG3D,MAAM,IAAIzD,UAAU,uCACtB,CAEA,SAAS0D,EAActG,EAAKoG,EAAKtC,EAAYb,EAAUoD,GACrD,IA0BItG,EA1BA0G,EAAY,EACZC,EAAY1G,EAAIS,OAChBkG,EAAYP,EAAI3F,OAEpB,QAAiB8D,IAAbtB,IAEe,UADjBA,EAAW2D,OAAO3D,GAAUsC,gBACY,UAAbtC,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAIjD,EAAIS,OAAS,GAAK2F,EAAI3F,OAAS,EACjC,OAAQ,EAEVgG,EAAY,EACZC,GAAa,EACbC,GAAa,EACb7C,GAAc,CAChB,CAGF,SAAS+C,EAAMvE,EAAKvC,GAClB,OAAkB,IAAd0G,EACKnE,EAAIvC,GAEJuC,EAAIwE,aAAa/G,EAAI0G,EAEhC,CAGA,GAAIJ,EAAK,CACP,IAAIU,GAAc,EAClB,IAAKhH,EAAI+D,EAAY/D,EAAI2G,EAAW3G,IAClC,GAAI8G,EAAK7G,EAAKD,KAAO8G,EAAKT,GAAqB,IAAhBW,EAAoB,EAAIhH,EAAIgH,IAEzD,IADoB,IAAhBA,IAAmBA,EAAahH,GAChCA,EAAIgH,EAAa,IAAMJ,EAAW,OAAOI,EAAaN,OAEtC,IAAhBM,IAAmBhH,GAAKA,EAAIgH,GAChCA,GAAc,CAGpB,MAEE,IADIjD,EAAa6C,EAAYD,IAAW5C,EAAa4C,EAAYC,GAC5D5G,EAAI+D,EAAY/D,GAAK,EAAGA,IAAK,CAChC,IAAIiH,GAAQ,EACZ,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAWM,IAC7B,GAAIJ,EAAK7G,EAAKD,EAAIkH,KAAOJ,EAAKT,EAAKa,GAAI,CACrCD,GAAQ,EACR,KACF,CAEF,GAAIA,EAAO,OAAOjH,CACpB,CAGF,OAAQ,CACV,CAcA,SAASmH,EAAU5E,EAAKU,EAAQmE,EAAQ1G,GACtC0G,EAASC,OAAOD,IAAW,EAC3B,MAAME,EAAY/E,EAAI7B,OAAS0G,EAC1B1G,GAGHA,EAAS2G,OAAO3G,IACH4G,IACX5G,EAAS4G,GAJX5G,EAAS4G,EAQX,MAAMC,EAAStE,EAAOvC,OAKtB,IAAIV,EACJ,IAJIU,EAAS6G,EAAS,IACpB7G,EAAS6G,EAAS,GAGfvH,EAAI,EAAGA,EAAIU,IAAUV,EAAG,CAC3B,MAAMwH,EAASC,SAASxE,EAAOyE,OAAW,EAAJ1H,EAAO,GAAI,IACjD,GAAIyE,EAAY+C,GAAS,OAAOxH,EAChCuC,EAAI6E,EAASpH,GAAKwH,CACpB,CACA,OAAOxH,CACT,CAEA,SAAS2H,EAAWpF,EAAKU,EAAQmE,EAAQ1G,GACvC,OAAOkH,EAAWtC,EAAYrC,EAAQV,EAAI7B,OAAS0G,GAAS7E,EAAK6E,EAAQ1G,EAC3E,CAEA,SAASmH,EAAYtF,EAAKU,EAAQmE,EAAQ1G,GACxC,OAAOkH,EAypCT,SAAuBE,GACrB,MAAMC,EAAY,GAClB,IAAK,IAAI/H,EAAI,EAAGA,EAAI8H,EAAIpH,SAAUV,EAEhC+H,EAAUhH,KAAyB,IAApB+G,EAAIvH,WAAWP,IAEhC,OAAO+H,CACT,CAhqCoBC,CAAa/E,GAASV,EAAK6E,EAAQ1G,EACvD,CAEA,SAASuH,EAAa1F,EAAKU,EAAQmE,EAAQ1G,GACzC,OAAOkH,EAAWrC,EAActC,GAASV,EAAK6E,EAAQ1G,EACxD,CAEA,SAASwH,EAAW3F,EAAKU,EAAQmE,EAAQ1G,GACvC,OAAOkH,EA0pCT,SAAyBE,EAAKK,GAC5B,IAAIC,EAAGC,EAAIC,EACX,MAAMP,EAAY,GAClB,IAAK,IAAI/H,EAAI,EAAGA,EAAI8H,EAAIpH,WACjByH,GAAS,GAAK,KADanI,EAGhCoI,EAAIN,EAAIvH,WAAWP,GACnBqI,EAAKD,GAAK,EACVE,EAAKF,EAAI,IACTL,EAAUhH,KAAKuH,GACfP,EAAUhH,KAAKsH,GAGjB,OAAON,CACT,CAxqCoBQ,CAAetF,EAAQV,EAAI7B,OAAS0G,GAAS7E,EAAK6E,EAAQ1G,EAC9E,CA8EA,SAASqF,EAAaxD,EAAKf,EAAOC,GAChC,OAAc,IAAVD,GAAeC,IAAQc,EAAI7B,OACtBkB,EAAOpB,cAAc+B,GAErBX,EAAOpB,cAAc+B,EAAIe,MAAM9B,EAAOC,GAEjD,CAEA,SAASmE,EAAWrD,EAAKf,EAAOC,GAC9BA,EAAM+G,KAAKC,IAAIlG,EAAI7B,OAAQe,GAC3B,MAAMiH,EAAM,GAEZ,IAAI1I,EAAIwB,EACR,KAAOxB,EAAIyB,GAAK,CACd,MAAMkH,EAAYpG,EAAIvC,GACtB,IAAI4I,EAAY,KACZC,EAAoBF,EAAY,IAChC,EACCA,EAAY,IACT,EACCA,EAAY,IACT,EACA,EAEZ,GAAI3I,EAAI6I,GAAoBpH,EAAK,CAC/B,IAAIqH,EAAYC,EAAWC,EAAYC,EAEvC,OAAQJ,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EACHG,EAAavG,EAAIvC,EAAI,GACO,MAAV,IAAb8I,KACHG,GAA6B,GAAZN,IAAqB,EAAoB,GAAbG,EACzCG,EAAgB,MAClBL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAavG,EAAIvC,EAAI,GACrB+I,EAAYxG,EAAIvC,EAAI,GACQ,MAAV,IAAb8I,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZN,IAAoB,IAAoB,GAAbG,IAAsB,EAAmB,GAAZC,EACrEE,EAAgB,OAAUA,EAAgB,OAAUA,EAAgB,SACtEL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAavG,EAAIvC,EAAI,GACrB+I,EAAYxG,EAAIvC,EAAI,GACpBgJ,EAAazG,EAAIvC,EAAI,GACO,MAAV,IAAb8I,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZN,IAAoB,IAAqB,GAAbG,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,EAClGC,EAAgB,OAAUA,EAAgB,UAC5CL,EAAYK,IAItB,CAEkB,OAAdL,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbF,EAAI3H,KAAK6H,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBF,EAAI3H,KAAK6H,GACT5I,GAAK6I,CACP,CAEA,OAQF,SAAgCK,GAC9B,MAAM7I,EAAM6I,EAAWxI,OACvB,GAAIL,GAAO8I,EACT,OAAOtC,OAAOuC,aAAaC,MAAMxC,OAAQqC,GAI3C,IAAIR,EAAM,GACN1I,EAAI,EACR,KAAOA,EAAIK,GACTqI,GAAO7B,OAAOuC,aAAaC,MACzBxC,OACAqC,EAAW5F,MAAMtD,EAAGA,GAAKmJ,IAG7B,OAAOT,CACT,CAxBSY,CAAsBZ,EAC/B,CA3+BAnJ,EAAQgK,WAAanH,EAgBrBJ,EAAOwH,oBAUP,WAEE,IACE,MAAMvJ,EAAM,IAAIkB,WAAW,GACrBsI,EAAQ,CAAEC,IAAK,WAAc,OAAO,EAAG,GAG7C,OAFAlH,OAAOC,eAAegH,EAAOtI,WAAWuB,WACxCF,OAAOC,eAAexC,EAAKwJ,GACN,KAAdxJ,EAAIyJ,KACb,CAAE,MAAOC,GACP,OAAO,CACT,CACF,CArB6BC,GAExB5H,EAAOwH,qBAA0C,oBAAZK,SACb,mBAAlBA,QAAQC,OACjBD,QAAQC,MACN,iJAkBJtH,OAAOuH,eAAe/H,EAAOU,UAAW,SAAU,CAChDsH,YAAY,EACZC,IAAK,WACH,GAAKjI,EAAOsC,SAASoB,MACrB,OAAOA,KAAK5B,MACd,IAGFtB,OAAOuH,eAAe/H,EAAOU,UAAW,SAAU,CAChDsH,YAAY,EACZC,IAAK,WACH,GAAKjI,EAAOsC,SAASoB,MACrB,OAAOA,KAAK3B,UACd,IAoCF/B,EAAOkI,SAAW,KA8DlBlI,EAAOe,KAAO,SAAUC,EAAOJ,EAAkBlC,GAC/C,OAAOqC,EAAKC,EAAOJ,EAAkBlC,EACvC,EAIA8B,OAAOC,eAAeT,EAAOU,UAAWvB,WAAWuB,WACnDF,OAAOC,eAAeT,EAAQb,YA8B9Ba,EAAOE,MAAQ,SAAU8C,EAAMmF,EAAMjH,GACnC,OArBF,SAAgB8B,EAAMmF,EAAMjH,GAE1B,OADA6B,EAAWC,GACPA,GAAQ,EACH3C,EAAa2C,QAETR,IAAT2F,EAIyB,iBAAbjH,EACVb,EAAa2C,GAAMmF,KAAKA,EAAMjH,GAC9Bb,EAAa2C,GAAMmF,KAAKA,GAEvB9H,EAAa2C,EACtB,CAOS9C,CAAM8C,EAAMmF,EAAMjH,EAC3B,EAUAlB,EAAOc,YAAc,SAAUkC,GAC7B,OAAOlC,EAAYkC,EACrB,EAIAhD,EAAOoI,gBAAkB,SAAUpF,GACjC,OAAOlC,EAAYkC,EACrB,EA6GAhD,EAAOsC,SAAW,SAAmBF,GACnC,OAAY,MAALA,IAA6B,IAAhBA,EAAEiG,WACpBjG,IAAMpC,EAAOU,SACjB,EAEAV,EAAOsI,QAAU,SAAkBC,EAAGnG,GAGpC,GAFIT,EAAW4G,EAAGpJ,cAAaoJ,EAAIvI,EAAOe,KAAKwH,EAAGA,EAAEnD,OAAQmD,EAAE/K,aAC1DmE,EAAWS,EAAGjD,cAAaiD,EAAIpC,EAAOe,KAAKqB,EAAGA,EAAEgD,OAAQhD,EAAE5E,cACzDwC,EAAOsC,SAASiG,KAAOvI,EAAOsC,SAASF,GAC1C,MAAM,IAAIvB,UACR,yEAIJ,GAAI0H,IAAMnG,EAAG,OAAO,EAEpB,IAAIoG,EAAID,EAAE7J,OACN+J,EAAIrG,EAAE1D,OAEV,IAAK,IAAIV,EAAI,EAAGK,EAAMmI,KAAKC,IAAI+B,EAAGC,GAAIzK,EAAIK,IAAOL,EAC/C,GAAIuK,EAAEvK,KAAOoE,EAAEpE,GAAI,CACjBwK,EAAID,EAAEvK,GACNyK,EAAIrG,EAAEpE,GACN,KACF,CAGF,OAAIwK,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,CACT,EAEAxI,EAAOmB,WAAa,SAAqBD,GACvC,OAAQ2D,OAAO3D,GAAUsC,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,EAEb,EAEAxD,EAAO0I,OAAS,SAAiBC,EAAMjK,GACrC,IAAKU,MAAMuD,QAAQgG,GACjB,MAAM,IAAI9H,UAAU,+CAGtB,GAAoB,IAAhB8H,EAAKjK,OACP,OAAOsB,EAAOE,MAAM,GAGtB,IAAIlC,EACJ,QAAewE,IAAX9D,EAEF,IADAA,EAAS,EACJV,EAAI,EAAGA,EAAI2K,EAAKjK,SAAUV,EAC7BU,GAAUiK,EAAK3K,GAAGU,OAItB,MAAMoD,EAAS9B,EAAOc,YAAYpC,GAClC,IAAIkK,EAAM,EACV,IAAK5K,EAAI,EAAGA,EAAI2K,EAAKjK,SAAUV,EAAG,CAChC,IAAIuC,EAAMoI,EAAK3K,GACf,GAAI2D,EAAWpB,EAAKpB,YACdyJ,EAAMrI,EAAI7B,OAASoD,EAAOpD,QACvBsB,EAAOsC,SAAS/B,KAAMA,EAAMP,EAAOe,KAAKR,IAC7CA,EAAIqB,KAAKE,EAAQ8G,IAEjBzJ,WAAWuB,UAAUmI,IAAIrE,KACvB1C,EACAvB,EACAqI,OAGC,KAAK5I,EAAOsC,SAAS/B,GAC1B,MAAM,IAAIM,UAAU,+CAEpBN,EAAIqB,KAAKE,EAAQ8G,EACnB,CACAA,GAAOrI,EAAI7B,MACb,CACA,OAAOoD,CACT,EAiDA9B,EAAOxC,WAAaA,EA8EpBwC,EAAOU,UAAU2H,WAAY,EAQ7BrI,EAAOU,UAAUoI,OAAS,WACxB,MAAMzK,EAAMqF,KAAKhF,OACjB,GAAIL,EAAM,GAAM,EACd,MAAM,IAAIiC,WAAW,6CAEvB,IAAK,IAAItC,EAAI,EAAGA,EAAIK,EAAKL,GAAK,EAC5BiG,EAAKP,KAAM1F,EAAGA,EAAI,GAEpB,OAAO0F,IACT,EAEA1D,EAAOU,UAAUqI,OAAS,WACxB,MAAM1K,EAAMqF,KAAKhF,OACjB,GAAIL,EAAM,GAAM,EACd,MAAM,IAAIiC,WAAW,6CAEvB,IAAK,IAAItC,EAAI,EAAGA,EAAIK,EAAKL,GAAK,EAC5BiG,EAAKP,KAAM1F,EAAGA,EAAI,GAClBiG,EAAKP,KAAM1F,EAAI,EAAGA,EAAI,GAExB,OAAO0F,IACT,EAEA1D,EAAOU,UAAUsI,OAAS,WACxB,MAAM3K,EAAMqF,KAAKhF,OACjB,GAAIL,EAAM,GAAM,EACd,MAAM,IAAIiC,WAAW,6CAEvB,IAAK,IAAItC,EAAI,EAAGA,EAAIK,EAAKL,GAAK,EAC5BiG,EAAKP,KAAM1F,EAAGA,EAAI,GAClBiG,EAAKP,KAAM1F,EAAI,EAAGA,EAAI,GACtBiG,EAAKP,KAAM1F,EAAI,EAAGA,EAAI,GACtBiG,EAAKP,KAAM1F,EAAI,EAAGA,EAAI,GAExB,OAAO0F,IACT,EAEA1D,EAAOU,UAAUwC,SAAW,WAC1B,MAAMxE,EAASgF,KAAKhF,OACpB,OAAe,IAAXA,EAAqB,GACA,IAArB0E,UAAU1E,OAAqBkF,EAAUF,KAAM,EAAGhF,GAC/C+E,EAAa4D,MAAM3D,KAAMN,UAClC,EAEApD,EAAOU,UAAUuI,eAAiBjJ,EAAOU,UAAUwC,SAEnDlD,EAAOU,UAAUwI,OAAS,SAAiB9G,GACzC,IAAKpC,EAAOsC,SAASF,GAAI,MAAM,IAAIvB,UAAU,6BAC7C,OAAI6C,OAAStB,GACsB,IAA5BpC,EAAOsI,QAAQ5E,KAAMtB,EAC9B,EAEApC,EAAOU,UAAUyI,QAAU,WACzB,IAAIrD,EAAM,GACV,MAAMsD,EAAM7L,EAAQ4C,kBAGpB,OAFA2F,EAAMpC,KAAKR,SAAS,MAAO,EAAGkG,GAAKC,QAAQ,UAAW,OAAOC,OACzD5F,KAAKhF,OAAS0K,IAAKtD,GAAO,SACvB,WAAaA,EAAM,GAC5B,EACIhG,IACFE,EAAOU,UAAUZ,GAAuBE,EAAOU,UAAUyI,SAG3DnJ,EAAOU,UAAU4H,QAAU,SAAkBiB,EAAQ/J,EAAOC,EAAK+J,EAAWC,GAI1E,GAHI9H,EAAW4H,EAAQpK,cACrBoK,EAASvJ,EAAOe,KAAKwI,EAAQA,EAAOnE,OAAQmE,EAAO/L,cAEhDwC,EAAOsC,SAASiH,GACnB,MAAM,IAAI1I,UACR,wFAC2B0I,GAiB/B,QAbc/G,IAAVhD,IACFA,EAAQ,QAEEgD,IAAR/C,IACFA,EAAM8J,EAASA,EAAO7K,OAAS,QAEf8D,IAAdgH,IACFA,EAAY,QAEEhH,IAAZiH,IACFA,EAAU/F,KAAKhF,QAGbc,EAAQ,GAAKC,EAAM8J,EAAO7K,QAAU8K,EAAY,GAAKC,EAAU/F,KAAKhF,OACtE,MAAM,IAAI4B,WAAW,sBAGvB,GAAIkJ,GAAaC,GAAWjK,GAASC,EACnC,OAAO,EAET,GAAI+J,GAAaC,EACf,OAAQ,EAEV,GAAIjK,GAASC,EACX,OAAO,EAQT,GAAIiE,OAAS6F,EAAQ,OAAO,EAE5B,IAAIf,GAJJiB,KAAa,IADbD,KAAe,GAMXf,GAPJhJ,KAAS,IADTD,KAAW,GASX,MAAMnB,EAAMmI,KAAKC,IAAI+B,EAAGC,GAElBiB,EAAWhG,KAAKpC,MAAMkI,EAAWC,GACjCE,EAAaJ,EAAOjI,MAAM9B,EAAOC,GAEvC,IAAK,IAAIzB,EAAI,EAAGA,EAAIK,IAAOL,EACzB,GAAI0L,EAAS1L,KAAO2L,EAAW3L,GAAI,CACjCwK,EAAIkB,EAAS1L,GACbyK,EAAIkB,EAAW3L,GACf,KACF,CAGF,OAAIwK,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,CACT,EA2HAxI,EAAOU,UAAUkJ,SAAW,SAAmBvF,EAAKtC,EAAYb,GAC9D,OAAoD,IAA7CwC,KAAKnE,QAAQ8E,EAAKtC,EAAYb,EACvC,EAEAlB,EAAOU,UAAUnB,QAAU,SAAkB8E,EAAKtC,EAAYb,GAC5D,OAAOkD,EAAqBV,KAAMW,EAAKtC,EAAYb,GAAU,EAC/D,EAEAlB,EAAOU,UAAU+D,YAAc,SAAsBJ,EAAKtC,EAAYb,GACpE,OAAOkD,EAAqBV,KAAMW,EAAKtC,EAAYb,GAAU,EAC/D,EA4CAlB,EAAOU,UAAUW,MAAQ,SAAgBJ,EAAQmE,EAAQ1G,EAAQwC,GAE/D,QAAesB,IAAX4C,EACFlE,EAAW,OACXxC,EAASgF,KAAKhF,OACd0G,EAAS,OAEJ,QAAe5C,IAAX9D,GAA0C,iBAAX0G,EACxClE,EAAWkE,EACX1G,EAASgF,KAAKhF,OACd0G,EAAS,MAEJ,KAAIyE,SAASzE,GAUlB,MAAM,IAAI9F,MACR,2EAVF8F,KAAoB,EAChByE,SAASnL,IACXA,KAAoB,OACH8D,IAAbtB,IAAwBA,EAAW,UAEvCA,EAAWxC,EACXA,OAAS8D,EAMb,CAEA,MAAM8C,EAAY5B,KAAKhF,OAAS0G,EAGhC,SAFe5C,IAAX9D,GAAwBA,EAAS4G,KAAW5G,EAAS4G,GAEpDrE,EAAOvC,OAAS,IAAMA,EAAS,GAAK0G,EAAS,IAAOA,EAAS1B,KAAKhF,OACrE,MAAM,IAAI4B,WAAW,0CAGlBY,IAAUA,EAAW,QAE1B,IAAImC,GAAc,EAClB,OACE,OAAQnC,GACN,IAAK,MACH,OAAOiE,EAASzB,KAAMzC,EAAQmE,EAAQ1G,GAExC,IAAK,OACL,IAAK,QACH,OAAOiH,EAAUjC,KAAMzC,EAAQmE,EAAQ1G,GAEzC,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAOmH,EAAWnC,KAAMzC,EAAQmE,EAAQ1G,GAE1C,IAAK,SAEH,OAAOuH,EAAYvC,KAAMzC,EAAQmE,EAAQ1G,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOwH,EAAUxC,KAAMzC,EAAQmE,EAAQ1G,GAEzC,QACE,GAAI2E,EAAa,MAAM,IAAIxC,UAAU,qBAAuBK,GAC5DA,GAAY,GAAKA,GAAUsC,cAC3BH,GAAc,EAGtB,EAEArD,EAAOU,UAAUoJ,OAAS,WACxB,MAAO,CACLpH,KAAM,SACNE,KAAMxD,MAAMsB,UAAUY,MAAMkD,KAAKd,KAAKqG,MAAQrG,KAAM,GAExD,EAyFA,MAAMyD,EAAuB,KAoB7B,SAAStD,EAAYtD,EAAKf,EAAOC,GAC/B,IAAIuK,EAAM,GACVvK,EAAM+G,KAAKC,IAAIlG,EAAI7B,OAAQe,GAE3B,IAAK,IAAIzB,EAAIwB,EAAOxB,EAAIyB,IAAOzB,EAC7BgM,GAAOnF,OAAOuC,aAAsB,IAAT7G,EAAIvC,IAEjC,OAAOgM,CACT,CAEA,SAASlG,EAAavD,EAAKf,EAAOC,GAChC,IAAIuK,EAAM,GACVvK,EAAM+G,KAAKC,IAAIlG,EAAI7B,OAAQe,GAE3B,IAAK,IAAIzB,EAAIwB,EAAOxB,EAAIyB,IAAOzB,EAC7BgM,GAAOnF,OAAOuC,aAAa7G,EAAIvC,IAEjC,OAAOgM,CACT,CAEA,SAASrG,EAAUpD,EAAKf,EAAOC,GAC7B,MAAMpB,EAAMkC,EAAI7B,SAEXc,GAASA,EAAQ,KAAGA,EAAQ,KAC5BC,GAAOA,EAAM,GAAKA,EAAMpB,KAAKoB,EAAMpB,GAExC,IAAI4L,EAAM,GACV,IAAK,IAAIjM,EAAIwB,EAAOxB,EAAIyB,IAAOzB,EAC7BiM,GAAOC,EAAoB3J,EAAIvC,IAEjC,OAAOiM,CACT,CAEA,SAASjG,EAAczD,EAAKf,EAAOC,GACjC,MAAM0K,EAAQ5J,EAAIe,MAAM9B,EAAOC,GAC/B,IAAIiH,EAAM,GAEV,IAAK,IAAI1I,EAAI,EAAGA,EAAImM,EAAMzL,OAAS,EAAGV,GAAK,EACzC0I,GAAO7B,OAAOuC,aAAa+C,EAAMnM,GAAqB,IAAfmM,EAAMnM,EAAI,IAEnD,OAAO0I,CACT,CAiCA,SAAS0D,EAAahF,EAAQiF,EAAK3L,GACjC,GAAK0G,EAAS,GAAO,GAAKA,EAAS,EAAG,MAAM,IAAI9E,WAAW,sBAC3D,GAAI8E,EAASiF,EAAM3L,EAAQ,MAAM,IAAI4B,WAAW,wCAClD,CAyQA,SAASgK,EAAU/J,EAAKS,EAAOoE,EAAQiF,EAAKjB,EAAK3C,GAC/C,IAAKzG,EAAOsC,SAAS/B,GAAM,MAAM,IAAIM,UAAU,+CAC/C,GAAIG,EAAQoI,GAAOpI,EAAQyF,EAAK,MAAM,IAAInG,WAAW,qCACrD,GAAI8E,EAASiF,EAAM9J,EAAI7B,OAAQ,MAAM,IAAI4B,WAAW,qBACtD,CA+FA,SAASiK,EAAgBhK,EAAKS,EAAOoE,EAAQqB,EAAK2C,GAChDoB,EAAWxJ,EAAOyF,EAAK2C,EAAK7I,EAAK6E,EAAQ,GAEzC,IAAIkB,EAAKjB,OAAOrE,EAAQyJ,OAAO,aAC/BlK,EAAI6E,KAAYkB,EAChBA,IAAW,EACX/F,EAAI6E,KAAYkB,EAChBA,IAAW,EACX/F,EAAI6E,KAAYkB,EAChBA,IAAW,EACX/F,EAAI6E,KAAYkB,EAChB,IAAID,EAAKhB,OAAOrE,GAASyJ,OAAO,IAAMA,OAAO,aAQ7C,OAPAlK,EAAI6E,KAAYiB,EAChBA,IAAW,EACX9F,EAAI6E,KAAYiB,EAChBA,IAAW,EACX9F,EAAI6E,KAAYiB,EAChBA,IAAW,EACX9F,EAAI6E,KAAYiB,EACTjB,CACT,CAEA,SAASsF,EAAgBnK,EAAKS,EAAOoE,EAAQqB,EAAK2C,GAChDoB,EAAWxJ,EAAOyF,EAAK2C,EAAK7I,EAAK6E,EAAQ,GAEzC,IAAIkB,EAAKjB,OAAOrE,EAAQyJ,OAAO,aAC/BlK,EAAI6E,EAAS,GAAKkB,EAClBA,IAAW,EACX/F,EAAI6E,EAAS,GAAKkB,EAClBA,IAAW,EACX/F,EAAI6E,EAAS,GAAKkB,EAClBA,IAAW,EACX/F,EAAI6E,EAAS,GAAKkB,EAClB,IAAID,EAAKhB,OAAOrE,GAASyJ,OAAO,IAAMA,OAAO,aAQ7C,OAPAlK,EAAI6E,EAAS,GAAKiB,EAClBA,IAAW,EACX9F,EAAI6E,EAAS,GAAKiB,EAClBA,IAAW,EACX9F,EAAI6E,EAAS,GAAKiB,EAClBA,IAAW,EACX9F,EAAI6E,GAAUiB,EACPjB,EAAS,CAClB,CAkHA,SAASuF,EAAcpK,EAAKS,EAAOoE,EAAQiF,EAAKjB,EAAK3C,GACnD,GAAIrB,EAASiF,EAAM9J,EAAI7B,OAAQ,MAAM,IAAI4B,WAAW,sBACpD,GAAI8E,EAAS,EAAG,MAAM,IAAI9E,WAAW,qBACvC,CAEA,SAASsK,EAAYrK,EAAKS,EAAOoE,EAAQyF,EAAcC,GAOrD,OANA9J,GAASA,EACToE,KAAoB,EACf0F,GACHH,EAAapK,EAAKS,EAAOoE,EAAQ,GAEnCvF,EAAQwB,MAAMd,EAAKS,EAAOoE,EAAQyF,EAAc,GAAI,GAC7CzF,EAAS,CAClB,CAUA,SAAS2F,EAAaxK,EAAKS,EAAOoE,EAAQyF,EAAcC,GAOtD,OANA9J,GAASA,EACToE,KAAoB,EACf0F,GACHH,EAAapK,EAAKS,EAAOoE,EAAQ,GAEnCvF,EAAQwB,MAAMd,EAAKS,EAAOoE,EAAQyF,EAAc,GAAI,GAC7CzF,EAAS,CAClB,CAzkBApF,EAAOU,UAAUY,MAAQ,SAAgB9B,EAAOC,GAC9C,MAAMpB,EAAMqF,KAAKhF,QACjBc,IAAUA,GAGE,GACVA,GAASnB,GACG,IAAGmB,EAAQ,GACdA,EAAQnB,IACjBmB,EAAQnB,IANVoB,OAAc+C,IAAR/C,EAAoBpB,IAAQoB,GASxB,GACRA,GAAOpB,GACG,IAAGoB,EAAM,GACVA,EAAMpB,IACfoB,EAAMpB,GAGJoB,EAAMD,IAAOC,EAAMD,GAEvB,MAAMwL,EAAStH,KAAKuH,SAASzL,EAAOC,GAIpC,OAFAe,OAAOC,eAAeuK,EAAQhL,EAAOU,WAE9BsK,CACT,EAUAhL,EAAOU,UAAUwK,WACjBlL,EAAOU,UAAUyK,WAAa,SAAqB/F,EAAQ5H,EAAYsN,GACrE1F,KAAoB,EACpB5H,KAA4B,EACvBsN,GAAUV,EAAYhF,EAAQ5H,EAAYkG,KAAKhF,QAEpD,IAAI2F,EAAMX,KAAK0B,GACXgG,EAAM,EACNpN,EAAI,EACR,OAASA,EAAIR,IAAe4N,GAAO,MACjC/G,GAAOX,KAAK0B,EAASpH,GAAKoN,EAG5B,OAAO/G,CACT,EAEArE,EAAOU,UAAU2K,WACjBrL,EAAOU,UAAU4K,WAAa,SAAqBlG,EAAQ5H,EAAYsN,GACrE1F,KAAoB,EACpB5H,KAA4B,EACvBsN,GACHV,EAAYhF,EAAQ5H,EAAYkG,KAAKhF,QAGvC,IAAI2F,EAAMX,KAAK0B,IAAW5H,GACtB4N,EAAM,EACV,KAAO5N,EAAa,IAAM4N,GAAO,MAC/B/G,GAAOX,KAAK0B,IAAW5H,GAAc4N,EAGvC,OAAO/G,CACT,EAEArE,EAAOU,UAAU6K,UACjBvL,EAAOU,UAAU8K,UAAY,SAAoBpG,EAAQ0F,GAGvD,OAFA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QACpCgF,KAAK0B,EACd,EAEApF,EAAOU,UAAU+K,aACjBzL,EAAOU,UAAUgL,aAAe,SAAuBtG,EAAQ0F,GAG7D,OAFA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QACpCgF,KAAK0B,GAAW1B,KAAK0B,EAAS,IAAM,CAC7C,EAEApF,EAAOU,UAAUiL,aACjB3L,EAAOU,UAAUqE,aAAe,SAAuBK,EAAQ0F,GAG7D,OAFA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QACnCgF,KAAK0B,IAAW,EAAK1B,KAAK0B,EAAS,EAC7C,EAEApF,EAAOU,UAAUkL,aACjB5L,EAAOU,UAAUmL,aAAe,SAAuBzG,EAAQ0F,GAI7D,OAHA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,SAElCgF,KAAK0B,GACT1B,KAAK0B,EAAS,IAAM,EACpB1B,KAAK0B,EAAS,IAAM,IACD,SAAnB1B,KAAK0B,EAAS,EACrB,EAEApF,EAAOU,UAAUoL,aACjB9L,EAAOU,UAAUqL,aAAe,SAAuB3G,EAAQ0F,GAI7D,OAHA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QAEpB,SAAfgF,KAAK0B,IACT1B,KAAK0B,EAAS,IAAM,GACrB1B,KAAK0B,EAAS,IAAM,EACrB1B,KAAK0B,EAAS,GAClB,EAEApF,EAAOU,UAAUsL,gBAAkBC,GAAmB,SAA0B7G,GAE9E8G,EADA9G,KAAoB,EACG,UACvB,MAAM+G,EAAQzI,KAAK0B,GACbgH,EAAO1I,KAAK0B,EAAS,QACb5C,IAAV2J,QAAgC3J,IAAT4J,GACzBC,EAAYjH,EAAQ1B,KAAKhF,OAAS,GAGpC,MAAM4H,EAAK6F,EACQ,IAAjBzI,OAAO0B,GACU,MAAjB1B,OAAO0B,GACP1B,OAAO0B,GAAU,GAAK,GAElBiB,EAAK3C,OAAO0B,GACC,IAAjB1B,OAAO0B,GACU,MAAjB1B,OAAO0B,GACPgH,EAAO,GAAK,GAEd,OAAO3B,OAAOnE,IAAOmE,OAAOpE,IAAOoE,OAAO,IAC5C,IAEAzK,EAAOU,UAAU4L,gBAAkBL,GAAmB,SAA0B7G,GAE9E8G,EADA9G,KAAoB,EACG,UACvB,MAAM+G,EAAQzI,KAAK0B,GACbgH,EAAO1I,KAAK0B,EAAS,QACb5C,IAAV2J,QAAgC3J,IAAT4J,GACzBC,EAAYjH,EAAQ1B,KAAKhF,OAAS,GAGpC,MAAM2H,EAAK8F,EAAQ,GAAK,GACL,MAAjBzI,OAAO0B,GACU,IAAjB1B,OAAO0B,GACP1B,OAAO0B,GAEHkB,EAAK5C,OAAO0B,GAAU,GAAK,GACd,MAAjB1B,OAAO0B,GACU,IAAjB1B,OAAO0B,GACPgH,EAEF,OAAQ3B,OAAOpE,IAAOoE,OAAO,KAAOA,OAAOnE,EAC7C,IAEAtG,EAAOU,UAAU6L,UAAY,SAAoBnH,EAAQ5H,EAAYsN,GACnE1F,KAAoB,EACpB5H,KAA4B,EACvBsN,GAAUV,EAAYhF,EAAQ5H,EAAYkG,KAAKhF,QAEpD,IAAI2F,EAAMX,KAAK0B,GACXgG,EAAM,EACNpN,EAAI,EACR,OAASA,EAAIR,IAAe4N,GAAO,MACjC/G,GAAOX,KAAK0B,EAASpH,GAAKoN,EAM5B,OAJAA,GAAO,IAEH/G,GAAO+G,IAAK/G,GAAOmC,KAAKgG,IAAI,EAAG,EAAIhP,IAEhC6G,CACT,EAEArE,EAAOU,UAAU+L,UAAY,SAAoBrH,EAAQ5H,EAAYsN,GACnE1F,KAAoB,EACpB5H,KAA4B,EACvBsN,GAAUV,EAAYhF,EAAQ5H,EAAYkG,KAAKhF,QAEpD,IAAIV,EAAIR,EACJ4N,EAAM,EACN/G,EAAMX,KAAK0B,IAAWpH,GAC1B,KAAOA,EAAI,IAAMoN,GAAO,MACtB/G,GAAOX,KAAK0B,IAAWpH,GAAKoN,EAM9B,OAJAA,GAAO,IAEH/G,GAAO+G,IAAK/G,GAAOmC,KAAKgG,IAAI,EAAG,EAAIhP,IAEhC6G,CACT,EAEArE,EAAOU,UAAUgM,SAAW,SAAmBtH,EAAQ0F,GAGrD,OAFA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QACtB,IAAfgF,KAAK0B,IAC0B,GAA5B,IAAO1B,KAAK0B,GAAU,GADK1B,KAAK0B,EAE3C,EAEApF,EAAOU,UAAUiM,YAAc,SAAsBvH,EAAQ0F,GAC3D1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QAC3C,MAAM2F,EAAMX,KAAK0B,GAAW1B,KAAK0B,EAAS,IAAM,EAChD,OAAc,MAANf,EAAsB,WAANA,EAAmBA,CAC7C,EAEArE,EAAOU,UAAUkM,YAAc,SAAsBxH,EAAQ0F,GAC3D1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QAC3C,MAAM2F,EAAMX,KAAK0B,EAAS,GAAM1B,KAAK0B,IAAW,EAChD,OAAc,MAANf,EAAsB,WAANA,EAAmBA,CAC7C,EAEArE,EAAOU,UAAUmM,YAAc,SAAsBzH,EAAQ0F,GAI3D,OAHA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QAEnCgF,KAAK0B,GACV1B,KAAK0B,EAAS,IAAM,EACpB1B,KAAK0B,EAAS,IAAM,GACpB1B,KAAK0B,EAAS,IAAM,EACzB,EAEApF,EAAOU,UAAUoM,YAAc,SAAsB1H,EAAQ0F,GAI3D,OAHA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QAEnCgF,KAAK0B,IAAW,GACrB1B,KAAK0B,EAAS,IAAM,GACpB1B,KAAK0B,EAAS,IAAM,EACpB1B,KAAK0B,EAAS,EACnB,EAEApF,EAAOU,UAAUqM,eAAiBd,GAAmB,SAAyB7G,GAE5E8G,EADA9G,KAAoB,EACG,UACvB,MAAM+G,EAAQzI,KAAK0B,GACbgH,EAAO1I,KAAK0B,EAAS,QACb5C,IAAV2J,QAAgC3J,IAAT4J,GACzBC,EAAYjH,EAAQ1B,KAAKhF,OAAS,GAGpC,MAAM2F,EAAMX,KAAK0B,EAAS,GACL,IAAnB1B,KAAK0B,EAAS,GACK,MAAnB1B,KAAK0B,EAAS,IACbgH,GAAQ,IAEX,OAAQ3B,OAAOpG,IAAQoG,OAAO,KAC5BA,OAAO0B,EACU,IAAjBzI,OAAO0B,GACU,MAAjB1B,OAAO0B,GACP1B,OAAO0B,GAAU,GAAK,GAC1B,IAEApF,EAAOU,UAAUsM,eAAiBf,GAAmB,SAAyB7G,GAE5E8G,EADA9G,KAAoB,EACG,UACvB,MAAM+G,EAAQzI,KAAK0B,GACbgH,EAAO1I,KAAK0B,EAAS,QACb5C,IAAV2J,QAAgC3J,IAAT4J,GACzBC,EAAYjH,EAAQ1B,KAAKhF,OAAS,GAGpC,MAAM2F,GAAO8H,GAAS,IACH,MAAjBzI,OAAO0B,GACU,IAAjB1B,OAAO0B,GACP1B,OAAO0B,GAET,OAAQqF,OAAOpG,IAAQoG,OAAO,KAC5BA,OAAO/G,OAAO0B,GAAU,GAAK,GACZ,MAAjB1B,OAAO0B,GACU,IAAjB1B,OAAO0B,GACPgH,EACJ,IAEApM,EAAOU,UAAUuM,YAAc,SAAsB7H,EAAQ0F,GAG3D,OAFA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QACpCmB,EAAQiF,KAAKpB,KAAM0B,GAAQ,EAAM,GAAI,EAC9C,EAEApF,EAAOU,UAAUwM,YAAc,SAAsB9H,EAAQ0F,GAG3D,OAFA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QACpCmB,EAAQiF,KAAKpB,KAAM0B,GAAQ,EAAO,GAAI,EAC/C,EAEApF,EAAOU,UAAUyM,aAAe,SAAuB/H,EAAQ0F,GAG7D,OAFA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QACpCmB,EAAQiF,KAAKpB,KAAM0B,GAAQ,EAAM,GAAI,EAC9C,EAEApF,EAAOU,UAAU0M,aAAe,SAAuBhI,EAAQ0F,GAG7D,OAFA1F,KAAoB,EACf0F,GAAUV,EAAYhF,EAAQ,EAAG1B,KAAKhF,QACpCmB,EAAQiF,KAAKpB,KAAM0B,GAAQ,EAAO,GAAI,EAC/C,EAQApF,EAAOU,UAAU2M,YACjBrN,EAAOU,UAAU4M,YAAc,SAAsBtM,EAAOoE,EAAQ5H,EAAYsN,GAI9E,GAHA9J,GAASA,EACToE,KAAoB,EACpB5H,KAA4B,GACvBsN,EAAU,CAEbR,EAAS5G,KAAM1C,EAAOoE,EAAQ5H,EADbgJ,KAAKgG,IAAI,EAAG,EAAIhP,GAAc,EACK,EACtD,CAEA,IAAI4N,EAAM,EACNpN,EAAI,EAER,IADA0F,KAAK0B,GAAkB,IAARpE,IACNhD,EAAIR,IAAe4N,GAAO,MACjC1H,KAAK0B,EAASpH,GAAMgD,EAAQoK,EAAO,IAGrC,OAAOhG,EAAS5H,CAClB,EAEAwC,EAAOU,UAAU6M,YACjBvN,EAAOU,UAAU8M,YAAc,SAAsBxM,EAAOoE,EAAQ5H,EAAYsN,GAI9E,GAHA9J,GAASA,EACToE,KAAoB,EACpB5H,KAA4B,GACvBsN,EAAU,CAEbR,EAAS5G,KAAM1C,EAAOoE,EAAQ5H,EADbgJ,KAAKgG,IAAI,EAAG,EAAIhP,GAAc,EACK,EACtD,CAEA,IAAIQ,EAAIR,EAAa,EACjB4N,EAAM,EAEV,IADA1H,KAAK0B,EAASpH,GAAa,IAARgD,IACVhD,GAAK,IAAMoN,GAAO,MACzB1H,KAAK0B,EAASpH,GAAMgD,EAAQoK,EAAO,IAGrC,OAAOhG,EAAS5H,CAClB,EAEAwC,EAAOU,UAAU+M,WACjBzN,EAAOU,UAAUgN,WAAa,SAAqB1M,EAAOoE,EAAQ0F,GAKhE,OAJA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,IAAM,GACtD1B,KAAK0B,GAAmB,IAARpE,EACToE,EAAS,CAClB,EAEApF,EAAOU,UAAUiN,cACjB3N,EAAOU,UAAUkN,cAAgB,SAAwB5M,EAAOoE,EAAQ0F,GAMtE,OALA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,MAAQ,GACxD1B,KAAK0B,GAAmB,IAARpE,EAChB0C,KAAK0B,EAAS,GAAMpE,IAAU,EACvBoE,EAAS,CAClB,EAEApF,EAAOU,UAAUmN,cACjB7N,EAAOU,UAAUoN,cAAgB,SAAwB9M,EAAOoE,EAAQ0F,GAMtE,OALA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,MAAQ,GACxD1B,KAAK0B,GAAWpE,IAAU,EAC1B0C,KAAK0B,EAAS,GAAc,IAARpE,EACboE,EAAS,CAClB,EAEApF,EAAOU,UAAUqN,cACjB/N,EAAOU,UAAUsN,cAAgB,SAAwBhN,EAAOoE,EAAQ0F,GAQtE,OAPA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,WAAY,GAC5D1B,KAAK0B,EAAS,GAAMpE,IAAU,GAC9B0C,KAAK0B,EAAS,GAAMpE,IAAU,GAC9B0C,KAAK0B,EAAS,GAAMpE,IAAU,EAC9B0C,KAAK0B,GAAmB,IAARpE,EACToE,EAAS,CAClB,EAEApF,EAAOU,UAAUuN,cACjBjO,EAAOU,UAAUwN,cAAgB,SAAwBlN,EAAOoE,EAAQ0F,GAQtE,OAPA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,WAAY,GAC5D1B,KAAK0B,GAAWpE,IAAU,GAC1B0C,KAAK0B,EAAS,GAAMpE,IAAU,GAC9B0C,KAAK0B,EAAS,GAAMpE,IAAU,EAC9B0C,KAAK0B,EAAS,GAAc,IAARpE,EACboE,EAAS,CAClB,EA8CApF,EAAOU,UAAUyN,iBAAmBlC,GAAmB,SAA2BjL,EAAOoE,EAAS,GAChG,OAAOmF,EAAe7G,KAAM1C,EAAOoE,EAAQqF,OAAO,GAAIA,OAAO,sBAC/D,IAEAzK,EAAOU,UAAU0N,iBAAmBnC,GAAmB,SAA2BjL,EAAOoE,EAAS,GAChG,OAAOsF,EAAehH,KAAM1C,EAAOoE,EAAQqF,OAAO,GAAIA,OAAO,sBAC/D,IAEAzK,EAAOU,UAAU2N,WAAa,SAAqBrN,EAAOoE,EAAQ5H,EAAYsN,GAG5E,GAFA9J,GAASA,EACToE,KAAoB,GACf0F,EAAU,CACb,MAAMwD,EAAQ9H,KAAKgG,IAAI,EAAI,EAAIhP,EAAc,GAE7C8M,EAAS5G,KAAM1C,EAAOoE,EAAQ5H,EAAY8Q,EAAQ,GAAIA,EACxD,CAEA,IAAItQ,EAAI,EACJoN,EAAM,EACNmD,EAAM,EAEV,IADA7K,KAAK0B,GAAkB,IAARpE,IACNhD,EAAIR,IAAe4N,GAAO,MAC7BpK,EAAQ,GAAa,IAARuN,GAAsC,IAAzB7K,KAAK0B,EAASpH,EAAI,KAC9CuQ,EAAM,GAER7K,KAAK0B,EAASpH,IAAOgD,EAAQoK,GAAQ,GAAKmD,EAAM,IAGlD,OAAOnJ,EAAS5H,CAClB,EAEAwC,EAAOU,UAAU8N,WAAa,SAAqBxN,EAAOoE,EAAQ5H,EAAYsN,GAG5E,GAFA9J,GAASA,EACToE,KAAoB,GACf0F,EAAU,CACb,MAAMwD,EAAQ9H,KAAKgG,IAAI,EAAI,EAAIhP,EAAc,GAE7C8M,EAAS5G,KAAM1C,EAAOoE,EAAQ5H,EAAY8Q,EAAQ,GAAIA,EACxD,CAEA,IAAItQ,EAAIR,EAAa,EACjB4N,EAAM,EACNmD,EAAM,EAEV,IADA7K,KAAK0B,EAASpH,GAAa,IAARgD,IACVhD,GAAK,IAAMoN,GAAO,MACrBpK,EAAQ,GAAa,IAARuN,GAAsC,IAAzB7K,KAAK0B,EAASpH,EAAI,KAC9CuQ,EAAM,GAER7K,KAAK0B,EAASpH,IAAOgD,EAAQoK,GAAQ,GAAKmD,EAAM,IAGlD,OAAOnJ,EAAS5H,CAClB,EAEAwC,EAAOU,UAAU+N,UAAY,SAAoBzN,EAAOoE,EAAQ0F,GAM9D,OALA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,KAAO,KACnDpE,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtC0C,KAAK0B,GAAmB,IAARpE,EACToE,EAAS,CAClB,EAEApF,EAAOU,UAAUgO,aAAe,SAAuB1N,EAAOoE,EAAQ0F,GAMpE,OALA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,OAAS,OACzD1B,KAAK0B,GAAmB,IAARpE,EAChB0C,KAAK0B,EAAS,GAAMpE,IAAU,EACvBoE,EAAS,CAClB,EAEApF,EAAOU,UAAUiO,aAAe,SAAuB3N,EAAOoE,EAAQ0F,GAMpE,OALA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,OAAS,OACzD1B,KAAK0B,GAAWpE,IAAU,EAC1B0C,KAAK0B,EAAS,GAAc,IAARpE,EACboE,EAAS,CAClB,EAEApF,EAAOU,UAAUkO,aAAe,SAAuB5N,EAAOoE,EAAQ0F,GAQpE,OAPA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,YAAa,YAC7D1B,KAAK0B,GAAmB,IAARpE,EAChB0C,KAAK0B,EAAS,GAAMpE,IAAU,EAC9B0C,KAAK0B,EAAS,GAAMpE,IAAU,GAC9B0C,KAAK0B,EAAS,GAAMpE,IAAU,GACvBoE,EAAS,CAClB,EAEApF,EAAOU,UAAUmO,aAAe,SAAuB7N,EAAOoE,EAAQ0F,GASpE,OARA9J,GAASA,EACToE,KAAoB,EACf0F,GAAUR,EAAS5G,KAAM1C,EAAOoE,EAAQ,EAAG,YAAa,YACzDpE,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5C0C,KAAK0B,GAAWpE,IAAU,GAC1B0C,KAAK0B,EAAS,GAAMpE,IAAU,GAC9B0C,KAAK0B,EAAS,GAAMpE,IAAU,EAC9B0C,KAAK0B,EAAS,GAAc,IAARpE,EACboE,EAAS,CAClB,EAEApF,EAAOU,UAAUoO,gBAAkB7C,GAAmB,SAA0BjL,EAAOoE,EAAS,GAC9F,OAAOmF,EAAe7G,KAAM1C,EAAOoE,GAASqF,OAAO,sBAAuBA,OAAO,sBACnF,IAEAzK,EAAOU,UAAUqO,gBAAkB9C,GAAmB,SAA0BjL,EAAOoE,EAAS,GAC9F,OAAOsF,EAAehH,KAAM1C,EAAOoE,GAASqF,OAAO,sBAAuBA,OAAO,sBACnF,IAiBAzK,EAAOU,UAAUsO,aAAe,SAAuBhO,EAAOoE,EAAQ0F,GACpE,OAAOF,EAAWlH,KAAM1C,EAAOoE,GAAQ,EAAM0F,EAC/C,EAEA9K,EAAOU,UAAUuO,aAAe,SAAuBjO,EAAOoE,EAAQ0F,GACpE,OAAOF,EAAWlH,KAAM1C,EAAOoE,GAAQ,EAAO0F,EAChD,EAYA9K,EAAOU,UAAUwO,cAAgB,SAAwBlO,EAAOoE,EAAQ0F,GACtE,OAAOC,EAAYrH,KAAM1C,EAAOoE,GAAQ,EAAM0F,EAChD,EAEA9K,EAAOU,UAAUyO,cAAgB,SAAwBnO,EAAOoE,EAAQ0F,GACtE,OAAOC,EAAYrH,KAAM1C,EAAOoE,GAAQ,EAAO0F,EACjD,EAGA9K,EAAOU,UAAUkB,KAAO,SAAe2H,EAAQ6F,EAAa5P,EAAOC,GACjE,IAAKO,EAAOsC,SAASiH,GAAS,MAAM,IAAI1I,UAAU,+BAQlD,GAPKrB,IAAOA,EAAQ,GACfC,GAAe,IAARA,IAAWA,EAAMiE,KAAKhF,QAC9B0Q,GAAe7F,EAAO7K,SAAQ0Q,EAAc7F,EAAO7K,QAClD0Q,IAAaA,EAAc,GAC5B3P,EAAM,GAAKA,EAAMD,IAAOC,EAAMD,GAG9BC,IAAQD,EAAO,OAAO,EAC1B,GAAsB,IAAlB+J,EAAO7K,QAAgC,IAAhBgF,KAAKhF,OAAc,OAAO,EAGrD,GAAI0Q,EAAc,EAChB,MAAM,IAAI9O,WAAW,6BAEvB,GAAId,EAAQ,GAAKA,GAASkE,KAAKhF,OAAQ,MAAM,IAAI4B,WAAW,sBAC5D,GAAIb,EAAM,EAAG,MAAM,IAAIa,WAAW,2BAG9Bb,EAAMiE,KAAKhF,SAAQe,EAAMiE,KAAKhF,QAC9B6K,EAAO7K,OAAS0Q,EAAc3P,EAAMD,IACtCC,EAAM8J,EAAO7K,OAAS0Q,EAAc5P,GAGtC,MAAMnB,EAAMoB,EAAMD,EAalB,OAXIkE,OAAS6F,GAAqD,mBAApCpK,WAAWuB,UAAU2O,WAEjD3L,KAAK2L,WAAWD,EAAa5P,EAAOC,GAEpCN,WAAWuB,UAAUmI,IAAIrE,KACvB+E,EACA7F,KAAKuH,SAASzL,EAAOC,GACrB2P,GAIG/Q,CACT,EAMA2B,EAAOU,UAAUyH,KAAO,SAAe9D,EAAK7E,EAAOC,EAAKyB,GAEtD,GAAmB,iBAARmD,EAAkB,CAS3B,GARqB,iBAAV7E,GACT0B,EAAW1B,EACXA,EAAQ,EACRC,EAAMiE,KAAKhF,QACa,iBAARe,IAChByB,EAAWzB,EACXA,EAAMiE,KAAKhF,aAEI8D,IAAbtB,GAA8C,iBAAbA,EACnC,MAAM,IAAIL,UAAU,6BAEtB,GAAwB,iBAAbK,IAA0BlB,EAAOmB,WAAWD,GACrD,MAAM,IAAIL,UAAU,qBAAuBK,GAE7C,GAAmB,IAAfmD,EAAI3F,OAAc,CACpB,MAAMW,EAAOgF,EAAI9F,WAAW,IACV,SAAb2C,GAAuB7B,EAAO,KAClB,WAAb6B,KAEFmD,EAAMhF,EAEV,CACF,KAA0B,iBAARgF,EAChBA,GAAY,IACY,kBAARA,IAChBA,EAAMgB,OAAOhB,IAIf,GAAI7E,EAAQ,GAAKkE,KAAKhF,OAASc,GAASkE,KAAKhF,OAASe,EACpD,MAAM,IAAIa,WAAW,sBAGvB,GAAIb,GAAOD,EACT,OAAOkE,KAQT,IAAI1F,EACJ,GANAwB,KAAkB,EAClBC,OAAc+C,IAAR/C,EAAoBiE,KAAKhF,OAASe,IAAQ,EAE3C4E,IAAKA,EAAM,GAGG,iBAARA,EACT,IAAKrG,EAAIwB,EAAOxB,EAAIyB,IAAOzB,EACzB0F,KAAK1F,GAAKqG,MAEP,CACL,MAAM8F,EAAQnK,EAAOsC,SAAS+B,GAC1BA,EACArE,EAAOe,KAAKsD,EAAKnD,GACf7C,EAAM8L,EAAMzL,OAClB,GAAY,IAARL,EACF,MAAM,IAAIwC,UAAU,cAAgBwD,EAClC,qCAEJ,IAAKrG,EAAI,EAAGA,EAAIyB,EAAMD,IAASxB,EAC7B0F,KAAK1F,EAAIwB,GAAS2K,EAAMnM,EAAIK,EAEhC,CAEA,OAAOqF,IACT,EAMA,MAAM4L,EAAS,CAAC,EAChB,SAASC,EAAGC,EAAKC,EAAYC,GAC3BJ,EAAOE,GAAO,cAAwBE,EACpC,WAAAC,GACEC,QAEApP,OAAOuH,eAAerE,KAAM,UAAW,CACrC1C,MAAOyO,EAAWpI,MAAM3D,KAAMN,WAC9ByM,UAAU,EACVC,cAAc,IAIhBpM,KAAKqM,KAAO,GAAGrM,KAAKqM,SAASP,KAG7B9L,KAAKsM,aAEEtM,KAAKqM,IACd,CAEA,QAAI1Q,GACF,OAAOmQ,CACT,CAEA,QAAInQ,CAAM2B,GACRR,OAAOuH,eAAerE,KAAM,OAAQ,CAClCoM,cAAc,EACd9H,YAAY,EACZhH,QACA6O,UAAU,GAEd,CAEA,QAAA3M,GACE,MAAO,GAAGQ,KAAKqM,SAASP,OAAS9L,KAAKuM,SACxC,EAEJ,CA+BA,SAASC,EAAuB7L,GAC9B,IAAIqC,EAAM,GACN1I,EAAIqG,EAAI3F,OACZ,MAAMc,EAAmB,MAAX6E,EAAI,GAAa,EAAI,EACnC,KAAOrG,GAAKwB,EAAQ,EAAGxB,GAAK,EAC1B0I,EAAM,IAAIrC,EAAI/C,MAAMtD,EAAI,EAAGA,KAAK0I,IAElC,MAAO,GAAGrC,EAAI/C,MAAM,EAAGtD,KAAK0I,GAC9B,CAYA,SAAS8D,EAAYxJ,EAAOyF,EAAK2C,EAAK7I,EAAK6E,EAAQ5H,GACjD,GAAIwD,EAAQoI,GAAOpI,EAAQyF,EAAK,CAC9B,MAAMvC,EAAmB,iBAARuC,EAAmB,IAAM,GAC1C,IAAI0J,EAWJ,MARIA,EAFA3S,EAAa,EACH,IAARiJ,GAAaA,IAAQgE,OAAO,GACtB,OAAOvG,YAAYA,QAA2B,GAAlB1G,EAAa,KAAS0G,IAElD,SAASA,QAA2B,GAAlB1G,EAAa,GAAS,IAAI0G,iBACtB,GAAlB1G,EAAa,GAAS,IAAI0G,IAGhC,MAAMuC,IAAMvC,YAAYkF,IAAMlF,IAElC,IAAIoL,EAAOc,iBAAiB,QAASD,EAAOnP,EACpD,EAtBF,SAAsBT,EAAK6E,EAAQ5H,GACjC0O,EAAe9G,EAAQ,eACH5C,IAAhBjC,EAAI6E,SAAsD5C,IAA7BjC,EAAI6E,EAAS5H,IAC5C6O,EAAYjH,EAAQ7E,EAAI7B,QAAUlB,EAAa,GAEnD,CAkBE6S,CAAY9P,EAAK6E,EAAQ5H,EAC3B,CAEA,SAAS0O,EAAgBlL,EAAO+O,GAC9B,GAAqB,iBAAV/O,EACT,MAAM,IAAIsO,EAAOgB,qBAAqBP,EAAM,SAAU/O,EAE1D,CAEA,SAASqL,EAAarL,EAAOtC,EAAQgE,GACnC,GAAI8D,KAAK+J,MAAMvP,KAAWA,EAExB,MADAkL,EAAelL,EAAO0B,GAChB,IAAI4M,EAAOc,iBAAiB1N,GAAQ,SAAU,aAAc1B,GAGpE,GAAItC,EAAS,EACX,MAAM,IAAI4Q,EAAOkB,yBAGnB,MAAM,IAAIlB,EAAOc,iBAAiB1N,GAAQ,SACR,MAAMA,EAAO,EAAI,YAAYhE,IAC7BsC,EACpC,CAvFAuO,EAAE,4BACA,SAAUQ,GACR,OAAIA,EACK,GAAGA,gCAGL,gDACT,GAAGzP,YACLiP,EAAE,wBACA,SAAUQ,EAAM3O,GACd,MAAO,QAAQ2O,4DAA+D3O,GAChF,GAAGP,WACL0O,EAAE,oBACA,SAAUzJ,EAAKqK,EAAOM,GACpB,IAAIC,EAAM,iBAAiB5K,sBACvB6K,EAAWF,EAWf,OAVIpL,OAAOuL,UAAUH,IAAUjK,KAAKqK,IAAIJ,GAAS,GAAK,GACpDE,EAAWT,EAAsBrL,OAAO4L,IACd,iBAAVA,IAChBE,EAAW9L,OAAO4L,IACdA,EAAQhG,OAAO,IAAMA,OAAO,KAAOgG,IAAUhG,OAAO,IAAMA,OAAO,QACnEkG,EAAWT,EAAsBS,IAEnCA,GAAY,KAEdD,GAAO,eAAeP,eAAmBQ,IAClCD,CACT,GAAGpQ,YAiEL,MAAMwQ,EAAoB,oBAgB1B,SAASxN,EAAarC,EAAQkF,GAE5B,IAAIS,EADJT,EAAQA,GAAS4K,IAEjB,MAAMrS,EAASuC,EAAOvC,OACtB,IAAIsS,EAAgB,KACpB,MAAM7G,EAAQ,GAEd,IAAK,IAAInM,EAAI,EAAGA,EAAIU,IAAUV,EAAG,CAI/B,GAHA4I,EAAY3F,EAAO1C,WAAWP,GAG1B4I,EAAY,OAAUA,EAAY,MAAQ,CAE5C,IAAKoK,EAAe,CAElB,GAAIpK,EAAY,MAAQ,EAEjBT,GAAS,IAAM,GAAGgE,EAAMpL,KAAK,IAAM,IAAM,KAC9C,QACF,CAAO,GAAIf,EAAI,IAAMU,EAAQ,EAEtByH,GAAS,IAAM,GAAGgE,EAAMpL,KAAK,IAAM,IAAM,KAC9C,QACF,CAGAiS,EAAgBpK,EAEhB,QACF,CAGA,GAAIA,EAAY,MAAQ,EACjBT,GAAS,IAAM,GAAGgE,EAAMpL,KAAK,IAAM,IAAM,KAC9CiS,EAAgBpK,EAChB,QACF,CAGAA,EAAkE,OAArDoK,EAAgB,OAAU,GAAKpK,EAAY,MAC1D,MAAWoK,IAEJ7K,GAAS,IAAM,GAAGgE,EAAMpL,KAAK,IAAM,IAAM,KAMhD,GAHAiS,EAAgB,KAGZpK,EAAY,IAAM,CACpB,IAAKT,GAAS,GAAK,EAAG,MACtBgE,EAAMpL,KAAK6H,EACb,MAAO,GAAIA,EAAY,KAAO,CAC5B,IAAKT,GAAS,GAAK,EAAG,MACtBgE,EAAMpL,KACJ6H,GAAa,EAAM,IACP,GAAZA,EAAmB,IAEvB,MAAO,GAAIA,EAAY,MAAS,CAC9B,IAAKT,GAAS,GAAK,EAAG,MACtBgE,EAAMpL,KACJ6H,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAEvB,KAAO,MAAIA,EAAY,SASrB,MAAM,IAAItH,MAAM,sBARhB,IAAK6G,GAAS,GAAK,EAAG,MACtBgE,EAAMpL,KACJ6H,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAIvB,CACF,CAEA,OAAOuD,CACT,CA2BA,SAAS5G,EAAeuC,GACtB,OAAOlG,EAAO9B,YAxHhB,SAAsBgI,GAMpB,IAFAA,GAFAA,EAAMA,EAAImL,MAAM,KAAK,IAEX3H,OAAOD,QAAQyH,EAAmB,KAEpCpS,OAAS,EAAG,MAAO,GAE3B,KAAOoH,EAAIpH,OAAS,GAAM,GACxBoH,GAAY,IAEd,OAAOA,CACT,CA4G4BoL,CAAYpL,GACxC,CAEA,SAASF,EAAYuL,EAAKC,EAAKhM,EAAQ1G,GACrC,IAAIV,EACJ,IAAKA,EAAI,EAAGA,EAAIU,KACTV,EAAIoH,GAAUgM,EAAI1S,QAAYV,GAAKmT,EAAIzS,UADpBV,EAExBoT,EAAIpT,EAAIoH,GAAU+L,EAAInT,GAExB,OAAOA,CACT,CAKA,SAAS2D,EAAYU,EAAKK,GACxB,OAAOL,aAAeK,GACZ,MAAPL,GAAkC,MAAnBA,EAAIsN,aAA+C,MAAxBtN,EAAIsN,YAAYI,MACzD1N,EAAIsN,YAAYI,OAASrN,EAAKqN,IACpC,CACA,SAAStN,EAAaJ,GAEpB,OAAOA,GAAQA,CACjB,CAIA,MAAM6H,EAAsB,WAC1B,MAAMmH,EAAW,mBACXC,EAAQ,IAAIlS,MAAM,KACxB,IAAK,IAAIpB,EAAI,EAAGA,EAAI,KAAMA,EAAG,CAC3B,MAAMuT,EAAU,GAAJvT,EACZ,IAAK,IAAIkH,EAAI,EAAGA,EAAI,KAAMA,EACxBoM,EAAMC,EAAMrM,GAAKmM,EAASrT,GAAKqT,EAASnM,EAE5C,CACA,OAAOoM,CACR,CAV2B,GAa5B,SAASrF,EAAoBuF,GAC3B,MAAyB,oBAAX/G,OAAyBgH,EAAyBD,CAClE,CAEA,SAASC,IACP,MAAM,IAAInS,MAAM,uBAClB,gCCnjEA/B,EAAQmU,WA2IR,SAAoBC,GAQnB,GAPAA,EAAK,IAAMjO,KAAKkO,UAAY,KAAO,IAClClO,KAAKmO,WACJnO,KAAKkO,UAAY,MAAQ,KAC1BD,EAAK,IACJjO,KAAKkO,UAAY,MAAQ,KAC1B,IAAME,EAAOvU,QAAQwU,SAASrO,KAAKsO,OAE/BtO,KAAKkO,UACT,OAGD,MAAMxL,EAAI,UAAY1C,KAAKuO,MAC3BN,EAAKO,OAAO,EAAG,EAAG9L,EAAG,kBAKrB,IAAI+L,EAAQ,EACRC,EAAQ,EACZT,EAAK,GAAGtI,QAAQ,eAAegJ,IAChB,OAAVA,IAGJF,IACc,OAAVE,IAGHD,EAAQD,GACT,IAGDR,EAAKO,OAAOE,EAAO,EAAGhM,EACvB,EA3KA7I,EAAQ+U,KA6LR,SAAcC,GACb,IACKA,EACHhV,EAAQiV,QAAQC,QAAQ,QAASF,GAEjChV,EAAQiV,QAAQE,WAAW,QAE7B,CAAE,MAAO5K,GAGT,CACD,EAvMAvK,EAAQoV,KA+MR,WACC,IAAIC,EACJ,IACCA,EAAIrV,EAAQiV,QAAQK,QAAQ,QAC7B,CAAE,MAAO/K,GAGT,EAGK8K,QAAwB,IAAZE,GAA2B,QAASA,IACpDF,EAAIE,EAAQC,IAAIC,OAGjB,OAAOJ,CACR,EA7NArV,EAAQqU,UAyGR,WAIC,GAAsB,oBAAXqB,QAA0BA,OAAOH,UAAoC,aAAxBG,OAAOH,QAAQpQ,MAAuBuQ,OAAOH,QAAQI,QAC5G,OAAO,EAIR,GAAyB,oBAAdC,WAA6BA,UAAUC,WAAaD,UAAUC,UAAU5P,cAAc6O,MAAM,yBACtG,OAAO,EAKR,MAA4B,oBAAbgB,UAA4BA,SAASC,iBAAmBD,SAASC,gBAAgBC,OAASF,SAASC,gBAAgBC,MAAMC,kBAEpH,oBAAXP,QAA0BA,OAAOpL,UAAYoL,OAAOpL,QAAQ4L,SAAYR,OAAOpL,QAAQ6L,WAAaT,OAAOpL,QAAQyJ,QAGrG,oBAAd6B,WAA6BA,UAAUC,WAAaD,UAAUC,UAAU5P,cAAc6O,MAAM,mBAAqB5M,SAASkO,OAAOC,GAAI,KAAO,IAE9H,oBAAdT,WAA6BA,UAAUC,WAAaD,UAAUC,UAAU5P,cAAc6O,MAAM,qBACtG,EA/HA9U,EAAQiV,QAyOR,WACC,IAGC,OAAOqB,YACR,CAAE,MAAO/L,GAGT,CACD,CAlPkBgM,GAClBvW,EAAQwW,QAAU,MACjB,IAAIC,GAAS,EAEb,MAAO,KACDA,IACJA,GAAS,EACTnM,QAAQoM,KAAK,yIACd,CAED,EATiB,GAelB1W,EAAQ2W,OAAS,CAChB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAsFD3W,EAAQ4W,IAAMtM,QAAQuM,OAASvM,QAAQsM,KAAO,MAAS,GAkEvDrC,EAAOvU,QAAU,EAAQ,KAAR,CAAoBA,GAErC,MAAM,WAAC8W,GAAcvC,EAAOvU,QAM5B8W,EAAWnP,EAAI,SAAUoP,GACxB,IACC,OAAOC,KAAKC,UAAUF,EACvB,CAAE,MAAOxM,GACR,MAAO,+BAAiCA,EAAMmI,OAC/C,CACD,kBCKA6B,EAAOvU,QA3QP,SAAewV,GAqDd,SAAS0B,EAAY5C,GACpB,IAAI6C,EAEAC,EACAC,EAFAC,EAAiB,KAIrB,SAAST,KAASzC,GAEjB,IAAKyC,EAAMU,QACV,OAGD,MAAMC,EAAOX,EAGPY,EAAO3P,OAAO,IAAI4P,MAClBC,EAAKF,GAAQN,GAAYM,GAC/BD,EAAK/C,KAAOkD,EACZH,EAAKI,KAAOT,EACZK,EAAKC,KAAOA,EACZN,EAAWM,EAEXrD,EAAK,GAAK8C,EAAYW,OAAOzD,EAAK,IAEX,iBAAZA,EAAK,IAEfA,EAAK0D,QAAQ,MAId,IAAIlD,EAAQ,EACZR,EAAK,GAAKA,EAAK,GAAGtI,QAAQ,iBAAiB,CAACgJ,EAAOiD,KAElD,GAAc,OAAVjD,EACH,MAAO,IAERF,IACA,MAAMoD,EAAYd,EAAYJ,WAAWiB,GACzC,GAAyB,mBAAdC,EAA0B,CACpC,MAAMlR,EAAMsN,EAAKQ,GACjBE,EAAQkD,EAAU/Q,KAAKuQ,EAAM1Q,GAG7BsN,EAAKO,OAAOC,EAAO,GACnBA,GACD,CACA,OAAOE,CAAK,IAIboC,EAAY/C,WAAWlN,KAAKuQ,EAAMpD,IAEpBoD,EAAKZ,KAAOM,EAAYN,KAChC9M,MAAM0N,EAAMpD,EACnB,CAgCA,OA9BAyC,EAAMvC,UAAYA,EAClBuC,EAAMxC,UAAY6C,EAAY7C,YAC9BwC,EAAMnC,MAAQwC,EAAYe,YAAY3D,GACtCuC,EAAMqB,OAASA,EACfrB,EAAML,QAAUU,EAAYV,QAE5BvT,OAAOuH,eAAeqM,EAAO,UAAW,CACvCpM,YAAY,EACZ8H,cAAc,EACd7H,IAAK,IACmB,OAAnB4M,EACIA,GAEJF,IAAoBF,EAAYlC,aACnCoC,EAAkBF,EAAYlC,WAC9BqC,EAAeH,EAAYK,QAAQjD,IAG7B+C,GAER/L,IAAKyL,IACJO,EAAiBP,CAAC,IAKY,mBAArBG,EAAYiB,MACtBjB,EAAYiB,KAAKtB,GAGXA,CACR,CAEA,SAASqB,EAAO5D,EAAW8D,GAC1B,MAAMC,EAAWnB,EAAY/Q,KAAKmO,gBAAkC,IAAd8D,EAA4B,IAAMA,GAAa9D,GAErG,OADA+D,EAASzB,IAAMzQ,KAAKyQ,IACbyB,CACR,CAwFA,SAASC,EAAYC,GACpB,OAAOA,EAAO5S,WACZ6S,UAAU,EAAGD,EAAO5S,WAAWxE,OAAS,GACxC2K,QAAQ,UAAW,IACtB,CA0BA,OAvQAoL,EAAYL,MAAQK,EACpBA,EAAYuB,QAAUvB,EACtBA,EAAYW,OAoPZ,SAAgB/Q,GACf,GAAIA,aAAe/E,MAClB,OAAO+E,EAAI2L,OAAS3L,EAAI4L,QAEzB,OAAO5L,CACR,EAxPAoQ,EAAYwB,QAwLZ,WACC,MAAM1D,EAAa,IACfkC,EAAYyB,MAAMC,IAAIN,MACtBpB,EAAY2B,MAAMD,IAAIN,GAAaM,KAAItE,GAAa,IAAMA,KAC5D3S,KAAK,KAEP,OADAuV,EAAY4B,OAAO,IACZ9D,CACR,EA9LAkC,EAAY4B,OAsJZ,SAAgB9D,GAOf,IAAIvU,EANJyW,EAAYnC,KAAKC,GACjBkC,EAAYlC,WAAaA,EAEzBkC,EAAYyB,MAAQ,GACpBzB,EAAY2B,MAAQ,GAGpB,MAAMnF,GAA+B,iBAAfsB,EAA0BA,EAAa,IAAItB,MAAM,UACjE5S,EAAM4S,EAAMvS,OAElB,IAAKV,EAAI,EAAGA,EAAIK,EAAKL,IACfiT,EAAMjT,KAOW,OAFtBuU,EAAatB,EAAMjT,GAAGqL,QAAQ,MAAO,QAEtB,GACdoL,EAAY2B,MAAMrX,KAAK,IAAI4U,OAAO,IAAMpB,EAAWjR,MAAM,GAAK,MAE9DmT,EAAYyB,MAAMnX,KAAK,IAAI4U,OAAO,IAAMpB,EAAa,MAGxD,EA9KAkC,EAAYK,QAsMZ,SAAiB/E,GAChB,GAA8B,MAA1BA,EAAKA,EAAKrR,OAAS,GACtB,OAAO,EAGR,IAAIV,EACAK,EAEJ,IAAKL,EAAI,EAAGK,EAAMoW,EAAY2B,MAAM1X,OAAQV,EAAIK,EAAKL,IACpD,GAAIyW,EAAY2B,MAAMpY,GAAGsY,KAAKvG,GAC7B,OAAO,EAIT,IAAK/R,EAAI,EAAGK,EAAMoW,EAAYyB,MAAMxX,OAAQV,EAAIK,EAAKL,IACpD,GAAIyW,EAAYyB,MAAMlY,GAAGsY,KAAKvG,GAC7B,OAAO,EAIT,OAAO,CACR,EA1NA0E,EAAY1C,SAAW,EAAQ,MAC/B0C,EAAYV,QA0PZ,WACClM,QAAQoM,KAAK,wIACd,EA1PAzT,OAAO+V,KAAKxD,GAAKyD,SAAQC,IACxBhC,EAAYgC,GAAO1D,EAAI0D,EAAI,IAO5BhC,EAAYyB,MAAQ,GACpBzB,EAAY2B,MAAQ,GAOpB3B,EAAYJ,WAAa,CAAC,EAkB1BI,EAAYe,YAVZ,SAAqB3D,GACpB,IAAI6E,EAAO,EAEX,IAAK,IAAI1Y,EAAI,EAAGA,EAAI6T,EAAUnT,OAAQV,IACrC0Y,GAASA,GAAQ,GAAKA,EAAQ7E,EAAUtT,WAAWP,GACnD0Y,GAAQ,EAGT,OAAOjC,EAAYP,OAAO1N,KAAKqK,IAAI6F,GAAQjC,EAAYP,OAAOxV,OAC/D,EA2NA+V,EAAY4B,OAAO5B,EAAY9B,QAExB8B,CACR,yBCjQA,SAASkC,EAAOtU,EAAKuU,GACjB,IAAK,MAAMH,KAAOG,EACdpW,OAAOuH,eAAe1F,EAAKoU,EAAK,CAC5BzV,MAAO4V,EAAMH,GACbzO,YAAY,EACZ8H,cAAc,IAItB,OAAOzN,CACX,CA4CAyP,EAAOvU,QAnCP,SAAqBsZ,EAAKxX,EAAMuX,GAC5B,IAAKC,GAAsB,iBAARA,EACf,MAAM,IAAIhW,UAAU,oCAGnB+V,IACDA,EAAQ,CAAC,GAGO,iBAATvX,IACPuX,EAAQvX,EACRA,EAAO,IAGPA,IACAuX,EAAMvX,KAAOA,GAGjB,IACI,OAAOsX,EAAOE,EAAKD,EACvB,CAAE,MAAOE,GACLF,EAAM3G,QAAU4G,EAAI5G,QACpB2G,EAAM5G,MAAQ6G,EAAI7G,MAElB,MAAM+G,EAAW,WAAa,EAE9BA,EAASrW,UAAYF,OAAOwW,OAAOxW,OAAOyW,eAAeJ,IAKzD,OAFeF,EAAO,IAAII,EAAYH,EAG1C,CACJ,yBC3CA,IAOIM,EAPAC,EAAuB,iBAAZC,QAAuBA,QAAU,KAC5CC,EAAeF,GAAwB,mBAAZA,EAAE9P,MAC7B8P,EAAE9P,MACF,SAAsBkC,EAAQ+N,EAAU3F,GACxC,OAAO4F,SAAS7W,UAAU2G,MAAM7C,KAAK+E,EAAQ+N,EAAU3F,EACzD,EAIAuF,EADEC,GAA0B,mBAAdA,EAAEK,QACCL,EAAEK,QACVhX,OAAOiX,sBACC,SAAwBlO,GACvC,OAAO/I,OAAOkX,oBAAoBnO,GAC/Bb,OAAOlI,OAAOiX,sBAAsBlO,GACzC,EAEiB,SAAwBA,GACvC,OAAO/I,OAAOkX,oBAAoBnO,EACpC,EAOF,IAAIoO,EAActS,OAAOuS,OAAS,SAAqB5W,GACrD,OAAOA,GAAUA,CACnB,EAEA,SAAS6W,IACPA,EAAanC,KAAKlR,KAAKd,KACzB,CACAoO,EAAOvU,QAAUsa,EACjB/F,EAAOvU,QAAQua,KAwYf,SAAcC,EAAShI,GACrB,OAAO,IAAIiI,SAAQ,SAAUC,EAASC,GACpC,SAASC,EAActB,GACrBkB,EAAQK,eAAerI,EAAMsI,GAC7BH,EAAOrB,EACT,CAEA,SAASwB,IAC+B,mBAA3BN,EAAQK,gBACjBL,EAAQK,eAAe,QAASD,GAElCF,EAAQ,GAAG3W,MAAMkD,KAAKpB,WACxB,CAEAkV,EAA+BP,EAAShI,EAAMsI,EAAU,CAAEP,MAAM,IACnD,UAAT/H,GAMR,SAAuCgI,EAASQ,EAASC,GAC7B,mBAAfT,EAAQU,IACjBH,EAA+BP,EAAS,QAASQ,EAASC,EAE9D,CATME,CAA8BX,EAASI,EAAe,CAAEL,MAAM,GAElE,GACF,EAxZAD,EAAaA,aAAeA,EAE5BA,EAAanX,UAAUiY,aAAUnW,EACjCqV,EAAanX,UAAUkY,aAAe,EACtCf,EAAanX,UAAUmY,mBAAgBrW,EAIvC,IAAIsW,EAAsB,GAE1B,SAASC,EAAcC,GACrB,GAAwB,mBAAbA,EACT,MAAM,IAAInY,UAAU,0EAA4EmY,EAEpG,CAoCA,SAASC,EAAiBC,GACxB,YAA2B1W,IAAvB0W,EAAKL,cACAhB,EAAaiB,oBACfI,EAAKL,aACd,CAkDA,SAASM,EAAa5P,EAAQ7G,EAAMsW,EAAUI,GAC5C,IAAIjV,EACAkV,EACAC,EA1HsBC,EAgJ1B,GApBAR,EAAcC,QAGCxW,KADf6W,EAAS9P,EAAOoP,UAEdU,EAAS9P,EAAOoP,QAAUnY,OAAOwW,OAAO,MACxCzN,EAAOqP,aAAe,SAIKpW,IAAvB6W,EAAOG,cACTjQ,EAAOkQ,KAAK,cAAe/W,EACfsW,EAASA,SAAWA,EAASA,SAAWA,GAIpDK,EAAS9P,EAAOoP,SAElBW,EAAWD,EAAO3W,SAGHF,IAAb8W,EAEFA,EAAWD,EAAO3W,GAAQsW,IACxBzP,EAAOqP,kBAeT,GAbwB,mBAAbU,EAETA,EAAWD,EAAO3W,GAChB0W,EAAU,CAACJ,EAAUM,GAAY,CAACA,EAAUN,GAErCI,EACTE,EAASjE,QAAQ2D,GAEjBM,EAASva,KAAKia,IAIhB7U,EAAI8U,EAAiB1P,IACb,GAAK+P,EAAS5a,OAASyF,IAAMmV,EAAStF,OAAQ,CACpDsF,EAAStF,QAAS,EAGlB,IAAI0F,EAAI,IAAIpa,MAAM,+CACEga,EAAS5a,OAAS,IAAMmG,OAAOnC,GADjC,qEAIlBgX,EAAE3J,KAAO,8BACT2J,EAAE3B,QAAUxO,EACZmQ,EAAEhX,KAAOA,EACTgX,EAAEC,MAAQL,EAAS5a,OA7KG6a,EA8KHG,EA7KnB7R,SAAWA,QAAQoM,MAAMpM,QAAQoM,KAAKsF,EA8KxC,CAGF,OAAOhQ,CACT,CAaA,SAASqQ,IACP,IAAKlW,KAAKmW,MAGR,OAFAnW,KAAK6F,OAAO6O,eAAe1U,KAAKhB,KAAMgB,KAAKoW,QAC3CpW,KAAKmW,OAAQ,EACY,IAArBzW,UAAU1E,OACLgF,KAAKsV,SAASxU,KAAKd,KAAK6F,QAC1B7F,KAAKsV,SAAS3R,MAAM3D,KAAK6F,OAAQnG,UAE5C,CAEA,SAAS2W,EAAUxQ,EAAQ7G,EAAMsW,GAC/B,IAAIgB,EAAQ,CAAEH,OAAO,EAAOC,YAAQtX,EAAW+G,OAAQA,EAAQ7G,KAAMA,EAAMsW,SAAUA,GACjFiB,EAAUL,EAAYM,KAAKF,GAG/B,OAFAC,EAAQjB,SAAWA,EACnBgB,EAAMF,OAASG,EACRA,CACT,CAyHA,SAASE,EAAW5Q,EAAQ7G,EAAM0X,GAChC,IAAIf,EAAS9P,EAAOoP,QAEpB,QAAenW,IAAX6W,EACF,MAAO,GAET,IAAIgB,EAAahB,EAAO3W,GACxB,YAAmBF,IAAf6X,EACK,GAEiB,mBAAfA,EACFD,EAAS,CAACC,EAAWrB,UAAYqB,GAAc,CAACA,GAElDD,EAsDT,SAAyBnc,GAEvB,IADA,IAAI+L,EAAM,IAAI5K,MAAMnB,EAAIS,QACfV,EAAI,EAAGA,EAAIgM,EAAItL,SAAUV,EAChCgM,EAAIhM,GAAKC,EAAID,GAAGgb,UAAY/a,EAAID,GAElC,OAAOgM,CACT,CA3DIsQ,CAAgBD,GAAcE,EAAWF,EAAYA,EAAW3b,OACpE,CAmBA,SAAS8b,EAAc9X,GACrB,IAAI2W,EAAS3V,KAAKiV,QAElB,QAAenW,IAAX6W,EAAsB,CACxB,IAAIgB,EAAahB,EAAO3W,GAExB,GAA0B,mBAAf2X,EACT,OAAO,EACF,QAAmB7X,IAAf6X,EACT,OAAOA,EAAW3b,MAEtB,CAEA,OAAO,CACT,CAMA,SAAS6b,EAAWtc,EAAKiG,GAEvB,IADA,IAAItC,EAAO,IAAIxC,MAAM8E,GACZlG,EAAI,EAAGA,EAAIkG,IAAKlG,EACvB4D,EAAK5D,GAAKC,EAAID,GAChB,OAAO4D,CACT,CA2CA,SAAS0W,EAA+BP,EAAShI,EAAMiJ,EAAUR,GAC/D,GAA0B,mBAAfT,EAAQU,GACbD,EAAMV,KACRC,EAAQD,KAAK/H,EAAMiJ,GAEnBjB,EAAQU,GAAG1I,EAAMiJ,OAEd,IAAwC,mBAA7BjB,EAAQ0C,iBAYxB,MAAM,IAAI5Z,UAAU,6EAA+EkX,GATnGA,EAAQ0C,iBAAiB1K,GAAM,SAAS2K,EAAa/Z,GAG/C6X,EAAMV,MACRC,EAAQ4C,oBAAoB5K,EAAM2K,GAEpC1B,EAASrY,EACX,GAGF,CACF,CAraAH,OAAOuH,eAAe8P,EAAc,sBAAuB,CACzD7P,YAAY,EACZC,IAAK,WACH,OAAO6Q,CACT,EACAjQ,IAAK,SAASlI,GACZ,GAAmB,iBAARA,GAAoBA,EAAM,GAAKgX,EAAYhX,GACpD,MAAM,IAAIL,WAAW,kGAAoGK,EAAM,KAEjImY,EAAsBnY,CACxB,IAGFkX,EAAanC,KAAO,gBAEGlT,IAAjBkB,KAAKiV,SACLjV,KAAKiV,UAAYnY,OAAOyW,eAAevT,MAAMiV,UAC/CjV,KAAKiV,QAAUnY,OAAOwW,OAAO,MAC7BtT,KAAKkV,aAAe,GAGtBlV,KAAKmV,cAAgBnV,KAAKmV,oBAAiBrW,CAC7C,EAIAqV,EAAanX,UAAUka,gBAAkB,SAAyB1W,GAChE,GAAiB,iBAANA,GAAkBA,EAAI,GAAKyT,EAAYzT,GAChD,MAAM,IAAI5D,WAAW,gFAAkF4D,EAAI,KAG7G,OADAR,KAAKmV,cAAgB3U,EACdR,IACT,EAQAmU,EAAanX,UAAUma,gBAAkB,WACvC,OAAO5B,EAAiBvV,KAC1B,EAEAmU,EAAanX,UAAU+Y,KAAO,SAAc/W,GAE1C,IADA,IAAIiP,EAAO,GACF3T,EAAI,EAAGA,EAAIoF,UAAU1E,OAAQV,IAAK2T,EAAK5S,KAAKqE,UAAUpF,IAC/D,IAAI8c,EAAoB,UAATpY,EAEX2W,EAAS3V,KAAKiV,QAClB,QAAenW,IAAX6W,EACFyB,EAAWA,QAA4BtY,IAAjB6W,EAAOvR,WAC1B,IAAKgT,EACR,OAAO,EAGT,GAAIA,EAAS,CACX,IAAIC,EAGJ,GAFIpJ,EAAKjT,OAAS,IAChBqc,EAAKpJ,EAAK,IACRoJ,aAAczb,MAGhB,MAAMyb,EAGR,IAAIlE,EAAM,IAAIvX,MAAM,oBAAsByb,EAAK,KAAOA,EAAG9K,QAAU,IAAM,KAEzE,MADA4G,EAAImE,QAAUD,EACRlE,CACR,CAEA,IAAI0B,EAAUc,EAAO3W,GAErB,QAAgBF,IAAZ+V,EACF,OAAO,EAET,GAAuB,mBAAZA,EACTlB,EAAakB,EAAS7U,KAAMiO,OAE5B,KAAItT,EAAMka,EAAQ7Z,OACduc,EAAYV,EAAWhC,EAASla,GACpC,IAASL,EAAI,EAAGA,EAAIK,IAAOL,EACzBqZ,EAAa4D,EAAUjd,GAAI0F,KAAMiO,EAHX,CAM1B,OAAO,CACT,EAgEAkG,EAAanX,UAAUwa,YAAc,SAAqBxY,EAAMsW,GAC9D,OAAOG,EAAazV,KAAMhB,EAAMsW,GAAU,EAC5C,EAEAnB,EAAanX,UAAU+X,GAAKZ,EAAanX,UAAUwa,YAEnDrD,EAAanX,UAAUya,gBACnB,SAAyBzY,EAAMsW,GAC7B,OAAOG,EAAazV,KAAMhB,EAAMsW,GAAU,EAC5C,EAoBJnB,EAAanX,UAAUoX,KAAO,SAAcpV,EAAMsW,GAGhD,OAFAD,EAAcC,GACdtV,KAAK+U,GAAG/V,EAAMqX,EAAUrW,KAAMhB,EAAMsW,IAC7BtV,IACT,EAEAmU,EAAanX,UAAU0a,oBACnB,SAA6B1Y,EAAMsW,GAGjC,OAFAD,EAAcC,GACdtV,KAAKyX,gBAAgBzY,EAAMqX,EAAUrW,KAAMhB,EAAMsW,IAC1CtV,IACT,EAGJmU,EAAanX,UAAU0X,eACnB,SAAwB1V,EAAMsW,GAC5B,IAAIrQ,EAAM0Q,EAAQgC,EAAUrd,EAAGsd,EAK/B,GAHAvC,EAAcC,QAGCxW,KADf6W,EAAS3V,KAAKiV,SAEZ,OAAOjV,KAGT,QAAalB,KADbmG,EAAO0Q,EAAO3W,IAEZ,OAAOgB,KAET,GAAIiF,IAASqQ,GAAYrQ,EAAKqQ,WAAaA,EACb,KAAtBtV,KAAKkV,aACTlV,KAAKiV,QAAUnY,OAAOwW,OAAO,cAEtBqC,EAAO3W,GACV2W,EAAOjB,gBACT1U,KAAK+V,KAAK,iBAAkB/W,EAAMiG,EAAKqQ,UAAYA,SAElD,GAAoB,mBAATrQ,EAAqB,CAGrC,IAFA0S,GAAY,EAEPrd,EAAI2K,EAAKjK,OAAS,EAAGV,GAAK,EAAGA,IAChC,GAAI2K,EAAK3K,KAAOgb,GAAYrQ,EAAK3K,GAAGgb,WAAaA,EAAU,CACzDsC,EAAmB3S,EAAK3K,GAAGgb,SAC3BqC,EAAWrd,EACX,KACF,CAGF,GAAIqd,EAAW,EACb,OAAO3X,KAEQ,IAAb2X,EACF1S,EAAK4S,QAiIf,SAAmB5S,EAAMwJ,GACvB,KAAOA,EAAQ,EAAIxJ,EAAKjK,OAAQyT,IAC9BxJ,EAAKwJ,GAASxJ,EAAKwJ,EAAQ,GAC7BxJ,EAAK6S,KACP,CAnIUC,CAAU9S,EAAM0S,GAGE,IAAhB1S,EAAKjK,SACP2a,EAAO3W,GAAQiG,EAAK,SAEQnG,IAA1B6W,EAAOjB,gBACT1U,KAAK+V,KAAK,iBAAkB/W,EAAM4Y,GAAoBtC,EAC1D,CAEA,OAAOtV,IACT,EAEJmU,EAAanX,UAAUgb,IAAM7D,EAAanX,UAAU0X,eAEpDP,EAAanX,UAAUib,mBACnB,SAA4BjZ,GAC1B,IAAIuY,EAAW5B,EAAQrb,EAGvB,QAAewE,KADf6W,EAAS3V,KAAKiV,SAEZ,OAAOjV,KAGT,QAA8BlB,IAA1B6W,EAAOjB,eAUT,OATyB,IAArBhV,UAAU1E,QACZgF,KAAKiV,QAAUnY,OAAOwW,OAAO,MAC7BtT,KAAKkV,aAAe,QACMpW,IAAjB6W,EAAO3W,KACY,KAAtBgB,KAAKkV,aACTlV,KAAKiV,QAAUnY,OAAOwW,OAAO,aAEtBqC,EAAO3W,IAEXgB,KAIT,GAAyB,IAArBN,UAAU1E,OAAc,CAC1B,IACI+X,EADAF,EAAO/V,OAAO+V,KAAK8C,GAEvB,IAAKrb,EAAI,EAAGA,EAAIuY,EAAK7X,SAAUV,EAEjB,oBADZyY,EAAMF,EAAKvY,KAEX0F,KAAKiY,mBAAmBlF,GAK1B,OAHA/S,KAAKiY,mBAAmB,kBACxBjY,KAAKiV,QAAUnY,OAAOwW,OAAO,MAC7BtT,KAAKkV,aAAe,EACblV,IACT,CAIA,GAAyB,mBAFzBuX,EAAY5B,EAAO3W,IAGjBgB,KAAK0U,eAAe1V,EAAMuY,QACrB,QAAkBzY,IAAdyY,EAET,IAAKjd,EAAIid,EAAUvc,OAAS,EAAGV,GAAK,EAAGA,IACrC0F,KAAK0U,eAAe1V,EAAMuY,EAAUjd,IAIxC,OAAO0F,IACT,EAmBJmU,EAAanX,UAAUua,UAAY,SAAmBvY,GACpD,OAAOyX,EAAWzW,KAAMhB,GAAM,EAChC,EAEAmV,EAAanX,UAAUkb,aAAe,SAAsBlZ,GAC1D,OAAOyX,EAAWzW,KAAMhB,GAAM,EAChC,EAEAmV,EAAa2C,cAAgB,SAASzC,EAASrV,GAC7C,MAAqC,mBAA1BqV,EAAQyC,cACVzC,EAAQyC,cAAc9X,GAEtB8X,EAAchW,KAAKuT,EAASrV,EAEvC,EAEAmV,EAAanX,UAAU8Z,cAAgBA,EAiBvC3C,EAAanX,UAAUmb,WAAa,WAClC,OAAOnY,KAAKkV,aAAe,EAAI1B,EAAexT,KAAKiV,SAAW,EAChE,YCvaA7G,EAAOvU,QAAU,WACf,GAA0B,oBAAfue,WAA4B,OAAO,KAC9C,IAAIC,EAAO,CACTC,kBAAmBF,WAAWE,mBAAqBF,WAAWG,sBAC5DH,WAAWI,wBACbC,sBAAuBL,WAAWK,uBAChCL,WAAWM,0BAA4BN,WAAWO,4BACpDC,gBAAiBR,WAAWQ,iBAAmBR,WAAWS,oBACxDT,WAAWU,uBAEf,OAAKT,EAAKC,kBACHD,EAD6B,IAEtC,eCbAxe,EAAQuH,KAAO,SAAUhD,EAAQsD,EAAQqX,EAAMC,EAAMC,GACnD,IAAIhV,EAAGxD,EACHyY,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACT/e,EAAIye,EAAQE,EAAS,EAAK,EAC1BK,EAAIP,GAAQ,EAAI,EAChBQ,EAAInb,EAAOsD,EAASpH,GAOxB,IALAA,GAAKgf,EAELrV,EAAIsV,GAAM,IAAOF,GAAU,EAC3BE,KAAQF,EACRA,GAASH,EACFG,EAAQ,EAAGpV,EAAS,IAAJA,EAAW7F,EAAOsD,EAASpH,GAAIA,GAAKgf,EAAGD,GAAS,GAKvE,IAHA5Y,EAAIwD,GAAM,IAAOoV,GAAU,EAC3BpV,KAAQoV,EACRA,GAASL,EACFK,EAAQ,EAAG5Y,EAAS,IAAJA,EAAWrC,EAAOsD,EAASpH,GAAIA,GAAKgf,EAAGD,GAAS,GAEvE,GAAU,IAANpV,EACFA,EAAI,EAAImV,MACH,IAAInV,IAAMkV,EACf,OAAO1Y,EAAI+Y,IAAsBnM,KAAdkM,GAAK,EAAI,GAE5B9Y,GAAQqC,KAAKgG,IAAI,EAAGkQ,GACpB/U,GAAQmV,CACV,CACA,OAAQG,GAAK,EAAI,GAAK9Y,EAAIqC,KAAKgG,IAAI,EAAG7E,EAAI+U,EAC5C,EAEAnf,EAAQ8D,MAAQ,SAAUS,EAAQd,EAAOoE,EAAQqX,EAAMC,EAAMC,GAC3D,IAAIhV,EAAGxD,EAAGiC,EACNwW,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBM,EAAe,KAATT,EAAclW,KAAKgG,IAAI,GAAI,IAAMhG,KAAKgG,IAAI,GAAI,IAAM,EAC1DxO,EAAIye,EAAO,EAAKE,EAAS,EACzBK,EAAIP,EAAO,GAAK,EAChBQ,EAAIjc,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQwF,KAAKqK,IAAI7P,GAEb4W,MAAM5W,IAAUA,IAAU+P,KAC5B5M,EAAIyT,MAAM5W,GAAS,EAAI,EACvB2G,EAAIkV,IAEJlV,EAAInB,KAAK+J,MAAM/J,KAAK2N,IAAInT,GAASwF,KAAK4W,KAClCpc,GAASoF,EAAII,KAAKgG,IAAI,GAAI7E,IAAM,IAClCA,IACAvB,GAAK,IAGLpF,GADE2G,EAAImV,GAAS,EACNK,EAAK/W,EAEL+W,EAAK3W,KAAKgG,IAAI,EAAG,EAAIsQ,IAEpB1W,GAAK,IACfuB,IACAvB,GAAK,GAGHuB,EAAImV,GAASD,GACf1Y,EAAI,EACJwD,EAAIkV,GACKlV,EAAImV,GAAS,GACtB3Y,GAAMnD,EAAQoF,EAAK,GAAKI,KAAKgG,IAAI,EAAGkQ,GACpC/U,GAAQmV,IAER3Y,EAAInD,EAAQwF,KAAKgG,IAAI,EAAGsQ,EAAQ,GAAKtW,KAAKgG,IAAI,EAAGkQ,GACjD/U,EAAI,IAID+U,GAAQ,EAAG5a,EAAOsD,EAASpH,GAAS,IAAJmG,EAAUnG,GAAKgf,EAAG7Y,GAAK,IAAKuY,GAAQ,GAI3E,IAFA/U,EAAKA,GAAK+U,EAAQvY,EAClByY,GAAQF,EACDE,EAAO,EAAG9a,EAAOsD,EAASpH,GAAS,IAAJ2J,EAAU3J,GAAKgf,EAAGrV,GAAK,IAAKiV,GAAQ,GAE1E9a,EAAOsD,EAASpH,EAAIgf,IAAU,IAAJC,CAC5B,YCpF6B,mBAAlBzc,OAAOwW,OAEhBlF,EAAOvU,QAAU,SAAkB8f,EAAMC,GACnCA,IACFD,EAAKE,OAASD,EACdD,EAAK3c,UAAYF,OAAOwW,OAAOsG,EAAU5c,UAAW,CAClDiP,YAAa,CACX3O,MAAOqc,EACPrV,YAAY,EACZ6H,UAAU,EACVC,cAAc,KAItB,EAGAgC,EAAOvU,QAAU,SAAkB8f,EAAMC,GACvC,GAAIA,EAAW,CACbD,EAAKE,OAASD,EACd,IAAIE,EAAW,WAAa,EAC5BA,EAAS9c,UAAY4c,EAAU5c,UAC/B2c,EAAK3c,UAAY,IAAI8c,EACrBH,EAAK3c,UAAUiP,YAAc0N,CAC/B,CACF,YCrBF,IAAIJ,EAAI,IACJ9Y,EAAQ,GAAJ8Y,EACJQ,EAAQ,GAAJtZ,EACJ6Y,EAAQ,GAAJS,EACJ/D,EAAQ,EAAJsD,EACJvU,EAAQ,OAAJuU,EAqJR,SAASU,EAAOxI,EAAIyI,EAAOzZ,EAAG6L,GAC5B,IAAI6N,EAAWD,GAAa,IAAJzZ,EACxB,OAAOsC,KAAKqX,MAAM3I,EAAKhR,GAAK,IAAM6L,GAAQ6N,EAAW,IAAM,GAC7D,CAxIA9L,EAAOvU,QAAU,SAAS8G,EAAKyZ,GAC7BA,EAAUA,GAAW,CAAC,EACtB,IAAIpb,SAAc2B,EAClB,GAAa,WAAT3B,GAAqB2B,EAAI3F,OAAS,EACpC,OAkBJ,SAAeoH,GAEb,IADAA,EAAMjB,OAAOiB,IACLpH,OAAS,IACf,OAEF,IAAI2T,EAAQ,mIAAmI0L,KAC7IjY,GAEF,IAAKuM,EACH,OAEF,IAAInO,EAAI8Z,WAAW3L,EAAM,IAEzB,QADYA,EAAM,IAAM,MAAM7O,eAE5B,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAOU,EAAIuE,EACb,IAAK,QACL,IAAK,OACL,IAAK,IACH,OAAOvE,EAAIwV,EACb,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOxV,EAAI8Y,EACb,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAO9Y,EAAIuZ,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOvZ,EAAIC,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOD,EAAI+Y,EACb,IAAK,eACL,IAAK,cACL,IAAK,QACL,IAAK,OACL,IAAK,KACH,OAAO/Y,EACT,QACE,OAEN,CAzEW+Z,CAAM5Z,GACR,GAAa,WAAT3B,GAAqBmH,SAASxF,GACvC,OAAOyZ,EAAQI,KA0GnB,SAAiBhJ,GACf,IAAIyI,EAAQnX,KAAKqK,IAAIqE,GACrB,GAAIyI,GAASX,EACX,OAAOU,EAAOxI,EAAIyI,EAAOX,EAAG,OAE9B,GAAIW,GAASF,EACX,OAAOC,EAAOxI,EAAIyI,EAAOF,EAAG,QAE9B,GAAIE,GAASxZ,EACX,OAAOuZ,EAAOxI,EAAIyI,EAAOxZ,EAAG,UAE9B,GAAIwZ,GAASV,EACX,OAAOS,EAAOxI,EAAIyI,EAAOV,EAAG,UAE9B,OAAO/H,EAAK,KACd,CAzH0BiJ,CAAQ9Z,GAiFlC,SAAkB6Q,GAChB,IAAIyI,EAAQnX,KAAKqK,IAAIqE,GACrB,GAAIyI,GAASX,EACX,OAAOxW,KAAKqX,MAAM3I,EAAK8H,GAAK,IAE9B,GAAIW,GAASF,EACX,OAAOjX,KAAKqX,MAAM3I,EAAKuI,GAAK,IAE9B,GAAIE,GAASxZ,EACX,OAAOqC,KAAKqX,MAAM3I,EAAK/Q,GAAK,IAE9B,GAAIwZ,GAASV,EACX,OAAOzW,KAAKqX,MAAM3I,EAAK+H,GAAK,IAE9B,OAAO/H,EAAK,IACd,CAhGyCkJ,CAAS/Z,GAEhD,MAAM,IAAI/E,MACR,wDACEiV,KAAKC,UAAUnQ,GAErB,YCpCA,IAOIga,EACAC,EARAxL,EAAUhB,EAAOvU,QAAU,CAAC,EAUhC,SAASghB,IACL,MAAM,IAAIjf,MAAM,kCACpB,CACA,SAASkf,IACL,MAAM,IAAIlf,MAAM,oCACpB,CAqBA,SAASmf,EAAWC,GAChB,GAAIL,IAAqBM,WAErB,OAAOA,WAAWD,EAAK,GAG3B,IAAKL,IAAqBE,IAAqBF,IAAqBM,WAEhE,OADAN,EAAmBM,WACZA,WAAWD,EAAK,GAE3B,IAEI,OAAOL,EAAiBK,EAAK,EACjC,CAAE,MAAM/W,GACJ,IAEI,OAAO0W,EAAiB7Z,KAAK,KAAMka,EAAK,EAC5C,CAAE,MAAM/W,GAEJ,OAAO0W,EAAiB7Z,KAAKd,KAAMgb,EAAK,EAC5C,CACJ,CAGJ,EA5CC,WACG,IAEQL,EADsB,mBAAfM,WACYA,WAEAJ,CAE3B,CAAE,MAAO5W,GACL0W,EAAmBE,CACvB,CACA,IAEQD,EADwB,mBAAjBM,aACcA,aAEAJ,CAE7B,CAAE,MAAO7W,GACL2W,EAAqBE,CACzB,CACJ,CAnBA,GAwEA,IAEIK,EAFAC,EAAQ,GACRC,GAAW,EAEXC,GAAc,EAElB,SAASC,IACAF,GAAaF,IAGlBE,GAAW,EACPF,EAAangB,OACbogB,EAAQD,EAAanW,OAAOoW,GAE5BE,GAAc,EAEdF,EAAMpgB,QACNwgB,IAER,CAEA,SAASA,IACL,IAAIH,EAAJ,CAGA,IAAII,EAAUV,EAAWQ,GACzBF,GAAW,EAGX,IADA,IAAI1gB,EAAMygB,EAAMpgB,OACVL,GAAK,CAGP,IAFAwgB,EAAeC,EACfA,EAAQ,KACCE,EAAa3gB,GACdwgB,GACAA,EAAaG,GAAYI,MAGjCJ,GAAc,EACd3gB,EAAMygB,EAAMpgB,MAChB,CACAmgB,EAAe,KACfE,GAAW,EAnEf,SAAyBM,GACrB,GAAIf,IAAuBM,aAEvB,OAAOA,aAAaS,GAGxB,IAAKf,IAAuBE,IAAwBF,IAAuBM,aAEvE,OADAN,EAAqBM,aACdA,aAAaS,GAExB,IAEI,OAAOf,EAAmBe,EAC9B,CAAE,MAAO1X,GACL,IAEI,OAAO2W,EAAmB9Z,KAAK,KAAM6a,EACzC,CAAE,MAAO1X,GAGL,OAAO2W,EAAmB9Z,KAAKd,KAAM2b,EACzC,CACJ,CAIJ,CA0CIC,CAAgBH,EAlBhB,CAmBJ,CAgBA,SAASI,EAAKb,EAAKzb,GACfS,KAAKgb,IAAMA,EACXhb,KAAKT,MAAQA,CACjB,CAWA,SAASuc,IAAQ,CA5BjB1M,EAAQ2M,SAAW,SAAUf,GACzB,IAAI/M,EAAO,IAAIvS,MAAMgE,UAAU1E,OAAS,GACxC,GAAI0E,UAAU1E,OAAS,EACnB,IAAK,IAAIV,EAAI,EAAGA,EAAIoF,UAAU1E,OAAQV,IAClC2T,EAAK3T,EAAI,GAAKoF,UAAUpF,GAGhC8gB,EAAM/f,KAAK,IAAIwgB,EAAKb,EAAK/M,IACJ,IAAjBmN,EAAMpgB,QAAiBqgB,GACvBN,EAAWS,EAEnB,EAOAK,EAAK7e,UAAU0e,IAAM,WACjB1b,KAAKgb,IAAIrX,MAAM,KAAM3D,KAAKT,MAC9B,EACA6P,EAAQ4M,MAAQ,UAChB5M,EAAQ6M,SAAU,EAClB7M,EAAQC,IAAM,CAAC,EACfD,EAAQ8M,KAAO,GACf9M,EAAQ+M,QAAU,GAClB/M,EAAQgN,SAAW,CAAC,EAIpBhN,EAAQ2F,GAAK+G,EACb1M,EAAQoI,YAAcsE,EACtB1M,EAAQgF,KAAO0H,EACf1M,EAAQ4I,IAAM8D,EACd1M,EAAQsF,eAAiBoH,EACzB1M,EAAQ6I,mBAAqB6D,EAC7B1M,EAAQ2G,KAAO+F,EACf1M,EAAQqI,gBAAkBqE,EAC1B1M,EAAQsI,oBAAsBoE,EAE9B1M,EAAQmI,UAAY,SAAUlL,GAAQ,MAAO,EAAG,EAEhD+C,EAAQiN,QAAU,SAAUhQ,GACxB,MAAM,IAAIzQ,MAAM,mCACpB,EAEAwT,EAAQkN,IAAM,WAAc,MAAO,GAAI,EACvClN,EAAQmN,MAAQ,SAAU3b,GACtB,MAAM,IAAIhF,MAAM,iCACpB,EACAwT,EAAQoN,MAAQ,WAAa,OAAO,CAAG,kBCtLvC,IAAIC,EAEJrO,EAAOvU,QAAoC,mBAAnB6iB,eACpBA,eAAelG,KAAuB,oBAAXjH,OAAyBA,OAAS,EAAAoN,GAE7DC,IAAOH,IAAYA,EAAUnI,QAAQC,YACpCsI,KAAKD,GACLE,OAAM3J,GAAO8H,YAAW,KAAQ,MAAM9H,IAAO,gDCJ9C4J,EAAY,MAIZC,EAAa,WAMjB,IAAI1gB,EAAS,eACT2gB,EAAS,EAAAN,EAAOM,QAAU,EAAAN,EAAOO,SAEjCD,GAAUA,EAAOE,gBACnB/O,EAAOvU,QAKT,SAAsByF,EAAMsd,GAE1B,GAAItd,EAAO0d,EAAY,MAAM,IAAIpgB,WAAW,mCAE5C,IAAI6J,EAAQnK,EAAOc,YAAYkC,GAE/B,GAAIA,EAAO,EACT,GAAIA,EAAOyd,EAET,IAAK,IAAIK,EAAY,EAAGA,EAAY9d,EAAM8d,GAAaL,EAGrDE,EAAOE,gBAAgB1W,EAAM7I,MAAMwf,EAAWA,EAAYL,SAG5DE,EAAOE,gBAAgB1W,GAI3B,GAAkB,mBAAPmW,EACT,OAAOxN,EAAQ2M,UAAS,WACtBa,EAAG,KAAMnW,EACX,IAGF,OAAOA,CACT,EA7BE2H,EAAOvU,QAVT,WACE,MAAM,IAAI+B,MAAM,iHAClB,yBCRA,IAAIyhB,EAAQ,CAAC,EAEb,SAASC,EAAgB3hB,EAAM4Q,EAASP,GACjCA,IACHA,EAAOpQ,OAWT,IAAI2hB,EAEJ,SAAUC,GAnBZ,IAAwBC,EAAUC,EAsB9B,SAASH,EAAUI,EAAMC,EAAMC,GAC7B,OAAOL,EAAM1c,KAAKd,KAdtB,SAAoB2d,EAAMC,EAAMC,GAC9B,MAAuB,iBAAZtR,EACFA,EAEAA,EAAQoR,EAAMC,EAAMC,EAE/B,CAQ4B9R,CAAW4R,EAAMC,EAAMC,KAAU7d,IAC3D,CAEA,OA1B8B0d,EAoBJF,GApBNC,EAoBLF,GApBsCvgB,UAAYF,OAAOwW,OAAOoK,EAAW1gB,WAAYygB,EAASzgB,UAAUiP,YAAcwR,EAAUA,EAASK,UAAYJ,EA0B/JH,CACT,CARA,CAQEvR,GAEFuR,EAAUvgB,UAAUqP,KAAOL,EAAKK,KAChCkR,EAAUvgB,UAAUrB,KAAOA,EAC3B0hB,EAAM1hB,GAAQ4hB,CAChB,CAGA,SAASQ,EAAMC,EAAUC,GACvB,GAAIviB,MAAMuD,QAAQ+e,GAAW,CAC3B,IAAIrjB,EAAMqjB,EAAShjB,OAKnB,OAJAgjB,EAAWA,EAASvL,KAAI,SAAUnY,GAChC,OAAO6G,OAAO7G,EAChB,IAEIK,EAAM,EACD,UAAUqK,OAAOiZ,EAAO,KAAKjZ,OAAOgZ,EAASpgB,MAAM,EAAGjD,EAAM,GAAGa,KAAK,MAAO,SAAWwiB,EAASrjB,EAAM,GAC3F,IAARA,EACF,UAAUqK,OAAOiZ,EAAO,KAAKjZ,OAAOgZ,EAAS,GAAI,QAAQhZ,OAAOgZ,EAAS,IAEzE,MAAMhZ,OAAOiZ,EAAO,KAAKjZ,OAAOgZ,EAAS,GAEpD,CACE,MAAO,MAAMhZ,OAAOiZ,EAAO,KAAKjZ,OAAO7D,OAAO6c,GAElD,CA6BAV,EAAgB,yBAAyB,SAAUjR,EAAM/O,GACvD,MAAO,cAAgBA,EAAQ,4BAA8B+O,EAAO,GACtE,GAAGlP,WACHmgB,EAAgB,wBAAwB,SAAUjR,EAAM2R,EAAUtgB,GAEhE,IAAIwgB,EA/BmBC,EAAQjZ,EAwC3B8H,EAEJ,GATwB,iBAAbgR,IAjCYG,EAiCkC,OAAVH,EAhCpChc,QAAQkD,GAAOA,EAAM,EAAI,GAAKA,EAAKiZ,EAAOnjB,UAAYmjB,IAiC/DD,EAAa,cACbF,EAAWA,EAASrY,QAAQ,QAAS,KAErCuY,EAAa,UAhCjB,SAAkB9b,EAAK+b,EAAQC,GAK7B,YAJiBtf,IAAbsf,GAA0BA,EAAWhc,EAAIpH,UAC3CojB,EAAWhc,EAAIpH,QAGVoH,EAAIiQ,UAAU+L,EAAWD,EAAOnjB,OAAQojB,KAAcD,CAC/D,CA+BME,CAAShS,EAAM,aAEjBW,EAAM,OAAOhI,OAAOqH,EAAM,KAAKrH,OAAOkZ,EAAY,KAAKlZ,OAAO+Y,EAAMC,EAAU,aACzE,CACL,IAAIhf,EAhCR,SAAkBoD,EAAK+b,EAAQriB,GAK7B,MAJqB,iBAAVA,IACTA,EAAQ,KAGNA,EAAQqiB,EAAOnjB,OAASoH,EAAIpH,UAGS,IAAhCoH,EAAIvG,QAAQsiB,EAAQriB,EAE/B,CAsBeoK,CAASmG,EAAM,KAAO,WAAa,WAC9CW,EAAM,QAAShI,OAAOqH,EAAM,MAAOrH,OAAOhG,EAAM,KAAKgG,OAAOkZ,EAAY,KAAKlZ,OAAO+Y,EAAMC,EAAU,QACtG,CAGA,OADAhR,GAAO,mBAAmBhI,cAActH,EAE1C,GAAGP,WACHmgB,EAAgB,4BAA6B,2BAC7CA,EAAgB,8BAA8B,SAAUjR,GACtD,MAAO,OAASA,EAAO,4BACzB,IACAiR,EAAgB,6BAA8B,mBAC9CA,EAAgB,wBAAwB,SAAUjR,GAChD,MAAO,eAAiBA,EAAO,+BACjC,IACAiR,EAAgB,wBAAyB,kCACzCA,EAAgB,yBAA0B,6BAC1CA,EAAgB,6BAA8B,mBAC9CA,EAAgB,yBAA0B,sCAAuCngB,WACjFmgB,EAAgB,wBAAwB,SAAUrgB,GAChD,MAAO,qBAAuBA,CAChC,GAAGE,WACHmgB,EAAgB,qCAAsC,oCACtDlP,EAAOvU,QAAQ,EAAQwjB,6CCjGnBiB,EAAaxhB,OAAO+V,MAAQ,SAAUlU,GACxC,IAAIkU,EAAO,GACX,IAAK,IAAIE,KAAOpU,EAAKkU,EAAKxX,KAAK0X,GAC/B,OAAOF,CACT,EAGAzE,EAAOvU,QAAU0kB,EACjB,IAAIC,EAAW,EAAQ,MACnBC,EAAW,EAAQ,MACvB,EAAQ,KAAR,CAAoBF,EAAQC,GAI1B,IADA,IAAI3L,EAAOyL,EAAWG,EAASzhB,WACtB4T,EAAI,EAAGA,EAAIiC,EAAK7X,OAAQ4V,IAAK,CACpC,IAAI8N,EAAS7L,EAAKjC,GACb2N,EAAOvhB,UAAU0hB,KAASH,EAAOvhB,UAAU0hB,GAAUD,EAASzhB,UAAU0hB,GAC/E,CAEF,SAASH,EAAOnE,GACd,KAAMpa,gBAAgBue,GAAS,OAAO,IAAIA,EAAOnE,GACjDoE,EAAS1d,KAAKd,KAAMoa,GACpBqE,EAAS3d,KAAKd,KAAMoa,GACpBpa,KAAK2e,eAAgB,EACjBvE,KACuB,IAArBA,EAAQwE,WAAoB5e,KAAK4e,UAAW,IACvB,IAArBxE,EAAQjO,WAAoBnM,KAAKmM,UAAW,IAClB,IAA1BiO,EAAQuE,gBACV3e,KAAK2e,eAAgB,EACrB3e,KAAKoU,KAAK,MAAOyK,IAGvB,CA8BA,SAASA,IAEH7e,KAAK8e,eAAeC,OAIxB3P,EAAQ2M,SAASiD,EAAShf,KAC5B,CACA,SAASgf,EAAQ3N,GACfA,EAAKtV,KACP,CAvCAe,OAAOuH,eAAeka,EAAOvhB,UAAW,wBAAyB,CAI/DsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAK8e,eAAeG,aAC7B,IAEFniB,OAAOuH,eAAeka,EAAOvhB,UAAW,iBAAkB,CAIxDsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAK8e,gBAAkB9e,KAAK8e,eAAeI,WACpD,IAEFpiB,OAAOuH,eAAeka,EAAOvhB,UAAW,iBAAkB,CAIxDsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAK8e,eAAe9jB,MAC7B,IAeF8B,OAAOuH,eAAeka,EAAOvhB,UAAW,YAAa,CAInDsH,YAAY,EACZC,IAAK,WACH,YAA4BzF,IAAxBkB,KAAKmf,qBAAwDrgB,IAAxBkB,KAAK8e,iBAGvC9e,KAAKmf,eAAeC,WAAapf,KAAK8e,eAAeM,UAC9D,EACAja,IAAK,SAAa7H,QAGYwB,IAAxBkB,KAAKmf,qBAAwDrgB,IAAxBkB,KAAK8e,iBAM9C9e,KAAKmf,eAAeC,UAAY9hB,EAChC0C,KAAK8e,eAAeM,UAAY9hB,EAClC,iCCjGF8Q,EAAOvU,QAAUwlB,EACjB,IAAIC,EAAY,EAAQ,MAExB,SAASD,EAAYjF,GACnB,KAAMpa,gBAAgBqf,GAAc,OAAO,IAAIA,EAAYjF,GAC3DkF,EAAUxe,KAAKd,KAAMoa,EACvB,CAJA,EAAQ,KAAR,CAAoBiF,EAAaC,GAKjCD,EAAYriB,UAAUuiB,WAAa,SAAUC,EAAOhiB,EAAUof,GAC5DA,EAAG,KAAM4C,EACX,mCCVIjB,YAHJnQ,EAAOvU,QAAU2kB,EAMjBA,EAASiB,cAAgBA,EAGhB,qBAAT,IACIC,EAAkB,SAAyBrL,EAASrV,GACtD,OAAOqV,EAAQkD,UAAUvY,GAAMhE,MACjC,EAII2kB,EAAS,EAAQ,MAGjBrjB,EAAS,eACTsjB,QAAmC,IAAX,EAAAjD,EAAyB,EAAAA,EAA2B,oBAAXpN,OAAyBA,OAAyB,oBAAT8B,KAAuBA,KAAO,CAAC,GAAG5V,YAAc,WAAa,EAS3K,IACIiV,EADAmP,EAAY,EAAQ,MAGtBnP,EADEmP,GAAaA,EAAUC,SACjBD,EAAUC,SAAS,UAEnB,WAAkB,EAI5B,IAWIC,EACAC,EACA3iB,EAbA4iB,EAAa,EAAQ,MACrBC,EAAc,EAAQ,MAExBC,EADa,EAAQ,MACOA,iBAC1BC,EAAiB,UACnBxT,EAAuBwT,EAAexT,qBACtCyT,EAA4BD,EAAeC,0BAC3CC,EAA6BF,EAAeE,2BAC5CC,EAAqCH,EAAeG,mCAMtD,EAAQ,KAAR,CAAoB/B,EAAUmB,GAC9B,IAAIa,EAAiBN,EAAYM,eAC7BC,EAAe,CAAC,QAAS,QAAS,UAAW,QAAS,UAY1D,SAAShB,EAAcrF,EAASsG,EAAQC,GACtCpC,EAASA,GAAU,EAAQ,MAC3BnE,EAAUA,GAAW,CAAC,EAOE,kBAAbuG,IAAwBA,EAAWD,aAAkBnC,GAIhEve,KAAK4gB,aAAexG,EAAQwG,WACxBD,IAAU3gB,KAAK4gB,WAAa5gB,KAAK4gB,cAAgBxG,EAAQyG,oBAI7D7gB,KAAKif,cAAgBkB,EAAiBngB,KAAMoa,EAAS,wBAAyBuG,GAK9E3gB,KAAK5B,OAAS,IAAI6hB,EAClBjgB,KAAKhF,OAAS,EACdgF,KAAK8gB,MAAQ,KACb9gB,KAAK+gB,WAAa,EAClB/gB,KAAKghB,QAAU,KACfhhB,KAAK+e,OAAQ,EACb/e,KAAKihB,YAAa,EAClBjhB,KAAKkhB,SAAU,EAMflhB,KAAKmhB,MAAO,EAIZnhB,KAAKohB,cAAe,EACpBphB,KAAKqhB,iBAAkB,EACvBrhB,KAAKshB,mBAAoB,EACzBthB,KAAKuhB,iBAAkB,EACvBvhB,KAAKwhB,QAAS,EAGdxhB,KAAKyhB,WAAkC,IAAtBrH,EAAQqH,UAGzBzhB,KAAK0hB,cAAgBtH,EAAQsH,YAG7B1hB,KAAKof,WAAY,EAKjBpf,KAAK2hB,gBAAkBvH,EAAQuH,iBAAmB,OAGlD3hB,KAAK4hB,WAAa,EAGlB5hB,KAAK6hB,aAAc,EACnB7hB,KAAK8hB,QAAU,KACf9hB,KAAKxC,SAAW,KACZ4c,EAAQ5c,WACLuiB,IAAeA,EAAgB,WACpC/f,KAAK8hB,QAAU,IAAI/B,EAAc3F,EAAQ5c,UACzCwC,KAAKxC,SAAW4c,EAAQ5c,SAE5B,CACA,SAASghB,EAASpE,GAEhB,GADAmE,EAASA,GAAU,EAAQ,QACrBve,gBAAgBwe,GAAW,OAAO,IAAIA,EAASpE,GAIrD,IAAIuG,EAAW3gB,gBAAgBue,EAC/Bve,KAAKmf,eAAiB,IAAIM,EAAcrF,EAASpa,KAAM2gB,GAGvD3gB,KAAK4e,UAAW,EACZxE,IAC0B,mBAAjBA,EAAQhZ,OAAqBpB,KAAK+hB,MAAQ3H,EAAQhZ,MAC9B,mBAApBgZ,EAAQ/J,UAAwBrQ,KAAKgiB,SAAW5H,EAAQ/J,UAErEsP,EAAO7e,KAAKd,KACd,CAwDA,SAASiiB,EAAiBvB,EAAQlB,EAAOhiB,EAAU0kB,EAAYC,GAC7DzR,EAAM,mBAAoB8O,GAC1B,IAKMnI,EALFf,EAAQoK,EAAOvB,eACnB,GAAc,OAAVK,EACFlJ,EAAM4K,SAAU,EAuNpB,SAAoBR,EAAQpK,GAE1B,GADA5F,EAAM,cACF4F,EAAMyI,MAAO,OACjB,GAAIzI,EAAMwL,QAAS,CACjB,IAAItC,EAAQlJ,EAAMwL,QAAQ/lB,MACtByjB,GAASA,EAAMxkB,SACjBsb,EAAMlY,OAAO/C,KAAKmkB,GAClBlJ,EAAMtb,QAAUsb,EAAMsK,WAAa,EAAIpB,EAAMxkB,OAEjD,CACAsb,EAAMyI,OAAQ,EACVzI,EAAM6K,KAIRiB,EAAa1B,IAGbpK,EAAM8K,cAAe,EAChB9K,EAAM+K,kBACT/K,EAAM+K,iBAAkB,EACxBgB,EAAc3B,IAGpB,CA9OI4B,CAAW5B,EAAQpK,QAInB,GADK6L,IAAgB9K,EA6CzB,SAAsBf,EAAOkJ,GAC3B,IAAInI,EAjPiB1Y,EAkPF6gB,EAjPZljB,EAAOsC,SAASD,IAAQA,aAAeihB,GAiPA,iBAAVJ,QAAgC1gB,IAAV0gB,GAAwBlJ,EAAMsK,aACtFvJ,EAAK,IAAIzK,EAAqB,QAAS,CAAC,SAAU,SAAU,cAAe4S,IAnP/E,IAAuB7gB,EAqPrB,OAAO0Y,CACT,CAnD8BkL,CAAajM,EAAOkJ,IAC1CnI,EACFmJ,EAAeE,EAAQrJ,QAClB,GAAIf,EAAMsK,YAAcpB,GAASA,EAAMxkB,OAAS,EAIrD,GAHqB,iBAAVwkB,GAAuBlJ,EAAMsK,YAAc9jB,OAAOyW,eAAeiM,KAAWljB,EAAOU,YAC5FwiB,EA3MR,SAA6BA,GAC3B,OAAOljB,EAAOe,KAAKmiB,EACrB,CAyMgBgD,CAAoBhD,IAE1B0C,EACE5L,EAAM2K,WAAYT,EAAeE,EAAQ,IAAIH,GAA2CkC,EAAS/B,EAAQpK,EAAOkJ,GAAO,QACtH,GAAIlJ,EAAMyI,MACfyB,EAAeE,EAAQ,IAAIL,OACtB,IAAI/J,EAAM8I,UACf,OAAO,EAEP9I,EAAM4K,SAAU,EACZ5K,EAAMwL,UAAYtkB,GACpBgiB,EAAQlJ,EAAMwL,QAAQnkB,MAAM6hB,GACxBlJ,EAAMsK,YAA+B,IAAjBpB,EAAMxkB,OAAcynB,EAAS/B,EAAQpK,EAAOkJ,GAAO,GAAYkD,EAAchC,EAAQpK,IAE7GmM,EAAS/B,EAAQpK,EAAOkJ,GAAO,EAEnC,MACU0C,IACV5L,EAAM4K,SAAU,EAChBwB,EAAchC,EAAQpK,IAO1B,OAAQA,EAAMyI,QAAUzI,EAAMtb,OAASsb,EAAM2I,eAAkC,IAAjB3I,EAAMtb,OACtE,CACA,SAASynB,EAAS/B,EAAQpK,EAAOkJ,EAAO0C,GAClC5L,EAAM0K,SAA4B,IAAjB1K,EAAMtb,SAAiBsb,EAAM6K,MAChD7K,EAAMsL,WAAa,EACnBlB,EAAO3K,KAAK,OAAQyJ,KAGpBlJ,EAAMtb,QAAUsb,EAAMsK,WAAa,EAAIpB,EAAMxkB,OACzCknB,EAAY5L,EAAMlY,OAAOuT,QAAQ6N,GAAYlJ,EAAMlY,OAAO/C,KAAKmkB,GAC/DlJ,EAAM8K,cAAcgB,EAAa1B,IAEvCgC,EAAchC,EAAQpK,EACxB,CA3GAxZ,OAAOuH,eAAema,EAASxhB,UAAW,YAAa,CAIrDsH,YAAY,EACZC,IAAK,WACH,YAA4BzF,IAAxBkB,KAAKmf,gBAGFnf,KAAKmf,eAAeC,SAC7B,EACAja,IAAK,SAAa7H,GAGX0C,KAAKmf,iBAMVnf,KAAKmf,eAAeC,UAAY9hB,EAClC,IAEFkhB,EAASxhB,UAAUqT,QAAU6P,EAAY7P,QACzCmO,EAASxhB,UAAU2lB,WAAazC,EAAY0C,UAC5CpE,EAASxhB,UAAUglB,SAAW,SAAU7O,EAAKyJ,GAC3CA,EAAGzJ,EACL,EAMAqL,EAASxhB,UAAU3B,KAAO,SAAUmkB,EAAOhiB,GACzC,IACI2kB,EADA7L,EAAQtW,KAAKmf,eAcjB,OAZK7I,EAAMsK,WAUTuB,GAAiB,EATI,iBAAV3C,KACThiB,EAAWA,GAAY8Y,EAAMqL,mBACZrL,EAAM9Y,WACrBgiB,EAAQljB,EAAOe,KAAKmiB,EAAOhiB,GAC3BA,EAAW,IAEb2kB,GAAiB,GAKdF,EAAiBjiB,KAAMwf,EAAOhiB,GAAU,EAAO2kB,EACxD,EAGA3D,EAASxhB,UAAU2U,QAAU,SAAU6N,GACrC,OAAOyC,EAAiBjiB,KAAMwf,EAAO,MAAM,GAAM,EACnD,EA6DAhB,EAASxhB,UAAU6lB,SAAW,WAC5B,OAAuC,IAAhC7iB,KAAKmf,eAAe6B,OAC7B,EAGAxC,EAASxhB,UAAU8lB,YAAc,SAAUC,GACpChD,IAAeA,EAAgB,WACpC,IAAI+B,EAAU,IAAI/B,EAAcgD,GAChC/iB,KAAKmf,eAAe2C,QAAUA,EAE9B9hB,KAAKmf,eAAe3hB,SAAWwC,KAAKmf,eAAe2C,QAAQtkB,SAK3D,IAFA,IAAIwlB,EAAIhjB,KAAKmf,eAAe/gB,OAAO6kB,KAC/BC,EAAU,GACD,OAANF,GACLE,GAAWpB,EAAQnkB,MAAMqlB,EAAE9jB,MAC3B8jB,EAAIA,EAAEG,KAKR,OAHAnjB,KAAKmf,eAAe/gB,OAAOglB,QACX,KAAZF,GAAgBljB,KAAKmf,eAAe/gB,OAAO/C,KAAK6nB,GACpDljB,KAAKmf,eAAenkB,OAASkoB,EAAQloB,OAC9BgF,IACT,EAGA,IAAIqjB,EAAU,WAqBd,SAASC,EAAc9iB,EAAG8V,GACxB,OAAI9V,GAAK,GAAsB,IAAjB8V,EAAMtb,QAAgBsb,EAAMyI,MAAc,EACpDzI,EAAMsK,WAAmB,EACzBpgB,GAAMA,EAEJ8V,EAAM0K,SAAW1K,EAAMtb,OAAesb,EAAMlY,OAAO6kB,KAAK/jB,KAAKlE,OAAmBsb,EAAMtb,QAGxFwF,EAAI8V,EAAM2I,gBAAe3I,EAAM2I,cA5BrC,SAAiCze,GAe/B,OAdIA,GAAK6iB,EAEP7iB,EAAI6iB,GAIJ7iB,IACAA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,GACXA,KAEKA,CACT,CAYqD+iB,CAAwB/iB,IACvEA,GAAK8V,EAAMtb,OAAewF,EAEzB8V,EAAMyI,MAIJzI,EAAMtb,QAHXsb,EAAM8K,cAAe,EACd,GAGX,CA6HA,SAASgB,EAAa1B,GACpB,IAAIpK,EAAQoK,EAAOvB,eACnBzO,EAAM,eAAgB4F,EAAM8K,aAAc9K,EAAM+K,iBAChD/K,EAAM8K,cAAe,EAChB9K,EAAM+K,kBACT3Q,EAAM,eAAgB4F,EAAM0K,SAC5B1K,EAAM+K,iBAAkB,EACxBjS,EAAQ2M,SAASsG,EAAe3B,GAEpC,CACA,SAAS2B,EAAc3B,GACrB,IAAIpK,EAAQoK,EAAOvB,eACnBzO,EAAM,gBAAiB4F,EAAM8I,UAAW9I,EAAMtb,OAAQsb,EAAMyI,OACvDzI,EAAM8I,YAAc9I,EAAMtb,SAAUsb,EAAMyI,QAC7C2B,EAAO3K,KAAK,YACZO,EAAM+K,iBAAkB,GAS1B/K,EAAM8K,cAAgB9K,EAAM0K,UAAY1K,EAAMyI,OAASzI,EAAMtb,QAAUsb,EAAM2I,cAC7EuE,EAAK9C,EACP,CAQA,SAASgC,EAAchC,EAAQpK,GACxBA,EAAMuL,cACTvL,EAAMuL,aAAc,EACpBzS,EAAQ2M,SAAS0H,EAAgB/C,EAAQpK,GAE7C,CACA,SAASmN,EAAe/C,EAAQpK,GAwB9B,MAAQA,EAAM4K,UAAY5K,EAAMyI,QAAUzI,EAAMtb,OAASsb,EAAM2I,eAAiB3I,EAAM0K,SAA4B,IAAjB1K,EAAMtb,SAAe,CACpH,IAAIL,EAAM2b,EAAMtb,OAGhB,GAFA0V,EAAM,wBACNgQ,EAAOtf,KAAK,GACRzG,IAAQ2b,EAAMtb,OAEhB,KACJ,CACAsb,EAAMuL,aAAc,CACtB,CAgPA,SAAS6B,EAAwBrS,GAC/B,IAAIiF,EAAQjF,EAAK8N,eACjB7I,EAAMgL,kBAAoBjQ,EAAKyF,cAAc,YAAc,EACvDR,EAAMiL,kBAAoBjL,EAAMkL,OAGlClL,EAAM0K,SAAU,EAGP3P,EAAKyF,cAAc,QAAU,GACtCzF,EAAKsS,QAET,CACA,SAASC,EAAiBvS,GACxBX,EAAM,4BACNW,EAAKjQ,KAAK,EACZ,CAuBA,SAASyiB,EAAQnD,EAAQpK,GACvB5F,EAAM,SAAU4F,EAAM4K,SACjB5K,EAAM4K,SACTR,EAAOtf,KAAK,GAEdkV,EAAMiL,iBAAkB,EACxBb,EAAO3K,KAAK,UACZyN,EAAK9C,GACDpK,EAAM0K,UAAY1K,EAAM4K,SAASR,EAAOtf,KAAK,EACnD,CAWA,SAASoiB,EAAK9C,GACZ,IAAIpK,EAAQoK,EAAOvB,eAEnB,IADAzO,EAAM,OAAQ4F,EAAM0K,SACb1K,EAAM0K,SAA6B,OAAlBN,EAAOtf,SACjC,CAmHA,SAAS0iB,EAAStjB,EAAG8V,GAEnB,OAAqB,IAAjBA,EAAMtb,OAAqB,MAE3Bsb,EAAMsK,WAAYta,EAAMgQ,EAAMlY,OAAOyZ,SAAkBrX,GAAKA,GAAK8V,EAAMtb,QAEtDsL,EAAfgQ,EAAMwL,QAAexL,EAAMlY,OAAO5C,KAAK,IAAqC,IAAxB8a,EAAMlY,OAAOpD,OAAoBsb,EAAMlY,OAAOqK,QAAmB6N,EAAMlY,OAAO4G,OAAOsR,EAAMtb,QACnJsb,EAAMlY,OAAOglB,SAGb9c,EAAMgQ,EAAMlY,OAAO2lB,QAAQvjB,EAAG8V,EAAMwL,SAE/Bxb,GATP,IAAIA,CAUN,CACA,SAAS0d,EAAYtD,GACnB,IAAIpK,EAAQoK,EAAOvB,eACnBzO,EAAM,cAAe4F,EAAM2K,YACtB3K,EAAM2K,aACT3K,EAAMyI,OAAQ,EACd3P,EAAQ2M,SAASkI,EAAe3N,EAAOoK,GAE3C,CACA,SAASuD,EAAc3N,EAAOoK,GAI5B,GAHAhQ,EAAM,gBAAiB4F,EAAM2K,WAAY3K,EAAMtb,SAG1Csb,EAAM2K,YAA+B,IAAjB3K,EAAMtb,SAC7Bsb,EAAM2K,YAAa,EACnBP,EAAO9B,UAAW,EAClB8B,EAAO3K,KAAK,OACRO,EAAMoL,aAAa,CAGrB,IAAIwC,EAASxD,EAAO5B,iBACfoF,GAAUA,EAAOxC,aAAewC,EAAOC,WAC1CzD,EAAOrQ,SAEX,CAEJ,CASA,SAASxU,EAAQuoB,EAAItf,GACnB,IAAK,IAAIxK,EAAI,EAAG+pB,EAAID,EAAGppB,OAAQV,EAAI+pB,EAAG/pB,IACpC,GAAI8pB,EAAG9pB,KAAOwK,EAAG,OAAOxK,EAE1B,OAAQ,CACV,CA1pBAkkB,EAASxhB,UAAUoE,KAAO,SAAUZ,GAClCkQ,EAAM,OAAQlQ,GACdA,EAAIuB,SAASvB,EAAG,IAChB,IAAI8V,EAAQtW,KAAKmf,eACbmF,EAAQ9jB,EAMZ,GALU,IAANA,IAAS8V,EAAM+K,iBAAkB,GAK3B,IAAN7gB,GAAW8V,EAAM8K,gBAA0C,IAAxB9K,EAAM2I,cAAsB3I,EAAMtb,QAAUsb,EAAM2I,cAAgB3I,EAAMtb,OAAS,IAAMsb,EAAMyI,OAGlI,OAFArO,EAAM,qBAAsB4F,EAAMtb,OAAQsb,EAAMyI,OAC3B,IAAjBzI,EAAMtb,QAAgBsb,EAAMyI,MAAOiF,EAAYhkB,MAAWoiB,EAAapiB,MACpE,KAKT,GAAU,KAHVQ,EAAI8iB,EAAc9iB,EAAG8V,KAGNA,EAAMyI,MAEnB,OADqB,IAAjBzI,EAAMtb,QAAcgpB,EAAYhkB,MAC7B,KA0BT,IA2BIsG,EA3BAie,EAASjO,EAAM8K,aA6CnB,OA5CA1Q,EAAM,gBAAiB6T,IAGF,IAAjBjO,EAAMtb,QAAgBsb,EAAMtb,OAASwF,EAAI8V,EAAM2I,gBAEjDvO,EAAM,6BADN6T,GAAS,GAMPjO,EAAMyI,OAASzI,EAAM4K,QAEvBxQ,EAAM,mBADN6T,GAAS,GAEAA,IACT7T,EAAM,WACN4F,EAAM4K,SAAU,EAChB5K,EAAM6K,MAAO,EAEQ,IAAjB7K,EAAMtb,SAAcsb,EAAM8K,cAAe,GAE7CphB,KAAK+hB,MAAMzL,EAAM2I,eACjB3I,EAAM6K,MAAO,EAGR7K,EAAM4K,UAAS1gB,EAAI8iB,EAAcgB,EAAOhO,KAInC,QADDhQ,EAAP9F,EAAI,EAASsjB,EAAStjB,EAAG8V,GAAkB,OAE7CA,EAAM8K,aAAe9K,EAAMtb,QAAUsb,EAAM2I,cAC3Cze,EAAI,IAEJ8V,EAAMtb,QAAUwF,EAChB8V,EAAMsL,WAAa,GAEA,IAAjBtL,EAAMtb,SAGHsb,EAAMyI,QAAOzI,EAAM8K,cAAe,GAGnCkD,IAAU9jB,GAAK8V,EAAMyI,OAAOiF,EAAYhkB,OAElC,OAARsG,GAActG,KAAK+V,KAAK,OAAQzP,GAC7BA,CACT,EA6GAkY,EAASxhB,UAAU+kB,MAAQ,SAAUvhB,GACnCggB,EAAexgB,KAAM,IAAIsgB,EAA2B,WACtD,EACA9B,EAASxhB,UAAUwnB,KAAO,SAAUC,EAAMC,GACxC,IAAIjX,EAAMzN,KACNsW,EAAQtW,KAAKmf,eACjB,OAAQ7I,EAAMyK,YACZ,KAAK,EACHzK,EAAMwK,MAAQ2D,EACd,MACF,KAAK,EACHnO,EAAMwK,MAAQ,CAACxK,EAAMwK,MAAO2D,GAC5B,MACF,QACEnO,EAAMwK,MAAMzlB,KAAKopB,GAGrBnO,EAAMyK,YAAc,EACpBrQ,EAAM,wBAAyB4F,EAAMyK,WAAY2D,GACjD,IACIC,IADUD,IAA6B,IAAjBA,EAAS3oB,MAAkB0oB,IAASrV,EAAQwV,QAAUH,IAASrV,EAAQyV,OAC7EhG,EAAQiG,EAG5B,SAASC,EAASnG,EAAUoG,GAC1BtU,EAAM,YACFkO,IAAanR,GACXuX,IAAwC,IAA1BA,EAAWC,aAC3BD,EAAWC,YAAa,EAkB5BvU,EAAM,WAEN+T,EAAK/P,eAAe,QAASwQ,GAC7BT,EAAK/P,eAAe,SAAUyQ,GAC9BV,EAAK/P,eAAe,QAAS0Q,GAC7BX,EAAK/P,eAAe,QAAS2Q,GAC7BZ,EAAK/P,eAAe,SAAUqQ,GAC9BtX,EAAIiH,eAAe,MAAOmK,GAC1BpR,EAAIiH,eAAe,MAAOoQ,GAC1BrX,EAAIiH,eAAe,OAAQ4Q,GAC3BC,GAAY,GAORjP,EAAMsL,YAAgB6C,EAAK3F,iBAAkB2F,EAAK3F,eAAe0G,WAAYJ,IA/BnF,CACA,SAASvG,IACPnO,EAAM,SACN+T,EAAK1oB,KACP,CAdIua,EAAM2K,WAAY7R,EAAQ2M,SAAS4I,GAAYlX,EAAI2G,KAAK,MAAOuQ,GACnEF,EAAK1P,GAAG,SAAUgQ,GAmBlB,IAAIK,EAgFN,SAAqB3X,GACnB,OAAO,WACL,IAAI6I,EAAQ7I,EAAI0R,eAChBzO,EAAM,cAAe4F,EAAMsL,YACvBtL,EAAMsL,YAAYtL,EAAMsL,aACH,IAArBtL,EAAMsL,YAAoBlC,EAAgBjS,EAAK,UACjD6I,EAAM0K,SAAU,EAChBwC,EAAK/V,GAET,CACF,CA1FgBgY,CAAYhY,GAC1BgX,EAAK1P,GAAG,QAASqQ,GACjB,IAAIG,GAAY,EAsBhB,SAASD,EAAO9F,GACd9O,EAAM,UACN,IAAIpK,EAAMme,EAAK9mB,MAAM6hB,GACrB9O,EAAM,aAAcpK,IACR,IAARA,KAKwB,IAArBgQ,EAAMyK,YAAoBzK,EAAMwK,QAAU2D,GAAQnO,EAAMyK,WAAa,IAAqC,IAAhCllB,EAAQya,EAAMwK,MAAO2D,MAAkBc,IACpH7U,EAAM,8BAA+B4F,EAAMsL,YAC3CtL,EAAMsL,cAERnU,EAAIiY,QAER,CAIA,SAASL,EAAQhO,GACf3G,EAAM,UAAW2G,GACjByN,IACAL,EAAK/P,eAAe,QAAS2Q,GACU,IAAnC3F,EAAgB+E,EAAM,UAAgBjE,EAAeiE,EAAMpN,EACjE,CAMA,SAAS6N,IACPT,EAAK/P,eAAe,SAAUyQ,GAC9BL,GACF,CAEA,SAASK,IACPzU,EAAM,YACN+T,EAAK/P,eAAe,QAASwQ,GAC7BJ,GACF,CAEA,SAASA,IACPpU,EAAM,UACNjD,EAAIqX,OAAOL,EACb,CAUA,OAvDAhX,EAAIsH,GAAG,OAAQuQ,GAniBjB,SAAyBjR,EAASsR,EAAO7X,GAGvC,GAAuC,mBAA5BuG,EAAQoD,gBAAgC,OAAOpD,EAAQoD,gBAAgBkO,EAAO7X,GAMpFuG,EAAQY,SAAYZ,EAAQY,QAAQ0Q,GAAuCjqB,MAAMuD,QAAQoV,EAAQY,QAAQ0Q,IAAStR,EAAQY,QAAQ0Q,GAAOhU,QAAQ7D,GAASuG,EAAQY,QAAQ0Q,GAAS,CAAC7X,EAAIuG,EAAQY,QAAQ0Q,IAA5JtR,EAAQU,GAAG4Q,EAAO7X,EACrE,CAqjBE2J,CAAgBgN,EAAM,QAASY,GAO/BZ,EAAKrQ,KAAK,QAAS8Q,GAMnBT,EAAKrQ,KAAK,SAAU+Q,GAOpBV,EAAK1O,KAAK,OAAQtI,GAGb6I,EAAM0K,UACTtQ,EAAM,eACNjD,EAAIkW,UAECc,CACT,EAYAjG,EAASxhB,UAAU8nB,OAAS,SAAUL,GACpC,IAAInO,EAAQtW,KAAKmf,eACb6F,EAAa,CACfC,YAAY,GAId,GAAyB,IAArB3O,EAAMyK,WAAkB,OAAO/gB,KAGnC,GAAyB,IAArBsW,EAAMyK,WAER,OAAI0D,GAAQA,IAASnO,EAAMwK,QACtB2D,IAAMA,EAAOnO,EAAMwK,OAGxBxK,EAAMwK,MAAQ,KACdxK,EAAMyK,WAAa,EACnBzK,EAAM0K,SAAU,EACZyD,GAAMA,EAAK1O,KAAK,SAAU/V,KAAMglB,IAPKhlB,KAa3C,IAAKykB,EAAM,CAET,IAAImB,EAAQtP,EAAMwK,MACdnmB,EAAM2b,EAAMyK,WAChBzK,EAAMwK,MAAQ,KACdxK,EAAMyK,WAAa,EACnBzK,EAAM0K,SAAU,EAChB,IAAK,IAAI1mB,EAAI,EAAGA,EAAIK,EAAKL,IAAKsrB,EAAMtrB,GAAGyb,KAAK,SAAU/V,KAAM,CAC1DilB,YAAY,IAEd,OAAOjlB,IACT,CAGA,IAAIyO,EAAQ5S,EAAQya,EAAMwK,MAAO2D,GACjC,OAAe,IAAXhW,IACJ6H,EAAMwK,MAAMtS,OAAOC,EAAO,GAC1B6H,EAAMyK,YAAc,EACK,IAArBzK,EAAMyK,aAAkBzK,EAAMwK,MAAQxK,EAAMwK,MAAM,IACtD2D,EAAK1O,KAAK,SAAU/V,KAAMglB,IAJDhlB,IAM3B,EAIAwe,EAASxhB,UAAU+X,GAAK,SAAU8Q,EAAI/X,GACpC,IAAI9K,EAAM2c,EAAO3iB,UAAU+X,GAAGjU,KAAKd,KAAM6lB,EAAI/X,GACzCwI,EAAQtW,KAAKmf,eAqBjB,MApBW,SAAP0G,GAGFvP,EAAMgL,kBAAoBthB,KAAK8W,cAAc,YAAc,GAGrC,IAAlBR,EAAM0K,SAAmBhhB,KAAK2jB,UAClB,aAAPkC,IACJvP,EAAM2K,YAAe3K,EAAMgL,oBAC9BhL,EAAMgL,kBAAoBhL,EAAM8K,cAAe,EAC/C9K,EAAM0K,SAAU,EAChB1K,EAAM+K,iBAAkB,EACxB3Q,EAAM,cAAe4F,EAAMtb,OAAQsb,EAAM4K,SACrC5K,EAAMtb,OACRonB,EAAapiB,MACHsW,EAAM4K,SAChB9R,EAAQ2M,SAAS6H,EAAkB5jB,QAIlCgD,CACT,EACAwb,EAASxhB,UAAUwa,YAAcgH,EAASxhB,UAAU+X,GACpDyJ,EAASxhB,UAAU0X,eAAiB,SAAUmR,EAAI/X,GAChD,IAAI9K,EAAM2c,EAAO3iB,UAAU0X,eAAe5T,KAAKd,KAAM6lB,EAAI/X,GAUzD,MATW,aAAP+X,GAOFzW,EAAQ2M,SAAS2H,EAAyB1jB,MAErCgD,CACT,EACAwb,EAASxhB,UAAUib,mBAAqB,SAAU4N,GAChD,IAAI7iB,EAAM2c,EAAO3iB,UAAUib,mBAAmBtU,MAAM3D,KAAMN,WAU1D,MATW,aAAPmmB,QAA4B/mB,IAAP+mB,GAOvBzW,EAAQ2M,SAAS2H,EAAyB1jB,MAErCgD,CACT,EAqBAwb,EAASxhB,UAAU2mB,OAAS,WAC1B,IAAIrN,EAAQtW,KAAKmf,eAUjB,OATK7I,EAAM0K,UACTtQ,EAAM,UAIN4F,EAAM0K,SAAW1K,EAAMgL,kBAM3B,SAAgBZ,EAAQpK,GACjBA,EAAMiL,kBACTjL,EAAMiL,iBAAkB,EACxBnS,EAAQ2M,SAAS8H,EAASnD,EAAQpK,GAEtC,CAVIqN,CAAO3jB,KAAMsW,IAEfA,EAAMkL,QAAS,EACRxhB,IACT,EAiBAwe,EAASxhB,UAAU0oB,MAAQ,WAQzB,OAPAhV,EAAM,wBAAyB1Q,KAAKmf,eAAe6B,UACf,IAAhChhB,KAAKmf,eAAe6B,UACtBtQ,EAAM,SACN1Q,KAAKmf,eAAe6B,SAAU,EAC9BhhB,KAAK+V,KAAK,UAEZ/V,KAAKmf,eAAeqC,QAAS,EACtBxhB,IACT,EAUAwe,EAASxhB,UAAU8oB,KAAO,SAAUpF,GAClC,IAAIqF,EAAQ/lB,KACRsW,EAAQtW,KAAKmf,eACbqC,GAAS,EAwBb,IAAK,IAAIlnB,KAvBTomB,EAAO3L,GAAG,OAAO,WAEf,GADArE,EAAM,eACF4F,EAAMwL,UAAYxL,EAAMyI,MAAO,CACjC,IAAIS,EAAQlJ,EAAMwL,QAAQ/lB,MACtByjB,GAASA,EAAMxkB,QAAQ+qB,EAAM1qB,KAAKmkB,EACxC,CACAuG,EAAM1qB,KAAK,KACb,IACAqlB,EAAO3L,GAAG,QAAQ,SAAUyK,IAC1B9O,EAAM,gBACF4F,EAAMwL,UAAStC,EAAQlJ,EAAMwL,QAAQnkB,MAAM6hB,IAG3ClJ,EAAMsK,YAAc,MAACpB,KAAyDlJ,EAAMsK,YAAgBpB,GAAUA,EAAMxkB,UAC9G+qB,EAAM1qB,KAAKmkB,KAEnBgC,GAAS,EACTd,EAAOgF,SAEX,IAIchF,OACI5hB,IAAZkB,KAAK1F,IAAyC,mBAAdomB,EAAOpmB,KACzC0F,KAAK1F,GAAK,SAAoBokB,GAC5B,OAAO,WACL,OAAOgC,EAAOhC,GAAQ/a,MAAM+c,EAAQhhB,UACtC,CACF,CAJU,CAIRpF,IAKN,IAAK,IAAIkG,EAAI,EAAGA,EAAIigB,EAAazlB,OAAQwF,IACvCkgB,EAAO3L,GAAG0L,EAAajgB,GAAIR,KAAK+V,KAAKS,KAAKxW,KAAMygB,EAAajgB,KAY/D,OAPAR,KAAK+hB,MAAQ,SAAUvhB,GACrBkQ,EAAM,gBAAiBlQ,GACnBghB,IACFA,GAAS,EACTd,EAAOiD,SAEX,EACO3jB,IACT,EACsB,mBAAX3D,SACTmiB,EAASxhB,UAAUX,OAAO2pB,eAAiB,WAIzC,YAH0ClnB,IAAtCkhB,IACFA,EAAoC,EAAQ,OAEvCA,EAAkChgB,KAC3C,GAEFlD,OAAOuH,eAAema,EAASxhB,UAAW,wBAAyB,CAIjEsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAKmf,eAAeF,aAC7B,IAEFniB,OAAOuH,eAAema,EAASxhB,UAAW,iBAAkB,CAI1DsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAKmf,gBAAkBnf,KAAKmf,eAAe/gB,MACpD,IAEFtB,OAAOuH,eAAema,EAASxhB,UAAW,kBAAmB,CAI3DsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAKmf,eAAe6B,OAC7B,EACA7b,IAAK,SAAamR,GACZtW,KAAKmf,iBACPnf,KAAKmf,eAAe6B,QAAU1K,EAElC,IAIFkI,EAASyH,UAAYnC,EACrBhnB,OAAOuH,eAAema,EAASxhB,UAAW,iBAAkB,CAI1DsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAKmf,eAAenkB,MAC7B,IA+CoB,mBAAXqB,SACTmiB,EAASnhB,KAAO,SAAU6oB,EAAUC,GAIlC,YAHarnB,IAATzB,IACFA,EAAO,EAAQ,OAEVA,EAAKmhB,EAAU0H,EAAUC,EAClC,gCC17BF/X,EAAOvU,QAAUylB,EACjB,IAAIc,EAAiB,UACnBE,EAA6BF,EAAeE,2BAC5C8F,EAAwBhG,EAAegG,sBACvCC,EAAqCjG,EAAeiG,mCACpDC,EAA8BlG,EAAekG,4BAC3C/H,EAAS,EAAQ,MAErB,SAASgI,EAAelP,EAAInY,GAC1B,IAAIsnB,EAAKxmB,KAAKymB,gBACdD,EAAGE,cAAe,EAClB,IAAI9J,EAAK4J,EAAGG,QACZ,GAAW,OAAP/J,EACF,OAAO5c,KAAK+V,KAAK,QAAS,IAAIqQ,GAEhCI,EAAGI,WAAa,KAChBJ,EAAGG,QAAU,KACD,MAARznB,GAEFc,KAAK3E,KAAK6D,GACZ0d,EAAGvF,GACH,IAAIwP,EAAK7mB,KAAKmf,eACd0H,EAAG3F,SAAU,GACT2F,EAAGzF,cAAgByF,EAAG7rB,OAAS6rB,EAAG5H,gBACpCjf,KAAK+hB,MAAM8E,EAAG5H,cAElB,CACA,SAASK,EAAUlF,GACjB,KAAMpa,gBAAgBsf,GAAY,OAAO,IAAIA,EAAUlF,GACvDmE,EAAOzd,KAAKd,KAAMoa,GAClBpa,KAAKymB,gBAAkB,CACrBF,eAAgBA,EAAe/P,KAAKxW,MACpC8mB,eAAe,EACfJ,cAAc,EACdC,QAAS,KACTC,WAAY,KACZG,cAAe,MAIjB/mB,KAAKmf,eAAeiC,cAAe,EAKnCphB,KAAKmf,eAAegC,MAAO,EACvB/G,IAC+B,mBAAtBA,EAAQ4M,YAA0BhnB,KAAKuf,WAAanF,EAAQ4M,WAC1C,mBAAlB5M,EAAQ6M,QAAsBjnB,KAAKknB,OAAS9M,EAAQ6M,QAIjEjnB,KAAK+U,GAAG,YAAaoS,EACvB,CACA,SAASA,IACP,IAAIpB,EAAQ/lB,KACe,mBAAhBA,KAAKknB,QAA0BlnB,KAAKmf,eAAeC,UAK5DgI,EAAKpnB,KAAM,KAAM,MAJjBA,KAAKknB,QAAO,SAAU7P,EAAInY,GACxBkoB,EAAKrB,EAAO1O,EAAInY,EAClB,GAIJ,CAiDA,SAASkoB,EAAK1G,EAAQrJ,EAAInY,GACxB,GAAImY,EAAI,OAAOqJ,EAAO3K,KAAK,QAASsB,GAQpC,GAPY,MAARnY,GAEFwhB,EAAOrlB,KAAK6D,GAKVwhB,EAAO5B,eAAe9jB,OAAQ,MAAM,IAAIsrB,EAC5C,GAAI5F,EAAO+F,gBAAgBC,aAAc,MAAM,IAAIL,EACnD,OAAO3F,EAAOrlB,KAAK,KACrB,CArHA,EAAQ,KAAR,CAAoBikB,EAAWf,GAyD/Be,EAAUtiB,UAAU3B,KAAO,SAAUmkB,EAAOhiB,GAE1C,OADAwC,KAAKymB,gBAAgBK,eAAgB,EAC9BvI,EAAOvhB,UAAU3B,KAAKyF,KAAKd,KAAMwf,EAAOhiB,EACjD,EAYA8hB,EAAUtiB,UAAUuiB,WAAa,SAAUC,EAAOhiB,EAAUof,GAC1DA,EAAG,IAAI0D,EAA2B,gBACpC,EACAhB,EAAUtiB,UAAUqqB,OAAS,SAAU7H,EAAOhiB,EAAUof,GACtD,IAAI4J,EAAKxmB,KAAKymB,gBAId,GAHAD,EAAGG,QAAU/J,EACb4J,EAAGI,WAAapH,EAChBgH,EAAGO,cAAgBvpB,GACdgpB,EAAGE,aAAc,CACpB,IAAIG,EAAK7mB,KAAKmf,gBACVqH,EAAGM,eAAiBD,EAAGzF,cAAgByF,EAAG7rB,OAAS6rB,EAAG5H,gBAAejf,KAAK+hB,MAAM8E,EAAG5H,cACzF,CACF,EAKAK,EAAUtiB,UAAU+kB,MAAQ,SAAUvhB,GACpC,IAAIgmB,EAAKxmB,KAAKymB,gBACQ,OAAlBD,EAAGI,YAAwBJ,EAAGE,aAMhCF,EAAGM,eAAgB,GALnBN,EAAGE,cAAe,EAClB1mB,KAAKuf,WAAWiH,EAAGI,WAAYJ,EAAGO,cAAeP,EAAGD,gBAMxD,EACAjH,EAAUtiB,UAAUglB,SAAW,SAAU7O,EAAKyJ,GAC5C2B,EAAOvhB,UAAUglB,SAASlhB,KAAKd,KAAMmT,GAAK,SAAUmU,GAClD1K,EAAG0K,EACL,GACF,mCC9HI/I,YAXJ,SAASgJ,EAAcjR,GACrB,IAAIyP,EAAQ/lB,KACZA,KAAKmjB,KAAO,KACZnjB,KAAKwnB,MAAQ,KACbxnB,KAAKynB,OAAS,YA6iBhB,SAAwBC,EAASpR,EAAOnD,GACtC,IAAIqU,EAAQE,EAAQF,MACpBE,EAAQF,MAAQ,KAChB,KAAOA,GAAO,CACZ,IAAI5K,EAAK4K,EAAMG,SACfrR,EAAMsR,YACNhL,EAAGzJ,GACHqU,EAAQA,EAAMrE,IAChB,CAGA7M,EAAMuR,mBAAmB1E,KAAOuE,CAClC,CAxjBII,CAAe/B,EAAOzP,EACxB,CACF,CAnBAlI,EAAOvU,QAAU4kB,EA0BjBA,EAASsJ,cAAgBA,EAGzB,IAAIC,EAAe,CACjBC,UAAW,EAAQ,OAKjBtI,EAAS,EAAQ,MAGjBrjB,EAAS,eACTsjB,QAAmC,IAAX,EAAAjD,EAAyB,EAAAA,EAA2B,oBAAXpN,OAAyBA,OAAyB,oBAAT8B,KAAuBA,KAAO,CAAC,GAAG5V,YAAc,WAAa,EAO3K,IA8IIysB,EA9IAhI,EAAc,EAAQ,MAExBC,EADa,EAAQ,MACOA,iBAC1BC,EAAiB,UACnBxT,EAAuBwT,EAAexT,qBACtC0T,EAA6BF,EAAeE,2BAC5C8F,EAAwBhG,EAAegG,sBACvC+B,EAAyB/H,EAAe+H,uBACxCC,EAAuBhI,EAAegI,qBACtCC,EAAyBjI,EAAeiI,uBACxCC,EAA6BlI,EAAekI,2BAC5CC,EAAuBnI,EAAemI,qBACpC/H,EAAiBN,EAAYM,eAEjC,SAASgI,IAAO,CAChB,SAAST,EAAc3N,EAASsG,EAAQC,GACtCpC,EAASA,GAAU,EAAQ,MAC3BnE,EAAUA,GAAW,CAAC,EAOE,kBAAbuG,IAAwBA,EAAWD,aAAkBnC,GAIhEve,KAAK4gB,aAAexG,EAAQwG,WACxBD,IAAU3gB,KAAK4gB,WAAa5gB,KAAK4gB,cAAgBxG,EAAQqO,oBAK7DzoB,KAAKif,cAAgBkB,EAAiBngB,KAAMoa,EAAS,wBAAyBuG,GAG9E3gB,KAAK0oB,aAAc,EAGnB1oB,KAAKwlB,WAAY,EAEjBxlB,KAAK2oB,QAAS,EAEd3oB,KAAK+e,OAAQ,EAEb/e,KAAKmkB,UAAW,EAGhBnkB,KAAKof,WAAY,EAKjB,IAAIwJ,GAAqC,IAA1BxO,EAAQyO,cACvB7oB,KAAK6oB,eAAiBD,EAKtB5oB,KAAK2hB,gBAAkBvH,EAAQuH,iBAAmB,OAKlD3hB,KAAKhF,OAAS,EAGdgF,KAAK8oB,SAAU,EAGf9oB,KAAK+oB,OAAS,EAMd/oB,KAAKmhB,MAAO,EAKZnhB,KAAKgpB,kBAAmB,EAGxBhpB,KAAKipB,QAAU,SAAU5R,IAsQ3B,SAAiBqJ,EAAQrJ,GACvB,IAAIf,EAAQoK,EAAO5B,eACfqC,EAAO7K,EAAM6K,KACbvE,EAAKtG,EAAMqQ,QACf,GAAkB,mBAAP/J,EAAmB,MAAM,IAAIwJ,EAExC,GAZF,SAA4B9P,GAC1BA,EAAMwS,SAAU,EAChBxS,EAAMqQ,QAAU,KAChBrQ,EAAMtb,QAAUsb,EAAM4S,SACtB5S,EAAM4S,SAAW,CACnB,CAMEC,CAAmB7S,GACfe,GAlCN,SAAsBqJ,EAAQpK,EAAO6K,EAAM9J,EAAIuF,KAC3CtG,EAAMsR,UACJzG,GAGF/R,EAAQ2M,SAASa,EAAIvF,GAGrBjI,EAAQ2M,SAASqN,EAAa1I,EAAQpK,GACtCoK,EAAO5B,eAAeuK,cAAe,EACrC7I,EAAeE,EAAQrJ,KAIvBuF,EAAGvF,GACHqJ,EAAO5B,eAAeuK,cAAe,EACrC7I,EAAeE,EAAQrJ,GAGvB+R,EAAY1I,EAAQpK,GAExB,CAaUgT,CAAa5I,EAAQpK,EAAO6K,EAAM9J,EAAIuF,OAAS,CAErD,IAAIuH,EAAWoF,EAAWjT,IAAUoK,EAAOtB,UACtC+E,GAAa7N,EAAMyS,QAAWzS,EAAM0S,mBAAoB1S,EAAMkT,iBACjEC,EAAY/I,EAAQpK,GAElB6K,EACF/R,EAAQ2M,SAAS2N,EAAYhJ,EAAQpK,EAAO6N,EAAUvH,GAEtD8M,EAAWhJ,EAAQpK,EAAO6N,EAAUvH,EAExC,CACF,CAvRIqM,CAAQvI,EAAQrJ,EAClB,EAGArX,KAAK2mB,QAAU,KAGf3mB,KAAKkpB,SAAW,EAChBlpB,KAAKwpB,gBAAkB,KACvBxpB,KAAK2pB,oBAAsB,KAI3B3pB,KAAK4nB,UAAY,EAIjB5nB,KAAK4pB,aAAc,EAGnB5pB,KAAKqpB,cAAe,EAGpBrpB,KAAKyhB,WAAkC,IAAtBrH,EAAQqH,UAGzBzhB,KAAK0hB,cAAgBtH,EAAQsH,YAG7B1hB,KAAK6pB,qBAAuB,EAI5B7pB,KAAK6nB,mBAAqB,IAAIN,EAAcvnB,KAC9C,CAqCA,SAASye,EAASrE,GAahB,IAAIuG,EAAW3gB,gBAZfue,EAASA,GAAU,EAAQ,OAa3B,IAAKoC,IAAauH,EAAgBpnB,KAAK2d,EAAUze,MAAO,OAAO,IAAIye,EAASrE,GAC5Epa,KAAK8e,eAAiB,IAAIiJ,EAAc3N,EAASpa,KAAM2gB,GAGvD3gB,KAAKmM,UAAW,EACZiO,IAC2B,mBAAlBA,EAAQzc,QAAsBqC,KAAKqnB,OAASjN,EAAQzc,OACjC,mBAAnByc,EAAQ0P,SAAuB9pB,KAAK+pB,QAAU3P,EAAQ0P,QAClC,mBAApB1P,EAAQ/J,UAAwBrQ,KAAKgiB,SAAW5H,EAAQ/J,SACtC,mBAAlB+J,EAAQ4P,QAAsBhqB,KAAKiqB,OAAS7P,EAAQ4P,QAEjErK,EAAO7e,KAAKd,KACd,CAgIA,SAASkqB,EAAQxJ,EAAQpK,EAAOwT,EAAQnvB,EAAK6kB,EAAOhiB,EAAUof,GAC5DtG,EAAM4S,SAAWvuB,EACjB2b,EAAMqQ,QAAU/J,EAChBtG,EAAMwS,SAAU,EAChBxS,EAAM6K,MAAO,EACT7K,EAAM8I,UAAW9I,EAAM2S,QAAQ,IAAIb,EAAqB,UAAmB0B,EAAQpJ,EAAOqJ,QAAQvK,EAAOlJ,EAAM2S,SAAcvI,EAAO2G,OAAO7H,EAAOhiB,EAAU8Y,EAAM2S,SACtK3S,EAAM6K,MAAO,CACf,CAgDA,SAASuI,EAAWhJ,EAAQpK,EAAO6N,EAAUvH,GACtCuH,GASP,SAAsBzD,EAAQpK,GACP,IAAjBA,EAAMtb,QAAgBsb,EAAMkP,YAC9BlP,EAAMkP,WAAY,EAClB9E,EAAO3K,KAAK,SAEhB,CAdiBoU,CAAazJ,EAAQpK,GACpCA,EAAMsR,YACNhL,IACAwM,EAAY1I,EAAQpK,EACtB,CAaA,SAASmT,EAAY/I,EAAQpK,GAC3BA,EAAM0S,kBAAmB,EACzB,IAAIxB,EAAQlR,EAAMkT,gBAClB,GAAI9I,EAAOqJ,SAAWvC,GAASA,EAAMrE,KAAM,CAEzC,IAAIkB,EAAI/N,EAAMuT,qBACVzrB,EAAS,IAAI1C,MAAM2oB,GACnB+F,EAAS9T,EAAMuR,mBACnBuC,EAAO5C,MAAQA,EAGf,IAFA,IAAIvR,EAAQ,EACRoU,GAAa,EACV7C,GACLppB,EAAO6X,GAASuR,EACXA,EAAM8C,QAAOD,GAAa,GAC/B7C,EAAQA,EAAMrE,KACdlN,GAAS,EAEX7X,EAAOisB,WAAaA,EACpBH,EAAQxJ,EAAQpK,GAAO,EAAMA,EAAMtb,OAAQoD,EAAQ,GAAIgsB,EAAO3C,QAI9DnR,EAAMsR,YACNtR,EAAMqT,oBAAsB,KACxBS,EAAOjH,MACT7M,EAAMuR,mBAAqBuC,EAAOjH,KAClCiH,EAAOjH,KAAO,MAEd7M,EAAMuR,mBAAqB,IAAIN,EAAcjR,GAE/CA,EAAMuT,qBAAuB,CAC/B,KAAO,CAEL,KAAOrC,GAAO,CACZ,IAAIhI,EAAQgI,EAAMhI,MACdhiB,EAAWgqB,EAAMhqB,SACjBof,EAAK4K,EAAMG,SASf,GAPAuC,EAAQxJ,EAAQpK,GAAO,EADbA,EAAMsK,WAAa,EAAIpB,EAAMxkB,OACJwkB,EAAOhiB,EAAUof,GACpD4K,EAAQA,EAAMrE,KACd7M,EAAMuT,uBAKFvT,EAAMwS,QACR,KAEJ,CACc,OAAVtB,IAAgBlR,EAAMqT,oBAAsB,KAClD,CACArT,EAAMkT,gBAAkBhC,EACxBlR,EAAM0S,kBAAmB,CAC3B,CAoCA,SAASO,EAAWjT,GAClB,OAAOA,EAAMqS,QAA2B,IAAjBrS,EAAMtb,QAA0C,OAA1Bsb,EAAMkT,kBAA6BlT,EAAM6N,WAAa7N,EAAMwS,OAC3G,CACA,SAASyB,EAAU7J,EAAQpK,GACzBoK,EAAOuJ,QAAO,SAAU9W,GACtBmD,EAAMsR,YACFzU,GACFqN,EAAeE,EAAQvN,GAEzBmD,EAAMsT,aAAc,EACpBlJ,EAAO3K,KAAK,aACZqT,EAAY1I,EAAQpK,EACtB,GACF,CAaA,SAAS8S,EAAY1I,EAAQpK,GAC3B,IAAIkU,EAAOjB,EAAWjT,GACtB,GAAIkU,IAdN,SAAmB9J,EAAQpK,GACpBA,EAAMsT,aAAgBtT,EAAMoS,cACF,mBAAlBhI,EAAOuJ,QAA0B3T,EAAM8I,WAKhD9I,EAAMsT,aAAc,EACpBlJ,EAAO3K,KAAK,eALZO,EAAMsR,YACNtR,EAAMoS,aAAc,EACpBtZ,EAAQ2M,SAASwO,EAAW7J,EAAQpK,IAM1C,CAII6Q,CAAUzG,EAAQpK,GACM,IAApBA,EAAMsR,YACRtR,EAAM6N,UAAW,EACjBzD,EAAO3K,KAAK,UACRO,EAAMoL,cAAa,CAGrB,IAAI+I,EAAS/J,EAAOvB,iBACfsL,GAAUA,EAAO/I,aAAe+I,EAAOxJ,aAC1CP,EAAOrQ,SAEX,CAGJ,OAAOma,CACT,CAxfA,EAAQ,KAAR,CAAoB/L,EAAUkB,GA4G9BoI,EAAc/qB,UAAUkiB,UAAY,WAGlC,IAFA,IAAIwL,EAAU1qB,KAAKwpB,gBACfjjB,EAAM,GACHmkB,GACLnkB,EAAIlL,KAAKqvB,GACTA,EAAUA,EAAQvH,KAEpB,OAAO5c,CACT,EACA,WACE,IACEzJ,OAAOuH,eAAe0jB,EAAc/qB,UAAW,SAAU,CACvDuH,IAAKyjB,EAAaC,WAAU,WAC1B,OAAOjoB,KAAKkf,WACd,GAAG,6EAAmF,YAE1F,CAAE,MAAO9L,GAAI,CACd,CARD,GAasB,mBAAX/W,QAAyBA,OAAOsuB,aAAiE,mBAA3C9W,SAAS7W,UAAUX,OAAOsuB,cACzFzC,EAAkBrU,SAAS7W,UAAUX,OAAOsuB,aAC5C7tB,OAAOuH,eAAeoa,EAAUpiB,OAAOsuB,YAAa,CAClDrtB,MAAO,SAAestB,GACpB,QAAI1C,EAAgBpnB,KAAKd,KAAM4qB,IAC3B5qB,OAASye,IACNmM,GAAUA,EAAO9L,0BAA0BiJ,EACpD,KAGFG,EAAkB,SAAyB0C,GACzC,OAAOA,aAAkB5qB,IAC3B,EA+BFye,EAASzhB,UAAUwnB,KAAO,WACxBhE,EAAexgB,KAAM,IAAImoB,EAC3B,EAyBA1J,EAASzhB,UAAUW,MAAQ,SAAU6hB,EAAOhiB,EAAUof,GACpD,IAzNqBje,EAyNjB2X,EAAQtW,KAAK8e,eACbxY,GAAM,EACNgkB,GAAShU,EAAMsK,aA3NEjiB,EA2N0B6gB,EA1NxCljB,EAAOsC,SAASD,IAAQA,aAAeihB,GAwO9C,OAbI0K,IAAUhuB,EAAOsC,SAAS4gB,KAC5BA,EAhOJ,SAA6BA,GAC3B,OAAOljB,EAAOe,KAAKmiB,EACrB,CA8NYgD,CAAoBhD,IAEN,mBAAbhiB,IACTof,EAAKpf,EACLA,EAAW,MAET8sB,EAAO9sB,EAAW,SAAmBA,IAAUA,EAAW8Y,EAAMqL,iBAClD,mBAAP/E,IAAmBA,EAAK4L,GAC/BlS,EAAMqS,OArCZ,SAAuBjI,EAAQ9D,GAC7B,IAAIvF,EAAK,IAAIiR,EAEb9H,EAAeE,EAAQrJ,GACvBjI,EAAQ2M,SAASa,EAAIvF,EACvB,CAgCoBwT,CAAc7qB,KAAM4c,IAAa0N,GA3BrD,SAAoB5J,EAAQpK,EAAOkJ,EAAO5C,GACxC,IAAIvF,EAMJ,OALc,OAAVmI,EACFnI,EAAK,IAAIgR,EACiB,iBAAV7I,GAAuBlJ,EAAMsK,aAC7CvJ,EAAK,IAAIzK,EAAqB,QAAS,CAAC,SAAU,UAAW4S,KAE3DnI,IACFmJ,EAAeE,EAAQrJ,GACvBjI,EAAQ2M,SAASa,EAAIvF,IACd,EAGX,CAc8DyT,CAAW9qB,KAAMsW,EAAOkJ,EAAO5C,MACzFtG,EAAMsR,YACNthB,EAiDJ,SAAuBoa,EAAQpK,EAAOgU,EAAO9K,EAAOhiB,EAAUof,GAC5D,IAAK0N,EAAO,CACV,IAAIS,EArBR,SAAqBzU,EAAOkJ,EAAOhiB,GAC5B8Y,EAAMsK,aAAsC,IAAxBtK,EAAMuS,eAA4C,iBAAVrJ,IAC/DA,EAAQljB,EAAOe,KAAKmiB,EAAOhiB,IAE7B,OAAOgiB,CACT,CAgBmBwL,CAAY1U,EAAOkJ,EAAOhiB,GACrCgiB,IAAUuL,IACZT,GAAQ,EACR9sB,EAAW,SACXgiB,EAAQuL,EAEZ,CACA,IAAIpwB,EAAM2b,EAAMsK,WAAa,EAAIpB,EAAMxkB,OACvCsb,EAAMtb,QAAUL,EAChB,IAAI2L,EAAMgQ,EAAMtb,OAASsb,EAAM2I,cAE1B3Y,IAAKgQ,EAAMkP,WAAY,GAC5B,GAAIlP,EAAMwS,SAAWxS,EAAMyS,OAAQ,CACjC,IAAIrgB,EAAO4N,EAAMqT,oBACjBrT,EAAMqT,oBAAsB,CAC1BnK,MAAOA,EACPhiB,SAAUA,EACV8sB,MAAOA,EACP3C,SAAU/K,EACVuG,KAAM,MAEJza,EACFA,EAAKya,KAAO7M,EAAMqT,oBAElBrT,EAAMkT,gBAAkBlT,EAAMqT,oBAEhCrT,EAAMuT,sBAAwB,CAChC,MACEK,EAAQxJ,EAAQpK,GAAO,EAAO3b,EAAK6kB,EAAOhiB,EAAUof,GAEtD,OAAOtW,CACT,CAlFU2kB,CAAcjrB,KAAMsW,EAAOgU,EAAO9K,EAAOhiB,EAAUof,IAEpDtW,CACT,EACAmY,EAASzhB,UAAUkuB,KAAO,WACxBlrB,KAAK8e,eAAeiK,QACtB,EACAtK,EAASzhB,UAAUmuB,OAAS,WAC1B,IAAI7U,EAAQtW,KAAK8e,eACbxI,EAAMyS,SACRzS,EAAMyS,SACDzS,EAAMwS,SAAYxS,EAAMyS,QAAWzS,EAAM0S,mBAAoB1S,EAAMkT,iBAAiBC,EAAYzpB,KAAMsW,GAE/G,EACAmI,EAASzhB,UAAUouB,mBAAqB,SAA4B5tB,GAGlE,GADwB,iBAAbA,IAAuBA,EAAWA,EAASsC,iBAChD,CAAC,MAAO,OAAQ,QAAS,QAAS,SAAU,SAAU,OAAQ,QAAS,UAAW,WAAY,OAAOjE,SAAS2B,EAAW,IAAIsC,gBAAkB,GAAI,MAAM,IAAIyoB,EAAqB/qB,GAExL,OADAwC,KAAK8e,eAAe6C,gBAAkBnkB,EAC/BwC,IACT,EACAlD,OAAOuH,eAAeoa,EAASzhB,UAAW,iBAAkB,CAI1DsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAK8e,gBAAkB9e,KAAK8e,eAAeI,WACpD,IAQFpiB,OAAOuH,eAAeoa,EAASzhB,UAAW,wBAAyB,CAIjEsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAK8e,eAAeG,aAC7B,IAuKFR,EAASzhB,UAAUqqB,OAAS,SAAU7H,EAAOhiB,EAAUof,GACrDA,EAAG,IAAI0D,EAA2B,YACpC,EACA7B,EAASzhB,UAAU+sB,QAAU,KAC7BtL,EAASzhB,UAAUjB,IAAM,SAAUyjB,EAAOhiB,EAAUof,GAClD,IAAItG,EAAQtW,KAAK8e,eAmBjB,MAlBqB,mBAAVU,GACT5C,EAAK4C,EACLA,EAAQ,KACRhiB,EAAW,MACkB,mBAAbA,IAChBof,EAAKpf,EACLA,EAAW,MAETgiB,SAAuCxf,KAAKrC,MAAM6hB,EAAOhiB,GAGzD8Y,EAAMyS,SACRzS,EAAMyS,OAAS,EACf/oB,KAAKmrB,UAIF7U,EAAMqS,QAyDb,SAAqBjI,EAAQpK,EAAOsG,GAClCtG,EAAMqS,QAAS,EACfS,EAAY1I,EAAQpK,GAChBsG,IACEtG,EAAM6N,SAAU/U,EAAQ2M,SAASa,GAAS8D,EAAOtM,KAAK,SAAUwI,IAEtEtG,EAAMyI,OAAQ,EACd2B,EAAOvU,UAAW,CACpB,CAjEqBkf,CAAYrrB,KAAMsW,EAAOsG,GACrC5c,IACT,EACAlD,OAAOuH,eAAeoa,EAASzhB,UAAW,iBAAkB,CAI1DsH,YAAY,EACZC,IAAK,WACH,OAAOvE,KAAK8e,eAAe9jB,MAC7B,IAqEF8B,OAAOuH,eAAeoa,EAASzhB,UAAW,YAAa,CAIrDsH,YAAY,EACZC,IAAK,WACH,YAA4BzF,IAAxBkB,KAAK8e,gBAGF9e,KAAK8e,eAAeM,SAC7B,EACAja,IAAK,SAAa7H,GAGX0C,KAAK8e,iBAMV9e,KAAK8e,eAAeM,UAAY9hB,EAClC,IAEFmhB,EAASzhB,UAAUqT,QAAU6P,EAAY7P,QACzCoO,EAASzhB,UAAU2lB,WAAazC,EAAY0C,UAC5CnE,EAASzhB,UAAUglB,SAAW,SAAU7O,EAAKyJ,GAC3CA,EAAGzJ,EACL,mCC9nBImY,YACJ,SAASC,EAAgB5sB,EAAKoU,EAAKzV,GAA4L,OAAnLyV,EAC5C,SAAwB9V,GAAO,IAAI8V,EACnC,SAAsBhG,EAAOye,GAAQ,GAAqB,iBAAVze,GAAgC,OAAVA,EAAgB,OAAOA,EAAO,IAAI0e,EAAO1e,EAAM1Q,OAAO+C,aAAc,QAAaN,IAAT2sB,EAAoB,CAAE,IAAIzoB,EAAMyoB,EAAK3qB,KAAKiM,EAAOye,GAAQ,WAAY,GAAmB,iBAARxoB,EAAkB,OAAOA,EAAK,MAAM,IAAI7F,UAAU,+CAAiD,CAAE,OAAiB,WAATquB,EAAoBrqB,OAASQ,QAAQoL,EAAQ,CAD/U2e,CAAazuB,EAAK,UAAW,MAAsB,iBAAR8V,EAAmBA,EAAM5R,OAAO4R,EAAM,CADxE4Y,CAAe5Y,MAAiBpU,EAAO7B,OAAOuH,eAAe1F,EAAKoU,EAAK,CAAEzV,MAAOA,EAAOgH,YAAY,EAAM8H,cAAc,EAAMD,UAAU,IAAkBxN,EAAIoU,GAAOzV,EAAgBqB,CAAK,CAG3O,IAAIwlB,EAAW,EAAQ,MACnByH,EAAevvB,OAAO,eACtBwvB,EAAcxvB,OAAO,cACrByvB,EAASzvB,OAAO,SAChB0vB,EAAS1vB,OAAO,SAChB2vB,EAAe3vB,OAAO,eACtB4vB,EAAiB5vB,OAAO,iBACxB6vB,EAAU7vB,OAAO,UACrB,SAAS8vB,EAAiB7uB,EAAO8pB,GAC/B,MAAO,CACL9pB,MAAOA,EACP8pB,KAAMA,EAEV,CACA,SAASgF,EAAeC,GACtB,IAAI9X,EAAU8X,EAAKT,GACnB,GAAgB,OAAZrX,EAAkB,CACpB,IAAIrV,EAAOmtB,EAAKH,GAAS9qB,OAIZ,OAATlC,IACFmtB,EAAKL,GAAgB,KACrBK,EAAKT,GAAgB,KACrBS,EAAKR,GAAe,KACpBtX,EAAQ4X,EAAiBjtB,GAAM,IAEnC,CACF,CACA,SAASotB,EAAWD,GAGlBjd,EAAQ2M,SAASqQ,EAAgBC,EACnC,CAYA,IAAIE,EAAyBzvB,OAAOyW,gBAAe,WAAa,IAC5DiZ,EAAuC1vB,OAAOC,gBAmD/CwuB,EAnD+DD,EAAwB,CACxF,UAAI5K,GACF,OAAO1gB,KAAKksB,EACd,EACA/I,KAAM,WACJ,IAAI4C,EAAQ/lB,KAGRoE,EAAQpE,KAAK8rB,GACjB,GAAc,OAAV1nB,EACF,OAAOkQ,QAAQE,OAAOpQ,GAExB,GAAIpE,KAAK+rB,GACP,OAAOzX,QAAQC,QAAQ4X,OAAiBrtB,GAAW,IAErD,GAAIkB,KAAKksB,GAAS9M,UAKhB,OAAO,IAAI9K,SAAQ,SAAUC,EAASC,GACpCpF,EAAQ2M,UAAS,WACXgK,EAAM+F,GACRtX,EAAOuR,EAAM+F,IAEbvX,EAAQ4X,OAAiBrtB,GAAW,GAExC,GACF,IAOF,IACI2d,EADAgQ,EAAczsB,KAAKgsB,GAEvB,GAAIS,EACFhQ,EAAU,IAAInI,QAlDpB,SAAqBmY,EAAaJ,GAChC,OAAO,SAAU9X,EAASC,GACxBiY,EAAY5P,MAAK,WACXwP,EAAKN,GACPxX,EAAQ4X,OAAiBrtB,GAAW,IAGtCutB,EAAKJ,GAAgB1X,EAASC,EAChC,GAAGA,EACL,CACF,CAwC4BkY,CAAYD,EAAazsB,WAC1C,CAGL,IAAId,EAAOc,KAAKksB,GAAS9qB,OACzB,GAAa,OAATlC,EACF,OAAOoV,QAAQC,QAAQ4X,EAAiBjtB,GAAM,IAEhDud,EAAU,IAAInI,QAAQtU,KAAKisB,GAC7B,CAEA,OADAjsB,KAAKgsB,GAAgBvP,EACdA,CACT,GACwCpgB,OAAO2pB,eAAe,WAC9D,OAAOhmB,IACT,IAAIurB,EAAgBD,EAAuB,UAAU,WACnD,IAAIqB,EAAS3sB,KAIb,OAAO,IAAIsU,SAAQ,SAAUC,EAASC,GACpCmY,EAAOT,GAAS7b,QAAQ,MAAM,SAAU8C,GAClCA,EACFqB,EAAOrB,GAGToB,EAAQ4X,OAAiBrtB,GAAW,GACtC,GACF,GACF,IAAIwsB,GAAwBiB,GA4D5Bne,EAAOvU,QA3DiC,SAA2C6mB,GACjF,IAAIkM,EACAC,EAAW/vB,OAAOwW,OAAOkZ,GAA4DjB,EAArBqB,EAAiB,CAAC,EAAmCV,EAAS,CAChI5uB,MAAOojB,EACPvU,UAAU,IACRof,EAAgBqB,EAAgBhB,EAAc,CAChDtuB,MAAO,KACP6O,UAAU,IACRof,EAAgBqB,EAAgBf,EAAa,CAC/CvuB,MAAO,KACP6O,UAAU,IACRof,EAAgBqB,EAAgBd,EAAQ,CAC1CxuB,MAAO,KACP6O,UAAU,IACRof,EAAgBqB,EAAgBb,EAAQ,CAC1CzuB,MAAOojB,EAAOvB,eAAe8B,WAC7B9U,UAAU,IACRof,EAAgBqB,EAAgBX,EAAgB,CAClD3uB,MAAO,SAAeiX,EAASC,GAC7B,IAAItV,EAAO2tB,EAASX,GAAS9qB,OACzBlC,GACF2tB,EAASb,GAAgB,KACzBa,EAASjB,GAAgB,KACzBiB,EAAShB,GAAe,KACxBtX,EAAQ4X,EAAiBjtB,GAAM,MAE/B2tB,EAASjB,GAAgBrX,EACzBsY,EAAShB,GAAerX,EAE5B,EACArI,UAAU,IACRygB,IA0BJ,OAzBAC,EAASb,GAAgB,KACzB7H,EAASzD,GAAQ,SAAUvN,GACzB,GAAIA,GAAoB,+BAAbA,EAAIxX,KAAuC,CACpD,IAAI6Y,EAASqY,EAAShB,GAUtB,OAPe,OAAXrX,IACFqY,EAASb,GAAgB,KACzBa,EAASjB,GAAgB,KACzBiB,EAAShB,GAAe,KACxBrX,EAAOrB,SAET0Z,EAASf,GAAU3Y,EAErB,CACA,IAAIoB,EAAUsY,EAASjB,GACP,OAAZrX,IACFsY,EAASb,GAAgB,KACzBa,EAASjB,GAAgB,KACzBiB,EAAShB,GAAe,KACxBtX,EAAQ4X,OAAiBrtB,GAAW,KAEtC+tB,EAASd,IAAU,CACrB,IACArL,EAAO3L,GAAG,WAAYuX,EAAW9V,KAAK,KAAMqW,IACrCA,CACT,+BChLA,SAAS/Y,EAAQ8W,EAAQkC,GAAkB,IAAIja,EAAO/V,OAAO+V,KAAK+X,GAAS,GAAI9tB,OAAOiX,sBAAuB,CAAE,IAAIgZ,EAAUjwB,OAAOiX,sBAAsB6W,GAASkC,IAAmBC,EAAUA,EAAQC,QAAO,SAAUlhB,GAAO,OAAOhP,OAAOmwB,yBAAyBrC,EAAQ9e,GAAKxH,UAAY,KAAKuO,EAAKxX,KAAKsI,MAAMkP,EAAMka,EAAU,CAAE,OAAOla,CAAM,CACpV,SAASqa,EAAcrnB,GAAU,IAAK,IAAIvL,EAAI,EAAGA,EAAIoF,UAAU1E,OAAQV,IAAK,CAAE,IAAI6yB,EAAS,MAAQztB,UAAUpF,GAAKoF,UAAUpF,GAAK,CAAC,EAAGA,EAAI,EAAIwZ,EAAQhX,OAAOqwB,IAAS,GAAIra,SAAQ,SAAUC,GAAOwY,EAAgB1lB,EAAQkN,EAAKoa,EAAOpa,GAAO,IAAKjW,OAAOswB,0BAA4BtwB,OAAOuwB,iBAAiBxnB,EAAQ/I,OAAOswB,0BAA0BD,IAAWrZ,EAAQhX,OAAOqwB,IAASra,SAAQ,SAAUC,GAAOjW,OAAOuH,eAAewB,EAAQkN,EAAKjW,OAAOmwB,yBAAyBE,EAAQpa,GAAO,GAAI,CAAE,OAAOlN,CAAQ,CACzf,SAAS0lB,EAAgB5sB,EAAKoU,EAAKzV,GAA4L,OAAnLyV,EAAM4Y,EAAe5Y,MAAiBpU,EAAO7B,OAAOuH,eAAe1F,EAAKoU,EAAK,CAAEzV,MAAOA,EAAOgH,YAAY,EAAM8H,cAAc,EAAMD,UAAU,IAAkBxN,EAAIoU,GAAOzV,EAAgBqB,CAAK,CAE3O,SAAS2uB,EAAkBznB,EAAQqN,GAAS,IAAK,IAAI5Y,EAAI,EAAGA,EAAI4Y,EAAMlY,OAAQV,IAAK,CAAE,IAAIizB,EAAara,EAAM5Y,GAAIizB,EAAWjpB,WAAaipB,EAAWjpB,aAAc,EAAOipB,EAAWnhB,cAAe,EAAU,UAAWmhB,IAAYA,EAAWphB,UAAW,GAAMrP,OAAOuH,eAAewB,EAAQ8lB,EAAe4B,EAAWxa,KAAMwa,EAAa,CAAE,CAE5U,SAAS5B,EAAe1uB,GAAO,IAAI8V,EACnC,SAAsBhG,EAAOye,GAAQ,GAAqB,iBAAVze,GAAgC,OAAVA,EAAgB,OAAOA,EAAO,IAAI0e,EAAO1e,EAAM1Q,OAAO+C,aAAc,QAAaN,IAAT2sB,EAAoB,CAAE,IAAIzoB,EAAMyoB,EAAK3qB,KAAKiM,EAAOye,GAAQ,WAAY,GAAmB,iBAARxoB,EAAkB,OAAOA,EAAK,MAAM,IAAI7F,UAAU,+CAAiD,CAAE,OAAiB,WAATquB,EAAoBrqB,OAASQ,QAAQoL,EAAQ,CAD/U2e,CAAazuB,EAAK,UAAW,MAAsB,iBAAR8V,EAAmBA,EAAM5R,OAAO4R,EAAM,CAE1H,IACEzW,EADa,EAAQ,MACHA,OAElBmJ,EADc,EAAQ,MACFA,QAClB+nB,EAAS/nB,GAAWA,EAAQ+nB,QAAU,UAI1Cpf,EAAOvU,QAAuB,WAC5B,SAASomB,KAdX,SAAyBwN,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIvwB,UAAU,oCAAwC,CAepJwwB,CAAgB3tB,KAAMigB,GACtBjgB,KAAKijB,KAAO,KACZjjB,KAAK4tB,KAAO,KACZ5tB,KAAKhF,OAAS,CAChB,CAjBF,IAAsB0yB,EAAaG,EAAYC,EA8K7C,OA9KoBJ,EAkBPzN,GAlBoB4N,EAkBR,CAAC,CACxB9a,IAAK,OACLzV,MAAO,SAAcsT,GACnB,IAAI4W,EAAQ,CACVtoB,KAAM0R,EACNuS,KAAM,MAEJnjB,KAAKhF,OAAS,EAAGgF,KAAK4tB,KAAKzK,KAAOqE,EAAWxnB,KAAKijB,KAAOuE,EAC7DxnB,KAAK4tB,KAAOpG,IACVxnB,KAAKhF,MACT,GACC,CACD+X,IAAK,UACLzV,MAAO,SAAiBsT,GACtB,IAAI4W,EAAQ,CACVtoB,KAAM0R,EACNuS,KAAMnjB,KAAKijB,MAEO,IAAhBjjB,KAAKhF,SAAcgF,KAAK4tB,KAAOpG,GACnCxnB,KAAKijB,KAAOuE,IACVxnB,KAAKhF,MACT,GACC,CACD+X,IAAK,QACLzV,MAAO,WACL,GAAoB,IAAhB0C,KAAKhF,OAAT,CACA,IAAIsL,EAAMtG,KAAKijB,KAAK/jB,KAGpB,OAFoB,IAAhBc,KAAKhF,OAAcgF,KAAKijB,KAAOjjB,KAAK4tB,KAAO,KAAU5tB,KAAKijB,KAAOjjB,KAAKijB,KAAKE,OAC7EnjB,KAAKhF,OACAsL,CAJsB,CAK/B,GACC,CACDyM,IAAK,QACLzV,MAAO,WACL0C,KAAKijB,KAAOjjB,KAAK4tB,KAAO,KACxB5tB,KAAKhF,OAAS,CAChB,GACC,CACD+X,IAAK,OACLzV,MAAO,SAAcic,GACnB,GAAoB,IAAhBvZ,KAAKhF,OAAc,MAAO,GAG9B,IAFA,IAAIgoB,EAAIhjB,KAAKijB,KACT3c,EAAM,GAAK0c,EAAE9jB,KACV8jB,EAAIA,EAAEG,MAAM7c,GAAOiT,EAAIyJ,EAAE9jB,KAChC,OAAOoH,CACT,GACC,CACDyM,IAAK,SACLzV,MAAO,SAAgBkD,GACrB,GAAoB,IAAhBR,KAAKhF,OAAc,OAAOsB,EAAOE,MAAM,GAI3C,IAHA,IA5DciR,EAAK5H,EAAQnE,EA4DvB4E,EAAMhK,EAAOc,YAAYoD,IAAM,GAC/BwiB,EAAIhjB,KAAKijB,KACT3oB,EAAI,EACD0oB,GA/DOvV,EAgEDuV,EAAE9jB,KAhEI2G,EAgEES,EAhEM5E,EAgEDpH,EA/D9BgC,EAAOU,UAAUkB,KAAK4C,KAAK2M,EAAK5H,EAAQnE,GAgElCpH,GAAK0oB,EAAE9jB,KAAKlE,OACZgoB,EAAIA,EAAEG,KAER,OAAO7c,CACT,GAGC,CACDyM,IAAK,UACLzV,MAAO,SAAiBkD,EAAGutB,GACzB,IAAIznB,EAYJ,OAXI9F,EAAIR,KAAKijB,KAAK/jB,KAAKlE,QAErBsL,EAAMtG,KAAKijB,KAAK/jB,KAAKtB,MAAM,EAAG4C,GAC9BR,KAAKijB,KAAK/jB,KAAOc,KAAKijB,KAAK/jB,KAAKtB,MAAM4C,IAGtC8F,EAFS9F,IAAMR,KAAKijB,KAAK/jB,KAAKlE,OAExBgF,KAAK6X,QAGLkW,EAAa/tB,KAAKguB,WAAWxtB,GAAKR,KAAKiuB,WAAWztB,GAEnD8F,CACT,GACC,CACDyM,IAAK,QACLzV,MAAO,WACL,OAAO0C,KAAKijB,KAAK/jB,IACnB,GAGC,CACD6T,IAAK,aACLzV,MAAO,SAAoBkD,GACzB,IAAIwiB,EAAIhjB,KAAKijB,KACTvgB,EAAI,EACJ4D,EAAM0c,EAAE9jB,KAEZ,IADAsB,GAAK8F,EAAItL,OACFgoB,EAAIA,EAAEG,MAAM,CACjB,IAAI/gB,EAAM4gB,EAAE9jB,KACRgvB,EAAK1tB,EAAI4B,EAAIpH,OAASoH,EAAIpH,OAASwF,EAGvC,GAFI0tB,IAAO9rB,EAAIpH,OAAQsL,GAAOlE,EAASkE,GAAOlE,EAAIxE,MAAM,EAAG4C,GAEjD,IADVA,GAAK0tB,GACQ,CACPA,IAAO9rB,EAAIpH,UACX0H,EACEsgB,EAAEG,KAAMnjB,KAAKijB,KAAOD,EAAEG,KAAUnjB,KAAKijB,KAAOjjB,KAAK4tB,KAAO,OAE5D5tB,KAAKijB,KAAOD,EACZA,EAAE9jB,KAAOkD,EAAIxE,MAAMswB,IAErB,KACF,GACExrB,CACJ,CAEA,OADA1C,KAAKhF,QAAU0H,EACR4D,CACT,GAGC,CACDyM,IAAK,aACLzV,MAAO,SAAoBkD,GACzB,IAAI8F,EAAMhK,EAAOc,YAAYoD,GACzBwiB,EAAIhjB,KAAKijB,KACTvgB,EAAI,EAGR,IAFAsgB,EAAE9jB,KAAKhB,KAAKoI,GACZ9F,GAAKwiB,EAAE9jB,KAAKlE,OACLgoB,EAAIA,EAAEG,MAAM,CACjB,IAAItmB,EAAMmmB,EAAE9jB,KACRgvB,EAAK1tB,EAAI3D,EAAI7B,OAAS6B,EAAI7B,OAASwF,EAGvC,GAFA3D,EAAIqB,KAAKoI,EAAKA,EAAItL,OAASwF,EAAG,EAAG0tB,GAEvB,IADV1tB,GAAK0tB,GACQ,CACPA,IAAOrxB,EAAI7B,UACX0H,EACEsgB,EAAEG,KAAMnjB,KAAKijB,KAAOD,EAAEG,KAAUnjB,KAAKijB,KAAOjjB,KAAK4tB,KAAO,OAE5D5tB,KAAKijB,KAAOD,EACZA,EAAE9jB,KAAOrC,EAAIe,MAAMswB,IAErB,KACF,GACExrB,CACJ,CAEA,OADA1C,KAAKhF,QAAU0H,EACR4D,CACT,GAGC,CACDyM,IAAKya,EACLlwB,MAAO,SAAe8V,EAAGgH,GACvB,OAAO3U,EAAQzF,KAAMktB,EAAcA,EAAc,CAAC,EAAG9S,GAAU,CAAC,EAAG,CAEjE+T,MAAO,EAEPC,eAAe,IAEnB,MA5K0Ed,EAAkBI,EAAY1wB,UAAW6wB,GAAiBC,GAAaR,EAAkBI,EAAaI,GAAchxB,OAAOuH,eAAeqpB,EAAa,YAAa,CAAEvhB,UAAU,IA8KrP8T,CACT,CApK8B,8CCiC9B,SAASoO,EAAoBhd,EAAM8B,GACjCmb,EAAYjd,EAAM8B,GAClBob,EAAYld,EACd,CACA,SAASkd,EAAYld,GACfA,EAAKyN,iBAAmBzN,EAAKyN,eAAe2C,WAC5CpQ,EAAK8N,iBAAmB9N,EAAK8N,eAAesC,WAChDpQ,EAAK0E,KAAK,QACZ,CAkBA,SAASuY,EAAYjd,EAAM8B,GACzB9B,EAAK0E,KAAK,QAAS5C,EACrB,CAYA/E,EAAOvU,QAAU,CACfwW,QAzFF,SAAiB8C,EAAKyJ,GACpB,IAAImJ,EAAQ/lB,KACRwuB,EAAoBxuB,KAAKmf,gBAAkBnf,KAAKmf,eAAeC,UAC/DqP,EAAoBzuB,KAAK8e,gBAAkB9e,KAAK8e,eAAeM,UACnE,OAAIoP,GAAqBC,GACnB7R,EACFA,EAAGzJ,GACMA,IACJnT,KAAK8e,eAEE9e,KAAK8e,eAAeuK,eAC9BrpB,KAAK8e,eAAeuK,cAAe,EACnCja,EAAQ2M,SAASuS,EAAatuB,KAAMmT,IAHpC/D,EAAQ2M,SAASuS,EAAatuB,KAAMmT,IAMjCnT,OAMLA,KAAKmf,iBACPnf,KAAKmf,eAAeC,WAAY,GAI9Bpf,KAAK8e,iBACP9e,KAAK8e,eAAeM,WAAY,GAElCpf,KAAKgiB,SAAS7O,GAAO,MAAM,SAAUA,IAC9ByJ,GAAMzJ,EACJ4S,EAAMjH,eAECiH,EAAMjH,eAAeuK,aAI/Bja,EAAQ2M,SAASwS,EAAaxI,IAH9BA,EAAMjH,eAAeuK,cAAe,EACpCja,EAAQ2M,SAASsS,EAAqBtI,EAAO5S,IAH7C/D,EAAQ2M,SAASsS,EAAqBtI,EAAO5S,GAOtCyJ,GACTxN,EAAQ2M,SAASwS,EAAaxI,GAC9BnJ,EAAGzJ,IAEH/D,EAAQ2M,SAASwS,EAAaxI,EAElC,IACO/lB,KACT,EA2CE4iB,UAjCF,WACM5iB,KAAKmf,iBACPnf,KAAKmf,eAAeC,WAAY,EAChCpf,KAAKmf,eAAe+B,SAAU,EAC9BlhB,KAAKmf,eAAeJ,OAAQ,EAC5B/e,KAAKmf,eAAe8B,YAAa,GAE/BjhB,KAAK8e,iBACP9e,KAAK8e,eAAeM,WAAY,EAChCpf,KAAK8e,eAAeC,OAAQ,EAC5B/e,KAAK8e,eAAe6J,QAAS,EAC7B3oB,KAAK8e,eAAe4J,aAAc,EAClC1oB,KAAK8e,eAAe8K,aAAc,EAClC5pB,KAAK8e,eAAeqF,UAAW,EAC/BnkB,KAAK8e,eAAeuK,cAAe,EAEvC,EAkBE7I,eAdF,SAAwBE,EAAQvN,GAO9B,IAAIsX,EAAS/J,EAAOvB,eAChB+E,EAASxD,EAAO5B,eAChB2L,GAAUA,EAAO/I,aAAewC,GAAUA,EAAOxC,YAAahB,EAAOrQ,QAAQ8C,GAAUuN,EAAO3K,KAAK,QAAS5C,EAClH,gCCrFA,IAAIub,EAA6B,UAAiCA,2BAYlE,SAAS5S,IAAQ,CAoEjB1N,EAAOvU,QAhEP,SAAS80B,EAAIjO,EAAQyF,EAAMwB,GACzB,GAAoB,mBAATxB,EAAqB,OAAOwI,EAAIjO,EAAQ,KAAMyF,GACpDA,IAAMA,EAAO,CAAC,GACnBwB,EAlBF,SAAcA,GACZ,IAAIiH,GAAS,EACb,OAAO,WACL,IAAIA,EAAJ,CACAA,GAAS,EACT,IAAK,IAAIC,EAAOnvB,UAAU1E,OAAQiT,EAAO,IAAIvS,MAAMmzB,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC/E7gB,EAAK6gB,GAAQpvB,UAAUovB,GAEzBnH,EAAShkB,MAAM3D,KAAMiO,EALH,CAMpB,CACF,CAQamG,CAAKuT,GAAY7L,GAC5B,IAAI8C,EAAWuH,EAAKvH,WAA8B,IAAlBuH,EAAKvH,UAAsB8B,EAAO9B,SAC9DzS,EAAWga,EAAKha,WAA8B,IAAlBga,EAAKha,UAAsBuU,EAAOvU,SAC9D4iB,EAAiB,WACdrO,EAAOvU,UAAUgZ,GACxB,EACI6J,EAAgBtO,EAAO5B,gBAAkB4B,EAAO5B,eAAeqF,SAC/DgB,EAAW,WACbhZ,GAAW,EACX6iB,GAAgB,EACXpQ,GAAU+I,EAAS7mB,KAAK4f,EAC/B,EACIuO,EAAgBvO,EAAOvB,gBAAkBuB,EAAOvB,eAAe8B,WAC/DpC,EAAQ,WACVD,GAAW,EACXqQ,GAAgB,EACX9iB,GAAUwb,EAAS7mB,KAAK4f,EAC/B,EACI2E,EAAU,SAAiBlS,GAC7BwU,EAAS7mB,KAAK4f,EAAQvN,EACxB,EACI+R,EAAU,WACZ,IAAI/R,EACJ,OAAIyL,IAAaqQ,GACVvO,EAAOvB,gBAAmBuB,EAAOvB,eAAeJ,QAAO5L,EAAM,IAAIub,GAC/D/G,EAAS7mB,KAAK4f,EAAQvN,IAE3BhH,IAAa6iB,GACVtO,EAAO5B,gBAAmB4B,EAAO5B,eAAeC,QAAO5L,EAAM,IAAIub,GAC/D/G,EAAS7mB,KAAK4f,EAAQvN,SAF/B,CAIF,EACI+b,EAAY,WACdxO,EAAOyO,IAAIpa,GAAG,SAAUoQ,EAC1B,EAcA,OAtDF,SAAmBzE,GACjB,OAAOA,EAAO0O,WAAqC,mBAAjB1O,EAAO2O,KAC3C,CAuCMC,CAAU5O,GAIHvU,IAAauU,EAAO5B,iBAE7B4B,EAAO3L,GAAG,MAAOga,GACjBrO,EAAO3L,GAAG,QAASga,KANnBrO,EAAO3L,GAAG,WAAYoQ,GACtBzE,EAAO3L,GAAG,QAASmQ,GACfxE,EAAOyO,IAAKD,IAAiBxO,EAAO3L,GAAG,UAAWma,IAMxDxO,EAAO3L,GAAG,MAAO8J,GACjB6B,EAAO3L,GAAG,SAAUoQ,IACD,IAAfgB,EAAK/hB,OAAiBsc,EAAO3L,GAAG,QAASsQ,GAC7C3E,EAAO3L,GAAG,QAASmQ,GACZ,WACLxE,EAAOhM,eAAe,WAAYyQ,GAClCzE,EAAOhM,eAAe,QAASwQ,GAC/BxE,EAAOhM,eAAe,UAAWwa,GAC7BxO,EAAOyO,KAAKzO,EAAOyO,IAAIza,eAAe,SAAUyQ,GACpDzE,EAAOhM,eAAe,MAAOqa,GAC7BrO,EAAOhM,eAAe,QAASqa,GAC/BrO,EAAOhM,eAAe,SAAUyQ,GAChCzE,EAAOhM,eAAe,MAAOmK,GAC7B6B,EAAOhM,eAAe,QAAS2Q,GAC/B3E,EAAOhM,eAAe,QAASwQ,EACjC,CACF,YCpFA9W,EAAOvU,QAAU,WACf,MAAM,IAAI+B,MAAM,gDAClB,+BCGA,IAAI+yB,EASJ,IAAIvO,EAAiB,UACnBmP,EAAmBnP,EAAemP,iBAClCnH,EAAuBhI,EAAegI,qBACxC,SAAStM,EAAK3I,GAEZ,GAAIA,EAAK,MAAMA,CACjB,CA+BA,SAASrS,EAAKgN,GACZA,GACF,CACA,SAAS0W,EAAKnnB,EAAMmyB,GAClB,OAAOnyB,EAAKmnB,KAAKgL,EACnB,CA6BAphB,EAAOvU,QAvBP,WACE,IAAK,IAAIg1B,EAAOnvB,UAAU1E,OAAQy0B,EAAU,IAAI/zB,MAAMmzB,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAClFW,EAAQX,GAAQpvB,UAAUovB,GAE5B,IAKI1qB,EALAujB,EATN,SAAqB8H,GACnB,OAAKA,EAAQz0B,OAC8B,mBAAhCy0B,EAAQA,EAAQz0B,OAAS,GAA0B8gB,EACvD2T,EAAQ3X,MAFagE,CAG9B,CAKiB4T,CAAYD,GAE3B,GADI/zB,MAAMuD,QAAQwwB,EAAQ,MAAKA,EAAUA,EAAQ,IAC7CA,EAAQz0B,OAAS,EACnB,MAAM,IAAIu0B,EAAiB,WAG7B,IAAII,EAAWF,EAAQhd,KAAI,SAAUiO,EAAQpmB,GAC3C,IAAI4mB,EAAU5mB,EAAIm1B,EAAQz0B,OAAS,EAEnC,OAnDJ,SAAmB0lB,EAAQQ,EAAS4H,EAASnB,GAC3CA,EAnBF,SAAcA,GACZ,IAAIiH,GAAS,EACb,OAAO,WACDA,IACJA,GAAS,EACTjH,EAAShkB,WAAM,EAAQjE,WACzB,CACF,CAYa0U,CAAKuT,GAChB,IAAIiI,GAAS,EACblP,EAAO3L,GAAG,SAAS,WACjB6a,GAAS,CACX,SACY9wB,IAAR6vB,IAAmBA,EAAM,EAAQ,OACrCA,EAAIjO,EAAQ,CACV9B,SAAUsC,EACV/U,SAAU2c,IACT,SAAU3V,GACX,GAAIA,EAAK,OAAOwU,EAASxU,GACzByc,GAAS,EACTjI,GACF,IACA,IAAIvI,GAAY,EAChB,OAAO,SAAUjM,GACf,IAAIyc,IACAxQ,EAIJ,OAHAA,GAAY,EAtBhB,SAAmBsB,GACjB,OAAOA,EAAO0O,WAAqC,mBAAjB1O,EAAO2O,KAC3C,CAuBQC,CAAU5O,GAAgBA,EAAO2O,QACP,mBAAnB3O,EAAOrQ,QAA+BqQ,EAAOrQ,eACxDsX,EAASxU,GAAO,IAAIiV,EAAqB,QAC3C,CACF,CAyBWyH,CAAUnP,EAAQQ,EADX5mB,EAAI,GACyB,SAAU6Y,GAC9C/O,IAAOA,EAAQ+O,GAChBA,GAAKwc,EAAS7c,QAAQhS,GACtBogB,IACJyO,EAAS7c,QAAQhS,GACjB6mB,EAASvjB,GACX,GACF,IACA,OAAOqrB,EAAQK,OAAOtL,EACxB,+BClFA,IAAIuL,EAAwB,UAAiCA,sBAiB7D3hB,EAAOvU,QAAU,CACfsmB,iBAdF,SAA0B7J,EAAO8D,EAAS4V,EAAWrP,GACnD,IAAIsP,EAJN,SAA2B7V,EAASuG,EAAUqP,GAC5C,OAAgC,MAAzB5V,EAAQ6E,cAAwB7E,EAAQ6E,cAAgB0B,EAAWvG,EAAQ4V,GAAa,IACjG,CAEYE,CAAkB9V,EAASuG,EAAUqP,GAC/C,GAAW,MAAPC,EAAa,CACf,IAAM9pB,SAAS8pB,IAAQntB,KAAK+J,MAAMojB,KAASA,GAAQA,EAAM,EAEvD,MAAM,IAAIF,EADCpP,EAAWqP,EAAY,gBACIC,GAExC,OAAOntB,KAAK+J,MAAMojB,EACpB,CAGA,OAAO3Z,EAAMsK,WAAa,GAAK,KACjC,mBClBAxS,EAAOvU,QAAU,EAAjB,oCCAAA,EAAUuU,EAAOvU,QAAU,EAAjB,OACF8lB,OAAS9lB,EACjBA,EAAQ2kB,SAAW3kB,EACnBA,EAAQ4kB,SAAW,EAAnB,MACA5kB,EAAQ0kB,OAAS,EAAjB,MACA1kB,EAAQylB,UAAY,EAApB,MACAzlB,EAAQwlB,YAAc,EAAtB,MACAxlB,EAAQsqB,SAAW,EAAnB,MACAtqB,EAAQs2B,SAAW,EAAnB,kECNIC,EAAmB,SAAUC,GAE7B,SAASD,EAAgBE,GACrB,IAAIvK,EAAQsK,EAAOvvB,KAAKd,OAASA,KAEjC,OADA+lB,EAAMuK,OAASA,EACRvK,CACX,CAwBA,OA7BA,QAAUqK,EAAiBC,GAM3BvzB,OAAOuH,eAAe+rB,EAAgBpzB,UAAW,QAAS,CACtDuH,IAAK,WACD,OAAOvE,KAAKuwB,UAChB,EACAjsB,YAAY,EACZ8H,cAAc,IAElBgkB,EAAgBpzB,UAAUwzB,WAAa,SAAUC,GAC7C,IAAIC,EAAeL,EAAOrzB,UAAUwzB,WAAW1vB,KAAKd,KAAMywB,GAE1D,OADCC,EAAad,QAAUa,EAAWtN,KAAKnjB,KAAKswB,QACtCI,CACX,EACAN,EAAgBpzB,UAAUuzB,SAAW,WACjC,IAAII,EAAK3wB,KAAM4wB,EAAWD,EAAGC,SAAUC,EAAcF,EAAGE,YAAaP,EAASK,EAAGL,OACjF,GAAIM,EACA,MAAMC,EAGV,OADA7wB,KAAK8wB,iBACER,CACX,EACAF,EAAgBpzB,UAAUmmB,KAAO,SAAU7lB,GACvC+yB,EAAOrzB,UAAUmmB,KAAKriB,KAAKd,KAAOA,KAAKswB,OAAShzB,EACpD,EACO8yB,CACX,CA/BsB,SA+BpB,4FCzBK,SAASW,EAAcC,GAC1B,OAAmB,IAAfA,EAAIh2B,OACGi2B,EAAA,EAEQ,IAAfD,EAAIh2B,OACGg2B,EAAI,GAER,SAAejkB,GAClB,OAAOikB,EAAIlB,QAAO,SAAUre,EAAM3D,GAAM,OAAOA,EAAG2D,EAAO,GAAG1E,EAChE,CACJ,mCCXImkB,EAAc,WACd,SAASA,EAAWC,GACZA,IACAnxB,KAAKwwB,WAAaW,EAE1B,CA4EA,OA3EAD,EAAWl0B,UAAUo0B,KAAO,SAAUC,GAClC,IAAIC,EAAa,IAAIJ,EAGrB,OAFAI,EAAWnE,OAASntB,KACpBsxB,EAAWD,SAAWA,EACfC,CACX,EACAJ,EAAWl0B,UAAUm0B,UAAY,SAAUI,EAAgBntB,EAAOotB,GAC9D,IA8Ecl0B,EA9EVyoB,EAAQ/lB,KACRywB,GA6EUnzB,EA7EgBi0B,IA8EjBj0B,aAAiBm0B,EAAA,IAJtC,SAAoBn0B,GAChB,OAAOA,IAAS,EAAAo0B,EAAA,GAAWp0B,EAAM6lB,QAAS,EAAAuO,EAAA,GAAWp0B,EAAM8G,SAAU,EAAAstB,EAAA,GAAWp0B,EAAMk0B,SAC1F,CAEsDG,CAAWr0B,KAAU,QAAeA,GA9ElCi0B,EAAiB,IAAI,KAAeA,EAAgBntB,EAAOotB,GAY3G,OAXA,EAAAI,EAAA,IAAa,WACT,IAAIjB,EAAK5K,EAAOsL,EAAWV,EAAGU,SAAUlE,EAASwD,EAAGxD,OACpDsD,EAAWoB,IAAIR,EAEPA,EAASvwB,KAAK2vB,EAAYtD,GAC5BA,EAEMpH,EAAMyK,WAAWC,GAEjB1K,EAAM+L,cAAcrB,GACpC,IACOA,CACX,EACAS,EAAWl0B,UAAU80B,cAAgB,SAAUC,GAC3C,IACI,OAAO/xB,KAAKwwB,WAAWuB,EAC3B,CACA,MAAO5e,GACH4e,EAAK3tB,MAAM+O,EACf,CACJ,EACA+d,EAAWl0B,UAAU8V,QAAU,SAAUqQ,EAAM6O,GAC3C,IAAIjM,EAAQ/lB,KAEZ,OAAO,IADPgyB,EAAcC,EAAeD,KACN,SAAUzd,EAASC,GACtC,IAAIic,EAAa,IAAI,KAAe,CAChCtN,KAAM,SAAU7lB,GACZ,IACI6lB,EAAK7lB,EACT,CACA,MAAO6V,GACHqB,EAAOrB,GACPsd,EAAWyB,aACf,CACJ,EACA9tB,MAAOoQ,EACPgd,SAAUjd,IAEdwR,EAAMoL,UAAUV,EACpB,GACJ,EACAS,EAAWl0B,UAAUwzB,WAAa,SAAUC,GACxC,IAAIE,EACJ,OAA8B,QAAtBA,EAAK3wB,KAAKmtB,cAA2B,IAAPwD,OAAgB,EAASA,EAAGQ,UAAUV,EAChF,EACAS,EAAWl0B,UAAU,KAAqB,WACtC,OAAOgD,IACX,EACAkxB,EAAWl0B,UAAUwnB,KAAO,WAExB,IADA,IAAI2N,EAAa,GACRC,EAAK,EAAGA,EAAK1yB,UAAU1E,OAAQo3B,IACpCD,EAAWC,GAAM1yB,UAAU0yB,GAE/B,OAAOrB,EAAcoB,EAAdpB,CAA0B/wB,KACrC,EACAkxB,EAAWl0B,UAAUq1B,UAAY,SAAUL,GACvC,IAAIjM,EAAQ/lB,KAEZ,OAAO,IADPgyB,EAAcC,EAAeD,KACN,SAAUzd,EAASC,GACtC,IAAIlX,EACJyoB,EAAMoL,WAAU,SAAUrsB,GAAK,OAAQxH,EAAQwH,CAAI,IAAG,SAAUqO,GAAO,OAAOqB,EAAOrB,EAAM,IAAG,WAAc,OAAOoB,EAAQjX,EAAQ,GACvI,GACJ,EACA4zB,EAAW5d,OAAS,SAAU6d,GAC1B,OAAO,IAAID,EAAWC,EAC1B,EACOD,CACX,CAlFiB,GAoFjB,SAASe,EAAeD,GACpB,IAAIrB,EACJ,OAAgG,QAAxFA,EAAKqB,QAAiDA,EAAcM,EAAA,EAAOhe,eAA4B,IAAPqc,EAAgBA,EAAKrc,OACjI,kFC7FWie,GAA0B,cAAiB,SAAUlC,GAC5D,OAAO,WACHA,EAAOrwB,MACPA,KAAKqM,KAAO,0BACZrM,KAAKuM,QAAU,qBACnB,CACJ,wBCDIimB,EAAW,SAAUnC,GAErB,SAASmC,IACL,IAAIzM,EAAQsK,EAAOvvB,KAAKd,OAASA,KAOjC,OANA+lB,EAAM6J,QAAS,EACf7J,EAAM0M,iBAAmB,KACzB1M,EAAM2M,UAAY,GAClB3M,EAAM4M,WAAY,EAClB5M,EAAM6K,UAAW,EACjB7K,EAAM8K,YAAc,KACb9K,CACX,CAkHA,OA5HA,QAAUyM,EAASnC,GAWnBmC,EAAQx1B,UAAUo0B,KAAO,SAAUC,GAC/B,IAAIuB,EAAU,IAAIC,EAAiB7yB,KAAMA,MAEzC,OADA4yB,EAAQvB,SAAWA,EACZuB,CACX,EACAJ,EAAQx1B,UAAU8zB,eAAiB,WAC/B,GAAI9wB,KAAK4vB,OACL,MAAM,IAAI2C,CAElB,EACAC,EAAQx1B,UAAUmmB,KAAO,SAAU7lB,GAC/B,IAAIyoB,EAAQ/lB,MACZ,EAAA4xB,EAAA,IAAa,WACT,IAAIkB,EAAKnC,EAET,GADA5K,EAAM+K,kBACD/K,EAAM4M,UAAW,CACb5M,EAAM0M,mBACP1M,EAAM0M,iBAAmB/2B,MAAM2B,KAAK0oB,EAAM2M,YAE9C,IACI,IAAK,IAAIK,GAAK,QAAShN,EAAM0M,kBAAmBO,EAAKD,EAAG5P,QAAS6P,EAAG5L,KAAM4L,EAAKD,EAAG5P,OAAQ,CACvE6P,EAAG11B,MACT6lB,KAAK7lB,EAClB,CACJ,CACA,MAAO21B,GAASH,EAAM,CAAE1uB,MAAO6uB,EAAS,CACxC,QACI,IACQD,IAAOA,EAAG5L,OAASuJ,EAAKoC,EAAGG,SAASvC,EAAG7vB,KAAKiyB,EACpD,CACA,QAAU,GAAID,EAAK,MAAMA,EAAI1uB,KAAO,CACxC,CACJ,CACJ,GACJ,EACAouB,EAAQx1B,UAAUoH,MAAQ,SAAU+O,GAChC,IAAI4S,EAAQ/lB,MACZ,EAAA4xB,EAAA,IAAa,WAET,GADA7L,EAAM+K,kBACD/K,EAAM4M,UAAW,CAClB5M,EAAM6K,SAAW7K,EAAM4M,WAAY,EACnC5M,EAAM8K,YAAc1d,EAEpB,IADA,IAAIuf,EAAY3M,EAAM2M,UACfA,EAAU13B,QACb03B,EAAU7a,QAAQzT,MAAM+O,EAEhC,CACJ,GACJ,EACAqf,EAAQx1B,UAAUw0B,SAAW,WACzB,IAAIzL,EAAQ/lB,MACZ,EAAA4xB,EAAA,IAAa,WAET,GADA7L,EAAM+K,kBACD/K,EAAM4M,UAAW,CAClB5M,EAAM4M,WAAY,EAElB,IADA,IAAID,EAAY3M,EAAM2M,UACfA,EAAU13B,QACb03B,EAAU7a,QAAQ2Z,UAE1B,CACJ,GACJ,EACAgB,EAAQx1B,UAAUk1B,YAAc,WAC5BlyB,KAAK2yB,UAAY3yB,KAAK4vB,QAAS,EAC/B5vB,KAAK0yB,UAAY1yB,KAAKyyB,iBAAmB,IAC7C,EACA31B,OAAOuH,eAAemuB,EAAQx1B,UAAW,WAAY,CACjDuH,IAAK,WACD,IAAIosB,EACJ,OAAkC,QAAzBA,EAAK3wB,KAAK0yB,iBAA8B,IAAP/B,OAAgB,EAASA,EAAG31B,QAAU,CACpF,EACAsJ,YAAY,EACZ8H,cAAc,IAElBomB,EAAQx1B,UAAU80B,cAAgB,SAAUrB,GAExC,OADAzwB,KAAK8wB,iBACET,EAAOrzB,UAAU80B,cAAchxB,KAAKd,KAAMywB,EACrD,EACA+B,EAAQx1B,UAAUwzB,WAAa,SAAUC,GAGrC,OAFAzwB,KAAK8wB,iBACL9wB,KAAKmzB,wBAAwB1C,GACtBzwB,KAAKozB,gBAAgB3C,EAChC,EACA+B,EAAQx1B,UAAUo2B,gBAAkB,SAAU3C,GAC1C,IAAI1K,EAAQ/lB,KACR2wB,EAAK3wB,KAAM4wB,EAAWD,EAAGC,SAAU+B,EAAYhC,EAAGgC,UAAWD,EAAY/B,EAAG+B,UAChF,OAAI9B,GAAY+B,EACL,MAEX3yB,KAAKyyB,iBAAmB,KACxBC,EAAUr3B,KAAKo1B,GACR,IAAI4C,EAAA,IAAa,WACpBtN,EAAM0M,iBAAmB,MACzB,EAAAa,EAAA,GAAUZ,EAAWjC,EACzB,IACJ,EACA+B,EAAQx1B,UAAUm2B,wBAA0B,SAAU1C,GAClD,IAAIE,EAAK3wB,KAAM4wB,EAAWD,EAAGC,SAAUC,EAAcF,EAAGE,YAAa8B,EAAYhC,EAAGgC,UAChF/B,EACAH,EAAWrsB,MAAMysB,GAEZ8B,GACLlC,EAAWe,UAEnB,EACAgB,EAAQx1B,UAAUu2B,aAAe,WAC7B,IAAIjC,EAAa,IAAIJ,EAAA,EAErB,OADAI,EAAWnE,OAASntB,KACbsxB,CACX,EACAkB,EAAQlf,OAAS,SAAUkgB,EAAarG,GACpC,OAAO,IAAI0F,EAAiBW,EAAarG,EAC7C,EACOqF,CACX,CA9Hc,CA8HZtB,EAAA,GAEE2B,EAAoB,SAAUxC,GAE9B,SAASwC,EAAiBW,EAAarG,GACnC,IAAIpH,EAAQsK,EAAOvvB,KAAKd,OAASA,KAGjC,OAFA+lB,EAAMyN,YAAcA,EACpBzN,EAAMoH,OAASA,EACRpH,CACX,CAiBA,OAvBA,QAAU8M,EAAkBxC,GAO5BwC,EAAiB71B,UAAUmmB,KAAO,SAAU7lB,GACxC,IAAIqzB,EAAIoC,EACwE,QAA/EA,EAAiC,QAA3BpC,EAAK3wB,KAAKwzB,mBAAgC,IAAP7C,OAAgB,EAASA,EAAGxN,YAAyB,IAAP4P,GAAyBA,EAAGjyB,KAAK6vB,EAAIrzB,EACjI,EACAu1B,EAAiB71B,UAAUoH,MAAQ,SAAU+O,GACzC,IAAIwd,EAAIoC,EACyE,QAAhFA,EAAiC,QAA3BpC,EAAK3wB,KAAKwzB,mBAAgC,IAAP7C,OAAgB,EAASA,EAAGvsB,aAA0B,IAAP2uB,GAAyBA,EAAGjyB,KAAK6vB,EAAIxd,EAClI,EACA0f,EAAiB71B,UAAUw0B,SAAW,WAClC,IAAIb,EAAIoC,EAC4E,QAAnFA,EAAiC,QAA3BpC,EAAK3wB,KAAKwzB,mBAAgC,IAAP7C,OAAgB,EAASA,EAAGa,gBAA6B,IAAPuB,GAAyBA,EAAGjyB,KAAK6vB,EACjI,EACAkC,EAAiB71B,UAAUwzB,WAAa,SAAUC,GAC9C,IAAIE,EAAIoC,EACR,OAAmG,QAA3FA,EAA4B,QAAtBpC,EAAK3wB,KAAKmtB,cAA2B,IAAPwD,OAAgB,EAASA,EAAGQ,UAAUV,UAAgC,IAAPsC,EAAgBA,EAAK,IACpI,EACOF,CACX,CAzBuB,CAyBrBL,8GC/JK,SAAS1W,IAAS,CCAlB,IAAI2X,EAA8CC,EAAmB,SAAK50B,OAAWA,GAOrF,SAAS40B,EAAmBC,EAAMr2B,EAAO8G,GAC5C,MAAO,CACHuvB,KAAMA,EACNr2B,MAAOA,EACP8G,MAAOA,EAEf,yBCJIqtB,EAAc,SAAUpB,GAExB,SAASoB,EAAW+B,GAChB,IAAIzN,EAAQsK,EAAOvvB,KAAKd,OAASA,KAWjC,OAVA+lB,EAAM4M,WAAY,EACda,GACAzN,EAAMyN,YAAcA,GAChB,QAAeA,IACfA,EAAY3B,IAAI9L,IAIpBA,EAAMyN,YAAcI,EAEjB7N,CACX,CAwDA,OAtEA,QAAU0L,EAAYpB,GAetBoB,EAAWne,OAAS,SAAU6P,EAAM/e,EAAOotB,GACvC,OAAO,IAAIqC,EAAe1Q,EAAM/e,EAAOotB,EAC3C,EACAC,EAAWz0B,UAAUmmB,KAAO,SAAU7lB,GAC9B0C,KAAK2yB,UACLmB,ED1BL,SAA0Bx2B,GAC7B,OAAOo2B,EAAmB,IAAKp2B,OAAOwB,EAC1C,CCwBsCi1B,CAAiBz2B,GAAQ0C,MAGnDA,KAAKg0B,MAAM12B,EAEnB,EACAm0B,EAAWz0B,UAAUoH,MAAQ,SAAU+O,GAC/BnT,KAAK2yB,UACLmB,EDpCDJ,EAAmB,SAAK50B,ECoCqBqU,GAAMnT,OAGlDA,KAAK2yB,WAAY,EACjB3yB,KAAKi0B,OAAO9gB,GAEpB,EACAse,EAAWz0B,UAAUw0B,SAAW,WACxBxxB,KAAK2yB,UACLmB,EAA0BL,EAAuBzzB,OAGjDA,KAAK2yB,WAAY,EACjB3yB,KAAKk0B,YAEb,EACAzC,EAAWz0B,UAAUk1B,YAAc,WAC1BlyB,KAAK4vB,SACN5vB,KAAK2yB,WAAY,EACjBtC,EAAOrzB,UAAUk1B,YAAYpxB,KAAKd,MAClCA,KAAKwzB,YAAc,KAE3B,EACA/B,EAAWz0B,UAAUg3B,MAAQ,SAAU12B,GACnC0C,KAAKwzB,YAAYrQ,KAAK7lB,EAC1B,EACAm0B,EAAWz0B,UAAUi3B,OAAS,SAAU9gB,GACpC,IACInT,KAAKwzB,YAAYpvB,MAAM+O,EAC3B,CACA,QACInT,KAAKkyB,aACT,CACJ,EACAT,EAAWz0B,UAAUk3B,UAAY,WAC7B,IACIl0B,KAAKwzB,YAAYhC,UACrB,CACA,QACIxxB,KAAKkyB,aACT,CACJ,EACOT,CACX,CAxEiB,CAwEf4B,EAAA,IAEEc,EAAQtgB,SAAS7W,UAAUwZ,KAC/B,SAASA,EAAK1I,EAAIsmB,GACd,OAAOD,EAAMrzB,KAAKgN,EAAIsmB,EAC1B,CACA,IAAIC,EAAoB,WACpB,SAASA,EAAiBC,GACtBt0B,KAAKs0B,gBAAkBA,CAC3B,CAqCA,OApCAD,EAAiBr3B,UAAUmmB,KAAO,SAAU7lB,GACxC,IAAIg3B,EAAkBt0B,KAAKs0B,gBAC3B,GAAIA,EAAgBnR,KAChB,IACImR,EAAgBnR,KAAK7lB,EACzB,CACA,MAAO8G,GACHmwB,EAAqBnwB,EACzB,CAER,EACAiwB,EAAiBr3B,UAAUoH,MAAQ,SAAU+O,GACzC,IAAImhB,EAAkBt0B,KAAKs0B,gBAC3B,GAAIA,EAAgBlwB,MAChB,IACIkwB,EAAgBlwB,MAAM+O,EAC1B,CACA,MAAO/O,GACHmwB,EAAqBnwB,EACzB,MAGAmwB,EAAqBphB,EAE7B,EACAkhB,EAAiBr3B,UAAUw0B,SAAW,WAClC,IAAI8C,EAAkBt0B,KAAKs0B,gBAC3B,GAAIA,EAAgB9C,SAChB,IACI8C,EAAgB9C,UACpB,CACA,MAAOptB,GACHmwB,EAAqBnwB,EACzB,CAER,EACOiwB,CACX,CAzCuB,GA0CnBR,EAAkB,SAAUxD,GAE5B,SAASwD,EAAetC,EAAgBntB,EAAOotB,GAC3C,IACI8C,EASIE,EAVJzO,EAAQsK,EAAOvvB,KAAKd,OAASA,MAE7B,EAAA0xB,EAAA,GAAWH,KAAoBA,EAC/B+C,EAAkB,CACdnR,KAAOoO,QAAuDA,OAAiBzyB,EAC/EsF,MAAOA,QAAqCA,OAAQtF,EACpD0yB,SAAUA,QAA2CA,OAAW1yB,GAKhEinB,GAASuM,EAAA,EAAOmC,2BAChBD,EAAY13B,OAAOwW,OAAOie,IAChBW,YAAc,WAAc,OAAOnM,EAAMmM,aAAe,EAClEoC,EAAkB,CACdnR,KAAMoO,EAAepO,MAAQ3M,EAAK+a,EAAepO,KAAMqR,GACvDpwB,MAAOmtB,EAAentB,OAASoS,EAAK+a,EAAentB,MAAOowB,GAC1DhD,SAAUD,EAAeC,UAAYhb,EAAK+a,EAAeC,SAAUgD,KAIvEF,EAAkB/C,EAI1B,OADAxL,EAAMyN,YAAc,IAAIa,EAAiBC,GAClCvO,CACX,CACA,OA7BA,QAAU8N,EAAgBxD,GA6BnBwD,CACX,CA/BqB,CA+BnBpC,GAEF,SAAS8C,EAAqBnwB,GACtBkuB,EAAA,EAAOoC,uCACP,OAAatwB,IAGb,EAAAuwB,EAAA,GAAqBvwB,EAE7B,CAIA,SAAS0vB,EAA0Bc,EAAcnE,GAC7C,IAAIoE,EAAwBvC,EAAA,EAAOuC,sBACnCA,GAAyBC,EAAA,EAAgB7Z,YAAW,WAAc,OAAO4Z,EAAsBD,EAAcnE,EAAa,GAC9H,CACO,IAAImD,EAAiB,CACxBhE,QAAQ,EACRzM,KAAMrH,EACN1X,MAVJ,SAA6B+O,GACzB,MAAMA,CACV,EASIqe,SAAU1V,4FCpLHiZ,GAAsB,cAAiB,SAAU1E,GACxD,OAAO,SAAiCzkB,GACpCykB,EAAOrwB,MACPA,KAAKuM,QAAUX,EACTA,EAAO5Q,OAAS,4CAA8C4Q,EAAO6G,KAAI,SAAUU,EAAK7Y,GAAK,OAAOA,EAAI,EAAI,KAAO6Y,EAAI3T,UAAY,IAAGhE,KAAK,QAC3I,GACNwE,KAAKqM,KAAO,sBACZrM,KAAK4L,OAASA,CAClB,CACJ,cCNIynB,EAAgB,WAChB,SAASA,EAAa2B,GAClBh1B,KAAKg1B,gBAAkBA,EACvBh1B,KAAK4vB,QAAS,EACd5vB,KAAKi1B,WAAa,KAClBj1B,KAAKk1B,YAAc,IACvB,CA+GqB,IACbC,EAIR,OAnHA9B,EAAar2B,UAAUk1B,YAAc,WACjC,IAAIY,EAAKnC,EAAIyE,EAAKrC,EACdnnB,EACJ,IAAK5L,KAAK4vB,OAAQ,CACd5vB,KAAK4vB,QAAS,EACd,IAAIqF,EAAaj1B,KAAKi1B,WACtB,GAAIA,EAEA,GADAj1B,KAAKi1B,WAAa,KACdv5B,MAAMuD,QAAQg2B,GACd,IACI,IAAK,IAAII,GAAe,QAASJ,GAAaK,EAAiBD,EAAalS,QAASmS,EAAelO,KAAMkO,EAAiBD,EAAalS,OAAQ,CAC7HmS,EAAeh4B,MACrBi4B,OAAOv1B,KACpB,CACJ,CACA,MAAOizB,GAASH,EAAM,CAAE1uB,MAAO6uB,EAAS,CACxC,QACI,IACQqC,IAAmBA,EAAelO,OAASuJ,EAAK0E,EAAanC,SAASvC,EAAG7vB,KAAKu0B,EACtF,CACA,QAAU,GAAIvC,EAAK,MAAMA,EAAI1uB,KAAO,CACxC,MAGA6wB,EAAWM,OAAOv1B,MAG1B,IAAIw1B,EAAmBx1B,KAAKg1B,gBAC5B,IAAI,EAAAtD,EAAA,GAAW8D,GACX,IACIA,GACJ,CACA,MAAOvxB,GACH2H,EAAS3H,aAAa8wB,EAAsB9wB,EAAE2H,OAAS,CAAC3H,EAC5D,CAEJ,IAAIixB,EAAcl1B,KAAKk1B,YACvB,GAAIA,EAAa,CACbl1B,KAAKk1B,YAAc,KACnB,IACI,IAAK,IAAIO,GAAgB,QAASP,GAAcQ,EAAkBD,EAActS,QAASuS,EAAgBtO,KAAMsO,EAAkBD,EAActS,OAAQ,CACnJ,IAAIwS,EAAYD,EAAgBp4B,MAChC,IACIs4B,EAAcD,EAClB,CACA,MAAOxiB,GACHvH,EAASA,QAAuCA,EAAS,GACrDuH,aAAe4hB,EACfnpB,GAAS,SAAc,QAAc,IAAI,QAAOA,KAAU,QAAOuH,EAAIvH,SAGrEA,EAAOvQ,KAAK8X,EAEpB,CACJ,CACJ,CACA,MAAO0iB,GAAST,EAAM,CAAEhxB,MAAOyxB,EAAS,CACxC,QACI,IACQH,IAAoBA,EAAgBtO,OAAS2L,EAAK0C,EAAcvC,SAASH,EAAGjyB,KAAK20B,EACzF,CACA,QAAU,GAAIL,EAAK,MAAMA,EAAIhxB,KAAO,CACxC,CACJ,CACA,GAAIwH,EACA,MAAM,IAAImpB,EAAoBnpB,EAEtC,CACJ,EACAynB,EAAar2B,UAAU60B,IAAM,SAAUiE,GACnC,IAAInF,EACJ,GAAImF,GAAYA,IAAa91B,KACzB,GAAIA,KAAK4vB,OACLgG,EAAcE,OAEb,CACD,GAAIA,aAAoBzC,EAAc,CAClC,GAAIyC,EAASlG,QAAUkG,EAASC,WAAW/1B,MACvC,OAEJ81B,EAASE,WAAWh2B,KACxB,EACCA,KAAKk1B,YAA0C,QAA3BvE,EAAK3wB,KAAKk1B,mBAAgC,IAAPvE,EAAgBA,EAAK,IAAIt1B,KAAKy6B,EAC1F,CAER,EACAzC,EAAar2B,UAAU+4B,WAAa,SAAUE,GAC1C,IAAIhB,EAAaj1B,KAAKi1B,WACtB,OAAOA,IAAegB,GAAWv6B,MAAMuD,QAAQg2B,IAAeA,EAAW/uB,SAAS+vB,EACtF,EACA5C,EAAar2B,UAAUg5B,WAAa,SAAUC,GAC1C,IAAIhB,EAAaj1B,KAAKi1B,WACtBj1B,KAAKi1B,WAAav5B,MAAMuD,QAAQg2B,IAAeA,EAAW55B,KAAK46B,GAAShB,GAAcA,EAAa,CAACA,EAAYgB,GAAUA,CAC9H,EACA5C,EAAar2B,UAAUk5B,cAAgB,SAAUD,GAC7C,IAAIhB,EAAaj1B,KAAKi1B,WAClBA,IAAegB,EACfj2B,KAAKi1B,WAAa,KAEbv5B,MAAMuD,QAAQg2B,KACnB,EAAA3B,EAAA,GAAU2B,EAAYgB,EAE9B,EACA5C,EAAar2B,UAAUu4B,OAAS,SAAUO,GACtC,IAAIZ,EAAcl1B,KAAKk1B,YACvBA,IAAe,EAAA5B,EAAA,GAAU4B,EAAaY,GAClCA,aAAoBzC,GACpByC,EAASI,cAAcl2B,KAE/B,EACAqzB,EAAa8C,QACLhB,EAAQ,IAAI9B,GACVzD,QAAS,EACRuF,GAEJ9B,CACX,CA3HmB,GA6HR+C,EAAqB/C,EAAa8C,MACtC,SAASE,EAAe/4B,GAC3B,OAAQA,aAAiB+1B,GACpB/1B,GAAS,WAAYA,IAAS,EAAAo0B,EAAA,GAAWp0B,EAAMi4B,UAAW,EAAA7D,EAAA,GAAWp0B,EAAMu0B,OAAQ,EAAAH,EAAA,GAAWp0B,EAAM40B,YAC7G,CACA,SAAS0D,EAAcD,IACf,EAAAjE,EAAA,GAAWiE,GACXA,IAGAA,EAAUzD,aAElB,gDC7IO,IAAII,EAAS,CAChBgE,iBAAkB,KAClBzB,sBAAuB,KACvBvgB,aAASxV,EACT41B,uCAAuC,EACvCD,0BAA0B,qDCJnB8B,GAAa,cAAiB,SAAUlG,GAAU,OAAO,WAChEA,EAAOrwB,MACPA,KAAKqM,KAAO,aACZrM,KAAKuM,QAAU,yBACnB,CAAG,cCHI,SAASiqB,EAAerJ,EAAQmF,GACnC,IAAImE,EAA8B,iBAAXnE,EACvB,OAAO,IAAIhe,SAAQ,SAAUC,EAASC,GAClC,IAAIic,EAAa,IAAI,KAAe,CAChCtN,KAAM,SAAU7lB,GACZiX,EAAQjX,GACRmzB,EAAWyB,aACf,EACA9tB,MAAOoQ,EACPgd,SAAU,WACFiF,EACAliB,EAAQ+d,EAAOoE,cAGfliB,EAAO,IAAI+hB,EAEnB,IAEJpJ,EAAOgE,UAAUV,EACrB,GACJ,4FCnBO,SAASkG,EAAUC,EAAWC,GAEjC,YADc,IAAVA,IAAoBA,EAAQ,IACzB,QAAQ,SAAU1J,EAAQsD,GAC7BtD,EAAOgE,WAAU,OAAyBV,GAAY,SAAUnzB,GAAS,OAAO,EAAAw5B,EAAA,GAAgBrG,EAAYmG,GAAW,WAAc,OAAOnG,EAAWtN,KAAK7lB,EAAQ,GAAGu5B,EAAQ,IAAG,WAAc,OAAO,EAAAC,EAAA,GAAgBrG,EAAYmG,GAAW,WAAc,OAAOnG,EAAWe,UAAY,GAAGqF,EAAQ,IAAG,SAAU1jB,GAAO,OAAO,EAAA2jB,EAAA,GAAgBrG,EAAYmG,GAAW,WAAc,OAAOnG,EAAWrsB,MAAM+O,EAAM,GAAG0jB,EAAQ,IACla,GACJ,CCPO,SAASE,EAAYH,EAAWC,GAEnC,YADc,IAAVA,IAAoBA,EAAQ,IACzB,QAAQ,SAAU1J,EAAQsD,GAC7BA,EAAWoB,IAAI+E,EAAUI,UAAS,WAAc,OAAO7J,EAAOgE,UAAUV,EAAa,GAAGoG,GAC5F,GACJ,uCCJO,SAASI,EAAsBlqB,EAAO6pB,GACzC,IAAK7pB,EACD,MAAM,IAAInR,MAAM,2BAEpB,OAAO,IAAIs1B,EAAA,GAAW,SAAUT,IAC5B,EAAAqG,EAAA,GAAgBrG,EAAYmG,GAAW,WACnC,IAAI/J,EAAW9f,EAAM1Q,OAAO2pB,kBAC5B,EAAA8Q,EAAA,GAAgBrG,EAAYmG,GAAW,WACnC/J,EAAS1J,OAAOtG,MAAK,SAAUqa,GACvBA,EAAO9P,KACPqJ,EAAWe,WAGXf,EAAWtN,KAAK+T,EAAO55B,MAE/B,GACJ,GAAG,GAAG,EACV,GACJ,GACJ,2ECRO,SAAS65B,EAAUpqB,EAAO6pB,GAC7B,GAAa,MAAT7pB,EAAe,CACf,IAAI,EAAAqqB,EAAA,GAAoBrqB,GACpB,OCbL,SAA4BA,EAAO6pB,GACtC,OAAO,EAAAS,EAAA,IAAUtqB,GAAOyX,KAAKuS,EAAYH,GAAYD,EAAUC,GACnE,CDWmBU,CAAmBvqB,EAAO6pB,GAErC,IAAI,EAAAW,EAAA,GAAYxqB,GACZ,OElBL,SAAuBA,EAAO6pB,GACjC,OAAO,IAAI1F,EAAA,GAAW,SAAUT,GAC5B,IAAIn2B,EAAI,EACR,OAAOs8B,EAAUI,UAAS,WAClB18B,IAAMyS,EAAM/R,OACZy1B,EAAWe,YAGXf,EAAWtN,KAAKpW,EAAMzS,MACjBm2B,EAAWb,QACZ5vB,KAAKg3B,WAGjB,GACJ,GACJ,CFGmBQ,CAAczqB,EAAO6pB,GAEhC,IAAI,EAAAa,EAAA,GAAU1qB,GACV,OGnBL,SAAyBA,EAAO6pB,GACnC,OAAO,EAAAS,EAAA,IAAUtqB,GAAOyX,KAAKuS,EAAYH,GAAYD,EAAUC,GACnE,CHiBmBc,CAAgB3qB,EAAO6pB,GAElC,IAAI,EAAAe,EAAA,GAAgB5qB,GAChB,OAAOkqB,EAAsBlqB,EAAO6pB,GAExC,IAAI,EAAAgB,EAAA,GAAW7qB,GACX,OIxBL,SAA0BA,EAAO6pB,GACpC,OAAO,IAAI1F,EAAA,GAAW,SAAUT,GAC5B,IAAI5D,EAsBJ,OArBA,EAAAiK,EAAA,GAAgBrG,EAAYmG,GAAW,WACnC/J,EAAW9f,EAAM,QACjB,EAAA+pB,EAAA,GAAgBrG,EAAYmG,GAAW,WACnC,IAAIjG,EACArzB,EACA8pB,EACJ,IAC2B9pB,GAAtBqzB,EAAK9D,EAAS1J,QAAmB7lB,MAAO8pB,EAAOuJ,EAAGvJ,IACvD,CACA,MAAOjU,GAEH,YADAsd,EAAWrsB,MAAM+O,EAErB,CACIiU,EACAqJ,EAAWe,WAGXf,EAAWtN,KAAK7lB,EAExB,GAAG,GAAG,EACV,IACO,WAAc,OAAO,EAAAo0B,EAAA,GAAW7E,aAA2C,EAASA,EAASqG,SAAWrG,EAASqG,QAAU,CACtI,GACJ,CJFmB2E,CAAiB9qB,EAAO6pB,GAEnC,IAAI,EAAAkB,EAAA,GAAqB/qB,GACrB,OK7BL,SAAoCA,EAAO6pB,GAC9C,OAAOK,GAAsB,OAAmClqB,GAAQ6pB,EAC5E,CL2BmBmB,CAA2BhrB,EAAO6pB,EAEjD,CACA,MAAM,OAAiC7pB,EAC3C,CMjCO,SAAS1P,EAAK0P,EAAO6pB,GACxB,OAAOA,EAAYO,EAAUpqB,EAAO6pB,IAAa,EAAAS,EAAA,IAAUtqB,EAC/D,0KCQO,SAASsqB,EAAUtqB,GACtB,GAAIA,aAAiB,IACjB,OAAOA,EAEX,GAAa,MAATA,EAAe,CACf,IAAI,OAAoBA,GACpB,OAoB0BpO,EApBGoO,EAqB9B,IAAI,KAAW,SAAU0jB,GAC5B,IAAIuH,EAAMr5B,EAAI,OACd,IAAI,OAAWq5B,EAAI7G,WACf,OAAO6G,EAAI7G,UAAUV,GAEzB,MAAM,IAAItzB,UAAU,iEACxB,IAzBI,IAAI,OAAY4P,GACZ,OA0BkBxN,EA1BGwN,EA2BtB,IAAI,KAAW,SAAU0jB,GAC5B,IAAK,IAAIn2B,EAAI,EAAGA,EAAIiF,EAAMvE,SAAWy1B,EAAWb,OAAQt1B,IACpDm2B,EAAWtN,KAAK5jB,EAAMjF,IAE1Bm2B,EAAWe,UACf,IA9BI,IAAI,OAAUzkB,GACV,OA+BgB0P,EA/BG1P,EAgCpB,IAAI,KAAW,SAAU0jB,GAC5BhU,EACKI,MAAK,SAAUvf,GACXmzB,EAAWb,SACZa,EAAWtN,KAAK7lB,GAChBmzB,EAAWe,WAEnB,IAAG,SAAUre,GAAO,OAAOsd,EAAWrsB,MAAM+O,EAAM,IAC7C0J,KAAK,KAAM,IACpB,IAvCI,IAAI,OAAgB9P,GAChB,OAAOkrB,EAAkBlrB,GAE7B,IAAI,OAAWA,GACX,OAqCiBmZ,EArCGnZ,EAsCrB,IAAI,KAAW,SAAU0jB,GAC5B,IAAIqC,EAAKnC,EACT,IACI,IAAK,IAAIuH,GAAa,QAAShS,GAAWiS,EAAeD,EAAW/U,QAASgV,EAAa/Q,KAAM+Q,EAAeD,EAAW/U,OAAQ,CAC9H,IAAI7lB,EAAQ66B,EAAa76B,MAEzB,GADAmzB,EAAWtN,KAAK7lB,GACZmzB,EAAWb,OACX,MAER,CACJ,CACA,MAAOqD,GAASH,EAAM,CAAE1uB,MAAO6uB,EAAS,CACxC,QACI,IACQkF,IAAiBA,EAAa/Q,OAASuJ,EAAKuH,EAAWhF,SAASvC,EAAG7vB,KAAKo3B,EAChF,CACA,QAAU,GAAIpF,EAAK,MAAMA,EAAI1uB,KAAO,CACxC,CACAqsB,EAAWe,UACf,IAvDI,IAAI,OAAqBzkB,GACrB,OA6D2BqrB,EA7DGrrB,EA8D/BkrB,GAAkB,OAAmCG,GA5D5D,CA2DG,IAAgCA,EA3BVlS,EAZDzJ,EAREld,EATQZ,EAFlC,MAAM,OAAiCoO,EAC3C,CAoDO,SAASkrB,EAAkBI,GAC9B,OAAO,IAAI,KAAW,SAAU5H,IAOpC,SAAiB4H,EAAe5H,GAC5B,IAAI6H,EAAiBC,EACjBnD,EAAKzE,EACT,OAAO,QAAU3wB,UAAM,OAAQ,GAAQ,WACnC,IAAI1C,EAAOu4B,EACX,OAAO,QAAY71B,MAAM,SAAU+yB,GAC/B,OAAQA,EAAGyF,OACP,KAAK,EACDzF,EAAG0F,KAAKp9B,KAAK,CAAC,EAAG,EAAG,EAAG,KACvBi9B,GAAkB,QAAcD,GAChCtF,EAAGyF,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAGF,EAAgBnV,QACnC,KAAK,EACD,IAAMoV,EAAoBxF,EAAG2F,QAA2BtR,KAAO,MAAO,CAAC,EAAG,GAG1E,GAFA9pB,EAAQi7B,EAAkBj7B,MAC1BmzB,EAAWtN,KAAK7lB,GACZmzB,EAAWb,OACX,MAAO,CAAC,GAEZmD,EAAGyF,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAG,GACnB,KAAK,EAAG,MAAO,CAAC,EAAG,IACnB,KAAK,EAGD,OAFA3C,EAAQ9C,EAAG2F,OACXtD,EAAM,CAAEhxB,MAAOyxB,GACR,CAAC,EAAG,IACf,KAAK,EAED,OADA9C,EAAG0F,KAAKp9B,KAAK,CAAC,EAAG,CAAE,EAAG,KAChBk9B,IAAsBA,EAAkBnR,OAASuJ,EAAK2H,EAAgBpF,QACrE,CAAC,EAAGvC,EAAG7vB,KAAKw3B,IAD0E,CAAC,EAAG,GAErG,KAAK,EACDvF,EAAG2F,OACH3F,EAAGyF,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAG,IACnB,KAAK,EACD,GAAIpD,EAAK,MAAMA,EAAIhxB,MACnB,MAAO,CAAC,GACZ,KAAK,GAAI,MAAO,CAAC,GACjB,KAAK,GAED,OADAqsB,EAAWe,WACJ,CAAC,GAEpB,GACJ,GACJ,EAlDQpiB,CAAQipB,EAAe5H,GAAY3T,OAAM,SAAU3J,GAAO,OAAOsd,EAAWrsB,MAAM+O,EAAM,GAC5F,GACJ,8DC3FO,SAASwlB,EAAyBnF,EAAaoF,EAAQC,EAAYC,EAASC,GAC/E,OAAO,IAAIC,EAAmBxF,EAAaoF,EAAQC,EAAYC,EAASC,EAC5E,CACA,IAAIC,EAAsB,SAAU3I,GAEhC,SAAS2I,EAAmBxF,EAAaoF,EAAQC,EAAYC,EAASC,EAAYE,GAC9E,IAAIlT,EAAQsK,EAAOvvB,KAAKd,KAAMwzB,IAAgBxzB,KAuC9C,OAtCA+lB,EAAMgT,WAAaA,EACnBhT,EAAMkT,kBAAoBA,EAC1BlT,EAAMiO,MAAQ4E,EACR,SAAUt7B,GACR,IACIs7B,EAAOt7B,EACX,CACA,MAAO6V,GACHqgB,EAAYpvB,MAAM+O,EACtB,CACJ,EACEkd,EAAOrzB,UAAUg3B,MACvBjO,EAAMkO,OAAS6E,EACT,SAAU3lB,GACR,IACI2lB,EAAQ3lB,EACZ,CACA,MAAOA,GACHqgB,EAAYpvB,MAAM+O,EACtB,CACA,QACInT,KAAKkyB,aACT,CACJ,EACE7B,EAAOrzB,UAAUi3B,OACvBlO,EAAMmO,UAAY2E,EACZ,WACE,IACIA,GACJ,CACA,MAAO1lB,GACHqgB,EAAYpvB,MAAM+O,EACtB,CACA,QACInT,KAAKkyB,aACT,CACJ,EACE7B,EAAOrzB,UAAUk3B,UAChBnO,CACX,CASA,OAnDA,QAAUiT,EAAoB3I,GA2C9B2I,EAAmBh8B,UAAUk1B,YAAc,WACvC,IAAIvB,EACJ,IAAK3wB,KAAKi5B,mBAAqBj5B,KAAKi5B,oBAAqB,CACrD,IAAIC,EAAWl5B,KAAK4vB,OACpBS,EAAOrzB,UAAUk1B,YAAYpxB,KAAKd,OACjCk5B,IAAwC,QAA1BvI,EAAK3wB,KAAK+4B,kBAA+B,IAAPpI,GAAyBA,EAAG7vB,KAAKd,MACtF,CACJ,EACOg5B,CACX,CArDyB,SAqDvB,mFCvDK,SAASG,EAAqBC,EAAYC,GAG7C,YAFoB,IAAhBA,IAA0BA,EAAc,KAC5CD,EAAaA,QAA+CA,EAAaE,GAClE,QAAQ,SAAUnM,EAAQsD,GAC7B,IAAI8I,EACA9wB,GAAQ,EACZ0kB,EAAOgE,WAAU,OAAyBV,GAAY,SAAUnzB,GAC5D,IAAIk8B,EAAaH,EAAY/7B,IACzBmL,GAAU2wB,EAAWG,EAAaC,KAClC/wB,GAAQ,EACR8wB,EAAcC,EACd/I,EAAWtN,KAAK7lB,GAExB,IACJ,GACJ,CACA,SAASg8B,EAAez0B,EAAGnG,GACvB,OAAOmG,IAAMnG,CACjB,wECnBO,SAASsuB,EAAOyM,EAAWrF,GAC9B,OAAO,QAAQ,SAAUjH,EAAQsD,GAC7B,IAAIhiB,EAAQ,EACZ0e,EAAOgE,WAAU,OAAyBV,GAAY,SAAUnzB,GAAS,OAAOm8B,EAAU34B,KAAKszB,EAAS92B,EAAOmR,MAAYgiB,EAAWtN,KAAK7lB,EAAQ,IACvJ,GACJ,wECLO,SAASmV,EAAIinB,EAAStF,GACzB,OAAO,QAAQ,SAAUjH,EAAQsD,GAC7B,IAAIhiB,EAAQ,EACZ0e,EAAOgE,WAAU,OAAyBV,GAAY,SAAUnzB,GAC5DmzB,EAAWtN,KAAKuW,EAAQ54B,KAAKszB,EAAS92B,EAAOmR,KACjD,IACJ,GACJ,uECPO,SAASkrB,EAASC,GAErB,YADmB,IAAfA,IAAyBA,EAAavsB,MACnC,OAAS,IAAUusB,EAC9B,oHCAO,SAASC,EAASH,EAASI,EAAgBF,GAE9C,YADmB,IAAfA,IAAyBA,EAAavsB,MACtC,EAAAqkB,EAAA,GAAWoI,GACJD,GAAS,SAAUh1B,EAAGvK,GAAK,OAAO,EAAAmY,EAAA,IAAI,SAAU/T,EAAGq7B,GAAM,OAAOD,EAAej1B,EAAGnG,EAAGpE,EAAGy/B,EAAK,GAA3D,EAA8D,EAAA1C,EAAA,IAAUqC,EAAQ70B,EAAGvK,IAAM,GAAGs/B,IAEtG,iBAAnBE,IACZF,EAAaE,IAEV,QAAQ,SAAU3M,EAAQsD,GAAc,OCV5C,SAAwBtD,EAAQsD,EAAYiJ,EAASE,EAAYI,EAAcC,EAAQC,EAAmBC,GAC7G,IAAI/7B,EAAS,GACTg8B,EAAS,EACT3rB,EAAQ,EACR4rB,GAAa,EACbC,EAAgB,YACZD,GAAej8B,EAAOpD,QAAWo/B,GACjC3J,EAAWe,UAEnB,EACI+I,EAAY,SAAUj9B,GAAS,OAAQ88B,EAASR,EAAaY,EAAWl9B,GAASc,EAAO/C,KAAKiC,EAAS,EACtGk9B,EAAa,SAAUl9B,GACvB28B,GAAUxJ,EAAWtN,KAAK7lB,GAC1B88B,IACA,IAAIK,GAAgB,GACpB,EAAApD,EAAA,IAAUqC,EAAQp8B,EAAOmR,MAAU0iB,WAAU,OAAyBV,GAAY,SAAUiK,GACxFV,SAA4DA,EAAaU,GACrET,EACAM,EAAUG,GAGVjK,EAAWtN,KAAKuX,EAExB,IAAG,WACCD,GAAgB,CACpB,QAAG37B,GAAW,WACV,GAAI27B,EACA,IACIL,IAUA,IATA,IAAIO,EAAU,WACV,IAAIC,EAAgBx8B,EAAOyZ,QACvBqiB,GACA,EAAApD,EAAA,GAAgBrG,EAAYyJ,GAAmB,WAAc,OAAOM,EAAWI,EAAgB,IAG/FJ,EAAWI,EAEnB,EACOx8B,EAAOpD,QAAUo/B,EAASR,GAC7Be,IAEJL,GACJ,CACA,MAAOnnB,GACHsd,EAAWrsB,MAAM+O,EACrB,CAER,IACJ,EAKA,OAJAga,EAAOgE,WAAU,OAAyBV,EAAY8J,GAAW,WAC7DF,GAAa,EACbC,GACJ,KACO,WACHH,SAA0EA,GAC9E,CACJ,CD9C0DU,CAAe1N,EAAQsD,EAAYiJ,EAASE,EAAa,IACnH,wEEdWkB,EAAwB,CAC/BC,IAAK,WACD,OAAQD,EAAsBE,UAAYzpB,MAAMwpB,KACpD,EACAC,cAAUl8B,GCDVm8B,EAAiB,SAAU5K,GAE3B,SAAS4K,EAAcC,EAAaC,EAAaC,QACzB,IAAhBF,IAA0BA,EAAc7tB,UACxB,IAAhB8tB,IAA0BA,EAAc9tB,UACjB,IAAvB+tB,IAAiCA,EAAqBN,GAC1D,IAAI/U,EAAQsK,EAAOvvB,KAAKd,OAASA,KASjC,OARA+lB,EAAMmV,YAAcA,EACpBnV,EAAMoV,YAAcA,EACpBpV,EAAMqV,mBAAqBA,EAC3BrV,EAAMsV,QAAU,GAChBtV,EAAMuV,qBAAsB,EAC5BvV,EAAMuV,oBAAsBH,IAAgB9tB,IAC5C0Y,EAAMmV,YAAcp4B,KAAK4C,IAAI,EAAGw1B,GAChCnV,EAAMoV,YAAcr4B,KAAK4C,IAAI,EAAGy1B,GACzBpV,CACX,CAmCA,OAlDA,QAAUkV,EAAe5K,GAgBzB4K,EAAcj+B,UAAUmmB,KAAO,SAAU7lB,GACrC,IAAIqzB,EAAK3wB,KAAM2yB,EAAYhC,EAAGgC,UAAW0I,EAAU1K,EAAG0K,QAASC,EAAsB3K,EAAG2K,oBAAqBF,EAAqBzK,EAAGyK,mBAAoBD,EAAcxK,EAAGwK,YACrKxI,IACD0I,EAAQhgC,KAAKiC,IACZg+B,GAAuBD,EAAQhgC,KAAK+/B,EAAmBL,MAAQI,IAEpEn7B,KAAKu7B,cACLlL,EAAOrzB,UAAUmmB,KAAKriB,KAAKd,KAAM1C,EACrC,EACA29B,EAAcj+B,UAAUwzB,WAAa,SAAUC,GAC3CzwB,KAAK8wB,iBACL9wB,KAAKu7B,cAIL,IAHA,IAAI7K,EAAe1wB,KAAKozB,gBAAgB3C,GACzB6K,EAANt7B,KAA+Bs7B,oBACpCp9B,EADK8B,KAAiEq7B,QACvDz9B,QACVtD,EAAI,EAAGA,EAAI4D,EAAKlD,SAAWy1B,EAAWb,OAAQt1B,GAAKghC,EAAsB,EAAI,EAClF7K,EAAWtN,KAAKjlB,EAAK5D,IAGzB,OADA0F,KAAKmzB,wBAAwB1C,GACtBC,CACX,EACAuK,EAAcj+B,UAAUu+B,YAAc,WAClC,IAAI5K,EAAK3wB,KAAMk7B,EAAcvK,EAAGuK,YAAaE,EAAqBzK,EAAGyK,mBAAoBC,EAAU1K,EAAG0K,QAASC,EAAsB3K,EAAG2K,oBACpIE,GAAsBF,EAAsB,EAAI,GAAKJ,EAEzD,GADAA,EAAc7tB,KAAYmuB,EAAqBH,EAAQrgC,QAAUqgC,EAAQ7sB,OAAO,EAAG6sB,EAAQrgC,OAASwgC,IAC/FF,EAAqB,CAGtB,IAFA,IAAIP,EAAMK,EAAmBL,MACzBryB,EAAO,EACFpO,EAAI,EAAGA,EAAI+gC,EAAQrgC,QAAUqgC,EAAQ/gC,IAAMygC,EAAKzgC,GAAK,EAC1DoO,EAAOpO,EAEXoO,GAAQ2yB,EAAQ7sB,OAAO,EAAG9F,EAAO,EACrC,CACJ,EACOuyB,CACX,CApDoB,CAoDlBzI,EAAA,iCCSF,SAASiJ,EAAYC,EAAO3mB,GAExB,IADA,IAAI9G,EAAO,GACFmkB,EAAK,EAAGA,EAAK1yB,UAAU1E,OAAQo3B,IACpCnkB,EAAKmkB,EAAK,GAAK1yB,UAAU0yB,GAE7B,IAAW,IAAPrd,GAIJ,IAAW,IAAPA,EAAJ,CAGA,IAAI4mB,EAAe,IAAI,KAAe,CAClCxY,KAAM,WACFwY,EAAazJ,cACbwJ,GACJ,IAEJ,OAAO,EAAArE,EAAA,IAAUtiB,EAAGpR,WAAM,GAAQ,QAAc,IAAI,QAAOsK,MAASkjB,UAAUwK,EAP9E,OALID,GAaR,CCjFO,SAASE,EAAYC,EAAoBC,EAAYlF,GACxD,IAAIjG,EAAIoC,EAAIC,EACR+I,EACAC,GAAW,EAOf,OANIH,GAAoD,iBAAvBA,GAC5BlL,EAAKkL,EAAmBE,WAAYA,OAAoB,IAAPpL,EAAgBtjB,IAAWsjB,EAAIoC,EAAK8I,EAAmBC,WAAYA,OAAoB,IAAP/I,EAAgB1lB,IAAW0lB,EAAsCiJ,OAAkB,KAApDhJ,EAAK6I,EAAmBG,WAA6ChJ,EAAI4D,EAAYiF,EAAmBjF,WAGzQmF,EAAcF,QAA+DA,EAAqBxuB,IDLnG,SAAe+M,QACF,IAAZA,IAAsBA,EAAU,CAAC,GACrC,IAAIuW,EAAKvW,EAAQ6hB,UAAWA,OAAmB,IAAPtL,EAAgB,WAAc,OAAO,IAAI6B,EAAA,CAAW,EAAI7B,EAAIoC,EAAK3Y,EAAQ8hB,aAAcA,OAAsB,IAAPnJ,GAAuBA,EAAIC,EAAK5Y,EAAQ+hB,gBAAiBA,OAAyB,IAAPnJ,GAAuBA,EAAIoJ,EAAKhiB,EAAQiiB,oBAAqBA,OAA6B,IAAPD,GAAuBA,EACnU,OAAO,SAAUE,GACb,IAAIC,EACAC,EACA5J,EACAoJ,EAAW,EACXS,GAAe,EACfC,GAAa,EACbC,EAAc,WACdH,SAAkEA,EAAgBtK,cAClFsK,OAAkB19B,CACtB,EACI48B,EAAQ,WACRiB,IACAJ,EAAa3J,OAAU9zB,EACvB29B,EAAeC,GAAa,CAChC,EACIE,EAAsB,WACtB,IAAIC,EAAON,EACXb,IACAmB,SAA4CA,EAAK3K,aACrD,EACA,OAAO,QAAQ,SAAU/E,EAAQsD,GAC7BuL,IACKU,GAAeD,GAChBE,IAEJ,IAAIlY,EAAQmO,EAAUA,QAAyCA,EAAUqJ,IACzExL,EAAWoB,KAAI,WAEM,KADjBmK,GACuBU,GAAeD,IAClCD,EAAkBf,EAAYmB,EAAqBP,GAE3D,IACA5X,EAAK0M,UAAUV,IACV8L,GACDP,EAAW,IACXO,EAAa,IAAI,KAAe,CAC5BpZ,KAAM,SAAU7lB,GAAS,OAAOmnB,EAAKtB,KAAK7lB,EAAQ,EAClD8G,MAAO,SAAU+O,GACbupB,GAAa,EACbC,IACAH,EAAkBf,EAAYC,EAAOQ,EAAc/oB,GACnDsR,EAAKrgB,MAAM+O,EACf,EACAqe,SAAU,WACNiL,GAAe,EACfE,IACAH,EAAkBf,EAAYC,EAAOS,GACrC1X,EAAK+M,UACT,KAEJ,EAAA6F,EAAA,IAAUlK,GAAQgE,UAAUoL,GAEpC,GAhCO,CAgCJD,EACP,CACJ,CCnDWQ,CAAM,CACTb,UAAW,WAAc,OAAO,IAAIhB,EAAcc,EAAYD,EAAYlF,EAAY,EACtFsF,cAAc,EACdC,iBAAiB,EACjBE,oBAAqBL,GAE7B,sFCfO,SAASh3B,IAEZ,IADA,IAAIiJ,EAAO,GACFmkB,EAAK,EAAGA,EAAK1yB,UAAU1E,OAAQo3B,IACpCnkB,EAAKmkB,GAAM1yB,UAAU0yB,GAEzB,OCNO,EAAAuH,EAAA,GAAS,EDMToD,EAAY,EAAA1/B,EAAA,GAAK4Q,GAAM,QAAaA,IAC/C,eENO,SAAS+uB,IAEZ,IADA,IAAIC,EAAS,GACJ7K,EAAK,EAAGA,EAAK1yB,UAAU1E,OAAQo3B,IACpC6K,EAAO7K,GAAM1yB,UAAU0yB,GAE3B,IAAIwE,GAAY,QAAaqG,GAC7B,OAAO,QAAQ,SAAU9P,EAAQsD,IAC5BmG,EAAY5xB,EAAOi4B,EAAQ9P,EAAQyJ,GAAa5xB,EAAOi4B,EAAQ9P,IAASgE,UAAUV,EACvF,GACJ,8DCXWqE,EAAkB,CACzB7Z,WAAY,SAAUpG,EAAS4G,GAE3B,IADA,IAAIxN,EAAO,GACFmkB,EAAK,EAAGA,EAAK1yB,UAAU1E,OAAQo3B,IACpCnkB,EAAKmkB,EAAK,GAAK1yB,UAAU0yB,GAE7B,IAAI4I,EAAWlG,EAAgBkG,SAC/B,OAAIA,aAA2C,EAASA,EAAS/f,YACtD+f,EAAS/f,WAAWtX,MAAMq3B,GAAU,QAAc,CAACnmB,EAAS4G,IAAU,QAAOxN,KAEjFgN,WAAWtX,WAAM,GAAQ,QAAc,CAACkR,EAAS4G,IAAU,QAAOxN,IAC7E,EACAiN,aAAc,SAAUgiB,GACpB,IAAIlC,EAAWlG,EAAgBkG,SAC/B,QAASA,aAA2C,EAASA,EAAS9f,eAAiBA,cAAcgiB,EACzG,EACAlC,cAAUl8B,iDCXP,IAAI+tB,EALe,mBAAXxwB,QAA0BA,OAAOwwB,SAGrCxwB,OAAOwwB,SAFH,2DCFR,IAAIyE,EAAsD,mBAAXj1B,QAAyBA,OAAOi1B,YAAe,8FCErG,SAAS5oB,EAAKnO,GACV,OAAOA,EAAIA,EAAIS,OAAS,EAC5B,CACO,SAASmiC,EAAkBlvB,GAC9B,OAAO,EAAAyjB,EAAA,GAAWhpB,EAAKuF,IAASA,EAAK6J,WAAQhZ,CACjD,CACO,SAASs+B,EAAanvB,GACzB,OCRwB3Q,EDQLoL,EAAKuF,MCPR,EAAAyjB,EAAA,GAAWp0B,EAAM05B,UDOA/oB,EAAK6J,WAAQhZ,ECR3C,IAAqBxB,CDS5B,CACO,SAAS+/B,EAAUpvB,EAAMyoB,GAC5B,MAA6B,iBAAfhuB,EAAKuF,GAAqBA,EAAK6J,MAAQ4e,CACzD,+BEbO,SAASpD,EAAU/4B,EAAK+iC,GAC3B,GAAI/iC,EAAK,CACL,IAAIkU,EAAQlU,EAAIsB,QAAQyhC,GACxB,GAAK7uB,GAASlU,EAAIiU,OAAOC,EAAO,EACpC,CACJ,+CCLO,SAAS8uB,EAAiBC,GAC7B,IAIIC,EAAWD,GAJF,SAAU/P,GACnB7xB,MAAMkF,KAAK2sB,GACXA,EAASnhB,OAAQ,IAAI1Q,OAAQ0Q,KACjC,IAIA,OAFAmxB,EAASzgC,UAAYF,OAAOwW,OAAO1X,MAAMoB,WACzCygC,EAASzgC,UAAUiP,YAAcwxB,EAC1BA,CACX,sFCRInmB,EAAU,KACP,SAASsa,EAAahV,GACzB,GAAI,IAAO8X,sCAAuC,CAC9C,IAAIgJ,GAAUpmB,EAKd,GAJIomB,IACApmB,EAAU,CAAEqmB,aAAa,EAAOv5B,MAAO,OAE3CwY,IACI8gB,EAAQ,CACR,IAAI/M,EAAKrZ,EAASqmB,EAAchN,EAAGgN,YAAav5B,EAAQusB,EAAGvsB,MAE3D,GADAkT,EAAU,KACNqmB,EACA,MAAMv5B,CAEd,CACJ,MAEIwY,GAER,CACO,SAASghB,EAAazqB,GACrB,IAAOuhB,uCAAyCpd,IAChDA,EAAQqmB,aAAc,EACtBrmB,EAAQlT,MAAQ+O,EAExB,+BC1BO,SAAS2jB,EAAgB+G,EAAoBjH,EAAWkH,EAAMjH,EAAOkH,QAC1D,IAAVlH,IAAoBA,EAAQ,QACjB,IAAXkH,IAAqBA,GAAS,GAClC,IAAIC,EAAuBpH,EAAUI,UAAS,WAC1C8G,IACIC,EACAF,EAAmBhM,IAAI7xB,KAAKg3B,SAAS,KAAMH,IAG3C72B,KAAKkyB,aAEb,GAAG2E,GAEH,GADAgH,EAAmBhM,IAAImM,IAClBD,EACD,OAAOC,CAEf,8CChBO,SAAS/M,EAASnsB,GACrB,OAAOA,CACX,gECFO,IAAIyyB,EAAc,SAAWzyB,GAAK,OAAOA,GAAyB,iBAAbA,EAAE9J,QAAoC,mBAAN8J,CAAmB,8DCCxG,SAAS6yB,EAAgBh5B,GAC5B,OAAOtC,OAAO2pB,gBAAiB,OAAWrnB,aAAiC,EAASA,EAAItC,OAAO2pB,eACnG,+BCHO,SAAS0L,EAAWp0B,GACvB,MAAwB,mBAAVA,CAClB,wFCAO,SAAS85B,EAAoBrqB,GAChC,OAAO,OAAWA,EAAM,KAC5B,wECFO,SAAS6qB,EAAW7qB,GACvB,OAAO,OAAWA,aAAqC,EAASA,EAAM,KAC1E,8DCHO,SAAS0qB,EAAUn6B,GACtB,OAAO,OAAWA,aAAqC,EAASA,EAAMuf,KAC1E,gFCDO,SAASohB,EAAmC7F,GAC/C,OAAO,QAAiBp4B,KAAMN,WAAW,WACrC,IAAIw+B,EAAQvN,EAAIrzB,EAChB,OAAO,QAAY0C,MAAM,SAAU+yB,GAC/B,OAAQA,EAAGyF,OACP,KAAK,EACD0F,EAAS9F,EAAe+F,YACxBpL,EAAGyF,MAAQ,EACf,KAAK,EACDzF,EAAG0F,KAAKp9B,KAAK,CAAC,EAAG,CAAE,EAAG,KACtB03B,EAAGyF,MAAQ,EACf,KAAK,EAED,MAAO,CAAC,GAAG,QAAQ0F,EAAO98B,SAC9B,KAAK,EAED,OADAuvB,EAAKoC,EAAG2F,OAAQp7B,EAAQqzB,EAAGrzB,MAAcqzB,EAAGvJ,KAErC,CAAC,GAAG,aAAQ,IADD,CAAC,EAAG,GAE1B,KAAK,EAAG,MAAO,CAAC,EAAG2L,EAAG2F,QACtB,KAAK,EAAG,MAAO,CAAC,GAAG,QAAQp7B,IAC3B,KAAK,EAAG,MAAO,CAAC,EAAGy1B,EAAG2F,QACtB,KAAK,EAED,OADA3F,EAAG2F,OACI,CAAC,EAAG,GACf,KAAK,EAAG,MAAO,CAAC,EAAG,IACnB,KAAK,EAED,OADAwF,EAAOE,cACA,CAAC,GACZ,KAAK,GAAI,MAAO,CAAC,GAEzB,GACJ,GACJ,CACO,SAAStG,EAAqBn5B,GACjC,OAAO,OAAWA,aAAiC,EAASA,EAAIw/B,UACpE,8DCjCO,SAASE,EAAQrsB,GACpB,OAAO,SAAUmb,GACb,GALD,SAAiBA,GACpB,OAAO,OAAWA,aAAuC,EAASA,EAAOiE,KAC7E,CAGYkN,CAAQnR,GACR,OAAOA,EAAOiE,MAAK,SAAUmN,GACzB,IACI,OAAOvsB,EAAKusB,EAAcv+B,KAC9B,CACA,MAAOmT,GACHnT,KAAKoE,MAAM+O,EACf,CACJ,IAEJ,MAAM,IAAIhW,UAAU,yCACxB,CACJ,qEChBO,SAASw3B,EAAqBxhB,GACjC,IAAgB8H,YAAW,WACvB,IAAIqb,EAAmB,IAAOA,iBAC9B,IAAIA,EAIA,MAAMnjB,EAHNmjB,EAAiBnjB,EAKzB,GACJ,+BCZO,SAASqrB,EAAiCzxB,GAC7C,OAAO,IAAI5P,UAAU,iBAA6B,OAAV4P,GAAmC,iBAAVA,EAAqB,oBAAsB,IAAMA,EAAQ,KAAO,2HACrI,kCCAA,IAAI3O,EAAS,EAAQ,MACjB9B,EAAS8B,EAAO9B,OAGpB,SAASmiC,EAAWhxB,EAAKC,GACvB,IAAK,IAAIqF,KAAOtF,EACdC,EAAIqF,GAAOtF,EAAIsF,EAEnB,CASA,SAAS2rB,EAAYzhC,EAAKC,EAAkBlC,GAC1C,OAAOsB,EAAOW,EAAKC,EAAkBlC,EACvC,CAVIsB,EAAOe,MAAQf,EAAOE,OAASF,EAAOc,aAAed,EAAOoI,gBAC9D0J,EAAOvU,QAAUuE,GAGjBqgC,EAAUrgC,EAAQvE,GAClBA,EAAQyC,OAASoiC,GAOnBA,EAAW1hC,UAAYF,OAAOwW,OAAOhX,EAAOU,WAG5CyhC,EAAUniC,EAAQoiC,GAElBA,EAAWrhC,KAAO,SAAUJ,EAAKC,EAAkBlC,GACjD,GAAmB,iBAARiC,EACT,MAAM,IAAIE,UAAU,iCAEtB,OAAOb,EAAOW,EAAKC,EAAkBlC,EACvC,EAEA0jC,EAAWliC,MAAQ,SAAU8C,EAAMmF,EAAMjH,GACvC,GAAoB,iBAAT8B,EACT,MAAM,IAAInC,UAAU,6BAEtB,IAAIN,EAAMP,EAAOgD,GAUjB,YATaR,IAAT2F,EACsB,iBAAbjH,EACTX,EAAI4H,KAAKA,EAAMjH,GAEfX,EAAI4H,KAAKA,GAGX5H,EAAI4H,KAAK,GAEJ5H,CACT,EAEA6hC,EAAWthC,YAAc,SAAUkC,GACjC,GAAoB,iBAATA,EACT,MAAM,IAAInC,UAAU,6BAEtB,OAAOb,EAAOgD,EAChB,EAEAo/B,EAAWh6B,gBAAkB,SAAUpF,GACrC,GAAoB,iBAATA,EACT,MAAM,IAAInC,UAAU,6BAEtB,OAAOiB,EAAO7B,WAAW+C,EAC3B,kBC/DA,MAAMoR,EAAQ,EAAQ,KAAR,CAAiB,eACzBiuB,EAAgB,EAAQ,MACxBC,EAAc,EAAQ,MACtBle,EAAS,EAAQ,MACjBhE,EAAiB,EAAQ,MACzBmiB,EAAU,EAAQ,OAClB,OAAEviC,GAAW,EAAQ,MAErBwiC,EAAsB,MAK5B,SAASC,EAAeC,GACtB,OAAOA,EAAIr5B,QAAQ,6BAA8B,GACnD,CAWA,MAAMs5B,UAAave,EAAOnC,OACxB,WAAAtS,CAAaka,GAyCX,GApCAja,MAJAia,EAAOrpB,OAAOmW,OAAO,CACnB0L,eAAe,GACdwH,IAIHnmB,KAAKk/B,IAAMN,EAAY,GAAGp/B,SAAS,OAAO5B,MAAM,EAAG,GACnDoC,KAAKm/B,OAAO,cAAehZ,GAE3BnmB,KAAKo/B,YAAcjZ,EAAKkZ,UACpBlZ,EAAKiZ,aAAeR,EAAY,IAAIp/B,SAAS,OAC7C,KAEJQ,KAAKq/B,UAAYlZ,EAAKkZ,YAAa,EACnCr/B,KAAKs/B,cAAgBnZ,EAAKmZ,eAAiBL,EAAKK,cAChDt/B,KAAKu/B,kBAAoBv/B,KAAKs/B,cAAcE,WAC5Cx/B,KAAKsyB,OAASx1B,OAAOmW,OAAO,CAAC,EAAGgsB,EAAK3M,OAAQnM,EAAKmM,QAClDtyB,KAAKy/B,aAAetZ,EAAKsZ,cAAgB,CAAC,EAC1Cz/B,KAAK0/B,cAAgBvZ,EAAKuZ,eAAiB,CAAC,EAC5C1/B,KAAK2/B,aAAexZ,EAAKwZ,cAAgB,CAACX,GAAOA,GACjDh/B,KAAKyvB,QAAUtJ,EAAKsJ,UAAYtJ,EAAKzF,OAAS,CAACyF,EAAKzF,QAAU,IAC9D1gB,KAAK4/B,aAA2B9gC,IAAjBqnB,EAAKyZ,SAAwBzZ,EAAKyZ,QACjD5/B,KAAK6/B,sBAA6C/gC,IAA1BqnB,EAAK0Z,kBAAiC1Z,EAAK0Z,iBACnE7/B,KAAK8/B,mBAAqB3Z,EAAK2Z,oBA1CP,IA4CxB9/B,KAAKof,WAAY,EACjBpf,KAAK+/B,YAAa,EAClB//B,KAAKggC,YAAa,EAElBhgC,KAAKigC,mBAAgBnhC,EACrBkB,KAAKkgC,kBAAephC,EACpBkB,KAAKmgC,gBAAarhC,EAClBkB,KAAKogC,kBAAethC,EACpBkB,KAAKqgC,iBAAcvhC,EACnBkB,KAAKsgC,eAAYxhC,EAEjBkB,KAAKugC,MAASpa,EAAK9N,MAA6B,iBAAd8N,EAAK9N,KACnC8N,EAAK9N,KACLsmB,KAEC3+B,KAAKugC,MACR,KAAsB,oBAAXhxB,OACHsvB,EAAQ,IAAIjjC,MAAM,qEAAsE,sBAExFijC,EAAQ,IAAIjjC,MAAM,8CAA+C,sBAI3EoE,KAAKwgC,UAAW,EAChBxgC,KAAKygC,eAAgB,EACrBzgC,KAAK0gC,cAAe,EACpB1gC,KAAK2gC,kBAAoB,KACzB3gC,KAAK4gC,SAAW,KAChB5gC,KAAK6gC,mBAAqB,GAE1B7gC,KAAK8gC,gBAAiB,EACtB9gC,KAAK+gC,mBAAoB,EACzB/gC,KAAKghC,qBAAsB,EAC3BhhC,KAAKihC,oBAAqB,EAC1BjhC,KAAKkhC,uBAAyB,GAC9BlhC,KAAKmhC,WAAa,IAAIC,IACtBphC,KAAKqhC,iBAAmB,KAExBrhC,KAAKshC,cAAgB,GACrBthC,KAAKuhC,eAAiB,GAEtBvhC,KAAKwhC,OAAS,KACdxhC,KAAKyhC,IAAM,KACXzhC,KAAK0hC,UAAY,KAEjB,IACE1hC,KAAK2hC,IAAM,IAAK3hC,KAAKugC,MAAuB,kBAAEvgC,KAAKsyB,OACrD,CAAE,MAAOnf,GAEP,YADAnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,sBAE5B,CAIAnT,KAAK4hC,qBAA6D,iBAA/B5hC,KAAK2hC,IAAIE,kBAE5C7hC,KAAK2hC,IAAIG,2BAA6B,KACpC9hC,KAAK+hC,mBAAkB,EAEzB/hC,KAAK2hC,IAAIK,0BAA4B,KACnChiC,KAAK+hC,mBAAkB,EAEzB/hC,KAAK2hC,IAAIM,wBAA0B,KACjCjiC,KAAKkiC,0BAAyB,EAEhCliC,KAAK2hC,IAAIQ,uBAAyB,KAChCniC,KAAKoiC,yBAAwB,EAE/BpiC,KAAK2hC,IAAIU,eAAiB1c,IACxB3lB,KAAKsiC,gBAAgB3c,EAAK,EAIS,iBAA1B3lB,KAAK2hC,IAAIY,cAClBviC,KAAK2hC,IAAIY,aAAazlB,OAAM3J,IAC1BnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,wBAAuB,IAUjDnT,KAAKq/B,WAAar/B,KAAKu/B,kBACzBv/B,KAAKwiC,WAAW,CACdC,QAASziC,KAAK2hC,IAAIe,kBAAkB1iC,KAAKo/B,YAAap/B,KAAKs/B,iBAG7Dt/B,KAAK2hC,IAAIgB,cAAgBhd,IACvB3lB,KAAKwiC,WAAW7c,EAAK,EAIrB3lB,KAAKyvB,SACPzvB,KAAKyvB,QAAQ3c,SAAQ4N,IACnB1gB,KAAK4iC,UAAUliB,EAAM,IAGzB1gB,KAAK2hC,IAAIkB,QAAUld,IACjB3lB,KAAK8iC,SAASnd,EAAK,EAGrB3lB,KAAKm/B,OAAO,uBACZn/B,KAAK+iC,oBAEL/iC,KAAKgjC,eAAiB,KACpBhjC,KAAKijC,WAAU,EAEjBjjC,KAAKoU,KAAK,SAAUpU,KAAKgjC,eAC3B,CAEA,cAAIjH,GACF,OAAQ/7B,KAAK4gC,UAAY5gC,KAAK4gC,SAASsC,gBAAmB,CAC5D,CAIA,aAAIC,GACF,OAAQnjC,KAAKggC,YAA2C,SAA7BhgC,KAAK4gC,SAASwC,UAC3C,CAEA,OAAAC,GACE,MAAO,CAAEC,KAAMtjC,KAAKsgC,UAAWiD,OAAQvjC,KAAKqgC,YAAagD,QAASrjC,KAAKogC,aACzE,CAEA,MAAAoD,CAAQtkC,GACN,IAAIc,KAAK+/B,WAAT,CACA,GAAI//B,KAAKof,UAAW,MAAMyf,EAAQ,IAAIjjC,MAAM,yCAA0C,iBACtF,GAAoB,iBAATsD,EACT,IACEA,EAAO2R,KAAK0J,MAAMrb,EACpB,CAAE,MAAOiU,GACPjU,EAAO,CAAC,CACV,CAEFc,KAAKm/B,OAAO,YAERjgC,EAAKukC,aAAezjC,KAAKq/B,YAC3Br/B,KAAKm/B,OAAO,8BACZn/B,KAAK+iC,qBAEH7jC,EAAKwkC,oBAAsB1jC,KAAKq/B,YAClCr/B,KAAKm/B,OAAO,+BACZn/B,KAAK2jC,eAAezkC,EAAKwkC,mBAAmB/P,KAAMz0B,EAAKwkC,mBAAmB1xB,OAExE9S,EAAK0kC,YACH5jC,KAAK2hC,IAAIkC,mBAAqB7jC,KAAK2hC,IAAIkC,kBAAkB7kC,KAC3DgB,KAAK8jC,iBAAiB5kC,EAAK0kC,WAE3B5jC,KAAK6gC,mBAAmBxlC,KAAK6D,EAAK0kC,YAGlC1kC,EAAK8/B,KACPh/B,KAAK2hC,IAAIoC,qBAAqB,IAAK/jC,KAAKugC,MAA2B,sBAAErhC,IAClE2d,MAAK,KACA7c,KAAKof,YAETpf,KAAK6gC,mBAAmB/tB,SAAQ8wB,IAC9B5jC,KAAK8jC,iBAAiBF,EAAS,IAEjC5jC,KAAK6gC,mBAAqB,GAEc,UAApC7gC,KAAK2hC,IAAIkC,kBAAkB7kC,MAAkBgB,KAAKgkC,gBAAc,IAErElnB,OAAM3J,IACLnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,8BAA6B,IAGxDjU,EAAK8/B,KAAQ9/B,EAAK0kC,WAAc1kC,EAAKukC,aAAgBvkC,EAAKwkC,oBAC7D1jC,KAAKqQ,QAAQwuB,EAAQ,IAAIjjC,MAAM,4CAA6C,iBA3CzD,CA6CvB,CAEA,gBAAAkoC,CAAkBF,GAChB,MAAMK,EAAkB,IAAIjkC,KAAKugC,MAAM3nB,gBAAgBgrB,GACvD5jC,KAAK2hC,IAAIuC,gBAAgBD,GACtBnnB,OAAM3J,IAtNb,IAAe5G,GAuNF03B,EAAgBZ,SAAWY,EAAgBZ,QAAQhlB,SAAS,WAvN1D9R,EAwNA,sCAvNbpI,QAAQoM,KAAKhE,IAyNLvM,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,yBAC5B,GAEN,CAMA,IAAAgxB,CAAM3kB,GACJ,IAAIxf,KAAK+/B,WAAT,CACA,GAAI//B,KAAKof,UAAW,MAAMyf,EAAQ,IAAIjjC,MAAM,uCAAwC,iBACpFoE,KAAK4gC,SAASuD,KAAK3kB,EAFE,CAGvB,CAOA,cAAAmkB,CAAgBhQ,EAAM3hB,GACpB,IAAIhS,KAAK+/B,WAAT,CACA,GAAI//B,KAAKof,UAAW,MAAMyf,EAAQ,IAAIjjC,MAAM,iDAAkD,iBAG9F,GAFAoE,KAAKm/B,OAAO,oBAERn/B,KAAKq/B,UACP,IACEr/B,KAAK2hC,IAAIgC,eAAehQ,EAAM3hB,GAC9BhS,KAAK+iC,mBACP,CAAE,MAAO5vB,GACPnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,uBAC5B,MAEAnT,KAAK+V,KAAK,SAAU,CAClB/W,KAAM,qBACN0kC,mBAAoB,CAAE/P,OAAM3hB,SAdX,CAiBvB,CAMA,SAAA4wB,CAAWliB,GACT,IAAI1gB,KAAK+/B,WAAT,CACA,GAAI//B,KAAKof,UAAW,MAAMyf,EAAQ,IAAIjjC,MAAM,4CAA6C,iBACzFoE,KAAKm/B,OAAO,eAEZze,EAAO0jB,YAAYtxB,SAAQuxB,IACzBrkC,KAAKskC,SAASD,EAAO3jB,EAAM,GALR,CAOvB,CAOA,QAAA4jB,CAAUD,EAAO3jB,GACf,GAAI1gB,KAAK+/B,WAAY,OACrB,GAAI//B,KAAKof,UAAW,MAAMyf,EAAQ,IAAIjjC,MAAM,2CAA4C,iBACxFoE,KAAKm/B,OAAO,cAEZ,MAAMoF,EAASvkC,KAAKmhC,WAAW58B,IAAI8/B,IAAU,IAAIjD,IACjD,IAAIoD,EAASD,EAAOhgC,IAAImc,GACxB,GAAK8jB,EAKE,MAAIA,EAAOC,QACV5F,EAAQ,IAAIjjC,MAAM,qFAAsF,sBAExGijC,EAAQ,IAAIjjC,MAAM,gDAAiD,4BAPzE4oC,EAASxkC,KAAK2hC,IAAI2C,SAASD,EAAO3jB,GAClC6jB,EAAOp/B,IAAIub,EAAQ8jB,GACnBxkC,KAAKmhC,WAAWh8B,IAAIk/B,EAAOE,GAC3BvkC,KAAK+iC,mBAMT,CAQA,YAAA2B,CAAcC,EAAUC,EAAUlkB,GAChC,GAAI1gB,KAAK+/B,WAAY,OACrB,GAAI//B,KAAKof,UAAW,MAAMyf,EAAQ,IAAIjjC,MAAM,+CAAgD,iBAC5FoE,KAAKm/B,OAAO,kBAEZ,MAAMoF,EAASvkC,KAAKmhC,WAAW58B,IAAIogC,GAC7BH,EAASD,EAASA,EAAOhgC,IAAImc,GAAU,KAC7C,IAAK8jB,EACH,MAAM3F,EAAQ,IAAIjjC,MAAM,8CAA+C,uBAErEgpC,GAAU5kC,KAAKmhC,WAAWh8B,IAAIy/B,EAAUL,GAEjB,MAAvBC,EAAOE,aACTF,EAAOE,aAAaE,GAEpB5kC,KAAKqQ,QAAQwuB,EAAQ,IAAIjjC,MAAM,iDAAkD,gCAErF,CAOA,WAAAipC,CAAaR,EAAO3jB,GAClB,GAAI1gB,KAAK+/B,WAAY,OACrB,GAAI//B,KAAKof,UAAW,MAAMyf,EAAQ,IAAIjjC,MAAM,8CAA+C,iBAC3FoE,KAAKm/B,OAAO,kBAEZ,MAAMoF,EAASvkC,KAAKmhC,WAAW58B,IAAI8/B,GAC7BG,EAASD,EAASA,EAAOhgC,IAAImc,GAAU,KAC7C,IAAK8jB,EACH,MAAM3F,EAAQ,IAAIjjC,MAAM,6CAA8C,uBAExE,IACE4oC,EAAOC,SAAU,EACjBzkC,KAAK2hC,IAAIkD,YAAYL,EACvB,CAAE,MAAOrxB,GACU,wBAAbA,EAAI9G,KACNrM,KAAKkhC,uBAAuB7lC,KAAKmpC,GAEjCxkC,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,oBAE9B,CACAnT,KAAK+iC,mBACP,CAMA,YAAA+B,CAAcpkB,GACZ,IAAI1gB,KAAK+/B,WAAT,CACA,GAAI//B,KAAKof,UAAW,MAAMyf,EAAQ,IAAIjjC,MAAM,+CAAgD,iBAC5FoE,KAAKm/B,OAAO,mBAEZze,EAAO0jB,YAAYtxB,SAAQuxB,IACzBrkC,KAAK6kC,YAAYR,EAAO3jB,EAAM,GALX,CAOvB,CAEA,iBAAAqiB,GACE/iC,KAAKm/B,OAAO,qBACRn/B,KAAKghC,sBACThhC,KAAKghC,qBAAsB,EAC3BtkB,GAAe,KACb1c,KAAKghC,qBAAsB,EACvBhhC,KAAKq/B,YAAcr/B,KAAK+gC,mBAC1B/gC,KAAKm/B,OAAO,gCACZn/B,KAAK+kC,aAEL/kC,KAAKm/B,OAAO,uDAEdn/B,KAAK+gC,mBAAoB,KAE7B,CAEA,SAAAgE,GACE,IAAI/kC,KAAK+/B,WAAT,CACA,GAAI//B,KAAKof,UAAW,MAAMyf,EAAQ,IAAIjjC,MAAM,4CAA6C,iBAErFoE,KAAKq/B,UACHr/B,KAAK8gC,gBACP9gC,KAAKihC,oBAAqB,EAC1BjhC,KAAKm/B,OAAO,mCAEZn/B,KAAKm/B,OAAO,qBACZlkB,YAAW,KACTjb,KAAKglC,cAAa,GACjB,IAGDhlC,KAAK8gC,gBACP9gC,KAAKihC,oBAAqB,EAC1BjhC,KAAKm/B,OAAO,mCAEZn/B,KAAKm/B,OAAO,yCACZn/B,KAAK+V,KAAK,SAAU,CAClB/W,KAAM,cACNykC,aAAa,KAInBzjC,KAAK8gC,gBAAiB,CAzBD,CA0BvB,CAKA,OAAAzwB,CAAS8C,GACPnT,KAAKgiB,SAAS7O,GAAK,QACrB,CAEA,QAAA6O,CAAU7O,EAAKyJ,GACT5c,KAAKof,WAAapf,KAAK+/B,aAC3B//B,KAAK+/B,YAAa,EAElB//B,KAAKm/B,OAAO,yBAA0BhsB,IAAQA,EAAI5G,SAAW4G,IAE7DuJ,GAAe,KA6Bb,GA5BA1c,KAAKof,WAAY,EACjBpf,KAAK+/B,YAAa,EAElB//B,KAAKm/B,OAAO,sBAAuBhsB,IAAQA,EAAI5G,SAAW4G,IAE1DnT,KAAK4e,SAAW5e,KAAKmM,UAAW,EAE3BnM,KAAKmf,eAAeJ,OAAO/e,KAAK3E,KAAK,MACrC2E,KAAK8e,eAAeqF,UAAUnkB,KAAKjE,MAExCiE,KAAKggC,YAAa,EAClBhgC,KAAKwgC,UAAW,EAChBxgC,KAAKygC,eAAgB,EACrBzgC,KAAKshC,cAAgB,KACrBthC,KAAKuhC,eAAiB,KACtBvhC,KAAKmhC,WAAa,KAElB8D,cAAcjlC,KAAKqhC,kBACnBrhC,KAAKqhC,iBAAmB,KAExB4D,cAAcjlC,KAAK0hC,WACnB1hC,KAAK0hC,UAAY,KACjB1hC,KAAKwhC,OAAS,KACdxhC,KAAKyhC,IAAM,KAEPzhC,KAAKgjC,gBAAgBhjC,KAAK0U,eAAe,SAAU1U,KAAKgjC,gBAC5DhjC,KAAKgjC,eAAiB,KAElBhjC,KAAK4gC,SAAU,CACjB,IACE5gC,KAAK4gC,SAASsE,OAChB,CAAE,MAAO/xB,GAAM,CAGfnT,KAAK4gC,SAASuE,UAAY,KAC1BnlC,KAAK4gC,SAASwE,OAAS,KACvBplC,KAAK4gC,SAAS1b,QAAU,KACxBllB,KAAK4gC,SAASvb,QAAU,IAC1B,CACA,GAAIrlB,KAAK2hC,IAAK,CACZ,IACE3hC,KAAK2hC,IAAIuD,OACX,CAAE,MAAO/xB,GAAM,CAGfnT,KAAK2hC,IAAIG,2BAA6B,KACtC9hC,KAAK2hC,IAAIK,0BAA4B,KACrChiC,KAAK2hC,IAAIQ,uBAAyB,KAClCniC,KAAK2hC,IAAIU,eAAiB,KAC1BriC,KAAK2hC,IAAIkB,QAAU,KACnB7iC,KAAK2hC,IAAIgB,cAAgB,IAC3B,CACA3iC,KAAK2hC,IAAM,KACX3hC,KAAK4gC,SAAW,KAEZztB,GAAKnT,KAAK+V,KAAK,QAAS5C,GAC5BnT,KAAK+V,KAAK,SACV6G,GAAG,IAEP,CAEA,UAAA4lB,CAAY7c,GACV,IAAKA,EAAM8c,QAIT,OAAOziC,KAAKqQ,QAAQwuB,EAAQ,IAAIjjC,MAAM,oDAAqD,qBAG7FoE,KAAK4gC,SAAWjb,EAAM8c,QACtBziC,KAAK4gC,SAASyE,WAAa,cAE6B,iBAA7CrlC,KAAK4gC,SAAS0E,6BACvBtlC,KAAK4gC,SAAS0E,2BAA6BxG,GAG7C9+B,KAAKo/B,YAAcp/B,KAAK4gC,SAASpI,MAEjCx4B,KAAK4gC,SAASuE,UAAYxf,IACxB3lB,KAAKulC,kBAAkB5f,EAAK,EAE9B3lB,KAAK4gC,SAAS4E,oBAAsB,KAClCxlC,KAAKylC,6BAA4B,EAEnCzlC,KAAK4gC,SAASwE,OAAS,KACrBplC,KAAK0lC,gBAAe,EAEtB1lC,KAAK4gC,SAAS1b,QAAU,KACtBllB,KAAK2lC,iBAAgB,EAEvB3lC,KAAK4gC,SAASvb,QAAUM,IACtB,MAAMxS,EAAMwS,EAAMvhB,iBAAiBxI,MAC/B+pB,EAAMvhB,MACN,IAAIxI,MAAM,sBAAsB+pB,EAAMpZ,WAAWoZ,EAAMigB,YAAYjgB,EAAMkgB,UAAUlgB,EAAMmgB,SAC7F9lC,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,oBAAmB,EAK/C,IAAI4yB,GAAY,EAChB/lC,KAAKqhC,iBAAmB2E,aAAY,KAC9BhmC,KAAK4gC,UAAyC,YAA7B5gC,KAAK4gC,SAASwC,YAC7B2C,GAAW/lC,KAAK2lC,kBACpBI,GAAY,GAEZA,GAAY,CACd,GAvhB0B,IAyhB9B,CAEA,KAAAhkB,GAAU,CAEV,MAAAsF,CAAQ7H,EAAOhiB,EAAUof,GACvB,GAAI5c,KAAKof,UAAW,OAAOxC,EAAGiiB,EAAQ,IAAIjjC,MAAM,wCAAyC,qBAEzF,GAAIoE,KAAKggC,WAAY,CACnB,IACEhgC,KAAKmkC,KAAK3kB,EACZ,CAAE,MAAOrM,GACP,OAAOnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,oBACnC,CACInT,KAAK4gC,SAASsC,eAAiBpE,GACjC9+B,KAAKm/B,OAAO,wCAAyCn/B,KAAK4gC,SAASsC,gBACnEljC,KAAKyhC,IAAM7kB,GAEXA,EAAG,KAEP,MACE5c,KAAKm/B,OAAO,wBACZn/B,KAAKwhC,OAAShiB,EACdxf,KAAKyhC,IAAM7kB,CAEf,CAIA,SAAAqmB,GACE,GAAIjjC,KAAKof,UAAW,OAIpB,MAAM6mB,EAAc,KAClBhrB,YAAW,IAAMjb,KAAKqQ,WAAW,IAAI,EAGnCrQ,KAAKggC,WACPiG,IAEAjmC,KAAKoU,KAAK,UAAW6xB,EAEzB,CAEA,wBAAAC,GACMlmC,KAAKof,WACLpf,KAAK2gC,oBACT3gC,KAAKm/B,OAAO,+BACZn/B,KAAK2gC,kBAAoB1lB,YAAW,KAC7Bjb,KAAK0gC,eACR1gC,KAAK0gC,cAAe,EACpB1gC,KAAKm/B,OAAO,iCACZn/B,KAAK+V,KAAK,cACV/V,KAAK+V,KAAK,gBACZ,GACC/V,KAAK8/B,oBACV,CAEA,YAAAkF,GACMhlC,KAAKof,WAETpf,KAAK2hC,IAAIwE,YAAYnmC,KAAKy/B,cACvB5iB,MAAKupB,IACJ,GAAIpmC,KAAKof,UAAW,OACfpf,KAAK4/B,SAAY5/B,KAAK6/B,mBAAkBuG,EAAMpH,IAAMD,EAAcqH,EAAMpH,MAC7EoH,EAAMpH,IAAMh/B,KAAK2/B,aAAayG,EAAMpH,KAEpC,MAAMqH,EAAY,KAChB,GAAIrmC,KAAKof,UAAW,OACpB,MAAMokB,EAASxjC,KAAK2hC,IAAI2E,kBAAoBF,EAC5CpmC,KAAKm/B,OAAO,UACZn/B,KAAK+V,KAAK,SAAU,CAClB/W,KAAMwkC,EAAOxkC,KACbggC,IAAKwE,EAAOxE,KACb,EAcHh/B,KAAK2hC,IAAI4E,oBAAoBH,GAC1BvpB,MAZe,KAChB7c,KAAKm/B,OAAO,uBACRn/B,KAAKof,YACLpf,KAAK4/B,SAAW5/B,KAAK0gC,aAAc2F,IAClCrmC,KAAKoU,KAAK,eAAgBiyB,GAAS,IASvCvpB,OANa3J,IACdnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,6BAA4B,GAKxC,IAEjB2J,OAAM3J,IACLnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,oBAAmB,GAEnD,CAEA,2BAAAqzB,GACMxmC,KAAK2hC,IAAI8E,iBACXzmC,KAAK2hC,IAAI8E,kBAAkB3zB,SAAQ4zB,IAC5BA,EAAYC,MAAOD,EAAYlC,OAAOH,OAAUqC,EAAYE,YAC/DF,EAAYE,WAAY,EACxB5mC,KAAK2jC,eAAe+C,EAAYlC,OAAOH,MAAM1Q,MAC/C,GAGN,CAEA,aAAAqQ,GACMhkC,KAAKof,WAETpf,KAAK2hC,IAAIkF,aAAa7mC,KAAK0/B,eACxB7iB,MAAKiqB,IACJ,GAAI9mC,KAAKof,UAAW,OACfpf,KAAK4/B,SAAY5/B,KAAK6/B,mBAAkBiH,EAAO9H,IAAMD,EAAc+H,EAAO9H,MAC/E8H,EAAO9H,IAAMh/B,KAAK2/B,aAAamH,EAAO9H,KAEtC,MAAM+H,EAAa,KACjB,GAAI/mC,KAAKof,UAAW,OACpB,MAAMokB,EAASxjC,KAAK2hC,IAAI2E,kBAAoBQ,EAC5C9mC,KAAKm/B,OAAO,UACZn/B,KAAK+V,KAAK,SAAU,CAClB/W,KAAMwkC,EAAOxkC,KACbggC,IAAKwE,EAAOxE,MAETh/B,KAAKq/B,WAAWr/B,KAAKwmC,6BAA4B,EAaxDxmC,KAAK2hC,IAAI4E,oBAAoBO,GAC1BjqB,MAXe,KACZ7c,KAAKof,YACLpf,KAAK4/B,SAAW5/B,KAAK0gC,aAAcqG,IAClC/mC,KAAKoU,KAAK,eAAgB2yB,GAAU,IASxCjqB,OANa3J,IACdnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,6BAA4B,GAKxC,IAEjB2J,OAAM3J,IACLnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,qBAAoB,GAEpD,CAEA,wBAAA+uB,GACMliC,KAAKof,WACwB,WAA7Bpf,KAAK2hC,IAAIqF,iBACXhnC,KAAKqQ,QAAQwuB,EAAQ,IAAIjjC,MAAM,sBAAuB,0BAE1D,CAEA,iBAAAmmC,GACE,GAAI/hC,KAAKof,UAAW,OACpB,MAAM6nB,EAAqBjnC,KAAK2hC,IAAIsF,mBAC9BC,EAAoBlnC,KAAK2hC,IAAIuF,kBAEnClnC,KAAKm/B,OACH,kDACA8H,EACAC,GAEFlnC,KAAK+V,KAAK,iBAAkBkxB,EAAoBC,GAErB,cAAvBD,GAA6D,cAAvBA,IACxCjnC,KAAKwgC,UAAW,EAChBxgC,KAAKmnC,eAEoB,WAAvBF,GACFjnC,KAAKqQ,QAAQwuB,EAAQ,IAAIjjC,MAAM,0BAA2B,+BAEjC,WAAvBqrC,GACFjnC,KAAKqQ,QAAQwuB,EAAQ,IAAIjjC,MAAM,0BAA2B,6BAE9D,CAEA,QAAAwrC,CAAUxqB,GAER,MAAMyqB,EAAgBC,IACkC,mBAAlDxqC,OAAOE,UAAUwC,SAASsB,KAAKwmC,EAAOrK,SACxCqK,EAAOrK,OAAOnqB,SAAQxV,IACpBR,OAAOmW,OAAOq0B,EAAQhqC,EAAK,IAGxBgqC,GAIwB,IAA7BtnC,KAAK2hC,IAAIyF,SAASpsC,QAAgBgF,KAAK4hC,qBACzC5hC,KAAK2hC,IAAIyF,WACNvqB,MAAK7Z,IACJ,MAAMukC,EAAU,GAChBvkC,EAAI8P,SAAQw0B,IACVC,EAAQlsC,KAAKgsC,EAAcC,GAAO,IAEpC1qB,EAAG,KAAM2qB,EAAO,IACfp0B,GAAOyJ,EAAGzJ,KAGNnT,KAAK2hC,IAAIyF,SAASpsC,OAAS,EACpCgF,KAAK2hC,IAAIyF,UAASpkC,IAEhB,GAAIhD,KAAKof,UAAW,OAEpB,MAAMmoB,EAAU,GAChBvkC,EAAIk0B,SAASpkB,SAAQokB,IACnB,MAAMoQ,EAAS,CAAC,EAChBpQ,EAAO1kB,QAAQM,SAAQzG,IACrBi7B,EAAOj7B,GAAQ6qB,EAAOsQ,KAAKn7B,EAAI,IAEjCi7B,EAAOG,GAAKvQ,EAAOuQ,GACnBH,EAAOtoC,KAAOk4B,EAAOl4B,KACrBsoC,EAAOI,UAAYxQ,EAAOwQ,UAC1BH,EAAQlsC,KAAKgsC,EAAcC,GAAO,IAEpC1qB,EAAG,KAAM2qB,EAAO,IACfp0B,GAAOyJ,EAAGzJ,KAKbyJ,EAAG,KAAM,GAEb,CAEA,WAAAuqB,GAEE,GADAnnC,KAAKm/B,OAAO,8BAA+Bn/B,KAAKwgC,SAAUxgC,KAAKygC,eAC3DzgC,KAAKggC,YAAchgC,KAAK2nC,cAAgB3nC,KAAKwgC,WAAaxgC,KAAKygC,cAAe,OAElFzgC,KAAK2nC,aAAc,EAGnB,MAAMC,EAAoB,KACpB5nC,KAAKof,WAETpf,KAAKonC,UAAS,CAACj0B,EAAK00B,KAClB,GAAI7nC,KAAKof,UAAW,OAGhBjM,IAAK00B,EAAQ,IAEjB,MAAMC,EAAmB,CAAC,EACpBC,EAAkB,CAAC,EACnBC,EAAiB,CAAC,EACxB,IAAIC,GAA6B,EAEjCJ,EAAM/0B,SAAQwqB,IAGM,oBAAdA,EAAKt+B,MAA4C,qBAAds+B,EAAKt+B,OAC1C8oC,EAAiBxK,EAAKmK,IAAMnK,GAEZ,mBAAdA,EAAKt+B,MAA2C,oBAAds+B,EAAKt+B,OACzC+oC,EAAgBzK,EAAKmK,IAAMnK,GAEX,kBAAdA,EAAKt+B,MAA0C,mBAAds+B,EAAKt+B,OACxCgpC,EAAe1K,EAAKmK,IAAMnK,EAC5B,IAGF,MAAM4K,EAA2BC,IAC/BF,GAA6B,EAE7B,IAAIG,EAAQL,EAAgBI,EAAsBE,kBAE9CD,IAAUA,EAAME,IAAMF,EAAM/E,UAE9BrjC,KAAKogC,aAAegI,EAAME,IAAMF,EAAM/E,QACtCrjC,KAAKsgC,UAAY3+B,OAAOymC,EAAM9E,OACrB8E,GAASA,EAAMG,WAExBvoC,KAAKogC,aAAegI,EAAMG,UAC1BvoC,KAAKsgC,UAAY3+B,OAAOymC,EAAMI,aAC6B,iBAA3CL,EAAsBM,mBAEtCL,EAAQD,EAAsBM,iBAAiBl7B,MAAM,KACrDvN,KAAKogC,aAAegI,EAAM,GAC1BpoC,KAAKsgC,UAAY3+B,OAAOymC,EAAM,KAE5BpoC,KAAKogC,eACPpgC,KAAKqgC,YAAcrgC,KAAKogC,aAAal6B,SAAS,KAAO,OAAS,QAGhE,IAAIwiC,EAASZ,EAAiBK,EAAsBQ,mBAEhDD,IAAWA,EAAOJ,IAAMI,EAAOrF,UAEjCrjC,KAAKigC,cAAgByI,EAAOJ,IAAMI,EAAOrF,QACzCrjC,KAAKmgC,WAAax+B,OAAO+mC,EAAOpF,OACvBoF,GAAUA,EAAOH,WAE1BvoC,KAAKigC,cAAgByI,EAAOH,UAC5BvoC,KAAKmgC,WAAax+B,OAAO+mC,EAAOF,aAC4B,iBAA5CL,EAAsBS,oBAEtCF,EAASP,EAAsBS,kBAAkBr7B,MAAM,KACvDvN,KAAKigC,cAAgByI,EAAO,GAC5B1oC,KAAKmgC,WAAax+B,OAAO+mC,EAAO,KAE9B1oC,KAAKigC,gBACPjgC,KAAKkgC,aAAelgC,KAAKigC,cAAc/5B,SAAS,KAAO,OAAS,QAGlElG,KAAKm/B,OACH,qCACAn/B,KAAKogC,aACLpgC,KAAKsgC,UACLtgC,KAAKigC,cACLjgC,KAAKmgC,WACP,EAoBF,GAjBA0H,EAAM/0B,SAAQwqB,IAEM,cAAdA,EAAKt+B,MAAwBs+B,EAAKuL,yBACpCX,EAAyBF,EAAe1K,EAAKuL,2BAK9B,sBAAdvL,EAAKt+B,MAA8D,SAA9Bs+B,EAAKwL,uBAC3B,kBAAdxL,EAAKt+B,MAA0C,mBAAds+B,EAAKt+B,OAA8Bs+B,EAAKyL,WAE3Eb,EAAyB5K,EAC3B,IAKG2K,GAAgCnrC,OAAO+V,KAAKm1B,GAAgBhtC,SAAU8B,OAAO+V,KAAKk1B,GAAiB/sC,OAAxG,CAQA,GAJEgF,KAAK2nC,aAAc,EACnB3nC,KAAKggC,YAAa,EAGhBhgC,KAAKwhC,OAAQ,CACf,IACExhC,KAAKmkC,KAAKnkC,KAAKwhC,OACjB,CAAE,MAAOruB,GACP,OAAOnT,KAAKqQ,QAAQwuB,EAAQ1rB,EAAK,oBACnC,CACAnT,KAAKwhC,OAAS,KACdxhC,KAAKm/B,OAAO,0CAEZ,MAAMviB,EAAK5c,KAAKyhC,IAChBzhC,KAAKyhC,IAAM,KACX7kB,EAAG,KACL,CAIwD,iBAA7C5c,KAAK4gC,SAAS0E,6BACvBtlC,KAAK0hC,UAAYsE,aAAY,IAAMhmC,KAAKgpC,eAAe,KACnDhpC,KAAK0hC,UAAUuH,OAAOjpC,KAAK0hC,UAAUuH,SAG3CjpC,KAAKm/B,OAAO,WACZn/B,KAAK+V,KAAK,UAxBV,MALEkF,WAAW2sB,EAAmB,IA6Bb,GACpB,EAEHA,GACF,CAEA,WAAAoB,IACOhpC,KAAKyhC,MAAQzhC,KAAK4gC,UAAY5gC,KAAK4gC,SAASsC,eAAiBpE,GAGlE9+B,KAAKylC,6BACP,CAEA,uBAAArD,GACMpiC,KAAKof,YAEuB,WAA5Bpf,KAAK2hC,IAAIuH,iBACXlpC,KAAK8gC,gBAAiB,EAGtB9gC,KAAKm/B,OAAO,wBAAyBn/B,KAAKkhC,wBAC1ClhC,KAAKkhC,uBAAuBpuB,SAAQ0xB,IAClCxkC,KAAK2hC,IAAIkD,YAAYL,GACrBxkC,KAAKihC,oBAAqB,KAE5BjhC,KAAKkhC,uBAAyB,GAE1BlhC,KAAKihC,oBACPjhC,KAAKm/B,OAAO,8BACZn/B,KAAKihC,oBAAqB,EAC1BjhC,KAAK+iC,sBAEL/iC,KAAKm/B,OAAO,cACZn/B,KAAK+V,KAAK,gBAId/V,KAAKm/B,OAAO,0BAA2Bn/B,KAAK2hC,IAAIuH,gBAChDlpC,KAAK+V,KAAK,uBAAwB/V,KAAK2hC,IAAIuH,gBAC7C,CAEA,eAAA5G,CAAiB3c,GACX3lB,KAAKof,YACLuG,EAAMie,WAAa5jC,KAAK4/B,QAC1B5/B,KAAK+V,KAAK,SAAU,CAClB/W,KAAM,YACN4kC,UAAW,CACTA,UAAWje,EAAMie,UAAUA,UAC3BuF,cAAexjB,EAAMie,UAAUuF,cAC/BC,OAAQzjB,EAAMie,UAAUwF,UAGlBzjB,EAAMie,WAAc5jC,KAAK0gC,eACnC1gC,KAAK0gC,cAAe,EACpB1gC,KAAK+V,KAAK,iBAGR4P,EAAMie,WACR5jC,KAAKkmC,2BAET,CAEA,iBAAAX,CAAmB5f,GACjB,GAAI3lB,KAAKof,UAAW,OACpB,IAAIlgB,EAAOymB,EAAMzmB,KACbA,aAAgBpB,cAAaoB,EAAO5C,EAAOe,KAAK6B,IACpDc,KAAK3E,KAAK6D,EACZ,CAEA,2BAAAumC,GACE,GAAIzlC,KAAKof,YAAcpf,KAAKyhC,IAAK,OACjCzhC,KAAKm/B,OAAO,yCAA0Cn/B,KAAK4gC,SAASsC,gBACpE,MAAMtmB,EAAK5c,KAAKyhC,IAChBzhC,KAAKyhC,IAAM,KACX7kB,EAAG,KACL,CAEA,cAAA8oB,GACM1lC,KAAKggC,YAAchgC,KAAKof,YAC5Bpf,KAAKm/B,OAAO,mBACZn/B,KAAKygC,eAAgB,EACrBzgC,KAAKmnC,cACP,CAEA,eAAAxB,GACM3lC,KAAKof,YACTpf,KAAKm/B,OAAO,oBACZn/B,KAAKqQ,UACP,CAEA,QAAAyyB,CAAUnd,GACJ3lB,KAAKof,WAETuG,EAAM8J,QAAQ3c,SAAQu2B,IACpBrpC,KAAKm/B,OAAO,YACZn/B,KAAK+V,KAAK,QAAS4P,EAAM0e,MAAOgF,GAEhCrpC,KAAKshC,cAAcjmC,KAAK,CACtBgpC,MAAO1e,EAAM0e,MACb3jB,OAAQ2oB,IAGNrpC,KAAKuhC,eAAe+H,MAAKC,GACpBA,EAAa9B,KAAO4B,EAAY5B,OAGzCznC,KAAKuhC,eAAelmC,KAAKguC,GACzB3sB,GAAe,KACb1c,KAAKm/B,OAAO,aACZn/B,KAAK+V,KAAK,SAAUszB,EAAW,IAChC,GAEL,CAEA,MAAAlK,GACE,MAAMlxB,EAAO,GAAGrQ,MAAMkD,KAAKpB,WAC3BuO,EAAK,GAAK,IAAMjO,KAAKk/B,IAAM,KAAOjxB,EAAK,GACvCyC,EAAM/M,MAAM,KAAMsK,EACpB,EAGFgxB,EAAKuK,iBAAmB7K,IAOxBM,EAAK3M,OAAS,CACZmX,WAAY,CACV,CACEC,KAAM,CACJ,+BACA,sCAINC,aAAc,gBAGhB1K,EAAKK,cAAgB,CAAC,EAEtBlxB,EAAOvU,QAAUolC,+BClgCjB,IAAI3iC,EAAS,eAGTmB,EAAanB,EAAOmB,YAAc,SAAUD,GAE9C,QADAA,EAAW,GAAKA,IACIA,EAASsC,eAC3B,IAAK,MAAM,IAAK,OAAO,IAAK,QAAQ,IAAK,QAAQ,IAAK,SAAS,IAAK,SAAS,IAAK,OAAO,IAAK,QAAQ,IAAK,UAAU,IAAK,WAAW,IAAK,MACxI,OAAO,EACT,QACE,OAAO,EAEb,EA0CA,SAASigB,EAAcviB,GAErB,IAAI0wB,EACJ,OAFAluB,KAAKxC,SAXP,SAA2BulB,GACzB,IAAI6mB,EA/BN,SAA4B7mB,GAC1B,IAAKA,EAAK,MAAO,OAEjB,IADA,IAAI8mB,IAEF,OAAQ9mB,GACN,IAAK,OACL,IAAK,QACH,MAAO,OACT,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAO,UACT,IAAK,SACL,IAAK,SACH,MAAO,SACT,IAAK,SACL,IAAK,QACL,IAAK,MACH,OAAOA,EACT,QACE,GAAI8mB,EAAS,OACb9mB,GAAO,GAAKA,GAAKjjB,cACjB+pC,GAAU,EAGlB,CAKaC,CAAmB/mB,GAC9B,GAAoB,iBAAT6mB,IAAsBttC,EAAOmB,aAAeA,IAAeA,EAAWslB,IAAO,MAAM,IAAInnB,MAAM,qBAAuBmnB,GAC/H,OAAO6mB,GAAQ7mB,CACjB,CAOkBgnB,CAAkBvsC,GAE1BwC,KAAKxC,UACX,IAAK,UACHwC,KAAKgqC,KAAOC,EACZjqC,KAAKjE,IAAMmuC,EACXhc,EAAK,EACL,MACF,IAAK,OACHluB,KAAKmqC,SAAWC,EAChBlc,EAAK,EACL,MACF,IAAK,SACHluB,KAAKgqC,KAAOK,EACZrqC,KAAKjE,IAAMuuC,EACXpc,EAAK,EACL,MACF,QAGE,OAFAluB,KAAKrC,MAAQ4sC,OACbvqC,KAAKjE,IAAMyuC,GAGfxqC,KAAKyqC,SAAW,EAChBzqC,KAAK0qC,UAAY,EACjB1qC,KAAK2qC,SAAWruC,EAAOc,YAAY8wB,EACrC,CAmCA,SAAS0c,EAAcC,GACrB,OAAIA,GAAQ,IAAa,EAAWA,GAAQ,GAAM,EAAa,EAAWA,GAAQ,GAAM,GAAa,EAAWA,GAAQ,GAAM,GAAa,EACpIA,GAAQ,GAAM,GAAQ,GAAK,CACpC,CA0DA,SAAST,EAAavtC,GACpB,IAAImmB,EAAIhjB,KAAK0qC,UAAY1qC,KAAKyqC,SAC1Bv7B,EAtBN,SAA6BmC,EAAMxU,EAAKmmB,GACtC,GAAwB,MAAV,IAATnmB,EAAI,IAEP,OADAwU,EAAKo5B,SAAW,EACT,IAET,GAAIp5B,EAAKo5B,SAAW,GAAK5tC,EAAI7B,OAAS,EAAG,CACvC,GAAwB,MAAV,IAAT6B,EAAI,IAEP,OADAwU,EAAKo5B,SAAW,EACT,IAET,GAAIp5B,EAAKo5B,SAAW,GAAK5tC,EAAI7B,OAAS,GACZ,MAAV,IAAT6B,EAAI,IAEP,OADAwU,EAAKo5B,SAAW,EACT,GAGb,CACF,CAKUK,CAAoB9qC,KAAMnD,GAClC,YAAUiC,IAANoQ,EAAwBA,EACxBlP,KAAKyqC,UAAY5tC,EAAI7B,QACvB6B,EAAIqB,KAAK8B,KAAK2qC,SAAU3nB,EAAG,EAAGhjB,KAAKyqC,UAC5BzqC,KAAK2qC,SAASnrC,SAASQ,KAAKxC,SAAU,EAAGwC,KAAK0qC,aAEvD7tC,EAAIqB,KAAK8B,KAAK2qC,SAAU3nB,EAAG,EAAGnmB,EAAI7B,aAClCgF,KAAKyqC,UAAY5tC,EAAI7B,QACvB,CA0BA,SAASivC,EAAUptC,EAAKvC,GACtB,IAAKuC,EAAI7B,OAASV,GAAK,GAAM,EAAG,CAC9B,IAAI4U,EAAIrS,EAAI2C,SAAS,UAAWlF,GAChC,GAAI4U,EAAG,CACL,IAAIxM,EAAIwM,EAAErU,WAAWqU,EAAElU,OAAS,GAChC,GAAI0H,GAAK,OAAUA,GAAK,MAKtB,OAJA1C,KAAKyqC,SAAW,EAChBzqC,KAAK0qC,UAAY,EACjB1qC,KAAK2qC,SAAS,GAAK9tC,EAAIA,EAAI7B,OAAS,GACpCgF,KAAK2qC,SAAS,GAAK9tC,EAAIA,EAAI7B,OAAS,GAC7BkU,EAAEtR,MAAM,GAAI,EAEvB,CACA,OAAOsR,CACT,CAIA,OAHAlP,KAAKyqC,SAAW,EAChBzqC,KAAK0qC,UAAY,EACjB1qC,KAAK2qC,SAAS,GAAK9tC,EAAIA,EAAI7B,OAAS,GAC7B6B,EAAI2C,SAAS,UAAWlF,EAAGuC,EAAI7B,OAAS,EACjD,CAIA,SAASkvC,EAASrtC,GAChB,IAAIqS,EAAIrS,GAAOA,EAAI7B,OAASgF,KAAKrC,MAAMd,GAAO,GAC9C,GAAImD,KAAKyqC,SAAU,CACjB,IAAI1uC,EAAMiE,KAAK0qC,UAAY1qC,KAAKyqC,SAChC,OAAOv7B,EAAIlP,KAAK2qC,SAASnrC,SAAS,UAAW,EAAGzD,EAClD,CACA,OAAOmT,CACT,CAEA,SAASm7B,EAAWxtC,EAAKvC,GACvB,IAAIkG,GAAK3D,EAAI7B,OAASV,GAAK,EAC3B,OAAU,IAANkG,EAAgB3D,EAAI2C,SAAS,SAAUlF,IAC3C0F,KAAKyqC,SAAW,EAAIjqC,EACpBR,KAAK0qC,UAAY,EACP,IAANlqC,EACFR,KAAK2qC,SAAS,GAAK9tC,EAAIA,EAAI7B,OAAS,IAEpCgF,KAAK2qC,SAAS,GAAK9tC,EAAIA,EAAI7B,OAAS,GACpCgF,KAAK2qC,SAAS,GAAK9tC,EAAIA,EAAI7B,OAAS,IAE/B6B,EAAI2C,SAAS,SAAUlF,EAAGuC,EAAI7B,OAASwF,GAChD,CAEA,SAAS8pC,EAAUztC,GACjB,IAAIqS,EAAIrS,GAAOA,EAAI7B,OAASgF,KAAKrC,MAAMd,GAAO,GAC9C,OAAImD,KAAKyqC,SAAiBv7B,EAAIlP,KAAK2qC,SAASnrC,SAAS,SAAU,EAAG,EAAIQ,KAAKyqC,UACpEv7B,CACT,CAGA,SAASq7B,EAAY1tC,GACnB,OAAOA,EAAI2C,SAASQ,KAAKxC,SAC3B,CAEA,SAASgtC,EAAU3tC,GACjB,OAAOA,GAAOA,EAAI7B,OAASgF,KAAKrC,MAAMd,GAAO,EAC/C,CA1NAhD,EAAQ,EAAgBkmB,EA6BxBA,EAAc/iB,UAAUW,MAAQ,SAAUd,GACxC,GAAmB,IAAfA,EAAI7B,OAAc,MAAO,GAC7B,IAAIkU,EACA5U,EACJ,GAAI0F,KAAKyqC,SAAU,CAEjB,QAAU3rC,KADVoQ,EAAIlP,KAAKmqC,SAASttC,IACG,MAAO,GAC5BvC,EAAI0F,KAAKyqC,SACTzqC,KAAKyqC,SAAW,CAClB,MACEnwC,EAAI,EAEN,OAAIA,EAAIuC,EAAI7B,OAAekU,EAAIA,EAAIlP,KAAKgqC,KAAKntC,EAAKvC,GAAK0F,KAAKgqC,KAAKntC,EAAKvC,GAC/D4U,GAAK,EACd,EAEA6Q,EAAc/iB,UAAUjB,IAwGxB,SAAiBc,GACf,IAAIqS,EAAIrS,GAAOA,EAAI7B,OAASgF,KAAKrC,MAAMd,GAAO,GAC9C,OAAImD,KAAKyqC,SAAiBv7B,EAAI,IACvBA,CACT,EAzGA6Q,EAAc/iB,UAAUgtC,KA0FxB,SAAkBntC,EAAKvC,GACrB,IAAIywC,EArEN,SAA6B15B,EAAMxU,EAAKvC,GACtC,IAAIkH,EAAI3E,EAAI7B,OAAS,EACrB,GAAIwG,EAAIlH,EAAG,OAAO,EAClB,IAAI4zB,EAAK0c,EAAc/tC,EAAI2E,IAC3B,GAAI0sB,GAAM,EAER,OADIA,EAAK,IAAG7c,EAAKo5B,SAAWvc,EAAK,GAC1BA,EAET,KAAM1sB,EAAIlH,IAAa,IAAR4zB,EAAW,OAAO,EAEjC,GADAA,EAAK0c,EAAc/tC,EAAI2E,IACnB0sB,GAAM,EAER,OADIA,EAAK,IAAG7c,EAAKo5B,SAAWvc,EAAK,GAC1BA,EAET,KAAM1sB,EAAIlH,IAAa,IAAR4zB,EAAW,OAAO,EAEjC,GADAA,EAAK0c,EAAc/tC,EAAI2E,IACnB0sB,GAAM,EAIR,OAHIA,EAAK,IACI,IAAPA,EAAUA,EAAK,EAAO7c,EAAKo5B,SAAWvc,EAAK,GAE1CA,EAET,OAAO,CACT,CA8Cc8c,CAAoBhrC,KAAMnD,EAAKvC,GAC3C,IAAK0F,KAAKyqC,SAAU,OAAO5tC,EAAI2C,SAAS,OAAQlF,GAChD0F,KAAK0qC,UAAYK,EACjB,IAAIhvC,EAAMc,EAAI7B,QAAU+vC,EAAQ/qC,KAAKyqC,UAErC,OADA5tC,EAAIqB,KAAK8B,KAAK2qC,SAAU,EAAG5uC,GACpBc,EAAI2C,SAAS,OAAQlF,EAAGyB,EACjC,EA9FAgkB,EAAc/iB,UAAUmtC,SAAW,SAAUttC,GAC3C,GAAImD,KAAKyqC,UAAY5tC,EAAI7B,OAEvB,OADA6B,EAAIqB,KAAK8B,KAAK2qC,SAAU3qC,KAAK0qC,UAAY1qC,KAAKyqC,SAAU,EAAGzqC,KAAKyqC,UACzDzqC,KAAK2qC,SAASnrC,SAASQ,KAAKxC,SAAU,EAAGwC,KAAK0qC,WAEvD7tC,EAAIqB,KAAK8B,KAAK2qC,SAAU3qC,KAAK0qC,UAAY1qC,KAAKyqC,SAAU,EAAG5tC,EAAI7B,QAC/DgF,KAAKyqC,UAAY5tC,EAAI7B,MACvB,kBC/EA,SAASs3B,EAAQjmB,GAEf,IACE,IAAK,EAAAsQ,EAAOxM,aAAc,OAAO,CACnC,CAAE,MAAOiD,GACP,OAAO,CACT,CACA,IAAIzS,EAAM,EAAAgc,EAAOxM,aAAa9D,GAC9B,OAAI,MAAQ1L,GACyB,SAA9BQ,OAAOR,GAAKb,aACrB,CA7DAsO,EAAOvU,QAoBP,SAAoBiU,EAAId,GACtB,GAAIslB,EAAO,iBACT,OAAOxkB,EAGT,IAAIwC,GAAS,EAeb,OAdA,WACE,IAAKA,EAAQ,CACX,GAAIgiB,EAAO,oBACT,MAAM,IAAI12B,MAAMoR,GACPslB,EAAO,oBAChBnuB,QAAQ8mC,MAAMj+B,GAEd7I,QAAQoM,KAAKvD,GAEfsD,GAAS,CACX,CACA,OAAOxC,EAAGnK,MAAM3D,KAAMN,UACxB,CAGF,uDC9Ce,SAASwrC,EAAQC,GAG9B,OAAOD,EAAU,mBAAqB7uC,QAAU,iBAAmBA,OAAOwwB,SAAW,SAAUse,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAK,mBAAqB9uC,QAAU8uC,EAAEl/B,cAAgB5P,QAAU8uC,IAAM9uC,OAAOW,UAAY,gBAAkBmuC,CACpH,EAAGD,EAAQC,EACb,CCNe,SAASxf,EAAe1uB,GACrC,IAAI8V,ECFS,SAAsBhG,EAAOye,GAC1C,GAAuB,WAAnB0f,EAAQn+B,IAAiC,OAAVA,EAAgB,OAAOA,EAC1D,IAAI0e,EAAO1e,EAAM1Q,OAAO+C,aACxB,QAAaN,IAAT2sB,EAAoB,CACtB,IAAIzoB,EAAMyoB,EAAK3qB,KAAKiM,EAAOye,GAAQ,WACnC,GAAqB,WAAjB0f,EAAQloC,GAAmB,OAAOA,EACtC,MAAM,IAAI7F,UAAU,+CACtB,CACA,OAAiB,WAATquB,EAAoBrqB,OAASQ,QAAQoL,EAC/C,CDPY,CAAY9P,EAAK,UAC3B,MAAwB,WAAjBiuC,EAAQn4B,GAAoBA,EAAM5R,OAAO4R,EAClD,CEJA,SAASua,EAAkBznB,EAAQqN,GACjC,IAAK,IAAI5Y,EAAI,EAAGA,EAAI4Y,EAAMlY,OAAQV,IAAK,CACrC,IAAIizB,EAAara,EAAM5Y,GACvBizB,EAAWjpB,WAAaipB,EAAWjpB,aAAc,EACjDipB,EAAWnhB,cAAe,EACtB,UAAWmhB,IAAYA,EAAWphB,UAAW,GACjDrP,OAAOuH,eAAewB,EAAQ,EAAc0nB,EAAWxa,KAAMwa,EAC/D,CACF,CACe,SAAS6d,EAAa1d,EAAaG,EAAYC,GAM5D,OALID,GAAYP,EAAkBI,EAAY1wB,UAAW6wB,GACrDC,GAAaR,EAAkBI,EAAaI,GAChDhxB,OAAOuH,eAAeqpB,EAAa,YAAa,CAC9CvhB,UAAU,IAELuhB,CACT,+DCZO,MAAM2d,EACTC,IACA74B,IAAM,IAAI2uB,IAKVmK,KAAM,EACN,WAAAt/B,CAAYq/B,GACRtrC,KAAKsrC,IAAMA,CACf,CACA,GAAAE,CAAIluC,GACA,OAAO0C,KAAKyS,IAAI+4B,IAAIluC,EACxB,CACA,GAAAu0B,CAAIv0B,GACA0C,KAAKyS,IAAItN,IAAI7H,EAAOy9B,KAOf/6B,KAAKurC,MACNvrC,KAAKurC,KAAM,EACXtwB,YAAW,KACPjb,KAAKurC,KAAM,EAapB,SAA4BE,GAC/B,MAAMC,EAAY3Q,IAAQ0Q,EAAaH,IACjCze,EAAW4e,EAAah5B,IAAIpW,OAAOwwB,YAKzC,OAAa,CACT,MAAM1J,EAAO0J,EAAS1J,OAAO7lB,MAC7B,IAAK6lB,EACD,OAEJ,MAAM7lB,EAAQ6lB,EAAK,GAEnB,KADaA,EAAK,GACPuoB,GAKP,OAJAD,EAAah5B,IAAIk5B,OAAOruC,EAMhC,CACJ,CAlCgBsuC,CAAmB5rC,KAAK,GACzB,GAEX,CACA,KAAAojB,GACIpjB,KAAKyS,IAAI2Q,OACb,EA6BG,SAAS2X,IACZ,OAAOxpB,KAAKwpB,KAChB,gICjDW8Q,EAA6B,WActC,SAASA,EAAcC,EAAaC,EAIpCC,GACEhsC,KAAKisC,iBAAmB,IAAI7K,IAC5BphC,KAAKksC,SAA2C,mBAAzBC,qBAAsC,IAAIA,sBAAqBC,IACpF,IAAIC,EAAQD,EAAQC,MAChBC,EAAYtsC,KAAKisC,iBAAiB1nC,IAAI8nC,GACtCC,IACFA,EAAUC,MAAMZ,OAAOS,EAAQI,gBACF,IAAzBF,EAAUC,MAAMjtC,MAKlBU,KAAKisC,iBAAiBN,OAAOU,GAEjC,SACGvtC,EACLkB,KAAKysC,kBAAoB,GACzBzsC,KAAK8rC,YAAcA,EACnB9rC,KAAK+rC,SAAWA,EAChB/rC,KAAKgsC,gBAAkBA,EACvBD,EAAS5a,WAAUub,IACjB,IAAIL,EAAQK,EAAYC,WACpBL,EAAYtsC,KAAKisC,iBAAiB1nC,IAAI8nC,GAC1C,GAAIC,EAAW,CACb,IAAIM,GAAe,QAA+BF,GAClDJ,EAAU5jC,KAAOkkC,CACnB,IAEJ,CASA,IAAIC,EAAShB,EAAc7uC,UAqB3B,OAjBA6vC,EAAOC,sBAAwB,SAA+BT,GAE5D,OADgB,OAAkBrsC,KAAKisC,iBAAkBI,GACxC3jC,IACnB,EACAmkC,EAAOE,8BAAgC,SAAuCV,GAC5E,IAAIC,EAAYtsC,KAAKisC,iBAAiB1nC,IAAI8nC,GAC1C,GAAIC,EACF,OAAOA,EAAU5jC,IAErB,GACA,OAAamjC,EAAe,CAAC,CAC3B94B,IAAK,sBACLxO,IAAK,WACH,IAAIuJ,EAWV,SAAkCk/B,GAChC,IAAIlB,EAAckB,EAASlB,YACvBG,EAAmBe,EAASf,iBAC5BC,EAAWc,EAASd,SACpBe,EAAwB,IAAaA,sBACrCjB,EAAkBgB,EAAShB,gBAC3Bl+B,EAAKo/B,IACP,IAAIb,EAAQa,EAAQpB,GAChBU,GAAiB,QAAoBU,EAAQC,MAC7Cb,GAAY,OAAmBL,EAAkBI,GAAO,IA0ChE,SAAyBa,GACvB,MAAO,CACLX,MAAO,IAAInL,IACX14B,KAAMwkC,EAEV,CA/CsEE,CAAgBF,KAC9EX,EAAQD,EAAUC,MAClBc,EAA0Bd,EAAMhoC,IAAIioC,GACpCc,EAAmBD,EAA0BA,EAAwBE,aAAUzuC,EAyBnF,OAxBKwuC,IACHJ,EAAUD,EAAsBC,GAChCI,EAAmBtB,EAAgBkB,GACnCX,EAAMpnC,IAAIqnC,EAAgBgB,EAA0BF,IAChDpB,IACFc,EAASP,kBAAkBpxC,KAAKiyC,GAC3BN,EAASS,sBACZT,EAASS,qBAAsB,UAA4B5wB,MAAK,KAC9DmwB,EAASS,yBAAsB3uC,EAC/B,IAAI4uC,EAAQV,EAASP,kBACA,IAAjBiB,EAAM1yC,SAGVgyC,EAASP,kBAAoB,GAC7BiB,EAAM56B,SAAQ66B,IACZzB,EAAS0B,SAASD,EAAK,CACrBtB,MAAOsB,EAAIE,QACXrB,gBAAgB,QAAoBmB,EAAIG,WACxC,IACF,OAKHR,CAAgB,EAEzB,OAAOx/B,CACT,CAnDeigC,CAAyB/tC,MAClC,OAAO,QAA0BA,KAAM,sBAAuB8N,EAChE,KAEK+9B,CACT,CA7EwC,GA4HjC,SAASmC,EAA4BhB,EAAUiB,GAGpD,IAFA,IAAIC,EAAsBlB,EAASkB,oBAC/BC,EAAY,GACP7zC,EAAI,EAAGA,EAAI2zC,EAASjzC,OAAQV,IAAK,CACxC,IACIqzC,EAAMO,EADKD,EAAS3zC,IAExB6zC,EAAU9yC,KAAKsyC,EACjB,CACA,OAAOQ,CACT,CAaA,IACIX,EADkC,mBAAZY,QAE1B,SAAuBzvC,GACrB,OAAO,IAAIyvC,QAAQzvC,EACrB,EACA,SAA+BA,GAC7B,MAAO,CACL4uC,MAAK,IACI5uC,EAGb,mEC7KO,IAAI0vC,EAAQ,CAKjBC,eAAgB,GAIhBC,oBAAqB,GAMrBC,iBAAkB,GAClBC,sBAAuB,GACvBC,mBAAoB,GAKpBC,wBAAyB,GAKzBC,uBAAwB,GAKxBC,kBAAmB,GAKnBC,eAAgB,GAChBC,iBAAkB,GAKlBC,gBAAiB,GACjBC,iBAAkB,GAKlBC,qBAAsB,GAOtBC,2BAA4B,GAQ5BC,mBAAoB,GAIpBC,oBAAqB,GAIrBC,qBAAsB,GAKtBC,qBAAsB,GAMtBC,0BAA2B,GAM3BC,yCAA0C,IAErC,SAASC,EAAeC,EAAShxC,GAClC0vC,EAAMsB,IACRtB,EAAMsB,GAAS78B,SAAQkI,GAAOA,EAAIrc,IAEtC,CAOO,SAASixC,EAAoBD,EAAShxC,GAC3C,OAAO2V,QAAQu7B,IAAIxB,EAAMsB,GAASl9B,KAAIuI,GAAOA,EAAIrc,KACnD,wHClGWmxC,EAAqC,WAC9C,SAASA,EAAsBC,EAAiBjE,EAEhDkE,EAAUC,GACRjwC,KAAKkwC,aAAe,IAAI9O,IACxBphC,KAAKmwC,WAAY,EACjBnwC,KAAK+vC,gBAAkBA,EACvB/vC,KAAK8rC,YAAcA,EACnB9rC,KAAKgwC,SAAWA,EAChBhwC,KAAKiwC,UAAYA,CACnB,CACA,IAAIpD,EAASiD,EAAsB9yC,UA4GnC,OA3GA6vC,EAAOuD,SAAW,SAAkBC,EAAwBC,GAC1D,IAAIjE,EAAQgE,EAAuBrwC,KAAK8rC,aACpCyE,GAAK,OAAmBvwC,KAAKkwC,aAAc7D,GAAO,IAAM,KAW5D,OAVU,IAAI/3B,SAAQ,CAACC,EAASC,KAC9B,IAAI8oB,EAAO,CACT+S,yBACAC,WACA/7B,UACAC,WAEF,QAAe+7B,GAAIl1C,KAAKiiC,GACxBt9B,KAAKwwC,YAAY,GAGrB,EACA3D,EAAO2D,WAAaC,iBAClB,IAAuB,IAAnBzwC,KAAKmwC,WAAiD,IAA3BnwC,KAAKkwC,aAAa5wC,KAAjD,CAIAU,KAAKmwC,WAAY,EACjB,IAAIO,EAAY,GAMZC,EAAY3wC,KAAKkwC,aACrBlwC,KAAKkwC,aAAe,IAAI9O,UAClB9sB,QAAQu7B,IAAIn0C,MAAM2B,KAAKszC,EAAUC,WAAWn+B,KAAIg+B,OAAQI,EAAQhJ,MACpE,IAiGqCiJ,EACrCC,EACAC,EAnGIC,GAiGiCH,EAjGIjJ,EAAMp1B,KAAInY,GAAKA,EAAE+1C,yBAkG1DU,EAASD,EAAK,GACdE,GAAuB,QAAcD,EAAO5D,MAAM+D,OACtDJ,EAAKh+B,SAAQ66B,IACX,IAAIuD,GAAS,QAAcvD,EAAIR,MAAM+D,OACjCA,EAASF,IACXD,EAASpD,EACTqD,EAAuBE,EACzB,IAEKH,GA1GCI,EAAUF,EACd,IAAK,IAAI3T,KAAQuK,EACf,IACEsJ,QAAgB7T,EAAKgT,UAMrB,QAAMa,GACR,CAAE,MAAOh+B,GACPmqB,EAAK9oB,OAAOrB,GACZmqB,EAAK9oB,OAAS,OACd8oB,EAAK/oB,QAAU,MACjB,CAEF,UACQvU,KAAKgwC,SAASmB,EAASF,EAC/B,CAAE,MAAO99B,GAOP,YADA00B,EAAM/0B,SAAQwqB,GAAQA,EAAK9oB,OAAOrB,IAEpC,CACAu9B,EAAUr1C,KAAK,CACb+1C,SAAUH,EACVthC,SAAUwhC,GACV,KAEJ,IAAIE,EAAcX,EAAU11C,OAAS,QAAUgF,KAAK+vC,gBAAgBuB,UAAUZ,EAAW,qBAAuB,CAC9GtsC,MAAO,GACPmtC,QAAS,IAwCX,aApCMj9B,QAAQu7B,IAAIwB,EAAYE,QAAQ9+B,KAAIykB,IACxC,IAAImV,EAAQnV,EAAOl3B,KAAK8rC,aACxB9rC,KAAKiwC,UAAU/Y,IACH,OAAkByZ,EAAWtE,GACnCv5B,SAAQwqB,GAAQA,EAAK/oB,QAAQ2iB,IAAQ,KAI7Cma,EAAYjtC,MAAM0O,SAAQ1O,IACxB,IAAIioC,EAAQjoC,EAAMuoC,WACd9E,GAAQ,OAAkB8I,EAAWtE,GACrCmF,GAAa,QAAyBptC,GAC1C,GAAIotC,EAAY,CAEd,IAAIjB,GAAK,OAAmBvwC,KAAKkwC,aAAc7D,GAAO,IAAM,KAK5DxE,EAAM4J,UAAU3+B,SAAQwqB,IACtBA,EAAK+S,wBAAyB,QAAemB,EAAWE,eACxD,QAAenB,GAAI5+B,QAAQ2rB,EAAK,GAEpC,KAAO,CAEL,IAAIqU,GAAU,QAA6BvtC,GAC3CyjC,EAAM/0B,SAAQwqB,GAAQA,EAAK9oB,OAAOm9B,IACpC,KAEF3xC,KAAKmwC,WAAY,EAOVnwC,KAAKwwC,YAtFZ,CAuFF,EACOV,CACT,CAxHgD,GAyHzC,SAAS8B,EAA6BC,GAgB3C,OAfUpB,UACR,IAAIqB,GAAc,QAA0B5E,GAC5C4E,EAAYC,SAAW7E,EAAQ6E,SAC/B,IAAIC,QAAiBH,EAAeC,GAChCG,EAAiBn1C,OAAOmW,OAAO,CAAC,EAAG++B,EAAU,CAC/CE,MAAOhF,EAAQgF,MACfC,aAAcjF,EAAQiF,aACtBhF,KAAMD,EAAQC,KACd4E,cAAuC,IAAtBC,EAASD,SAA2BC,EAASD,SAAW7E,EAAQ6E,WAKnF,YAHuC,IAA5BE,EAAeF,WACxBE,EAAeF,UAAW,GAErBE,CAAc,CAGzB,+CC5IO,IAAIG,EAAe,CAMxBC,UAAS,KACA,EAQTpF,sBAAsBtuC,GACbA,EAKT2zC,mBAAmB/lC,GACV,mBAAqBA,EAAU,oRAAsRA,EAAU,wJC7B1U,MAAMtI,EAAE,oBAAoBmU,WAAWA,WAAW,oBAAoB/G,KAAKA,KAAK,oBAAoB9B,OAAOA,OAAOgjC,OAAOC,EAAE11C,OAAO+V,KAAKrS,EAAE9E,MAAMuD,QAAQ,SAASiQ,EAAEjL,EAAEzD,GAAG,MAAM,iBAAiBA,GAAGgyC,EAAEhyC,GAAGsS,SAAQ,SAAU0/B,GAAGvuC,EAAEuuC,GAAGhyC,EAAEgyC,EAAG,IAAGvuC,CAAC,CAAC,oBAAoBqQ,SAASrQ,EAAEqQ,UAAUrQ,EAAEqQ,QAAQA,SAAS,MAAMiF,EAAEzc,OAAOyW,eAAejZ,EAAE,CAAC,EAAEm4C,eAAe,SAAStH,EAAElnC,EAAEuuC,GAAG,OAAOl4C,EAAEwG,KAAKmD,EAAEuuC,EAAE,CAAC,SAAS3tC,EAAEZ,EAAEzD,GAAG,mBAAmBA,IAAIA,EAAEA,EAAE+Y,EAAEtV,MAAM,oBAAoByP,QAAQ8+B,EAAE9+B,QAAQI,SAAStT,GAAGsS,SAAS0/B,IAAInuB,EAAEpgB,EAAEuuC,EAAEhyC,EAAEgyC,GAAI,GAAE,CAAC,MAAME,EAAE51C,OAAOuH,eAAe,SAASggB,EAAEpgB,EAAEuuC,EAAEhyC,EAAE+Y,GAAGm5B,EAAEzuC,EAAEuuC,EAAEtjC,EAAE1O,GAAG2qC,EAAE3qC,EAAE,QAAQ,mBAAmBA,EAAE+D,IAAI,CAACA,IAAI/D,EAAE+D,IAAIY,IAAI3E,EAAE2E,IAAIiH,cAAa,GAAI,CAAC9O,MAAMkD,EAAE4L,cAAa,EAAGD,UAAS,GAAIoN,GAAG,CAAC,SAAS7W,EAAEuB,GAAG,MAAM,CAAC5G,KAAK,SAASm1C,GAAG,OAAOvuC,EAAEjH,UAAUF,OAAOwW,OAAOk/B,EAAEx1C,WAAWqnB,EAAEpgB,EAAEjH,UAAU,cAAciH,GAAG,CAAC8N,OAAOlN,EAAE2R,KAAK,KAAKvS,EAAEjH,WAAW,EAAE,CAAC,MAAM+c,EAAEjd,OAAOmwB,yBAAyB,SAAS3T,EAAErV,EAAEuuC,GAAG,IAAIhyC,EAAE,OAAOuZ,EAAE9V,EAAEuuC,KAAKhyC,EAAE+Y,EAAEtV,KAAKqV,EAAE9Y,EAAEgyC,EAAE,CAAC,MAAMG,EAAE,GAAG/0C,MAAM,SAASolB,EAAE/e,EAAEuuC,EAAEhyC,GAAG,OAAOmyC,EAAE7xC,KAAKmD,EAAEuuC,EAAEhyC,EAAE,CAAC,SAASuE,EAAEd,EAAEuuC,GAAG,OAAOA,EAAEvuC,EAAE,CAAC,SAASxD,EAAEwD,GAAG,IAAIA,EAAE,MAAM,IAAIrI,MAAM,mBAAmB,CAAC,SAASgV,EAAE4hC,GAAGvuC,EAAE2uC,aAAaA,aAAaJ,GAAGv3B,WAAWu3B,EAAE,EAAE,CAAC,SAAS71B,EAAE1Y,EAAEuuC,GAAG,OAAOvuC,EAAE6rB,QAAO,CAAE7rB,EAAEzD,EAAE0O,KAAK,IAAIqK,EAAEi5B,EAAEhyC,EAAE0O,GAAG,OAAOqK,IAAItV,EAAEsV,EAAE,IAAIA,EAAE,IAAItV,CAAE,GAAE,CAAC,EAAE,CAAC,SAASvF,EAAEuF,EAAEuuC,GAAG,GAAGrH,EAAElnC,EAAEuuC,GAAG,OAAOvuC,EAAEuuC,GAAG,IAAIA,EAAE,OAAOvuC,EAAE,GAAG,iBAAiBuuC,EAAE,CAAC,IAAI,IAAIhyC,EAAE,GAAG0O,EAAE,EAAEqK,EAAEi5B,EAAEx3C,OAAOkU,EAAEqK,IAAIrK,EAAE,CAAC,IAAI5U,EAAEoE,EAAEuF,EAAEuuC,EAAEtjC,IAAI1O,EAAEnF,KAAKf,EAAE,CAAC,OAAOkG,CAAC,CAAC,IAAIqE,EAAE2tC,EAAE32C,QAAQ,KAAK,IAAI,IAAIgJ,EAAE,CAAC,IAAI6tC,EAAEzuC,EAAEuuC,EAAExwC,OAAO,EAAE6C,IAAI,YAAO,IAAS6tC,OAAE,EAAOh0C,EAAEg0C,EAAEF,EAAExwC,OAAO6C,EAAE,GAAG,CAAC,CAAC,SAASuO,EAAEnP,EAAEuuC,EAAEtjC,GAAG,GAAGjL,QAAG,IAASuuC,MAAM,aAAa11C,UAAUA,OAAO+1C,SAAS5uC,IAAI,GAAG,iBAAiBuuC,GAAG,WAAWA,EAAE,CAAC/xC,EAAE,iBAAiByO,GAAG,WAAWA,GAAG,IAAI,IAAIqK,EAAE,EAAEjf,EAAEk4C,EAAEx3C,OAAOue,EAAEjf,IAAIif,EAAEnG,EAAEnP,EAAEuuC,EAAEj5B,GAAGrK,EAAEqK,GAAG,KAAK,CAAC,IAAI1U,EAAE2tC,EAAE32C,QAAQ,KAAK,IAAI,IAAIgJ,EAAE,CAAC,IAAI6tC,EAAEF,EAAExwC,OAAO,EAAE6C,GAAGwf,EAAEmuB,EAAExwC,OAAO6C,EAAE,GAAG,GAAG,KAAKwf,OAAE,IAASnV,EAAE1O,EAAEyD,KAAKiQ,MAAMnS,SAAS2wC,IAAIzuC,EAAEuK,OAAOkkC,EAAE,UAAUzuC,EAAEyuC,GAAGzuC,EAAEyuC,GAAGxjC,MAAM,CAAC,IAAIxM,EAAEuB,EAAEyuC,GAAGhwC,GAAGyoC,EAAElnC,EAAEyuC,KAAKhwC,EAAEuB,EAAEyuC,GAAG,CAAC,GAAGt/B,EAAE1Q,EAAE2hB,EAAEnV,EAAE,CAAC,WAAM,IAASA,EAAE1O,EAAEyD,KAAKiQ,MAAMnS,SAASywC,IAAIvuC,EAAEuK,OAAOgkC,EAAE,UAAUvuC,EAAEuuC,GAAGvuC,EAAEuuC,GAAGtjC,CAAC,CAAC,CAAC,SAAS8G,EAAE/R,GAAG,IAAIuuC,EAAE,CAAC,EAAE,IAAI,IAAIhyC,KAAKyD,EAAEknC,EAAElnC,EAAEzD,KAAKgyC,EAAEhyC,GAAGyD,EAAEzD,IAAI,OAAOgyC,CAAC,CAAC,MAAM1tC,EAAE,GAAGE,OAAO,SAAS8tC,EAAE7uC,GAAG,OAAOa,EAAEnB,MAAM,GAAGM,EAAE,CAAC,MAAM4H,EAAE,8KAA8K0B,MAAM,KAAKvI,OAAO8tC,EAAE,CAAC,EAAE,GAAG,GAAG,IAAIrgC,KAAKxO,GAAG,CAAC,MAAM,OAAO,SAASwO,KAAK+/B,GAAGA,EAAEvuC,EAAE,cAAc+oB,QAAQwlB,GAAGvuC,EAAEuuC,KAAKO,EAAElnC,EAAE4G,KAAK+/B,GAAGvuC,EAAEuuC,KAAK71B,EAAE9Q,GAAG5H,GAAG,CAACA,GAAE,KAAM,IAAI+uC,EAAE,KAAK,SAASC,EAAEhvC,GAAG+uC,EAAE,oBAAoBE,SAAS,IAAIA,QAAQ,MAAMV,EAAEW,EAAElvC,GAAG,OAAO+uC,EAAE,KAAKR,CAAC,CAAC,SAASW,EAAElvC,GAAG,IAAIA,GAAG,iBAAiBA,EAAE,OAAOA,EAAE,IAAIuuC,EAAEQ,GAAGA,EAAEzuC,IAAIN,GAAG,GAAGuuC,EAAE,OAAOA,EAAE,GAAGhyC,EAAEyD,GAAG,CAACuuC,EAAE,GAAGQ,GAAGA,EAAE7tC,IAAIlB,EAAEuuC,GAAG,IAAI,IAAItjC,EAAE,EAAE5U,EAAE2J,EAAEjJ,OAAOkU,EAAE5U,IAAI4U,EAAEsjC,EAAEn3C,KAAK83C,EAAElvC,EAAEiL,IAAI,MAAM,GAAG6jC,EAAEl3C,QAAQoI,EAAEgI,cAAc,EAAEumC,EAAEvuC,MAAM,CAAC,MAAMzD,EAAE+Y,EAAEtV,GAAG,IAAI,IAAIY,KAAK2tC,EAAEhyC,IAAI1D,OAAOE,UAAU,CAAC,EAAEF,OAAOwW,OAAO9S,GAAGwyC,GAAGA,EAAE7tC,IAAIlB,EAAEuuC,GAAGvuC,EAAEknC,EAAElnC,EAAEY,KAAK2tC,EAAE3tC,GAAGsuC,EAAElvC,EAAEY,IAAI,CAAC,OAAO2tC,CAAC,CAAC,MAAMhzC,SAAS4zC,GAAG,CAAC,EAAE,SAASC,EAAEpvC,GAAG,OAAOmvC,EAAEtyC,KAAKmD,GAAGrG,MAAM,GAAG,EAAE,CAAC,MAAM4D,EAAE,oBAAoBnF,OAAOA,OAAOwwB,SAAS,aAAaymB,EAAE,iBAAiB9xC,EAAE,SAASyC,GAAG,IAAIuuC,EAAE,OAAO,MAAMvuC,IAAIuuC,EAAEvuC,EAAEzC,KAAKgxC,EAAE7uC,MAAMM,EAAE,EAAE,WAAW,OAAO,IAAI,EAAEsvC,EAAE,CAAC,EAAE,SAASC,EAAEvvC,GAAG,IAAIuuC,EAAEtjC,EAAEqK,EAAEjf,EAAE,GAAG,IAAIoF,UAAU1E,OAAO,CAAC,GAAGwF,EAAEyD,GAAG,OAAOA,EAAErG,QAAQ,GAAGoC,OAAOuzC,GAAG,iBAAiBtvC,EAAE,MAAM,CAACA,GAAG,GAAG3J,EAAEg5C,EAAErvC,GAAG,CAAC,IAAIiL,EAAE,KAAKqK,EAAEjf,EAAE6oB,QAAQiE,MAAMlY,EAAE7T,KAAKke,EAAEjc,OAAO,OAAO4R,CAAC,CAAC,GAAG,MAAMjL,EAAE,MAAM,CAACA,GAAG,GAAG,iBAAiBuuC,EAAEvuC,EAAEjJ,QAAQ,CAAC,IAAIkU,EAAE,IAAIxT,MAAM82C,GAAGA,KAAKtjC,EAAEsjC,GAAGvuC,EAAEuuC,GAAG,OAAOtjC,CAAC,CAAC,MAAM,CAACjL,EAAE,CAAC,IAAIuuC,EAAE9yC,UAAU1E,OAAOkU,EAAE,IAAIxT,MAAM82C,GAAGA,KAAKtjC,EAAEsjC,GAAG9yC,UAAU8yC,GAAG,OAAOtjC,CAAC,CAAC,MAAMukC,EAAE,oBAAoBp3C,OAAO4H,GAAG,kBAAkBA,EAAE5H,OAAOq3C,aAAa,KAAI,EAAG,IAAIjgC,EAAE,oBAAoBkgC,UAAU,6CAA6C/gC,KAAK+gC,SAASC,MAAM,SAASC,EAAE5vC,EAAEuuC,GAAG/+B,EAAExP,EAAE6vC,EAAEtB,CAAC,CAAC,IAAIsB,EAAE,KAAI,EAAG,MAAMC,GAAG,IAAIn4C,MAAM,IAAI0Q,MAAM,SAAS0nC,IAAI,GAAGD,EAAE,IAAI,MAAMC,EAAEt0C,UAAU,IAAI9D,KAAK,CAAC,MAAMqI,GAAG,OAAOA,CAAC,CAAC,OAAO,IAAIrI,KAAK,CAAC,SAASq4C,EAAEhwC,EAAEuuC,GAAG,IAAIhyC,EAAEyD,EAAEqI,MAAM,OAAO9L,GAAGgyC,EAAEA,GAAG,EAAE,IAAIhyC,EAAE3E,QAAQoI,EAAEoI,QAAQmmC,IAAIvuC,EAAEoI,KAAKpI,EAAEsI,SAASgB,MAAM,MAAMvS,QAAQwF,EAAE+M,MAAM,MAAM3P,MAAM40C,GAAGxlB,OAAO8mB,GAAGrhC,KAAKxO,GAAG,KAAKA,IAAIzI,KAAK,KAAK,EAAE,CAAC,IAAI04C,EAAE,CAAC,UAAU,aAAa,OAAO,sBAAsB,WAAW,UAAU,WAAW,eAAe,gBAAgB,QAAQ,UAAU,gBAAgB,SAAS,aAAaC,EAAE,CAAC,SAAS,OAAO,aAAa,gBAAgB,SAAS,UAAU,eAAe,aAAa,iBAAiB,kBAAkB,iBAAiB,cAAc,WAAW,iBAAiB,kBAAkB,gBAAgBnvC,OAAOkvC,GAAGE,EAAE,CAACC,eAAe,wDAAwDC,eAAe,2BAA2BC,MAAM,sBAAsBC,oBAAoB,8CAA8CC,WAAW,oEAAoE,SAASC,EAAEzwC,EAAEuuC,GAAGxyC,KAAK20C,GAAGX,IAAIh0C,KAAKqM,KAAKpI,EAAEjE,KAAKuM,QAAQimC,CAAC,CAAC,SAASoC,EAAE3wC,EAAEuuC,GAAG,OAAOvuC,EAAE,aAAanH,OAAO+V,KAAK2/B,GAAG//B,KAAKxO,GAAGuuC,EAAEvuC,GAAGzE,aAAawtB,QAAO,CAAE/oB,EAAEuuC,EAAEhyC,IAAIA,EAAE3E,QAAQoI,KAAKuuC,IAAIh3C,KAAK,KAAK,CAAC,SAASq5C,EAAE5wC,EAAEuuC,EAAEhyC,EAAE0O,GAAGlP,KAAK20C,GAAGX,IAAIh0C,KAAK80C,SAAStC,EAAExyC,KAAK+0C,WAAW7lC,EAAElP,KAAKg1C,aAAax0C,EAAER,KAAKuM,QAAQqoC,EAAE3wC,EAAEuuC,EAAE,CAAC,SAASyC,EAAEhxC,EAAEuuC,GAAGxyC,KAAK20C,GAAGX,IAAIh0C,KAAKqM,KAAK,YAAYrM,KAAK80C,SAASh4C,OAAO+V,KAAK2/B,GAAG//B,KAAKxO,GAAGuuC,EAAEvuC,KAAKjE,KAAKk1C,cAAc1C,EAAExyC,KAAKuM,QAAQqoC,EAAE3wC,EAAEuuC,EAAE,CAAC9vC,EAAEgyC,GAAGr3C,KAAKzB,OAAOmW,OAAO,CAACzF,MAAM,CAAC/H,IAAI,WAAW,OAAOvE,KAAKm1C,SAASn1C,KAAKm1C,OAAOn1C,KAAKqM,KAAK,KAAKrM,KAAKuM,QAAQ0nC,EAAEj0C,KAAK20C,GAAG,GAAG,GAAGn1C,SAAS,WAAW,OAAOQ,KAAKqM,KAAK,KAAKrM,KAAKuM,OAAO,IAAI7J,EAAEmyC,GAAGx3C,KAAKq3C,GAAGhyC,EAAEuyC,GAAG53C,KAAKq3C,GAAG,IAAIU,EAAEjB,EAAErkB,QAAO,CAAE7rB,EAAEuuC,KAAKvuC,EAAEuuC,GAAGA,EAAE,QAAQvuC,IAAI,CAAC,GAAG,MAAMoxC,EAAEX,EAAE,IAAIY,GAAEnB,EAAErkB,QAAO,CAAE7rB,EAAEuuC,KAAK,IAAIhyC,EAAEgyC,EAAE,QAAQ,SAAStjC,EAAEjL,EAAEiL,GAAGlP,KAAK20C,GAAGX,IAAIh0C,KAAKqM,KAAK7L,EAAEyD,EAAE,iBAAiBA,GAAGjE,KAAKuM,QAAQ,GAAGtI,IAAIiL,EAAE,MAAMA,EAAE,KAAKlP,KAAKu1C,MAAMrmC,GAAG,MAAM,iBAAiBjL,IAAIjE,KAAKuM,QAAQ,GAAGtI,EAAEoI,QAAQpI,EAAEsI,UAAUvM,KAAKu1C,MAAMtxC,IAAIjE,KAAKuM,QAAQ6nC,EAAE5B,IAAIhyC,EAAER,KAAKu1C,MAAM,KAAK,CAAC,OAAO7yC,EAAEwM,GAAG7R,KAAKg4C,GAAGpxC,EAAEuuC,GAAGtjC,EAAEjL,CAAE,GAAE,CAAC,GAAGqxC,GAAEE,OAAOC,YAAYH,GAAEI,KAAKv4C,UAAUm4C,GAAEK,MAAM/4C,WAAW,IAAIg5C,GAAE1B,EAAEpkB,QAAO,CAAE7rB,EAAEuuC,KAAKvuC,EAAEuuC,EAAE,SAAS8C,GAAE9C,GAAGvuC,IAAI,CAAC,GAAO4xC,GAAE1B,EAAErkB,QAAO,CAAE7rB,EAAEuuC,MAAM,IAAI,CAAC,SAAS,OAAO,SAAS32C,QAAQ22C,KAAKvuC,EAAEuuC,EAAE,SAAS8C,GAAE9C,IAAIvuC,IAAI,CAAC,GAAG,SAAS6xC,KAAK,CAAC,SAASC,GAAG9xC,GAAG,OAAOA,CAAC,CAAC,SAAS+xC,GAAG/xC,EAAEuuC,GAAG,OAAO,MAAMvuC,GAAGA,IAAI8xC,GAAGvD,EAAE,SAAShyC,GAAG,OAAOgyC,EAAEvuC,EAAEzD,GAAG,CAAC,CAAC,SAASy1C,GAAGhyC,EAAEuuC,GAAG,OAAO,WAAWvuC,EAAEN,MAAM3D,KAAKN,WAAW8yC,EAAE7uC,MAAM3D,KAAKN,UAAU,CAAC,CAAC,SAASw2C,GAAGjyC,EAAEuuC,GAAG,OAAOvuC,IAAI6xC,GAAGtD,EAAE,WAAW,IAAIhyC,EAAEyD,EAAEN,MAAM3D,KAAKN,gBAAW,IAASc,IAAId,UAAU,GAAGc,GAAG,IAAI0O,EAAElP,KAAKm2C,UAAU58B,EAAEvZ,KAAKqlB,QAAQrlB,KAAKm2C,UAAU,KAAKn2C,KAAKqlB,QAAQ,KAAK,IAAI/qB,EAAEk4C,EAAE7uC,MAAM3D,KAAKN,WAAW,OAAOwP,IAAIlP,KAAKm2C,UAAUn2C,KAAKm2C,UAAUF,GAAG/mC,EAAElP,KAAKm2C,WAAWjnC,GAAGqK,IAAIvZ,KAAKqlB,QAAQrlB,KAAKqlB,QAAQ4wB,GAAG18B,EAAEvZ,KAAKqlB,SAAS9L,QAAG,IAASjf,EAAEA,EAAEkG,CAAC,CAAC,CAAC,SAAS41C,GAAGnyC,EAAEuuC,GAAG,OAAOvuC,IAAI6xC,GAAGtD,EAAE,WAAWvuC,EAAEN,MAAM3D,KAAKN,WAAW,IAAIc,EAAER,KAAKm2C,UAAUjnC,EAAElP,KAAKqlB,QAAQrlB,KAAKm2C,UAAUn2C,KAAKqlB,QAAQ,KAAKmtB,EAAE7uC,MAAM3D,KAAKN,WAAWc,IAAIR,KAAKm2C,UAAUn2C,KAAKm2C,UAAUF,GAAGz1C,EAAER,KAAKm2C,WAAW31C,GAAG0O,IAAIlP,KAAKqlB,QAAQrlB,KAAKqlB,QAAQ4wB,GAAG/mC,EAAElP,KAAKqlB,SAASnW,EAAE,CAAC,CAAC,SAASmnC,GAAGpyC,EAAEuuC,GAAG,OAAOvuC,IAAI6xC,GAAGtD,EAAE,SAAShyC,GAAG,IAAI+Y,EAAEtV,EAAEN,MAAM3D,KAAKN,WAAWwP,EAAE1O,EAAE+Y,GAAG,IAAIjf,EAAE0F,KAAKm2C,UAAUhL,EAAEnrC,KAAKqlB,QAAQrlB,KAAKm2C,UAAU,KAAKn2C,KAAKqlB,QAAQ,KAAK,IAAIxgB,EAAE2tC,EAAE7uC,MAAM3D,KAAKN,WAAW,OAAOpF,IAAI0F,KAAKm2C,UAAUn2C,KAAKm2C,UAAUF,GAAG37C,EAAE0F,KAAKm2C,WAAW77C,GAAG6wC,IAAInrC,KAAKqlB,QAAQrlB,KAAKqlB,QAAQ4wB,GAAG9K,EAAEnrC,KAAKqlB,SAAS8lB,QAAG,IAAS5xB,OAAE,IAAS1U,OAAE,EAAOA,EAAEqK,EAAEqK,EAAE1U,EAAE,CAAC,CAAC,SAASyxC,GAAGryC,EAAEuuC,GAAG,OAAOvuC,IAAI6xC,GAAGtD,EAAE,WAAW,OAAM,IAAKA,EAAE7uC,MAAM3D,KAAKN,YAAYuE,EAAEN,MAAM3D,KAAKN,UAAU,CAAC,CAAC,SAAS62C,GAAGtyC,EAAEuuC,GAAG,OAAOvuC,IAAI6xC,GAAGtD,EAAE,WAAW,IAAIhyC,EAAEyD,EAAEN,MAAM3D,KAAKN,WAAW,GAAGc,GAAG,mBAAmBA,EAAEqc,KAAK,CAAC,IAAI,IAAI3N,EAAElP,KAAKuZ,EAAE7Z,UAAU1E,OAAOV,EAAE,IAAIoB,MAAM6d,GAAGA,KAAKjf,EAAEif,GAAG7Z,UAAU6Z,GAAG,OAAO/Y,EAAEqc,MAAK,WAAY,OAAO21B,EAAE7uC,MAAMuL,EAAE5U,EAAG,GAAE,CAAC,OAAOk4C,EAAE7uC,MAAM3D,KAAKN,UAAU,CAAC,CAACm2C,GAAEW,YAAY3B,EAAEgB,GAAEY,WAAW/B,EAAEmB,GAAEa,UAAUzB,EAAE,IAAI0B,GAAG,CAAC,EAAE,MAAMC,GAAGC,GAAGC,IAAI,oBAAoBxiC,QAAQ,GAAG,MAAM,IAAIrQ,EAAEqQ,QAAQC,UAAU,GAAG,oBAAoB0I,SAASA,OAAO85B,OAAO,MAAM,CAAC9yC,EAAEsV,EAAEtV,GAAGA,GAAG,MAAMuuC,EAAEv1B,OAAO85B,OAAOC,OAAO,UAAU,IAAIv7C,WAAW,CAAC,KAAK,MAAM,CAAC+2C,EAAEj5B,EAAEi5B,GAAGvuC,EAAG,EAA1K,GAA8KgzC,GAAGJ,IAAIA,GAAGh6B,KAAKq6B,GAAGN,IAAIA,GAAG3qC,YAAYkrC,KAAKL,GAAG,IAAIM,IAAG,EAAGC,GAAGP,GAAG,KAAKA,GAAGj6B,KAAKy6B,GAAE,EAAGrzC,EAAE2uC,aAAaA,aAAap8B,KAAK,KAAK8gC,IAAIrzC,EAAEszC,iBAAiB,KAAK,IAAItzC,EAAE0L,SAAS6nC,cAAc,OAAO,IAAID,kBAAiB,KAAMD,KAAKrzC,EAAE,IAAK,IAAGwzC,QAAQxzC,EAAE,CAACyzC,YAAW,IAAKzzC,EAAE0zC,aAAa,IAAI,IAAG,EAAG,KAAK18B,WAAWq8B,GAAG,EAAC,EAAGM,GAAG,SAAS3zC,EAAEuuC,GAAGqF,GAAGx8C,KAAK,CAAC4I,EAAEuuC,IAAImC,KAAK0C,KAAK1C,IAAG,EAAG,EAAEmD,IAAG,EAAGnD,IAAG,EAAGoD,GAAG,GAAGC,GAAG,GAAGC,GAAG,KAAKC,GAAGnC,GAAGoC,GAAG,CAAC1Q,GAAG,SAAS8K,QAAO,EAAG6F,IAAI,EAAEC,WAAW,GAAGC,YAAYC,GAAGC,KAAI,EAAGnpC,IAAI,CAAC,EAAEopC,SAAS,WAAWz4C,KAAKq4C,WAAWvlC,SAAS7O,IAAI,IAAIs0C,GAAGt0C,EAAE,GAAGA,EAAE,GAAG,CAAC,MAAMA,GAAG,CAAE,GAAE,GAAGy0C,GAAGP,GAAGN,GAAG,GAAGc,GAAG,EAAEC,GAAG,GAAG,SAASC,GAAG50C,GAAG,GAAG,iBAAiBjE,KAAK,MAAM,IAAI7C,UAAU,wCAAwC6C,KAAKyW,WAAW,GAAGzW,KAAK84C,YAAYhD,GAAG91C,KAAK+4C,MAAK,EAAG,IAAIvG,EAAExyC,KAAKg5C,KAAKN,GAAG,GAAGjlC,IAAIzT,KAAKi5C,aAAajF,IAAIh0C,KAAKk5C,MAAM,KAAKl5C,KAAKm5C,SAAS,GAAG,mBAAmBl1C,EAAE,CAAC,GAAGA,IAAI0yC,GAAG,MAAM,IAAIx5C,UAAU,kBAAkB,OAAO6C,KAAKo5C,OAAO15C,UAAU,GAAGM,KAAKswB,OAAO5wB,UAAU,SAAQ,IAAKM,KAAKo5C,QAAQC,GAAGr5C,KAAKA,KAAKswB,QAAQ,CAACtwB,KAAKo5C,OAAO,KAAKp5C,KAAKswB,OAAO,OAAOkiB,EAAE4F,IAAIkB,GAAGt5C,KAAKiE,EAAE,CAAC,MAAMs1C,GAAG,CAACh1C,IAAI,WAAW,IAAIN,EAAEy0C,GAAGlG,EAAEgH,GAAG,SAASh5C,EAAEA,EAAE0O,GAAG,IAAIqK,GAAGtV,EAAEsuC,SAAStuC,IAAIy0C,IAAIlG,IAAIgH,IAAI,MAAMl/C,EAAEif,IAAIkgC,KAAK,IAAItO,EAAE,IAAI0N,IAAG,CAAErG,EAAErH,KAAKuO,GAAG15C,KAAK,IAAI25C,GAAGC,GAAGp5C,EAAEyD,EAAEsV,EAAEjf,GAAGs/C,GAAG1qC,EAAEjL,EAAEsV,EAAEjf,GAAGk4C,EAAErH,EAAElnC,GAAI,IAAG,OAAOwP,GAAGomC,GAAG1O,EAAEnrC,MAAMmrC,CAAC,CAAC,OAAO3qC,EAAExD,UAAU25C,GAAGn2C,CAAC,EAAE2E,IAAI,SAASlB,GAAGogB,EAAErkB,KAAK,OAAOiE,GAAGA,EAAEjH,YAAY25C,GAAG4C,GAAG,CAACh1C,IAAI,WAAW,OAAON,CAAC,EAAEkB,IAAIo0C,GAAGp0C,KAAK,GAAG,SAASw0C,GAAG11C,EAAEuuC,EAAEhyC,EAAE0O,EAAEqK,GAAGvZ,KAAK85C,YAAY,mBAAmB71C,EAAEA,EAAE,KAAKjE,KAAK+5C,WAAW,mBAAmBvH,EAAEA,EAAE,KAAKxyC,KAAKuU,QAAQ/T,EAAER,KAAKwU,OAAOtF,EAAElP,KAAKg6C,IAAIzgC,CAAC,CAAC,SAAS+/B,GAAGr1C,EAAEuuC,GAAG,IAAIA,GAAGA,IAAI,GAAG,OAAOvuC,EAAEm1C,OAAO,CAAC,GAAG5G,IAAIvuC,EAAE,MAAM,IAAI9G,UAAU,6CAA6C,IAAIqD,EAAEyD,EAAE80C,MAAMkB,KAAKzH,GAAG,mBAAmBA,EAAE31B,KAAKy8B,GAAGr1C,GAAE,CAAEA,EAAEzD,KAAKgyC,aAAaqG,GAAGrG,EAAE0H,MAAMj2C,EAAEzD,GAAGgyC,EAAE31B,KAAK5Y,EAAEzD,EAAG,KAAIyD,EAAEm1C,QAAO,EAAGn1C,EAAEqsB,OAAOkiB,EAAE2H,GAAGl2C,IAAIzD,GAAG45C,IAAI,CAAE,GAAEf,GAAG7iC,KAAK,KAAKvS,GAAG,CAAC,MAAMuuC,GAAG6G,GAAGp1C,EAAEuuC,EAAE,CAAC,CAAC,SAAS6G,GAAGp1C,EAAEuuC,GAAG,GAAGwF,GAAG38C,KAAKm3C,GAAG,OAAOvuC,EAAEm1C,OAAO,CAAC,IAAI54C,EAAEyD,EAAE80C,MAAMkB,KAAKzH,EAAE0F,GAAG1F,GAAGvuC,EAAEm1C,QAAO,EAAGn1C,EAAEqsB,OAAOkiB,EAAE/+B,GAAG,OAAO++B,GAAG,iBAAiBA,IAAIA,EAAE6H,UAAU,SAASp2C,EAAEuuC,EAAEhyC,GAAG,IAAIyD,EAAEN,MAAM,UAA5B,EAAmC,CAAC,MAAMM,GAAU,CAAC,CAArD,EAAuD,KAAM,IAAIzD,EAAE8Y,EAAEk5B,EAAE,SAASA,EAAE6H,SAASp2C,EAAEogB,EAAEmuB,EAAE,QAAQ,CAACjuC,IAAI,IAAI6yC,GAAG52C,IAAIA,EAAE+D,IAAI/D,EAAE+D,IAAIZ,MAAM6uC,GAAGhyC,EAAElD,OAAO2G,EAAEqI,OAAQ,IAAG,SAASrI,GAAG8zC,GAAGzO,MAAMkJ,GAAGA,EAAEliB,SAASrsB,EAAEqsB,UAAUynB,GAAG18C,KAAK4I,EAAE,CAAzD,CAA2DA,GAAGk2C,GAAGl2C,GAAGzD,GAAG45C,IAAI,CAAC,CAAC,SAASD,GAAGl2C,GAAG,IAAIuuC,EAAEvuC,EAAEwS,WAAWxS,EAAEwS,WAAW,GAAG,IAAI,IAAIjW,EAAE,EAAE0O,EAAEsjC,EAAEx3C,OAAOwF,EAAE0O,IAAI1O,EAAEk5C,GAAGz1C,EAAEuuC,EAAEhyC,IAAI,IAAI+Y,EAAEtV,EAAE+0C,OAAOz/B,EAAE6+B,KAAK7+B,EAAEk/B,WAAW,IAAIE,OAAOA,GAAGf,IAAG,KAAM,KAAKe,IAAI2B,IAAK,GAAE,IAAI,CAAC,SAASZ,GAAGz1C,EAAEuuC,GAAG,GAAG,OAAOvuC,EAAEm1C,OAAO,CAAC,IAAI54C,EAAEyD,EAAEm1C,OAAO5G,EAAEsH,YAAYtH,EAAEuH,WAAW,GAAG,OAAOv5C,EAAE,OAAOyD,EAAEm1C,OAAO5G,EAAEj+B,QAAQi+B,EAAEh+B,QAAQvQ,EAAEqsB,UAAUkiB,EAAEwH,IAAI5B,MAAMO,GAAGf,GAAG2C,GAAG,CAAC/5C,EAAEyD,EAAEuuC,GAAG,MAAMvuC,EAAEwS,WAAWpb,KAAKm3C,EAAE,CAAC,SAAS+H,GAAGt2C,EAAEuuC,EAAEhyC,GAAG,IAAIy3C,GAAGzF,EAAE,IAAItjC,EAAEqK,EAAEi5B,EAAEliB,OAAOkiB,EAAE4G,OAAOlqC,EAAEjL,EAAEsV,IAAIy+B,GAAGh9C,SAASg9C,GAAG,IAAI9oC,EAAEjL,EAAEsV,IAAI,IAAIy+B,GAAGn8C,QAAQ0d,IAAI,SAAStV,GAAmB,IAAhB,IAAIuuC,EAAEuF,GAAG/8C,OAAYw3C,GAAG,GAAGuF,KAAKvF,GAAGliB,SAASrsB,EAAEqsB,OAAO,YAAYynB,GAAGvpC,OAAOgkC,EAAE,EAAE,CAA3F,CAA6FA,IAAIhyC,EAAE+T,QAAQrF,EAAE,CAAC,MAAMjL,GAAGzD,EAAEgU,OAAOvQ,EAAE,CAAC,QAAQg0C,GAAG,KAAK,KAAKU,IAAI2B,OAAO95C,EAAEw5C,IAAI5B,KAAK53C,EAAEw5C,IAAIvB,UAAU,CAAC,CAAC,SAAS+B,GAAGv2C,EAAEuuC,EAAEhyC,GAAG,GAAGgyC,EAAEx3C,SAASwF,EAAE,OAAOgyC,EAAE,IAAItjC,EAAE,GAAG,IAAG,IAAKjL,EAAEm1C,OAAO,CAAC,IAAI7/B,EAAEjf,EAAE6wC,EAAElnC,EAAEqsB,OAAO,MAAM6a,GAAG5xB,EAAE4xB,EAAE9+B,MAAM,QAAQ/R,EAAE6wC,EAAE5+B,SAAS4+B,EAAEj8B,EAAE+kC,EAAE9I,EAAE,KAAK5xB,EAAE4xB,EAAE7wC,EAAE,IAAIk4C,EAAEn3C,KAAKke,GAAGjf,EAAE,KAAKA,EAAE,IAAI4U,EAAE,CAAC,OAAOuE,KAAKvE,EAAE+kC,EAAEhwC,EAAEg1C,aAAa,MAAM,IAAIzG,EAAE32C,QAAQqT,IAAIsjC,EAAEn3C,KAAK6T,GAAGjL,EAAEi1C,OAAOsB,GAAGv2C,EAAEi1C,MAAM1G,EAAEhyC,IAAIgyC,CAAC,CAAC,SAASqH,GAAG51C,EAAEuuC,GAAG,IAAIhyC,EAAEgyC,EAAEA,EAAE2G,SAAS,EAAE,EAAE34C,EAAE,MAAMyD,EAAEi1C,MAAM1G,EAAEvuC,EAAEk1C,SAAS34C,EAAE,CAAC,SAAS82C,KAAK2C,MAAMG,IAAI,CAAC,SAASH,KAAK,IAAIh2C,EAAE6zC,GAAG,OAAOA,IAAG,EAAGnD,IAAG,EAAG1wC,CAAC,CAAC,SAASm2C,KAAK,IAAIn2C,EAAEuuC,EAAEhyC,EAAE,GAAG,KAAKq3C,GAAG78C,OAAO,GAAG,IAAIiJ,EAAE4zC,GAAGA,GAAG,GAAGr3C,EAAEyD,EAAEjJ,OAAOw3C,EAAE,EAAEA,EAAEhyC,IAAIgyC,EAAE,CAAC,IAAItjC,EAAEjL,EAAEuuC,GAAGtjC,EAAE,GAAGvL,MAAM,KAAKuL,EAAE,GAAG,QAAQ2oC,GAAG78C,OAAO,GAAG88C,IAAG,EAAGnD,IAAG,CAAE,CAAC,SAAS2F,KAAK,IAAIr2C,EAAE8zC,GAAGA,GAAG,GAAG9zC,EAAE6O,SAAS7O,IAAIA,EAAE+0C,KAAKV,YAAYx3C,KAAK,KAAKmD,EAAEqsB,OAAOrsB,EAAG,IAAG,IAAI,IAAIuuC,EAAEoG,GAAGh7C,MAAM,GAAG4C,EAAEgyC,EAAEx3C,OAAOwF,GAAGgyC,IAAIhyC,IAAI,CAAC,SAASi6C,GAAGx2C,GAAG,OAAO,IAAI40C,GAAGlC,IAAG,EAAG1yC,EAAE,CAAC,SAASy2C,GAAGz2C,EAAEuuC,GAAG,IAAIhyC,EAAEk4C,GAAG,OAAO,WAAW,IAAIxpC,EAAE+qC,KAAK1gC,EAAEm/B,GAAG,IAAI,OAAOiC,GAAGn6C,GAAE,GAAIyD,EAAEN,MAAM3D,KAAKN,UAAU,CAAC,MAAMuE,GAAGuuC,GAAGA,EAAEvuC,EAAE,CAAC,QAAQ02C,GAAGphC,GAAE,GAAIrK,GAAGkrC,IAAI,CAAC,CAAC,CAACv1C,EAAEg0C,GAAG77C,UAAU,CAAC6f,KAAK08B,GAAGW,MAAM,SAASj2C,EAAEuuC,GAAGkH,GAAG15C,KAAK,IAAI25C,GAAG,KAAK,KAAK11C,EAAEuuC,EAAEkG,IAAI,EAAE57B,MAAM,SAAS7Y,GAAG,GAAG,IAAIvE,UAAU1E,OAAO,OAAOgF,KAAK6c,KAAK,KAAK5Y,GAAG,IAAIuuC,EAAE9yC,UAAU,GAAGc,EAAEd,UAAU,GAAG,MAAM,mBAAmB8yC,EAAExyC,KAAK6c,KAAK,MAAM5Y,GAAGA,aAAauuC,EAAEhyC,EAAEyD,GAAGw2C,GAAGx2C,KAAKjE,KAAK6c,KAAK,MAAM5Y,GAAGA,GAAGA,EAAEoI,OAAOmmC,EAAEhyC,EAAEyD,GAAGw2C,GAAGx2C,IAAI,EAAE22C,QAAQ,SAAS32C,GAAG,OAAOjE,KAAK6c,MAAM21B,IAAIvuC,IAAIuuC,KAAKA,IAAIvuC,IAAIw2C,GAAGjI,KAAK,EAAElmC,MAAM,CAAC/H,IAAI,WAAW,GAAGvE,KAAKm1C,OAAO,OAAOn1C,KAAKm1C,OAAO,IAAIiC,IAAG,EAAG,IAAInzC,EAAEu2C,GAAGx6C,KAAK,GAAG,IAAIxE,KAAK,qBAAqB,OAAO,OAAOwE,KAAKo5C,SAASp5C,KAAKm1C,OAAOlxC,GAAGA,CAAC,CAAC,QAAQmzC,IAAG,CAAE,CAAC,GAAG37B,QAAQ,SAASxX,EAAEuuC,GAAG,OAAOvuC,EAAE,IAAI,IAAI40C,IAAG,CAAEr4C,EAAE0O,KAAK,IAAIqK,EAAE0B,YAAW,IAAK/L,EAAE,IAAIomC,GAAEuF,QAAQrI,KAAKvuC,GAAGjE,KAAK6c,KAAKrc,EAAE0O,GAAG0rC,QAAQ1/B,aAAa1E,KAAK,KAAK+C,GAAI,IAAGvZ,IAAI,IAAI,oBAAoB3D,QAAQA,OAAOq3C,aAAarvB,EAAEw0B,GAAG77C,UAAUX,OAAOq3C,YAAY,iBAAiByE,GAAG9oC,IAAIyrC,KAAKj2C,EAAEg0C,GAAG,CAAChJ,IAAI,WAAW,IAAI5rC,EAAEuvC,EAAE7vC,MAAM,KAAKjE,WAAW+S,IAAIsoC,IAAI,OAAO,IAAIlC,IAAG,SAAUrG,EAAEhyC,GAAG,IAAIyD,EAAEjJ,QAAQw3C,EAAE,IAAI,IAAItjC,EAAEjL,EAAEjJ,OAAOiJ,EAAE6O,SAAQ,CAAEyG,EAAEjf,IAAIu+C,GAAGtkC,QAAQgF,GAAGsD,MAAMrc,IAAIyD,EAAE3J,GAAGkG,IAAI0O,GAAGsjC,EAAEvuC,EAAG,GAAEzD,IAAK,GAAE,EAAE+T,QAAQtQ,IAAI,GAAGA,aAAa40C,GAAG,OAAO50C,EAAE,GAAGA,GAAG,mBAAmBA,EAAE4Y,KAAK,OAAO,IAAIg8B,IAAG,CAAErG,EAAEhyC,KAAKyD,EAAE4Y,KAAK21B,EAAEhyC,EAAG,IAAG,IAAIgyC,EAAE,IAAIqG,GAAGlC,IAAG,EAAG1yC,GAAG,OAAO41C,GAAGrH,EAAEyF,IAAIzF,GAAGh+B,OAAOimC,GAAGO,KAAK,WAAW,IAAI/2C,EAAEuvC,EAAE7vC,MAAM,KAAKjE,WAAW+S,IAAIsoC,IAAI,OAAO,IAAIlC,IAAG,CAAErG,EAAEhyC,KAAKyD,EAAEwO,KAAKxO,GAAG40C,GAAGtkC,QAAQtQ,GAAG4Y,KAAK21B,EAAEhyC,IAAK,GAAE,EAAEy6C,IAAI,CAAC12C,IAAI,IAAIm0C,GAAGvzC,IAAIlB,GAAGy0C,GAAGz0C,GAAGi3C,YAAY,CAAC32C,IAAI,IAAIi1C,IAAI2B,OAAOC,GAAGC,OAAOC,GAAG1kB,UAAU,CAACryB,IAAI,IAAIqzC,GAAGzyC,IAAIlB,IAAI2zC,GAAG3zC,IAAIs3C,gBAAgB,CAACh3C,IAAI,IAAI2zC,GAAG/yC,IAAIlB,IAAIi0C,GAAGj0C,IAAIu3C,OAAO,CAACv3C,EAAEuuC,IAAI,IAAIqG,IAAG,CAAEr4C,EAAE0O,IAAIksC,IAAG,CAAE5I,EAAEhyC,KAAK,IAAI0O,EAAEwpC,GAAGxpC,EAAEmpC,WAAW,GAAGnpC,EAAEopC,YAAY93C,EAAE0O,EAAEupC,SAASxC,IAAG,YAAa,SAAShyC,GAA+C20C,GAAGv9C,MAA/C,SAASm3C,IAAIvuC,IAAI20C,GAAGpqC,OAAOoqC,GAAG/8C,QAAQ22C,GAAG,EAAE,MAAcmG,GAAGf,IAAG,KAAM,KAAKe,IAAI2B,IAAK,GAAE,GAAG,CAApG,EAAsG,KAAM,IAAIt6C,KAAKq4C,WAAWr9C,OAAOw3C,IAAIhyC,EAAER,KAAKq4C,WAAW,GAAI,GAAG,GAAEnpC,EAAEupC,UAAUx0C,GAAI,GAAEuuC,EAAEhyC,EAAE0O,OAAOgoC,KAAKA,GAAGuE,YAAYp3B,EAAEw0B,GAAG,cAAa,WAAY,MAAM50C,EAAEuvC,EAAE7vC,MAAM,KAAKjE,WAAW+S,IAAIsoC,IAAI,OAAO,IAAIlC,IAAIrG,IAAI,IAAIvuC,EAAEjJ,QAAQw3C,EAAE,IAAI,IAAIhyC,EAAEyD,EAAEjJ,OAAO,MAAMkU,EAAE,IAAIxT,MAAM8E,GAAGyD,EAAE6O,SAAQ,CAAE7O,EAAEsV,IAAIs/B,GAAGtkC,QAAQtQ,GAAG4Y,MAAM5Y,GAAGiL,EAAEqK,GAAG,CAACmiC,OAAO,YAAYp+C,MAAM2G,KAAKA,GAAGiL,EAAEqK,GAAG,CAACmiC,OAAO,WAAWC,OAAO13C,KAAK4Y,MAAK,MAAOrc,GAAGgyC,EAAEtjC,MAAO,GAAG,IAAGgoC,GAAG0E,KAAK,oBAAoBC,gBAAgBx3B,EAAEw0B,GAAG,OAAM,WAAY,MAAM50C,EAAEuvC,EAAE7vC,MAAM,KAAKjE,WAAW+S,IAAIsoC,IAAI,OAAO,IAAIlC,IAAG,CAAErG,EAAEhyC,KAAK,IAAIyD,EAAEjJ,QAAQwF,EAAE,IAAIq7C,eAAe,KAAK,IAAI3sC,EAAEjL,EAAEjJ,OAAO,MAAMue,EAAE,IAAI7d,MAAMwT,GAAGjL,EAAE6O,SAAQ,CAAE7O,EAAE3J,IAAIu+C,GAAGtkC,QAAQtQ,GAAG4Y,MAAM5Y,GAAGuuC,EAAEvuC,KAAKA,IAAIsV,EAAEjf,GAAG2J,IAAIiL,GAAG1O,EAAE,IAAIq7C,eAAetiC,GAAI,KAAK,GAAG,KAAI,MAAMuiC,GAAG,CAACC,OAAO,EAAEC,OAAO,EAAEvU,GAAG,GAAG,IAAIwU,GAAG,EAAEC,GAAG,GAAGC,GAAG,EAAE3C,GAAG,EAAE4C,GAAG,EAAE,SAAShB,GAAGn3C,EAAEuuC,EAAEhyC,EAAE+Y,GAAG,IAAIjf,EAAEo+C,GAAGvN,EAAEruC,OAAOwW,OAAOhZ,GAAG6wC,EAAElV,OAAO37B,EAAE6wC,EAAEiN,IAAI,EAAEjN,EAAEoH,QAAO,EAAGpH,EAAE1D,KAAK2U,GAAG,IAAIv3C,EAAEszC,GAAG9oC,IAAI87B,EAAE97B,IAAI8nC,GAAG,CAAC7iC,QAAQukC,GAAGwD,YAAY,CAAC/+C,MAAMu7C,GAAGzsC,cAAa,EAAGD,UAAS,GAAI0jC,IAAIgJ,GAAGhJ,IAAImL,KAAKnC,GAAGmC,KAAKS,WAAW5C,GAAG4C,WAAWG,IAAI/C,GAAG+C,IAAIrnC,QAAQskC,GAAGtkC,QAAQC,OAAOqkC,GAAGrkC,OAAO8nC,MAAMC,GAAG13C,EAAEy3C,MAAMnR,GAAGqR,MAAMD,GAAG13C,EAAE23C,MAAMrR,IAAI,CAAC,EAAEqH,GAAGtjC,EAAEi8B,EAAEqH,KAAKl4C,EAAE89C,IAAIjN,EAAEsN,SAAS,aAAaz4C,KAAKi2B,OAAOmiB,KAAKp4C,KAAKi2B,OAAOwiB,UAAU,EAAE,IAAI/F,EAAE4I,GAAGnQ,EAAElnC,EAAEzD,EAAE+Y,GAAG,OAAO,IAAI4xB,EAAEiN,KAAKjN,EAAEsN,WAAW/F,CAAC,CAAC,SAAS+J,KAAK,OAAOX,GAAGrU,KAAKqU,GAAGrU,KAAKwU,MAAMH,GAAGC,OAAOD,GAAGE,QAAQ,IAAIF,GAAGrU,EAAE,CAAC,SAASgS,KAAK,QAAQqC,GAAGC,SAAS,KAAKD,GAAGC,SAASD,GAAGrU,GAAG,GAAGqU,GAAGE,OAAO,IAAIF,GAAGC,QAAO,EAAG,CAAC,SAAShB,GAAG92C,GAAG,OAAO63C,GAAGE,QAAQ/3C,GAAGA,EAAEgI,cAAcirC,IAAIuF,KAAKx4C,EAAE4Y,MAAM5Y,IAAIw1C,KAAKx1C,KAAKA,IAAIw1C,KAAKiD,GAAGz4C,OAAOA,CAAC,CAAC,SAAS04C,GAAG14C,KAAKu1C,GAAGsC,GAAGE,QAAQ,KAAKF,GAAGE,SAASF,GAAGE,OAAOF,GAAGrU,GAAG,GAAGyU,GAAG7gD,KAAKq9C,IAAIiC,GAAG12C,GAAE,EAAG,CAAC,SAASwV,KAAK,IAAIxV,EAAEi4C,GAAGA,GAAGlhD,OAAO,GAAGkhD,GAAGpkC,MAAM6iC,GAAG12C,GAAE,EAAG,CAAC,SAAS02C,GAAGnI,EAAEhyC,GAAG,IAAI0O,EAAEwpC,GAAG,IAAIl4C,GAAGs7C,GAAGE,QAAQG,MAAM3J,IAAIkG,IAAIyD,MAAMA,IAAI3J,IAAIkG,KAAKkE,GAAGp8C,EAAEm8C,GAAGnmC,KAAK,KAAKg8B,GAAG/4B,IAAI+4B,IAAIkG,KAAKA,GAAGlG,EAAEtjC,IAAIipC,KAAKA,GAAG9oC,IAAIyrC,MAAM3D,IAAI,CAAC,IAAI59B,EAAE4+B,GAAG9oC,IAAIiF,QAAQha,EAAEk4C,EAAEnjC,IAAIwnC,GAAGh6B,KAAKviB,EAAEgiD,MAAM/iC,EAAEvc,UAAU6f,KAAKviB,EAAEkiD,OAAOttC,EAAEqjC,QAAQC,EAAED,UAAUz1C,OAAOuH,eAAeJ,EAAE,UAAU3J,EAAE+hD,aAAa9iC,EAAEs2B,IAAIv1C,EAAEu1C,IAAIt2B,EAAEyhC,KAAK1gD,EAAE0gD,KAAKzhC,EAAEhF,QAAQja,EAAEia,QAAQgF,EAAE/E,OAAOla,EAAEka,OAAOla,EAAEmhD,aAAaliC,EAAEkiC,WAAWnhD,EAAEmhD,YAAYnhD,EAAEshD,MAAMriC,EAAEqiC,IAAIthD,EAAEshD,KAAK,CAAC,CAAC,SAASd,KAAK,IAAItI,EAAEvuC,EAAEqQ,QAAQ,OAAO6iC,GAAG,CAAC7iC,QAAQk+B,EAAE6J,YAAYv/C,OAAOmwB,yBAAyBhpB,EAAE,WAAW4rC,IAAI2C,EAAE3C,IAAImL,KAAKxI,EAAEwI,KAAKS,WAAWjJ,EAAEiJ,WAAWG,IAAIpJ,EAAEoJ,IAAIrnC,QAAQi+B,EAAEj+B,QAAQC,OAAOg+B,EAAEh+B,OAAO8nC,MAAMzF,GAAGh6B,KAAK2/B,MAAMhK,EAAEx1C,UAAU6f,MAAM,CAAC,CAAC,CAAC,SAASy+B,GAAGr3C,EAAEuuC,EAAEhyC,EAAE0O,EAAEqK,GAAG,IAAIjf,EAAEo+C,GAAG,IAAI,OAAOiC,GAAG12C,GAAE,GAAIuuC,EAAEhyC,EAAE0O,EAAEqK,EAAE,CAAC,QAAQohC,GAAGrgD,GAAE,EAAG,CAAC,CAAC,SAASsiD,GAAG34C,GAAGgzC,GAAGn2C,KAAK81C,GAAG3yC,EAAE,CAAC,SAAS21C,GAAG31C,EAAEuuC,EAAEhyC,EAAE0O,GAAG,MAAM,mBAAmBjL,EAAEA,EAAE,WAAW,IAAIsV,EAAEm/B,GAAGl4C,GAAGi8C,KAAK9B,GAAGnI,GAAE,GAAI,IAAI,OAAOvuC,EAAEN,MAAM3D,KAAKN,UAAU,CAAC,QAAQi7C,GAAGphC,GAAE,GAAIrK,GAAG0tC,GAAGnD,GAAG,CAAC,CAAC,CAAC,SAAS8C,GAAGt4C,EAAEuuC,GAAG,OAAO,SAAShyC,EAAE0O,GAAG,OAAOjL,EAAEnD,KAAKd,KAAK45C,GAAGp5C,EAAEgyC,GAAGoH,GAAG1qC,EAAEsjC,GAAG,CAAC,CAAmD,SAAS+F,GAAG/F,EAAEhyC,GAAG,IAAI+Y,EAAE,IAAIA,EAAE/Y,EAAEs4C,YAAYtG,EAAE,CAAC,MAAMvuC,GAAG,CAAC,IAAG,IAAKsV,EAAE,IAAI,IAAIjf,EAAE6wC,EAAE,CAAC1uB,QAAQjc,EAAEm7C,OAAOnJ,GAAG,GAAGvuC,EAAE0L,UAAUA,SAASktC,cAAcviD,EAAEqV,SAASktC,YAAY,UAAUC,UAAU,sBAAqB,GAAG,GAAI5tC,EAAE5U,EAAE6wC,IAAIlnC,EAAE84C,aAAa7tC,EAAE5U,EAAE,IAAIyiD,YAAY,qBAAqB,CAACC,OAAO7R,IAAIA,GAAG7wC,GAAG2J,EAAEg5C,gBAAgBA,cAAc3iD,IAAI2J,EAAEi5C,uBAAuBj5C,EAAEk5C,sBAAsB,IAAIl5C,EAAEk5C,qBAAqB7iD,EAAE,CAAC,MAAM2J,GAAG,CAACwP,GAAGnZ,IAAIA,EAAE8iD,kBAAkBj5C,QAAQoM,KAAK,wBAAwBiiC,EAAElmC,OAAOkmC,IAAI,CAAC,MAAMvuC,GAAG,CAAC,EAAxiB,KAAK,GAAGgzC,IAAIp7C,QAAQ,mBAAmB4gD,GAAGhD,GAAG3D,IAA4f,IAAI4G,GAAG7D,GAAGrkC,OAAO,SAAS6oC,GAAGp5C,EAAEuuC,EAAEhyC,EAAE0O,GAAG,GAAGjL,EAAEq5C,QAAQr5C,EAAEm1C,OAAOmE,cAAc7E,GAAG8E,YAAYv5C,EAAEw5C,MAAM,CAAC,IAAIlkC,EAAEtV,EAAEy5C,mBAAmBlL,EAAEhyC,EAAEyD,EAAE05C,WAAW,IAAIpkC,EAAEjG,SAASrP,EAAEm1C,OAAOwE,eAAe,CAAC,CAAC,MAAMrkC,GAAG,OAAOA,EAAElN,OAAO+oC,EAAEyI,cAAc55C,EAAE65C,YAAY75C,EAAEm1C,OAAOwE,eAAe,GAAGz5C,QAAQoM,KAAK,4BAA4BtM,EAAE85C,SAAS95C,EAAE+5C,OAAOnhC,MAAK,IAAKwgC,GAAGp5C,EAAEuuC,EAAEhyC,EAAE0O,MAAMwtC,GAAGnjC,EAAE,CAAC,OAAOA,EAAE8gC,SAAS7H,GAAE,CAAEvuC,EAAEuuC,IAAI4I,IAAG,KAAM1C,GAAGuF,MAAM1kC,EAAErK,EAAEjL,EAAEuuC,EAAEj5B,QAAQsD,MAAM5Y,GAAGsV,EAAE2kC,YAAYrhC,MAAK,IAAK5Y,KAAK,CAAC,GAAGA,EAAEm1C,OAAOmE,aAAa,OAAOb,GAAG,IAAIpH,GAAEhB,eAAerwC,EAAEm1C,OAAO+E,cAAc,IAAIl6C,EAAEm1C,OAAOgF,cAAc,CAAC,IAAIn6C,EAAEo6C,SAASC,SAAS,OAAO5B,GAAG,IAAIpH,GAAEhB,gBAAgBrwC,EAAE+5C,OAAOlhC,MAAMg5B,GAAG,CAAC,OAAO7xC,EAAEm1C,OAAOmF,eAAe1hC,MAAK,IAAKwgC,GAAGp5C,EAAEuuC,EAAEhyC,EAAE0O,IAAI,CAAC,MAAMsvC,GAAGr9C,OAAOuC,aAAa,OAAO+6C,GAAG,oGAAoGC,GAAG,GAAGC,GAAG,oBAAoBlvC,WAAW,sBAAsBmD,KAAKnD,UAAUC,WAAWkvC,GAAGD,GAAGE,GAAGF,GAAGG,GAAG76C,IAAI,6BAA6B2O,KAAK3O,GAAG,SAAS86C,GAAG96C,EAAEuuC,GAAG,OAAOvuC,EAAEuuC,EAAE,WAAW,OAAOvuC,EAAEN,MAAM3D,KAAKN,YAAY8yC,EAAE7uC,MAAM3D,KAAKN,UAAU,EAAEuE,EAAEuuC,CAAC,CAAC,MAAMwM,GAAG,CAAChgD,KAAK,EAAEigD,OAAM,IAAKC,WAAU,EAAGC,MAAM,CAAC,IAAIC,WAAU,GAAI,SAASC,GAAGp7C,GAAG,MAAM,iBAAiBA,GAAG,KAAK2O,KAAK3O,GAAGA,GAAGA,EAAEuuC,SAAI,IAASA,EAAEvuC,IAAIA,KAAKuuC,UAAUA,EAAES,EAAET,IAAIvuC,GAAGuuC,EAAE,CAAC,SAAS8M,KAAK,MAAMhK,GAAEI,MAAM,CAAC,MAAM6J,GAAG,MAAAC,CAAOv7C,EAAEuuC,EAAEhyC,GAAG,MAAM0O,EAAElP,KAAKy/C,KAAK/G,GAAGuF,MAAM1kC,EAAEvZ,KAAKqM,KAAK,SAAS/R,EAAE2J,EAAEzD,EAAE0O,GAAG,IAAIA,EAAEwwC,OAAOnmC,GAAG,MAAM,IAAI+7B,GAAEqK,SAAS,SAASpmC,EAAE,4BAA4B,OAAOi5B,EAAEtjC,EAAE0wC,SAAS1wC,EAAE,CAAC,MAAMi8B,EAAE8O,KAAK,IAAI,OAAO/qC,GAAGA,EAAE2wC,KAAK7/C,KAAK6/C,GAAG3wC,IAAIwpC,GAAGuF,MAAM/uC,EAAEmrC,SAASp2C,EAAE3J,EAAEkG,GAAG46C,IAAG,IAAKlsC,EAAEmrC,SAASp2C,EAAE3J,EAAEkG,IAAI,CAACy9C,MAAM/uC,EAAE4wC,UAAUpH,GAAGoH,WAAWpH,KAAK2E,GAAGr9C,KAAK6/C,GAAG57C,EAAE,CAACjE,KAAKqM,MAAM/R,EAAE,CAAC,QAAQ6wC,GAAGiP,IAAI,CAAC,CAAC,GAAA71C,CAAIN,EAAEuuC,GAAG,OAAOvuC,GAAGA,EAAEgI,cAAcnP,OAAOkD,KAAK+/C,MAAM97C,GAAGwE,MAAM+pC,GAAGxyC,KAAKw/C,OAAO,YAAYhN,GAAGxyC,KAAKggD,KAAKz7C,IAAI,CAAC05C,MAAMzL,EAAEz/B,IAAI9O,IAAI4Y,MAAM5Y,GAAGjE,KAAKigD,KAAK/+B,QAAQg/B,KAAKj8C,OAAO4Y,KAAK21B,EAAE,CAAC,KAAAuN,CAAM97C,GAAG,GAAG,iBAAiBA,EAAE,OAAO,IAAIjE,KAAK6/C,GAAGM,YAAYngD,KAAKiE,GAAG,GAAGzD,EAAEyD,GAAG,OAAO,IAAIjE,KAAK6/C,GAAGM,YAAYngD,KAAK,IAAIiE,EAAEzI,KAAK,SAAS,MAAM0T,EAAEsjC,EAAEvuC,GAAG,GAAG,IAAIiL,EAAElU,OAAO,OAAOgF,KAAK+/C,MAAM7wC,EAAE,IAAI1J,OAAOvB,EAAEiL,EAAE,KAAK,MAAMqK,EAAEvZ,KAAK0/C,OAAOU,QAAQp7C,OAAOhF,KAAK0/C,OAAOW,SAASrzB,QAAQ/oB,GAAGA,EAAEq8C,UAAUpxC,EAAEqxC,OAAO/N,GAAGvuC,EAAEu8C,QAAQ3kD,QAAQ22C,IAAI,KAAKvuC,EAAEu8C,QAAQD,OAAOt8C,GAAGiL,EAAErT,QAAQoI,IAAI,MAAM,GAAG,GAAGsV,GAAGvZ,KAAK6/C,GAAGY,UAAUjC,GAAG,OAAOx+C,KAAK+/C,MAAMxmC,EAAElN,MAAM7G,OAAO+T,EAAEinC,QAAQ/tC,KAAK+/B,GAAGvuC,EAAEuuC,OAAOj5B,GAAG9F,GAAGtP,QAAQoM,KAAK,aAAaM,KAAKC,UAAU7M,SAASjE,KAAKqM,2CAA2C6C,EAAE1T,KAAK,SAAS,MAAMklD,UAAUpmD,GAAG0F,KAAK0/C,OAAOvU,EAAEnrC,KAAK6/C,GAAGc,MAAMC,UAAU,SAAS/7C,EAAEZ,EAAEuuC,GAAG,IAAI,OAAO,IAAIrH,EAAE0V,IAAI58C,EAAEuuC,EAAE,CAAC,MAAMvuC,GAAG,OAAM,CAAE,CAAC,CAAC,MAAMyuC,EAAEruB,GAAGnV,EAAE4gB,QAAO,EAAG0iB,EAAEtjC,GAAGqK,KAAK,MAAM4xB,EAAE7wC,EAAEif,GAAGm5B,EAAEzuC,EAAEsV,GAAG,MAAM,CAACi5B,GAAGrH,EAAEqH,IAAIrH,EAAE4T,GAAG7vC,EAAEi8B,GAAGA,EAAE2V,MAAM78C,IAAI,MAAMuuC,EAAE9zC,EAAEuF,EAAEsV,GAAG,OAAO/Y,EAAEgyC,IAAIA,EAAElJ,MAAMrlC,GAAGY,EAAE6tC,EAAEzuC,IAAG,EAAGA,GAAGY,EAAE6tC,EAAEh0C,EAAEuF,EAAEsV,KAAKrK,EAAG,GAAE,CAAC,KAAK,OAAO,OAAOwjC,EAAE1yC,KAAK+/C,MAAMrN,EAAErmC,MAAM7G,OAAOvB,EAAEyuC,EAAE8N,UAAUxzB,OAAO3I,GAAG9K,EAAEvZ,KAAKgtB,OAAO3I,GAAGrkB,KAAK+/C,MAAM7wC,GAAG1J,OAAO,GAAG,CAAC,MAAAwnB,CAAO/oB,GAAG,OAAOjE,KAAK+gD,eAAeC,IAAI/8C,EAAE,CAAC,KAAAgS,CAAMhS,GAAG,OAAOjE,KAAK+gD,eAAe9qC,MAAMhS,EAAE,CAAC,MAAAvC,CAAOuC,GAAG,OAAOjE,KAAK+gD,eAAer/C,OAAOuC,EAAE,CAAC,KAAA2G,CAAM3G,GAAG,OAAOjE,KAAK+gD,eAAen2C,MAAM3G,EAAE,CAAC,IAAAg9C,CAAKh9C,GAAG,OAAOjE,KAAK+gD,eAAeE,KAAKh9C,EAAE,CAAC,OAAAi9C,CAAQj9C,GAAG,OAAOjE,KAAK+gD,eAAeG,QAAQj9C,EAAE,CAAC,YAAA88C,GAAe,OAAO,IAAI/gD,KAAK6/C,GAAGsB,WAAW,IAAInhD,KAAK6/C,GAAGM,YAAYngD,MAAM,CAAC,OAAAohD,CAAQn9C,GAAG,OAAO,IAAIjE,KAAK6/C,GAAGsB,WAAW,IAAInhD,KAAK6/C,GAAGM,YAAYngD,KAAKQ,EAAEyD,GAAG,IAAIA,EAAEzI,KAAK,QAAQyI,GAAG,CAAC,OAAAwtC,GAAU,OAAOzxC,KAAK+gD,eAAetP,SAAS,CAAC,UAAA4P,CAAWp9C,GAAG,MAAM47C,GAAGrN,EAAEnmC,KAAK7L,GAAGR,KAAKA,KAAK0/C,OAAO4B,YAAYr9C,EAAEA,EAAEjH,qBAAqBsiD,KAAKr7C,EAAE,cAAcA,EAAE,MAAI47C,GAAK,OAAOrN,CAAC,CAAC,KAAA5kC,GAAQ,OAAOpN,CAAC,IAAI,MAAM0O,EAAE,IAAIqyC,IAAI,IAAI,IAAI/O,EAAEvuC,EAAEjH,UAAUw1C,EAAEA,EAAEj5B,EAAEi5B,GAAG11C,OAAOkX,oBAAoBw+B,GAAG1/B,SAAS7O,GAAGiL,EAAE2iB,IAAI5tB,KAAK,MAAM3J,EAAEk4C,IAAI,IAAIA,EAAE,OAAOA,EAAE,MAAMhyC,EAAE1D,OAAOwW,OAAOrP,EAAEjH,WAAW,IAAI,IAAIiH,KAAKuuC,EAAE,IAAItjC,EAAEs8B,IAAIvnC,GAAG,IAAIzD,EAAEyD,GAAGuuC,EAAEvuC,EAAE,CAAC,MAAMA,GAAG,CAAC,OAAOzD,GAAG,OAAOR,KAAK0/C,OAAO8B,UAAUxhD,KAAKigD,KAAK/+B,QAAQgR,YAAYlyB,KAAK0/C,OAAO8B,UAAUxhD,KAAK0/C,OAAO8B,SAASlnD,EAAE0F,KAAKigD,KAAK,UAAU3lD,GAAG2J,CAAC,CAAC,WAAAw9C,GAAc,OAAOzhD,KAAKqhD,YAAW,SAAUp9C,GAAGiL,EAAElP,KAAKiE,EAAG,GAAE,CAAC,GAAA4tB,CAAI5tB,EAAEuuC,GAAG,MAAMkP,KAAKlhD,EAAEggD,QAAQtxC,GAAGlP,KAAK0/C,OAAOW,QAAQ,IAAI9mC,EAAEtV,EAAE,OAAOiL,GAAG1O,IAAI+Y,EAAE8lC,GAAGnwC,EAAHmwC,CAAMp7C,IAAIjE,KAAKw/C,OAAO,aAAav7C,GAAGjE,KAAKggD,KAAK2B,OAAO,CAAC1D,MAAMh6C,EAAEjF,KAAK,MAAM6T,KAAK,MAAM2/B,EAAE,CAACA,GAAG,KAAKvV,OAAO,CAAC1jB,OAAOsD,MAAM5Y,GAAGA,EAAE29C,YAAY/I,GAAGrkC,OAAOvQ,EAAE6wC,SAAS,IAAI7wC,EAAE49C,aAAahlC,MAAM21B,IAAI,GAAGtjC,EAAE,IAAIkE,EAAEnP,EAAEiL,EAAEsjC,EAAE,CAAC,MAAMvuC,GAAG,CAAC,OAAOuuC,CAAE,GAAE,CAAC,MAAAsP,CAAO79C,EAAEiL,GAAG,GAAG,iBAAiBjL,GAAGzD,EAAEyD,GAAG,OAAOjE,KAAK+/C,MAAM,OAAOv6C,OAAOvB,GAAG89C,OAAO7yC,GAAG,CAAC,MAAM1O,EAAE9B,EAAEuF,EAAEjE,KAAK0/C,OAAOW,QAAQG,SAAS,QAAG,IAAShgD,EAAE,OAAOk8C,GAAG,IAAIpH,GAAE0M,gBAAgB,kDAAkD,IAAI,mBAAmB9yC,EAAEsjC,EAAEtjC,GAAG4D,SAAS0/B,IAAIp/B,EAAEnP,EAAEuuC,EAAEtjC,EAAEsjC,GAAI,IAAGtjC,EAAEjL,EAAE,CAAC3G,MAAM2G,EAAEo8C,QAAQ7/C,GAAG,CAAC,MAAMyD,GAAG,CAAC,OAAOjE,KAAK+/C,MAAM,OAAOv6C,OAAOhF,GAAGuhD,OAAO7yC,EAAE,CAAC,CAAC,GAAA+yC,CAAIh+C,EAAEuuC,GAAG,MAAMkP,KAAKlhD,EAAEggD,QAAQtxC,GAAGlP,KAAK0/C,OAAOW,QAAQ,IAAI9mC,EAAEtV,EAAE,OAAOiL,GAAG1O,IAAI+Y,EAAE8lC,GAAGnwC,EAAHmwC,CAAMp7C,IAAIjE,KAAKw/C,OAAO,aAAav7C,GAAGjE,KAAKggD,KAAK2B,OAAO,CAAC1D,MAAMh6C,EAAEjF,KAAK,MAAMi+B,OAAO,CAAC1jB,GAAG1G,KAAK,MAAM2/B,EAAE,CAACA,GAAG,SAAS31B,MAAM5Y,GAAGA,EAAE29C,YAAY/I,GAAGrkC,OAAOvQ,EAAE6wC,SAAS,IAAI7wC,EAAE49C,aAAahlC,MAAM21B,IAAI,GAAGtjC,EAAE,IAAIkE,EAAEnP,EAAEiL,EAAEsjC,EAAE,CAAC,MAAMvuC,GAAG,CAAC,OAAOuuC,CAAE,GAAE,CAAC,OAAOvuC,GAAG,OAAOjE,KAAKw/C,OAAO,aAAahN,GAAGxyC,KAAKggD,KAAK2B,OAAO,CAAC1D,MAAMzL,EAAExzC,KAAK,SAAS6T,KAAK,CAAC5O,OAAO4Y,MAAM5Y,GAAGA,EAAE29C,YAAY/I,GAAGrkC,OAAOvQ,EAAE6wC,SAAS,SAAI,GAAQ,CAAC,KAAA1xB,GAAQ,OAAOpjB,KAAKw/C,OAAO,aAAav7C,GAAGjE,KAAKggD,KAAK2B,OAAO,CAAC1D,MAAMh6C,EAAEjF,KAAK,cAAcyN,MAAMuyC,OAAOniC,MAAM5Y,GAAGA,EAAE29C,YAAY/I,GAAGrkC,OAAOvQ,EAAE6wC,SAAS,SAAI,GAAQ,CAAC,OAAAoN,CAAQj+C,GAAG,OAAOjE,KAAKw/C,OAAO,YAAYhN,GAAGxyC,KAAKggD,KAAKmC,QAAQ,CAACtvC,KAAK5O,EAAEg6C,MAAMzL,IAAI31B,MAAM5Y,GAAGA,EAAEwO,KAAKxO,GAAGjE,KAAKigD,KAAK/+B,QAAQg/B,KAAKj8C,QAAQ,CAAC,OAAAm+C,CAAQn+C,EAAEuuC,EAAEhyC,GAAG,MAAM0O,EAAExT,MAAMuD,QAAQuzC,GAAGA,OAAE,EAAOj5B,GAAG/Y,EAAEA,IAAI0O,OAAE,EAAOsjC,IAAIhyC,EAAE6hD,aAAQ,EAAO,OAAOriD,KAAKw/C,OAAO,aAAahN,IAAI,MAAMkP,KAAKlhD,EAAEggD,QAAQlmD,GAAG0F,KAAK0/C,OAAOW,QAAQ,GAAG/lD,GAAG4U,EAAE,MAAM,IAAIomC,GAAE0M,gBAAgB,gEAAgE,GAAG9yC,GAAGA,EAAElU,SAASiJ,EAAEjJ,OAAO,MAAM,IAAIs6C,GAAE0M,gBAAgB,wDAAwD,MAAM7W,EAAElnC,EAAEjJ,OAAO,IAAI6J,EAAEvK,GAAGkG,EAAEyD,EAAEwO,IAAI4sC,GAAG/kD,IAAI2J,EAAE,OAAOjE,KAAKggD,KAAK2B,OAAO,CAAC1D,MAAMzL,EAAExzC,KAAK,MAAM6T,KAAK3D,EAAE+tB,OAAOp4B,EAAEy9C,YAAY/oC,IAAIsD,MAAK,EAAG+kC,YAAY39C,EAAEs+C,QAAQ/P,EAAEqP,WAAWrhD,EAAEs0C,SAAS5lC,MAAM,GAAG,IAAIjL,EAAE,OAAOsV,EAAEi5B,EAAEhyC,EAAE,MAAM,IAAIy0C,EAAE,GAAGj1C,KAAKqM,mBAAmBpI,QAAQknC,sBAAsBj8B,EAAG,GAAG,GAAE,CAAC,OAAAszC,CAAQv+C,EAAEuuC,EAAEhyC,GAAG,MAAM0O,EAAExT,MAAMuD,QAAQuzC,GAAGA,OAAE,EAAOj5B,GAAG/Y,EAAEA,IAAI0O,OAAE,EAAOsjC,IAAIhyC,EAAE6hD,aAAQ,EAAO,OAAOriD,KAAKw/C,OAAO,aAAahN,IAAI,MAAMkP,KAAKlhD,EAAEggD,QAAQlmD,GAAG0F,KAAK0/C,OAAOW,QAAQ,GAAG/lD,GAAG4U,EAAE,MAAM,IAAIomC,GAAE0M,gBAAgB,gEAAgE,GAAG9yC,GAAGA,EAAElU,SAASiJ,EAAEjJ,OAAO,MAAM,IAAIs6C,GAAE0M,gBAAgB,wDAAwD,MAAM7W,EAAElnC,EAAEjJ,OAAO,IAAI6J,EAAEvK,GAAGkG,EAAEyD,EAAEwO,IAAI4sC,GAAG/kD,IAAI2J,EAAE,OAAOjE,KAAKggD,KAAK2B,OAAO,CAAC1D,MAAMzL,EAAExzC,KAAK,MAAM6T,KAAK3D,EAAE+tB,OAAOp4B,EAAEy9C,YAAY/oC,IAAIsD,MAAK,EAAG+kC,YAAY39C,EAAEs+C,QAAQ/P,EAAEqP,WAAWrhD,EAAEs0C,SAAS5lC,MAAM,GAAG,IAAIjL,EAAE,OAAOsV,EAAEi5B,EAAEhyC,EAAE,MAAM,IAAIy0C,EAAE,GAAGj1C,KAAKqM,mBAAmBpI,QAAQknC,sBAAsBj8B,EAAG,GAAG,GAAE,CAAC,UAAAuzC,CAAWx+C,GAAG,MAAMuuC,EAAEvuC,EAAEjJ,OAAO,OAAOgF,KAAKw/C,OAAO,aAAahN,GAAGxyC,KAAKggD,KAAK2B,OAAO,CAAC1D,MAAMzL,EAAExzC,KAAK,SAAS6T,KAAK5O,MAAM4Y,MAAK,EAAG+kC,YAAY39C,EAAE49C,WAAWrhD,EAAEs0C,SAAS5lC,MAAM,GAAG,IAAIjL,EAAE,OAAOzD,EAAE,MAAM,IAAIy0C,EAAE,GAAGj1C,KAAKqM,sBAAsBpI,QAAQuuC,sBAAsBtjC,EAAG,GAAE,EAAE,SAASwzC,GAAGz+C,GAAG,IAAIiL,EAAE,CAAC,EAAEqK,EAAE,SAASi5B,EAAEhyC,GAAG,GAAGA,EAAE,CAAC,IAAI,IAAI+Y,EAAE7Z,UAAU1E,OAAOV,EAAE,IAAIoB,MAAM6d,EAAE,KAAKA,GAAGjf,EAAEif,EAAE,GAAG7Z,UAAU6Z,GAAG,OAAOrK,EAAEsjC,GAAGrhB,UAAUxtB,MAAM,KAAKrJ,GAAG2J,CAAC,CAAC,GAAG,iBAAiBuuC,EAAE,OAAOtjC,EAAEsjC,EAAE,EAAEj5B,EAAEopC,aAAa99C,EAAE,IAAI,IAAIvK,EAAE,EAAE6wC,EAAEzrC,UAAU1E,OAAOV,EAAE6wC,IAAI7wC,EAAEuK,EAAEnF,UAAUpF,IAAI,OAAOif,EAAE,SAAS1U,EAAEZ,EAAEuuC,EAAEhyC,GAAG,GAAG,iBAAiByD,EAAE,OAAOyuC,EAAEzuC,GAAGuuC,IAAIA,EAAE8D,IAAI91C,IAAIA,EAAEs1C,IAAI,IAAIx7C,EAAE,CAACsoD,YAAY,GAAG1C,KAAK1/C,EAAE2wB,UAAU,SAASltB,IAAI,IAAI3J,EAAEsoD,YAAY/mD,QAAQoI,KAAK3J,EAAEsoD,YAAYvnD,KAAK4I,GAAG3J,EAAE4lD,KAAK1N,EAAEl4C,EAAE4lD,KAAKj8C,GAAG,EAAEiuB,YAAY,SAASjuB,GAAG3J,EAAEsoD,YAAYtoD,EAAEsoD,YAAY51B,QAAO,SAAUwlB,GAAG,OAAOA,IAAIvuC,CAAE,IAAG3J,EAAE4lD,KAAK5lD,EAAEsoD,YAAY9yB,OAAO0iB,EAAEhyC,EAAE,GAAG,OAAO0O,EAAEjL,GAAGsV,EAAEtV,GAAG3J,EAAEA,CAAC,CAAC,SAASo4C,EAAEzuC,GAAGuuC,EAAEvuC,GAAG6O,SAAQ,SAAU0/B,GAAG,IAAItjC,EAAEjL,EAAEuuC,GAAG,GAAGhyC,EAAE0O,GAAGrK,EAAE2tC,EAAEvuC,EAAEuuC,GAAG,GAAGvuC,EAAEuuC,GAAG,QAAQ,CAAC,GAAG,SAAStjC,EAAE,MAAM,IAAIomC,GAAE0M,gBAAgB,wBAAwB,IAAIzoC,EAAE1U,EAAE2tC,EAAEuD,IAAG,WAAY,IAAI,IAAI9xC,EAAEvE,UAAU1E,OAAOw3C,EAAE,IAAI92C,MAAMuI,GAAGA,KAAKuuC,EAAEvuC,GAAGvE,UAAUuE,GAAGsV,EAAEqpC,YAAY9vC,SAAQ,SAAU7O,GAAG2M,GAAE,WAAY3M,EAAEN,MAAM,KAAK6uC,EAAG,GAAG,GAAG,GAAE,CAAE,GAAE,CAAC,CAAC,SAASqQ,GAAG5+C,EAAEuuC,GAAG,OAAO9vC,EAAE8vC,GAAGn1C,KAAK,CAACL,UAAUiH,IAAIuuC,CAAC,CAAC,SAASsQ,GAAG7+C,EAAEuuC,GAAG,QAAQvuC,EAAE+oB,QAAQ/oB,EAAE8+C,WAAW9+C,EAAE++C,MAAMxQ,EAAEvuC,EAAEg/C,WAAWh/C,EAAEi/C,aAAa,CAAC,SAASC,GAAGl/C,EAAEuuC,GAAGvuC,EAAE+oB,OAAO+xB,GAAG96C,EAAE+oB,OAAOwlB,EAAE,CAAC,SAAS4Q,GAAGn/C,EAAEuuC,EAAEhyC,GAAG,IAAI0O,EAAEjL,EAAEi/C,aAAaj/C,EAAEi/C,aAAah0C,EAAE,IAAI6vC,GAAG7vC,IAAIsjC,KAAKA,EAAEvuC,EAAEg/C,UAAUziD,IAAI0O,CAAC,CAAC,SAASm0C,GAAGp/C,EAAEuuC,GAAG,GAAGvuC,EAAEq/C,UAAU,OAAO9Q,EAAE+Q,WAAW,MAAM/iD,EAAEgyC,EAAEgR,kBAAkBv/C,EAAEwK,OAAO,IAAIjO,EAAE,MAAM,IAAI80C,GAAEmO,OAAO,WAAWx/C,EAAEwK,MAAM,oBAAoB+jC,EAAEnmC,KAAK,mBAAmB,OAAO7L,CAAC,CAAC,SAASkjD,GAAGz/C,EAAEuuC,EAAEhyC,GAAG,MAAM0O,EAAEm0C,GAAGp/C,EAAEuuC,EAAEkN,QAAQ,OAAOlN,EAAEmR,WAAW,CAAC1F,MAAMz9C,EAAEy8B,QAAQh5B,EAAE2/C,SAASnS,QAAQ,SAASxtC,EAAErD,IAAIijD,SAAS5/C,EAAE4/C,OAAOC,MAAM,CAACr1C,MAAMS,EAAEzC,MAAMxI,EAAEwI,QAAQ,CAAC,SAASs3C,GAAG9/C,EAAEuuC,EAAEhyC,EAAE0O,GAAG,MAAMqK,EAAEtV,EAAEi/C,aAAanE,GAAG96C,EAAE+oB,OAAO/oB,EAAEi/C,gBAAgBj/C,EAAE+oB,OAAO,GAAG/oB,EAAE++C,GAAG,CAAC,MAAM1oD,EAAE,CAAC,EAAEuK,EAAE,CAACZ,EAAEzD,EAAE0O,KAAK,IAAIqK,GAAGA,EAAE/Y,EAAE0O,GAAGjL,GAAGzD,EAAEwjD,KAAK//C,KAAKA,GAAGzD,EAAEyjD,KAAKhgD,KAAK,CAAC,IAAIY,EAAErE,EAAE+iD,WAAW7Q,EAAE,GAAG7tC,EAAE,yBAAyB6tC,IAAIA,EAAE,GAAG,IAAIj3C,WAAWoJ,IAAIsmC,EAAE7wC,EAAEo4C,KAAKp4C,EAAEo4C,IAAG,EAAGF,EAAEvuC,EAAEzD,EAAE0O,GAAG,GAAG,OAAOoF,QAAQu7B,IAAI,CAAC5rC,EAAE++C,GAAGkB,SAASr/C,EAAErE,GAAG2jD,GAAGT,GAAGz/C,EAAEiL,EAAE1O,GAAGyD,EAAE8+C,UAAUl+C,GAAGZ,EAAE2/C,UAAU3/C,EAAEmgD,cAAc,CAAC,OAAOD,GAAGT,GAAGz/C,EAAEiL,EAAE1O,GAAGu+C,GAAG96C,EAAE8+C,UAAUxpC,GAAGi5B,GAAGvuC,EAAE2/C,UAAU3/C,EAAEmgD,YAAY,CAAC,SAASD,GAAGlgD,EAAEuuC,EAAEhyC,EAAE0O,GAAG,IAAIqK,EAAEmhC,GAAGxrC,EAAE,CAACjL,EAAEuuC,EAAEj5B,IAAI/Y,EAAE0O,EAAEjL,GAAGuuC,EAAEj5B,GAAG/Y,GAAG,OAAOyD,EAAE4Y,MAAM5Y,IAAI,GAAGA,EAAE,OAAOA,EAAEnI,OAAM,KAAM,IAAI0E,EAAE,IAAIyD,EAAEogD,WAAW7R,IAAIA,EAAEvuC,GAAGA,GAAGzD,EAAEyD,IAAIuuC,IAAIvuC,EAAE+/C,KAAKxR,GAAGhyC,EAAEs1C,EAAG,IAAGtD,IAAIvuC,EAAEggD,KAAKzR,GAAGhyC,EAAEs1C,EAAG,KAAIv8B,EAAEtV,EAAE3G,MAAM2G,GAAGA,GAAGzD,EAAEyD,IAAIzD,GAAI,GAAG,GAAE,CAAC,SAAS8jD,GAAGrgD,EAAEuuC,GAAG,IAAI,MAAMhyC,EAAE+jD,GAAGtgD,GAAGiL,EAAEq1C,GAAG/R,GAAG,GAAGhyC,IAAI0O,EAAE,MAAM,UAAU1O,EAAE,EAAE,UAAU0O,GAAG,EAAE,WAAW1O,EAAE,EAAE,WAAW0O,GAAG,EAAE,WAAW1O,EAAE,EAAE,WAAW0O,GAAG,EAAE,SAAS1O,EAAE,EAAE,SAAS0O,EAAEsK,KAAK,EAAE,OAAOhZ,GAAG,IAAI,SAAS,IAAI,OAAO,IAAI,SAAS,OAAOyD,EAAEuuC,EAAE,EAAEvuC,EAAEuuC,GAAG,EAAE,EAAE,IAAI,SAAS,OAAO,SAASvuC,EAAEuuC,GAAG,MAAMhyC,EAAEyD,EAAEjJ,OAAOkU,EAAEsjC,EAAEx3C,OAAOue,EAAE/Y,EAAE0O,EAAE1O,EAAE0O,EAAE,IAAI,IAAI1O,EAAE,EAAEA,EAAE+Y,IAAI/Y,EAAE,GAAGyD,EAAEzD,KAAKgyC,EAAEhyC,GAAG,OAAOyD,EAAEzD,GAAGgyC,EAAEhyC,IAAI,EAAE,EAAE,OAAOA,IAAI0O,EAAE,EAAE1O,EAAE0O,GAAG,EAAE,CAAC,CAApI,CAAsIs1C,GAAGvgD,GAAGugD,GAAGhS,IAAI,IAAI,QAAQ,OAAO,SAASvuC,EAAEuuC,GAAG,MAAMhyC,EAAEyD,EAAEjJ,OAAOkU,EAAEsjC,EAAEx3C,OAAOue,EAAE/Y,EAAE0O,EAAE1O,EAAE0O,EAAE,IAAI,IAAI1O,EAAE,EAAEA,EAAE+Y,IAAI/Y,EAAE,CAAC,MAAM0O,EAAEo1C,GAAGrgD,EAAEzD,GAAGgyC,EAAEhyC,IAAI,GAAG,IAAI0O,EAAE,OAAOA,CAAC,CAAC,OAAO1O,IAAI0O,EAAE,EAAE1O,EAAE0O,GAAG,EAAE,CAAC,CAAxI,CAA0IjL,EAAEuuC,GAAG,CAAC,MAAMvuC,GAAG,CAAC,OAAOuV,GAAG,CAAC,SAAS+qC,GAAGtgD,GAAG,MAAMuuC,SAASvuC,EAAE,GAAG,WAAWuuC,EAAE,OAAOA,EAAE,GAAG10C,YAAYC,OAAOkG,GAAG,MAAM,SAAS,MAAMzD,EAAE6yC,EAAEpvC,GAAG,MAAM,gBAAgBzD,EAAE,SAASA,CAAC,CAAC,SAASgkD,GAAGvgD,GAAG,OAAOA,aAAaxI,WAAWwI,EAAEnG,YAAYC,OAAOkG,GAAG,IAAIxI,WAAWwI,EAAE7F,OAAO6F,EAAE5F,WAAW4F,EAAEnK,YAAY,IAAI2B,WAAWwI,EAAE,CAAC,MAAMwgD,GAAG,KAAA1iC,CAAM9d,EAAEuuC,GAAG,IAAIhyC,EAAER,KAAK0kD,KAAK,OAAOlkD,EAAE4D,MAAM5D,EAAEoN,MAAM4xC,OAAO,KAAK9C,GAAGlmC,KAAK,KAAKhW,EAAE4D,QAAQ5D,EAAEoN,MAAM4xC,OAAO,WAAWv7C,GAAG4Y,KAAK21B,EAAE,CAAC,MAAAnrB,CAAOpjB,GAAG,IAAIuuC,EAAExyC,KAAK0kD,KAAK,OAAOlS,EAAEpuC,MAAMouC,EAAE5kC,MAAM4xC,OAAO,KAAK9C,GAAGlmC,KAAK,KAAKg8B,EAAEpuC,QAAQouC,EAAE5kC,MAAM4xC,OAAO,YAAYv7C,EAAE,SAAS,CAAC,aAAA0gD,CAAc1gD,GAAG,IAAIuuC,EAAExyC,KAAK0kD,KAAKlS,EAAEuQ,UAAUhE,GAAGvM,EAAEuQ,UAAU9+C,EAAE,CAAC,QAAAigD,CAASjgD,EAAEuuC,GAAG,OAAOuR,GAAG/jD,KAAK0kD,KAAKzgD,EAAEuuC,EAAExyC,KAAK0kD,KAAK92C,MAAMoyC,KAAK,CAAC,KAAA4E,CAAM3gD,GAAG,IAAIuuC,EAAE11C,OAAOwW,OAAOtT,KAAKiM,YAAYjP,WAAWwD,EAAE1D,OAAOwW,OAAOtT,KAAK0kD,MAAM,OAAOzgD,GAAGiL,EAAE1O,EAAEyD,GAAGuuC,EAAEkS,KAAKlkD,EAAEgyC,CAAC,CAAC,GAAAqS,GAAM,OAAO7kD,KAAK0kD,KAAKN,YAAY,KAAKpkD,IAAI,CAAC,IAAAihD,CAAKh9C,GAAG,IAAIuuC,EAAExyC,KAAK0kD,KAAK,OAAO1kD,KAAK+hB,OAAOvhB,GAAGujD,GAAGvR,EAAEvuC,EAAEzD,EAAEgyC,EAAE5kC,MAAMoyC,OAAO,CAAC,KAAA/pC,CAAMhS,GAAG,OAAOjE,KAAK+hB,OAAO9d,IAAI,MAAMuuC,EAAExyC,KAAK0kD,KAAKlkD,EAAEgyC,EAAE5kC,MAAMoyC,KAAK,GAAG8C,GAAGtQ,GAAE,GAAI,OAAOhyC,EAAEyV,MAAM,CAACgoC,MAAMh6C,EAAE6/C,MAAM,CAACr1C,MAAM40C,GAAG7Q,EAAEhyC,EAAEk/C,QAAQjzC,MAAM+lC,EAAE/lC,SAASoQ,MAAM5Y,GAAGnB,KAAKC,IAAIkB,EAAEuuC,EAAE5nC,SAAS,IAAIsE,EAAE,EAAE,OAAO60C,GAAGvR,GAAE,OAAQtjC,GAAE,IAAKjL,EAAEzD,GAAGqc,MAAK,IAAK3N,GAAI,IAAG2N,KAAK5Y,EAAE,CAAC,MAAA6gD,CAAO7gD,EAAEuuC,GAAG,MAAMhyC,EAAEyD,EAAEsJ,MAAM,KAAKkkC,UAAUviC,EAAE1O,EAAE,GAAG+Y,EAAE/Y,EAAExF,OAAO,EAAE,SAASV,EAAE2J,EAAEuuC,GAAG,OAAOA,EAAEl4C,EAAE2J,EAAEzD,EAAEgyC,IAAIA,EAAE,GAAGvuC,EAAEiL,EAAE,CAAC,IAAIi8B,EAAE,SAASnrC,KAAK0kD,KAAK9jD,IAAI,GAAG,EAAE,SAASiE,EAAEZ,EAAEuuC,GAAG,IAAIhyC,EAAElG,EAAE2J,EAAEsV,GAAGrK,EAAE5U,EAAEk4C,EAAEj5B,GAAG,OAAO/Y,EAAE0O,GAAGi8B,EAAE3qC,EAAE0O,EAAEi8B,EAAE,CAAC,CAAC,OAAOnrC,KAAKkhD,SAAQ,SAAUj9C,GAAG,OAAOA,EAAE8gD,KAAKlgD,EAAG,IAAGgY,KAAK21B,EAAE,CAAC,OAAA0O,CAAQj9C,GAAG,OAAOjE,KAAK+hB,OAAO9d,IAAI,IAAIuuC,EAAExyC,KAAK0kD,KAAK,GAAG,SAASlS,EAAE5xC,KAAKkiD,GAAGtQ,GAAE,IAAKA,EAAE5nC,MAAM,EAAE,CAAC,MAAMw5C,YAAY5jD,GAAGgyC,EAAEtjC,EAAEm0C,GAAG7Q,EAAEA,EAAE5kC,MAAMoyC,KAAKN,QAAQ,OAAOlN,EAAE5kC,MAAMoyC,KAAK8D,MAAM,CAAC7F,MAAMh6C,EAAE2G,MAAM4nC,EAAE5nC,MAAMqyB,QAAO,EAAG6mB,MAAM,CAACr1C,MAAMS,EAAEzC,MAAM+lC,EAAE/lC,SAASoQ,MAAK,EAAGqa,OAAOjzB,KAAKzD,EAAEyD,EAAEwO,IAAIjS,GAAGyD,GAAG,CAAC,CAAC,MAAMzD,EAAE,GAAG,OAAOujD,GAAGvR,GAAGvuC,GAAGzD,EAAEnF,KAAK4I,IAAIA,EAAEuuC,EAAE5kC,MAAMoyC,MAAMnjC,MAAK,IAAKrc,GAAG,CAAE,GAAEyD,EAAE,CAAC,MAAAvC,CAAOuC,GAAG,IAAIuuC,EAAExyC,KAAK0kD,KAAK,OAAOzgD,GAAG,IAAIuuC,EAAE9wC,QAAQuC,EAAE6+C,GAAGtQ,GAAG4Q,GAAG5Q,GAAE,KAAM,IAAIA,EAAEvuC,EAAE,MAAM,CAACA,EAAEzD,IAAI,IAAIgyC,IAAI,IAAIA,KAAKA,GAAE,IAAKhyC,GAAE,KAAMyD,EAAE+gD,QAAQxS,GAAGA,EAAE,CAAE,KAAG,GAAK,IAAG4Q,GAAG5Q,GAAE,KAAM,IAAIA,EAAEvuC,EAAE,MAAM,MAAMuuC,EAAE,CAAE,KAAIxyC,IAAI,CAAC,KAAA4K,CAAM3G,GAAG,OAAOjE,KAAK0kD,KAAK95C,MAAM9H,KAAKC,IAAI/C,KAAK0kD,KAAK95C,MAAM3G,GAAGm/C,GAAGpjD,KAAK0kD,MAAK,KAAM,IAAIlS,EAAEvuC,EAAE,OAAO,SAASA,EAAEzD,EAAE0O,GAAG,QAAQsjC,GAAG,GAAGhyC,EAAE0O,GAAGsjC,GAAG,CAAC,CAAE,IAAE,GAAIxyC,IAAI,CAAC,KAAAilD,CAAMhhD,EAAEuuC,GAAG,OAAO2Q,GAAGnjD,KAAK0kD,MAAK,SAAUlkD,EAAE0O,EAAEqK,GAAG,OAAOtV,EAAEzD,EAAElD,SAAS4R,EAAEqK,GAAGi5B,EAAG,IAAGxyC,IAAI,CAAC,KAAAyI,CAAMxE,GAAG,OAAOjE,KAAK4K,MAAM,GAAGs2C,SAAQ,SAAUj9C,GAAG,OAAOA,EAAE,EAAG,IAAG4Y,KAAK5Y,EAAE,CAAC,IAAAyE,CAAKzE,GAAG,OAAOjE,KAAKyxC,UAAUhpC,MAAMxE,EAAE,CAAC,MAAA+oB,CAAO/oB,GAAG,IAAIuuC,EAAEhyC,EAAE,OAAO2iD,GAAGnjD,KAAK0kD,MAAK,SAAUlS,GAAG,OAAOvuC,EAAEuuC,EAAEl1C,MAAO,IAAGk1C,EAAExyC,KAAK0kD,KAAKlkD,EAAEyD,EAAEuuC,EAAE0S,QAAQnG,GAAGvM,EAAE0S,QAAQ1kD,GAAGR,IAAI,CAAC,GAAAghD,CAAI/8C,GAAG,OAAOjE,KAAKgtB,OAAO/oB,EAAE,CAAC,EAAA++C,CAAG/+C,GAAG,OAAO,IAAIjE,KAAK6/C,GAAGM,YAAYngD,KAAK0kD,KAAK92C,MAAM3J,EAAEjE,KAAK,CAAC,OAAAyxC,GAAU,OAAOzxC,KAAK0kD,KAAK9jD,IAAI,SAASZ,KAAK0kD,KAAK9jD,IAAI,OAAO,OAAOZ,KAAKmlD,oBAAoBnlD,KAAKmlD,mBAAmBnlD,KAAK0kD,KAAK9jD,KAAKZ,IAAI,CAAC,IAAAolD,GAAO,OAAOplD,KAAKyxC,SAAS,CAAC,OAAA4T,CAAQphD,GAAG,IAAIuuC,EAAExyC,KAAK0kD,KAAK,OAAOlS,EAAEoR,UAAUpR,EAAE0S,QAAQllD,KAAKihD,MAAK,SAAUzO,EAAEhyC,GAAGyD,EAAEzD,EAAEuS,IAAIvS,EAAG,GAAE,CAAC,aAAA8kD,CAAcrhD,GAAG,OAAOjE,KAAK0kD,KAAKb,OAAO,SAAS7jD,KAAKqlD,QAAQphD,EAAE,CAAC,cAAAshD,CAAethD,GAAG,IAAIuuC,EAAExyC,KAAK0kD,KAAK,OAAOlS,EAAEoR,UAAUpR,EAAE0S,QAAQllD,KAAKihD,MAAK,SAAUzO,EAAEhyC,GAAGyD,EAAEzD,EAAE+iD,WAAW/iD,EAAG,GAAE,CAAC,IAAAqS,CAAK5O,GAAG,IAAIuuC,EAAExyC,KAAK0kD,KAAKlS,EAAEoR,UAAUpR,EAAE0S,QAAQ,IAAI1kD,EAAE,GAAG,OAAOR,KAAKihD,MAAK,SAAUh9C,EAAEuuC,GAAGhyC,EAAEnF,KAAKm3C,EAAEz/B,IAAK,IAAG8J,MAAK,WAAY,OAAOrc,CAAE,IAAGqc,KAAK5Y,EAAE,CAAC,WAAAuhD,CAAYvhD,GAAG,IAAIuuC,EAAExyC,KAAK0kD,KAAK,GAAG,SAASlS,EAAE5xC,KAAKkiD,GAAGtQ,GAAE,IAAKA,EAAE5nC,MAAM,EAAE,OAAO5K,KAAK+hB,OAAO9d,IAAI,IAAIzD,EAAE6iD,GAAG7Q,EAAEA,EAAE5kC,MAAMoyC,KAAKN,QAAQ,OAAOlN,EAAE5kC,MAAMoyC,KAAK8D,MAAM,CAAC7F,MAAMh6C,EAAEg5B,QAAO,EAAGryB,MAAM4nC,EAAE5nC,MAAMk5C,MAAM,CAACr1C,MAAMjO,EAAEiM,MAAM+lC,EAAE/lC,QAAS,IAAGoQ,MAAK,EAAGqa,OAAOjzB,KAAKA,IAAI4Y,KAAK5Y,GAAGuuC,EAAEoR,UAAUpR,EAAE0S,QAAQ,IAAI1kD,EAAE,GAAG,OAAOR,KAAKihD,MAAK,SAAUh9C,EAAEuuC,GAAGhyC,EAAEnF,KAAKm3C,EAAE+Q,WAAY,IAAG1mC,MAAK,WAAY,OAAOrc,CAAE,IAAGqc,KAAK5Y,EAAE,CAAC,UAAAwhD,CAAWxhD,GAAG,OAAOjE,KAAK0kD,KAAKb,OAAO,SAAS7jD,KAAK6S,KAAK5O,EAAE,CAAC,QAAAyhD,CAASzhD,GAAG,OAAOjE,KAAK4K,MAAM,GAAGiI,MAAK,SAAU5O,GAAG,OAAOA,EAAE,EAAG,IAAG4Y,KAAK5Y,EAAE,CAAC,OAAA0hD,CAAQ1hD,GAAG,OAAOjE,KAAKyxC,UAAUiU,SAASzhD,EAAE,CAAC,QAAA2hD,GAAW,IAAI3hD,EAAEjE,KAAK0kD,KAAKlS,EAAEvuC,EAAEwK,OAAOxK,EAAE2J,MAAM8xC,OAAOgB,UAAUz8C,EAAEwK,OAAO,IAAI+jC,IAAIA,EAAEsO,MAAM,OAAO9gD,KAAK,IAAIQ,EAAE,CAAC,EAAE,OAAO2iD,GAAGnjD,KAAK0kD,MAAK,SAAUzgD,GAAG,IAAIuuC,EAAEvuC,EAAEs/C,WAAW/jD,WAAW0P,EAAEi8B,EAAE3qC,EAAEgyC,GAAG,OAAOhyC,EAAEgyC,IAAG,GAAItjC,CAAE,IAAGlP,IAAI,CAAC,MAAA+hD,CAAO99C,GAAG,IAAIzD,EAAER,KAAK0kD,KAAK,OAAO1kD,KAAKqnB,QAAQnY,IAAI,IAAIqK,EAAE,GAAG,mBAAmBtV,EAAEsV,EAAEtV,MAAM,CAAC,IAAI3J,EAAEk4C,EAAEvuC,GAAGknC,EAAE7wC,EAAEU,OAAOue,EAAE,SAASi5B,GAAG,IAAI,IAAIhyC,GAAE,EAAG0O,EAAE,EAAEA,EAAEi8B,IAAIj8B,EAAE,CAAC,IAAIqK,EAAEjf,EAAE4U,GAAGrK,EAAEZ,EAAEsV,GAAG7a,EAAE8zC,EAAEj5B,KAAK1U,IAAIuO,EAAEo/B,EAAEj5B,EAAE1U,GAAGrE,GAAE,EAAG,CAAC,OAAOA,CAAC,CAAC,CAAC,MAAMqE,EAAErE,EAAEoN,MAAMoyC,MAAM6F,SAASnT,EAAEoT,WAAWzhC,GAAGxf,EAAE66C,OAAO6D,WAAW7gD,EAAE1C,KAAK6/C,GAAGxB,SAAS0H,iBAAiB,IAAIhsC,EAAE,GAAG,IAAIT,EAAE,EAAE,MAAMq5B,EAAE,GAAG3vB,EAAE,CAAC/e,EAAEzD,KAAK,MAAMs0C,SAAS5lC,EAAE0yC,YAAYroC,GAAG/Y,EAAE8Y,GAAGrV,EAAEsV,EAAE,IAAI,IAAItV,KAAKuuC,EAAEtjC,GAAG6K,EAAE1e,KAAK6T,EAAEjL,GAAE,EAAG,OAAOjE,KAAK4kD,QAAQY,cAAc3oC,MAAM21B,IAAI,MAAMl4C,EAAE6wC,IAAI,MAAMpxB,EAAEjX,KAAKC,IAAIL,EAAE8vC,EAAEx3C,OAAOmwC,GAAG,OAAOtmC,EAAEs9C,QAAQ,CAAClE,MAAM/uC,EAAE2D,KAAK2/B,EAAE50C,MAAMutC,EAAEA,EAAEpxB,GAAGisC,MAAM,cAAcnpC,MAAMvD,IAAI,MAAMq5B,EAAE,GAAG5tC,EAAE,GAAGtE,EAAEiyC,EAAE,GAAG,KAAK9hC,EAAE,GAAG,IAAI,IAAI3M,EAAE,EAAEA,EAAE8V,IAAI9V,EAAE,CAAC,MAAMzD,EAAE8Y,EAAErV,GAAGiL,EAAE,CAAC5R,MAAM21C,EAAEzyC,GAAG6/C,QAAQ7N,EAAErH,EAAElnC,KAAI,IAAKsV,EAAEzY,KAAKoO,EAAEA,EAAE5R,MAAM4R,KAAK,MAAMA,EAAE5R,MAAMsT,EAAEvV,KAAKm3C,EAAErH,EAAElnC,IAAIyuC,GAAG,IAAI4R,GAAGjgC,EAAE7jB,GAAG6jB,EAAEnV,EAAE5R,SAASyH,EAAE1J,KAAK6T,EAAE5R,OAAOo1C,GAAGjyC,EAAEpF,KAAKm3C,EAAErH,EAAElnC,MAAM2M,EAAEvV,KAAKm3C,EAAErH,EAAElnC,IAAI0uC,EAAEt3C,KAAK6T,EAAE5R,QAAQ,CAAC,MAAMqf,EAAEmmC,GAAGtiD,IAAIA,EAAEoK,QAAQ,MAAM,mBAAmB3G,GAAGA,IAAIgiD,KAAK,CAACx3C,MAAMjO,EAAEiO,MAAMhC,MAAMjM,EAAEiM,OAAO,OAAO6H,QAAQC,QAAQo+B,EAAE33C,OAAO,GAAG6J,EAAE88C,OAAO,CAAC1D,MAAM/uC,EAAElQ,KAAK,MAAMi+B,OAAO0V,IAAI91B,MAAM5Y,IAAI,IAAI,IAAIuuC,KAAKvuC,EAAE6wC,SAASlkC,EAAEpC,OAAOzM,SAASywC,GAAG,GAAGxvB,EAAE2vB,EAAE33C,OAAOiJ,EAAG,KAAI4Y,MAAK,KAAM9X,EAAE/J,OAAO,GAAG2hB,GAAG,iBAAiB1Y,IAAIY,EAAE88C,OAAO,CAAC1D,MAAM/uC,EAAElQ,KAAK,MAAM6T,KAAKpS,EAAEw8B,OAAOl4B,EAAEmhD,SAASvpC,EAAEwpC,WAAW,mBAAmBliD,GAAGA,IAAI4Y,MAAM5Y,GAAG+e,EAAEje,EAAE/J,OAAOiJ,OAAO4Y,MAAK,KAAMjM,EAAE5V,OAAO,GAAG2hB,GAAG1Y,IAAIgiD,KAAKphD,EAAE88C,OAAO,CAAC1D,MAAM/uC,EAAElQ,KAAK,SAAS6T,KAAKjC,EAAEs1C,SAASvpC,IAAIE,MAAM5Y,GAAG+e,EAAEpS,EAAE5V,OAAOiJ,OAAO4Y,MAAK,IAAK21B,EAAEx3C,OAAOmwC,EAAEpxB,GAAGzf,EAAE6wC,EAAEzoC,IAAK,GAAC,EAAG,OAAOpI,EAAE,GAAGuiB,MAAK,KAAM,GAAG9C,EAAE/e,OAAO,EAAE,MAAM,IAAI65C,EAAE,sCAAsC96B,EAAET,EAAEq5B,GAAG,OAAOH,EAAEx3C,MAAO,GAAG,GAAG,GAAE,CAAC,SAAS,IAAIiJ,EAAEjE,KAAK0kD,KAAKlS,EAAEvuC,EAAEwI,MAAM,OAAOq2C,GAAG7+C,KAAKA,EAAEq/C,YAAYzE,IAAI,IAAIrM,EAAExzC,MAAMgB,KAAKqnB,QAAQ7mB,IAAI,MAAM+iD,WAAWr0C,GAAGjL,EAAE2J,MAAMoyC,KAAKN,OAAOnmC,EAAEi5B,EAAE,OAAOvuC,EAAE2J,MAAMoyC,KAAK/pC,MAAM,CAACgoC,MAAMz9C,EAAEsjD,MAAM,CAACr1C,MAAMS,EAAEzC,MAAM8M,KAAKsD,MAAM21B,GAAGvuC,EAAE2J,MAAMoyC,KAAK2B,OAAO,CAAC1D,MAAMz9C,EAAExB,KAAK,cAAcyN,MAAM8M,IAAIsD,MAAK,EAAGi4B,SAAS7wC,EAAE49C,WAAWrhD,EAAE+hD,QAAQrzC,EAAE0yC,YAAYroC,MAAM,GAAGA,EAAE,MAAM,IAAIs7B,EAAE,+BAA+B/3C,OAAO+V,KAAK5O,GAAGwO,KAAK+/B,GAAGvuC,EAAEuuC,KAAKA,EAAEj5B,GAAG,OAAOi5B,EAAEj5B,CAAE,KAAK,IAAGvZ,KAAK+hD,OAAOkE,GAAG,EAAE,MAAMA,GAAG,CAAChiD,EAAEuuC,IAAIA,EAAEl1C,MAAM,KAAK,SAAS8oD,GAAGniD,EAAEuuC,GAAG,OAAOvuC,EAAEuuC,GAAG,EAAEvuC,IAAIuuC,EAAE,EAAE,CAAC,CAAC,SAAS6T,GAAGpiD,EAAEuuC,GAAG,OAAOvuC,EAAEuuC,GAAG,EAAEvuC,IAAIuuC,EAAE,EAAE,CAAC,CAAC,SAAS8T,GAAGriD,EAAEuuC,EAAEhyC,GAAG,IAAI0O,EAAEjL,aAAasiD,GAAG,IAAItiD,EAAEk9C,WAAWl9C,GAAGA,EAAE,OAAOiL,EAAEw1C,KAAKtgD,MAAM5D,EAAE,IAAIA,EAAEgyC,GAAG,IAAIr1C,UAAUq1C,GAAGtjC,CAAC,CAAC,SAASs3C,GAAGviD,GAAG,OAAO,IAAIA,EAAEk9C,WAAWl9C,GAAE,IAAKwiD,GAAG,MAAM77C,MAAM,EAAE,CAAC,SAAS87C,GAAGziD,EAAEuuC,EAAEhyC,EAAE0O,EAAEqK,EAAEjf,GAAG,IAAI,IAAI6wC,EAAEroC,KAAKC,IAAIkB,EAAEjJ,OAAOkU,EAAElU,QAAQ6J,GAAG,EAAE6tC,EAAE,EAAEA,EAAEvH,IAAIuH,EAAE,CAAC,IAAIruB,EAAEmuB,EAAEE,GAAG,GAAGruB,IAAInV,EAAEwjC,GAAG,OAAOn5B,EAAEtV,EAAEyuC,GAAGlyC,EAAEkyC,IAAI,EAAEzuC,EAAEjC,OAAO,EAAE0wC,GAAGlyC,EAAEkyC,GAAGlyC,EAAEwB,OAAO0wC,EAAE,GAAGn5B,EAAEtV,EAAEyuC,GAAGxjC,EAAEwjC,IAAI,EAAEzuC,EAAEjC,OAAO,EAAE0wC,GAAGxjC,EAAEwjC,GAAGlyC,EAAEwB,OAAO0wC,EAAE,GAAG7tC,GAAG,EAAEZ,EAAEjC,OAAO,EAAE6C,GAAG2tC,EAAE3tC,GAAGrE,EAAEwB,OAAO6C,EAAE,GAAG,KAAK0U,EAAEtV,EAAEyuC,GAAGruB,GAAG,IAAIxf,EAAE6tC,EAAE,CAAC,OAAOvH,EAAEj8B,EAAElU,QAAQ,SAASV,EAAE2J,EAAEzD,EAAEwB,OAAOiC,EAAEjJ,QAAQmwC,EAAElnC,EAAEjJ,QAAQ,SAASV,EAAE2J,EAAEjC,OAAO,EAAExB,EAAExF,QAAQ6J,EAAE,EAAE,KAAKZ,EAAEjC,OAAO,EAAE6C,GAAGqK,EAAErK,GAAGrE,EAAEwB,OAAO6C,EAAE,EAAE,CAAC,SAAS8hD,GAAG1iD,EAAEuuC,EAAEhyC,EAAE0O,GAAG,IAAIqK,EAAEjf,EAAE6wC,EAAEtmC,EAAE6tC,EAAEruB,EAAE3hB,EAAEqX,EAAEvZ,EAAExF,OAAO,IAAIwF,EAAE+/C,OAAOt8C,GAAG,iBAAiBA,IAAI,OAAOqiD,GAAGriD,EAAE,oBAAoB,SAASqV,EAAErV,GAAGsV,EAAE,SAAStV,GAAG,MAAM,SAASA,EAAEA,GAAGA,EAAE2iD,cAAc3iD,GAAGA,EAAEnE,aAAa,CAAlE,CAAoEmE,GAAG3J,EAAE,SAAS2J,GAAG,MAAM,SAASA,EAAEA,GAAGA,EAAEnE,cAAcmE,GAAGA,EAAE2iD,aAAa,CAAlE,CAAoE3iD,GAAGknC,EAAE,SAASlnC,EAAEmiD,GAAGC,GAAG,IAAI7T,EAAEhyC,EAAEiS,KAAI,SAAUxO,GAAG,MAAM,CAACg7C,MAAM3kD,EAAE2J,GAAGk7C,MAAM5lC,EAAEtV,GAAI,IAAG8gD,MAAK,SAAU9gD,EAAEuuC,GAAG,OAAOrH,EAAElnC,EAAEg7C,MAAMzM,EAAEyM,MAAO,IAAGp6C,EAAE2tC,EAAE//B,KAAI,SAAUxO,GAAG,OAAOA,EAAEk7C,KAAM,IAAGzM,EAAEF,EAAE//B,KAAI,SAAUxO,GAAG,OAAOA,EAAEg7C,KAAM,IAAG56B,EAAEpgB,EAAEvB,EAAE,SAASuB,EAAE,GAAGiL,CAAC,CAACoK,EAAE,QAAQ,IAAIq5B,EAAE,IAAI1uC,EAAEk9C,WAAWl9C,GAAE,IAAK4iD,GAAGhiD,EAAE,GAAG6tC,EAAE34B,EAAE,GAAG7K,KAAKyjC,EAAEwS,mBAAmB,SAASlhD,GAAGqV,EAAErV,EAAE,EAAE,IAAI+e,EAAE,EAAE,OAAO2vB,EAAEgS,eAAc,SAAU1gD,EAAEzD,EAAE0O,GAAG,IAAIqK,EAAEtV,EAAE8O,IAAI,GAAG,iBAAiBwG,EAAE,OAAM,EAAG,IAAID,EAAEhf,EAAEif,GAAG,GAAGi5B,EAAEl5B,EAAEo5B,EAAE1vB,GAAG,OAAM,EAAG,IAAI,IAAI2vB,EAAE,KAAK5tC,EAAEie,EAAEje,EAAEgV,IAAIhV,EAAE,CAAC,IAAItE,EAAEimD,GAAGntC,EAAED,EAAEzU,EAAEE,GAAG2tC,EAAE3tC,GAAGomC,EAAE9mB,GAAG,OAAO5jB,GAAG,OAAOkyC,EAAE3vB,EAAEje,EAAE,GAAG,OAAO4tC,GAAGxH,EAAEwH,EAAElyC,GAAG,KAAKkyC,EAAElyC,EAAE,CAAC,OAAOD,EAAE,OAAOmyC,EAAE,WAAW1uC,EAAEogD,SAAS1R,EAAEjwC,EAAE,EAAEwM,IAAG,CAAG,IAAGyjC,CAAC,CAAC,SAASkU,GAAG5iD,EAAEuuC,EAAEhyC,EAAE0O,GAAG,MAAM,CAAClQ,KAAK,EAAEigD,MAAMh7C,EAAEk7C,MAAM3M,EAAE0M,UAAU1+C,EAAE4+C,UAAUlwC,EAAE,CAAC,SAASu3C,GAAGxiD,GAAG,MAAM,CAACjF,KAAK,EAAEigD,MAAMh7C,EAAEk7C,MAAMl7C,EAAE,CAAC,MAAMsiD,GAAG,cAAIpF,GAAa,OAAOnhD,KAAK0kD,KAAK92C,MAAMiyC,GAAGsB,UAAU,CAAC,OAAA2F,CAAQ7iD,EAAEuuC,EAAEhyC,EAAE0O,GAAG1O,GAAE,IAAKA,EAAE0O,GAAE,IAAKA,EAAE,IAAI,OAAOlP,KAAK+mD,KAAK9iD,EAAEuuC,GAAG,GAAG,IAAIxyC,KAAK+mD,KAAK9iD,EAAEuuC,KAAKhyC,GAAG0O,MAAM1O,IAAI0O,GAAGs3C,GAAGxmD,MAAM,IAAIA,KAAKmhD,WAAWnhD,MAAK,IAAK6mD,GAAG5iD,EAAEuuC,GAAGhyC,GAAG0O,IAAI,CAAC,MAAMjL,GAAG,OAAOqiD,GAAGtmD,KAAKy+C,GAAG,CAAC,CAAC,MAAAj5C,CAAOvB,GAAG,OAAO,MAAMA,EAAEqiD,GAAGtmD,KAAKy+C,IAAI,IAAIz+C,KAAKmhD,WAAWnhD,MAAK,IAAKymD,GAAGxiD,IAAI,CAAC,KAAA+iD,CAAM/iD,GAAG,OAAO,MAAMA,EAAEqiD,GAAGtmD,KAAKy+C,IAAI,IAAIz+C,KAAKmhD,WAAWnhD,MAAK,IAAK6mD,GAAG5iD,OAAE,GAAO,IAAK,CAAC,YAAAgjD,CAAahjD,GAAG,OAAO,MAAMA,EAAEqiD,GAAGtmD,KAAKy+C,IAAI,IAAIz+C,KAAKmhD,WAAWnhD,MAAK,IAAK6mD,GAAG5iD,OAAE,GAAO,IAAK,CAAC,KAAAijD,CAAMjjD,GAAG,OAAO,MAAMA,EAAEqiD,GAAGtmD,KAAKy+C,IAAI,IAAIz+C,KAAKmhD,WAAWnhD,MAAK,IAAK6mD,QAAG,EAAO5iD,GAAE,GAAG,IAAK,CAAC,YAAAkjD,CAAaljD,GAAG,OAAO,MAAMA,EAAEqiD,GAAGtmD,KAAKy+C,IAAI,IAAIz+C,KAAKmhD,WAAWnhD,MAAK,IAAK6mD,QAAG,EAAO5iD,IAAI,CAAC,UAAAmjD,CAAWnjD,GAAG,MAAM,iBAAiBA,EAAEqiD,GAAGtmD,KAAK,oBAAoBA,KAAK8mD,QAAQ7iD,EAAEA,EAAEu6C,IAAG,GAAG,EAAG,CAAC,oBAAA6I,CAAqBpjD,GAAG,MAAM,KAAKA,EAAEjE,KAAKonD,WAAWnjD,GAAG0iD,GAAG3mD,MAAK,CAAEiE,EAAEuuC,IAAI,IAAIvuC,EAAEpI,QAAQ22C,EAAE,KAAK,CAACvuC,GAAGu6C,GAAG,CAAC,gBAAA8I,CAAiBrjD,GAAG,OAAO0iD,GAAG3mD,MAAK,CAAEiE,EAAEuuC,IAAIvuC,IAAIuuC,EAAE,IAAI,CAACvuC,GAAG,GAAG,CAAC,eAAAsjD,GAAkB,IAAItjD,EAAEuvC,EAAE7vC,MAAM4vC,EAAE7zC,WAAW,OAAO,IAAIuE,EAAEjJ,OAAOwrD,GAAGxmD,MAAM2mD,GAAG3mD,MAAK,CAAEiE,EAAEuuC,KAAK,IAAIA,EAAE32C,QAAQoI,IAAIA,EAAE,GAAG,CAAC,yBAAAujD,GAA4B,IAAIvjD,EAAEuvC,EAAE7vC,MAAM4vC,EAAE7zC,WAAW,OAAO,IAAIuE,EAAEjJ,OAAOwrD,GAAGxmD,MAAM2mD,GAAG3mD,MAAK,CAAEiE,EAAEuuC,IAAIA,EAAElJ,MAAMkJ,GAAG,IAAIvuC,EAAEpI,QAAQ22C,MAAMvuC,EAAEu6C,GAAG,CAAC,KAAAiJ,GAAQ,MAAMxjD,EAAEuvC,EAAE7vC,MAAM4vC,EAAE7zC,WAAW,IAAI8yC,EAAExyC,KAAK+mD,KAAK,IAAI9iD,EAAE8gD,KAAKvS,EAAE,CAAC,MAAMvuC,GAAG,OAAOqiD,GAAGtmD,KAAKy+C,GAAG,CAAC,GAAG,IAAIx6C,EAAEjJ,OAAO,OAAOwrD,GAAGxmD,MAAM,MAAMQ,EAAE,IAAIR,KAAKmhD,WAAWnhD,MAAK,IAAK6mD,GAAG5iD,EAAE,GAAGA,EAAEA,EAAEjJ,OAAO,MAAMwF,EAAE2kD,mBAAmB3kD,IAAIgyC,EAAE,SAAShyC,EAAER,KAAK0nD,WAAW1nD,KAAK2nD,YAAY1jD,EAAE8gD,KAAKvS,EAAC,EAAG,IAAItjC,EAAE,EAAE,OAAO1O,EAAEmkD,eAAc,CAAEnkD,EAAE+Y,EAAEjf,KAAK,MAAM6wC,EAAE3qC,EAAEuS,IAAI,KAAKy/B,EAAErH,EAAElnC,EAAEiL,IAAI,GAAG,KAAKA,EAAEA,IAAIjL,EAAEjJ,OAAO,OAAOue,EAAEjf,IAAG,EAAG,OAAO,IAAIk4C,EAAErH,EAAElnC,EAAEiL,MAAMqK,GAAE,KAAM/Y,EAAE6jD,SAASpgD,EAAEiL,GAAI,KAAG,EAAI,IAAG1O,CAAC,CAAC,QAAAonD,CAAS3jD,GAAG,OAAOjE,KAAK6nD,WAAW,CAAC,EAAE,IAAM5jD,GAAG,CAACA,EAAEjE,KAAK6/C,GAAGY,UAAU,CAACqH,eAAc,EAAGC,eAAc,GAAI,CAAC,MAAAC,GAAS,MAAM/jD,EAAEuvC,EAAE7vC,MAAM4vC,EAAE7zC,WAAW,GAAG,IAAIuE,EAAEjJ,OAAO,OAAO,IAAIgF,KAAKmhD,WAAWnhD,MAAM,IAAIiE,EAAE8gD,KAAK/kD,KAAK0nD,WAAW,CAAC,MAAMzjD,GAAG,OAAOqiD,GAAGtmD,KAAKy+C,GAAG,CAAC,MAAMjM,EAAEvuC,EAAE6rB,QAAO,CAAE7rB,EAAEuuC,IAAIvuC,EAAEA,EAAEe,OAAO,CAAC,CAACf,EAAEA,EAAEjJ,OAAO,GAAG,GAAGw3C,KAAK,CAAC,EAAE,IAAMA,KAAK,MAAM,OAAOA,EAAEn3C,KAAK,CAAC4I,EAAEA,EAAEjJ,OAAO,GAAGgF,KAAK6/C,GAAGY,UAAUzgD,KAAK6nD,WAAWrV,EAAE,CAACsV,eAAc,EAAGC,eAAc,GAAI,CAAC,UAAAF,CAAW5jD,EAAEuuC,GAAG,MAAMhyC,EAAER,KAAK+mD,KAAK73C,EAAElP,KAAK0nD,WAAWnuC,EAAEvZ,KAAK2nD,YAAYrtD,EAAE0F,KAAKioD,KAAK9c,EAAEnrC,KAAKkoD,KAAK,GAAG,IAAIjkD,EAAEjJ,OAAO,OAAOwrD,GAAGxmD,MAAM,IAAIiE,EAAEs8C,OAAOt8C,QAAG,IAASA,EAAE,SAAI,IAASA,EAAE,IAAIiL,EAAEjL,EAAE,GAAGA,EAAE,KAAK,IAAI,OAAOqiD,GAAGtmD,KAAK,6HAA6Hs1C,GAAE0M,iBAAiB,MAAMn9C,GAAG2tC,IAAG,IAAKA,EAAEsV,cAAcpV,EAAEF,IAAG,IAAKA,EAAEuV,cAAc,IAAI1jC,EAAE3hB,EAAEwM,EAAE,SAAS6K,EAAE9V,EAAEuuC,GAAG,OAAO9vC,EAAEuB,EAAE,GAAGuuC,EAAE,GAAG,CAAC,IAAInuB,EAAEpgB,EAAE6rB,QAAO,SAAU7rB,EAAEuuC,GAAG,IAAItjC,EAAE,EAAEqK,EAAEtV,EAAEjJ,OAAO,KAAKkU,EAAEqK,IAAIrK,EAAE,CAAC,MAAMqK,EAAEtV,EAAEiL,GAAG,GAAG1O,EAAEgyC,EAAE,GAAGj5B,EAAE,IAAI,GAAG/Y,EAAEgyC,EAAE,GAAGj5B,EAAE,IAAI,EAAE,CAACA,EAAE,GAAGjf,EAAEif,EAAE,GAAGi5B,EAAE,IAAIj5B,EAAE,GAAG4xB,EAAE5xB,EAAE,GAAGi5B,EAAE,IAAI,KAAK,CAAC,CAAC,OAAOtjC,IAAIqK,GAAGtV,EAAE5I,KAAKm3C,GAAGvuC,CAAE,GAAE,IAAIogB,EAAE0gC,KAAKhrC,EAAE,CAAC,MAAM9V,GAAG,OAAOqiD,GAAGtmD,KAAKy+C,GAAG,CAAC,IAAInlC,EAAE,EAAE,MAAMq5B,EAAED,EAAEzuC,GAAGiL,EAAEjL,EAAEogB,EAAE/K,GAAG,IAAI,EAAErV,GAAGiL,EAAEjL,EAAEogB,EAAE/K,GAAG,KAAK,EAAE0J,EAAEne,EAAEZ,GAAGsV,EAAEtV,EAAEogB,EAAE/K,GAAG,IAAI,EAAErV,GAAGsV,EAAEtV,EAAEogB,EAAE/K,GAAG,KAAK,EAAE,IAAIvU,EAAE4tC,EAAE,MAAMlyC,EAAE,IAAIT,KAAKmhD,WAAWnhD,MAAK,IAAK6mD,GAAGxiC,EAAE,GAAG,GAAGA,EAAEA,EAAErpB,OAAO,GAAG,IAAI6J,GAAG6tC,KAAK,OAAOjyC,EAAE0kD,mBAAmBlhD,IAAI,SAASA,GAAGc,EAAE4tC,EAAEjwC,EAAEwM,IAAInK,EAAEie,EAAEtgB,EAAE6W,GAAG8K,EAAE0gC,KAAKhrC,EAAC,EAAGtZ,EAAEkkD,eAAc,CAAE1gD,EAAEuuC,EAAEhyC,KAAK,IAAI,IAAI+Y,EAAEtV,EAAE8O,IAAIhO,EAAEwU,IAAI,KAAKD,EAAEA,IAAI+K,EAAErpB,OAAO,OAAOw3C,EAAEhyC,IAAG,EAAG,QAAQ,SAASyD,GAAG,OAAO0uC,EAAE1uC,KAAK+e,EAAE/e,EAAE,CAA9B,CAAgCsV,KAAK,IAAIvZ,KAAK+mD,KAAKxtC,EAAE8K,EAAE/K,GAAG,KAAK,IAAItZ,KAAK+mD,KAAKxtC,EAAE8K,EAAE/K,GAAG,KAAKk5B,GAAE,KAAM9vC,IAAIwM,EAAEjL,EAAEogD,SAAShgC,EAAE/K,GAAG,IAAIrV,EAAEogD,SAAShgC,EAAE/K,GAAG,GAAI,KAAG,EAAI,IAAG7Y,CAAC,CAAC,eAAA0nD,GAAkB,MAAMlkD,EAAEuvC,EAAE7vC,MAAM4vC,EAAE7zC,WAAW,OAAOuE,EAAEs8C,OAAOt8C,GAAG,iBAAiBA,IAAI,IAAIA,EAAEjJ,OAAOwrD,GAAGxmD,MAAMA,KAAK6nD,WAAW5jD,EAAEwO,KAAKxO,GAAG,CAACA,EAAEA,EAAEu6C,OAAO8H,GAAGtmD,KAAK,4CAA4C,EAAE,SAASooD,GAAGnkD,GAAG,OAAOy2C,IAAG,SAAUlI,GAAG,OAAO6V,GAAG7V,GAAGvuC,EAAEuuC,EAAE3sC,OAAOzB,QAAO,CAAG,GAAE,CAAC,SAASikD,GAAGpkD,GAAGA,EAAEqkD,iBAAiBrkD,EAAEqkD,kBAAkBrkD,EAAEskD,gBAAgBtkD,EAAEskD,gBAAgB,CAAC,MAAMC,GAAG9F,GAAG,KAAK,kBAAkB,MAAM+F,GAAG,KAAAC,GAAQ,OAAOjoD,GAAGi4C,GAAGnG,UAAUvyC,KAAK2oD,UAAU,IAAI3oD,KAAK2oD,WAAWjQ,GAAGnG,SAASmG,GAAGkQ,aAAa5oD,MAAMA,IAAI,CAAC,OAAA6oD,GAAU,GAAGpoD,GAAGi4C,GAAGnG,QAAQ,KAAKvyC,KAAK2oD,UAAU,IAAIjQ,GAAGnG,SAASmG,GAAGkQ,aAAa,MAAM5oD,KAAK8oD,cAAc9tD,OAAO,IAAIgF,KAAK+oD,WAAW,CAAC,IAAI9kD,EAAEjE,KAAK8oD,cAAcjxC,QAAQ,IAAIyjC,GAAGr3C,EAAE,GAAGA,EAAE,GAAG,CAAC,MAAMA,GAAG,CAAC,CAAC,OAAOjE,IAAI,CAAC,OAAA+oD,GAAU,OAAO/oD,KAAK2oD,WAAWjQ,GAAGkQ,eAAe5oD,IAAI,CAAC,MAAAsT,CAAOrP,GAAG,IAAIjE,KAAKgpD,KAAK,OAAOhpD,KAAK,MAAMwyC,EAAExyC,KAAK6/C,GAAGvC,MAAM98C,EAAER,KAAK6/C,GAAGzG,OAAO+E,YAAY,GAAG19C,GAAGT,KAAK4/C,WAAW37C,IAAIuuC,EAAE,OAAOhyC,GAAGA,EAAE6L,MAAM,IAAI,sBAAsB,MAAM,IAAIipC,GAAEhB,eAAe9zC,GAAG,IAAI,kBAAkB,MAAM,IAAI80C,GAAEb,WAAWj0C,EAAE+L,QAAQ/L,GAAG,QAAQ,MAAM,IAAI80C,GAAE2T,WAAWzoD,GAAG,IAAIR,KAAKo6B,OAAO,MAAM,IAAIkb,GAAEd,oBAAoB,OAAO/zC,EAAE,OAAOT,KAAKk+C,YAAY9E,SAASn1C,EAAEjE,KAAK4/C,SAAS37C,IAAIjE,KAAK6/C,GAAGG,KAAKhgD,KAAK6/C,GAAGG,KAAKkJ,YAAYlpD,KAAKmpD,WAAWnpD,KAAKgpD,KAAK,CAACI,WAAWppD,KAAKqpD,8BAA8B7W,EAAE0W,YAAYlpD,KAAKmpD,WAAWnpD,KAAKgpD,KAAK,CAACI,WAAWppD,KAAKqpD,gCAAgChkC,QAAQq1B,IAAIlI,IAAI6V,GAAG7V,GAAGxyC,KAAKspD,QAAQrlD,EAAEG,MAAO,IAAGH,EAAEslD,QAAQ7O,IAAIlI,IAAI6V,GAAG7V,GAAGxyC,KAAKo6B,QAAQp6B,KAAKspD,QAAQ,IAAIhU,GAAEf,MAAMtwC,EAAEG,QAAQpE,KAAKo6B,QAAO,EAAGp6B,KAAK+U,GAAG,SAASmrC,KAAK1N,EAAG,IAAGvuC,EAAEulD,WAAW9O,IAAG,KAAM16C,KAAKo6B,QAAO,EAAGp6B,KAAKypD,WAAW,iBAAiBxlD,GAAGukD,GAAGkB,eAAexJ,KAAKj8C,EAAE0lD,aAAc,IAAG3pD,IAAI,CAAC,QAAAq6C,CAASp2C,EAAEuuC,EAAEhyC,GAAG,GAAG,cAAcyD,GAAG,cAAcjE,KAAKgpD,KAAK,OAAOtM,GAAG,IAAIpH,GAAEsU,SAAS,4BAA4B,IAAI5pD,KAAKo6B,OAAO,OAAOsiB,GAAG,IAAIpH,GAAEd,qBAAqB,GAAGx0C,KAAK+oD,UAAU,OAAO,IAAIlQ,IAAG,CAAE3pC,EAAEqK,KAAKvZ,KAAK8oD,cAAcztD,KAAK,CAAC,KAAK2E,KAAKq6C,SAASp2C,EAAEuuC,EAAEhyC,GAAGqc,KAAK3N,EAAEqK,EAAC,EAAGm/B,IAAK,IAAG,GAAGl4C,EAAE,OAAO46C,IAAG,KAAM,IAAIn3C,EAAE,IAAI40C,IAAG,CAAE50C,EAAEzD,KAAKR,KAAK0oD,QAAQ,MAAMx5C,EAAEsjC,EAAEvuC,EAAEzD,EAAER,MAAMkP,GAAGA,EAAE2N,MAAM3N,EAAE2N,KAAK5Y,EAAEzD,EAAG,IAAG,OAAOyD,EAAE22C,SAAQ,IAAK56C,KAAK6oD,YAAY5kD,EAAE80C,MAAK,EAAG90C,CAAE,IAAG,IAAIiL,EAAE,IAAI2pC,IAAG,CAAE50C,EAAEzD,KAAK,IAAI0O,EAAEsjC,EAAEvuC,EAAEzD,EAAER,MAAMkP,GAAGA,EAAE2N,MAAM3N,EAAE2N,KAAK5Y,EAAEzD,EAAG,IAAG,OAAO0O,EAAE6pC,MAAK,EAAG7pC,CAAC,CAAC,KAAA26C,GAAQ,OAAO7pD,KAAKi2B,OAAOj2B,KAAKi2B,OAAO4zB,QAAQ7pD,IAAI,CAAC,OAAA8pD,CAAQ7lD,GAAG,IAAIuuC,EAAExyC,KAAK6pD,QAAQ,MAAMrpD,EAAEq4C,GAAGtkC,QAAQtQ,GAAG,GAAGuuC,EAAEuX,YAAYvX,EAAEuX,YAAYvX,EAAEuX,YAAYltC,MAAK,IAAKrc,QAAQ,CAACgyC,EAAEuX,YAAYvpD,EAAEgyC,EAAEwX,cAAc,GAAG,IAAI96C,EAAEsjC,EAAEoN,SAASqK,YAAYzX,EAAE2W,WAAW,KAAK,SAASllD,IAAI,MAAMuuC,EAAE0X,WAAW1X,EAAEwX,cAAchvD,QAAQw3C,EAAEwX,cAAcnyC,OAAhB26B,GAA0BA,EAAEuX,cAAc76C,EAAE3K,KAAI,KAAM4xC,UAAUlyC,EAAE,CAA1H,EAA6H,CAAC,IAAIsV,EAAEi5B,EAAEuX,YAAY,OAAO,IAAIlR,IAAG,CAAE50C,EAAEiL,KAAK1O,EAAEqc,MAAMrc,GAAGgyC,EAAEwX,cAAc3uD,KAAKq/C,GAAGz2C,EAAEuS,KAAK,KAAKhW,OAAOyD,GAAGuuC,EAAEwX,cAAc3uD,KAAKq/C,GAAGxrC,EAAEsH,KAAK,KAAKvS,OAAO22C,SAAQ,KAAMpI,EAAEuX,cAAcxwC,IAAIi5B,EAAEuX,YAAY,KAAM,GAAG,GAAE,CAAC,KAAA16B,GAAQrvB,KAAKo6B,SAASp6B,KAAKo6B,QAAO,EAAGp6B,KAAK4/C,UAAU5/C,KAAK4/C,SAASvwB,QAAQrvB,KAAKspD,QAAQ,IAAIhU,GAAEf,OAAO,CAAC,KAAA3mC,CAAM3J,GAAG,MAAMuuC,EAAExyC,KAAKmqD,kBAAkBnqD,KAAKmqD,gBAAgB,CAAC,GAAG,GAAGhf,EAAEqH,EAAEvuC,GAAG,OAAOuuC,EAAEvuC,GAAG,MAAMzD,EAAER,KAAK0/C,OAAOz7C,GAAG,IAAIzD,EAAE,MAAM,IAAI80C,GAAEqK,SAAS,SAAS17C,EAAE,4BAA4B,MAAMiL,EAAE,IAAIlP,KAAK6/C,GAAGuK,MAAMnmD,EAAEzD,EAAER,MAAM,OAAOkP,EAAE8wC,KAAKhgD,KAAK6/C,GAAGG,KAAKpyC,MAAM3J,GAAGuuC,EAAEvuC,GAAGiL,EAAEA,CAAC,EAAE,SAASm7C,GAAGpmD,EAAEuuC,EAAEhyC,EAAE0O,EAAEqK,EAAEjf,EAAE6wC,GAAG,MAAM,CAAC9+B,KAAKpI,EAAEu8C,QAAQhO,EAAEqR,OAAOrjD,EAAEsgD,MAAM5xC,EAAEwyC,KAAKnoC,EAAE+mC,SAAShmD,EAAEmT,KAAKjN,IAAI2qC,EAAE,IAAI,KAAKj8B,EAAE,IAAI,KAAKqK,EAAE,KAAK,IAAI+wC,GAAG9X,GAAG,CAAC,SAAS8X,GAAGrmD,GAAG,MAAM,iBAAiBA,EAAEA,EAAEA,EAAE,IAAI,GAAGzI,KAAKsF,KAAKmD,EAAE,KAAK,IAAI,EAAE,CAAC,SAASsmD,GAAGtmD,EAAEuuC,EAAEhyC,GAAG,MAAM,CAAC6L,KAAKpI,EAAEo8C,QAAQ7N,EAAE4N,QAAQ5/C,EAAE8gD,YAAY,KAAKZ,UAAU/jC,EAAEnc,GAAGyD,GAAG,CAACA,EAAEoI,KAAKpI,KAAK,CAAC,IAAIumD,GAAGvmD,IAAI,IAAI,OAAOA,EAAEwmD,KAAK,CAAC,KAAKD,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,MAAMvmD,GAAG,OAAOumD,GAAG,IAAIhM,GAAGA,EAAE,GAAG,SAASkM,GAAGzmD,GAAG,OAAO,MAAMA,EAAE,OAAO,iBAAiBA,EAAE,SAASA,GAAG,OAAO,IAAIA,EAAEsJ,MAAM,KAAKvS,OAAOw3C,GAAGA,EAAEvuC,GAAGuuC,GAAG9zC,EAAE8zC,EAAEvuC,EAAE,CAA5D,CAA8DA,GAAGuuC,GAAG9zC,EAAE8zC,EAAEvuC,EAAE,CAAC,SAAS0mD,GAAG1mD,GAAG,MAAM,GAAGrG,MAAMkD,KAAKmD,EAAE,CAAC,IAAI2mD,GAAG,EAAE,SAAS71C,GAAG9Q,GAAG,OAAO,MAAMA,EAAE,MAAM,iBAAiBA,EAAEA,EAAE,IAAIA,EAAEzI,KAAK,OAAO,CAAC,SAASqvD,GAAG5mD,EAAEuuC,EAAEtjC,GAAG,SAASqK,EAAEtV,GAAG,GAAG,IAAIA,EAAEjF,KAAK,OAAO,KAAK,GAAG,IAAIiF,EAAEjF,KAAK,MAAM,IAAIpD,MAAM,4CAA4C,MAAMqjD,MAAMz+C,EAAE2+C,MAAMjwC,EAAEgwC,UAAU3lC,EAAE6lC,UAAU9kD,GAAG2J,EAAE,YAAO,IAASzD,OAAE,IAAS0O,EAAE,KAAKsjC,EAAEsY,WAAW57C,IAAI5U,QAAG,IAAS4U,EAAEsjC,EAAEuY,WAAWvqD,IAAI+Y,GAAGi5B,EAAEwY,MAAMxqD,EAAE0O,IAAIqK,IAAIjf,EAAE,CAAC,MAAMolD,OAAOplD,EAAE2wD,UAAU9f,GAAG,SAASlnC,EAAEuuC,GAAG,MAAMtjC,EAAEy7C,GAAG1mD,EAAEinD,kBAAkB,MAAM,CAACxL,OAAO,CAACrzC,KAAKpI,EAAEoI,KAAK8+C,OAAOj8C,EAAEuD,KAAKxO,GAAGuuC,EAAEyX,YAAYhmD,KAAKwO,KAAKxO,IAAI,MAAMu8C,QAAQhO,EAAE4Y,cAAcl8C,GAAGjL,EAAEsV,EAAE/Y,EAAEgyC,GAAGl4C,EAAE,MAAMk4C,EAAErH,EAAE,CAAC,EAAEtmC,EAAE,CAACwH,KAAKpI,EAAEoI,KAAKk3C,WAAW,CAACl3C,KAAK,KAAKg/C,cAAa,EAAGxF,SAASvrD,EAAEgmD,SAAS/mC,EAAEinC,QAAQhO,EAAE4Y,cAAcl8C,EAAE20C,QAAO,EAAGiC,WAAW4E,GAAGlY,IAAI4N,QAAQuK,GAAG1mD,EAAEqnD,YAAY74C,KAAK+/B,GAAGvuC,EAAEwK,MAAM+jC,KAAK//B,KAAKxO,IAAI,MAAMoI,KAAKmmC,EAAEqR,OAAO30C,EAAEq8C,WAAWhyC,EAAEinC,QAAQlmD,GAAG2J,EAAEY,EAAE,CAACwH,KAAKmmC,EAAE8N,SAAS9/C,EAAElG,GAAGkmD,QAAQlmD,EAAEupD,OAAO30C,EAAEq8C,WAAWhyC,EAAEusC,WAAW4E,GAAGpwD,IAAI,OAAO6wC,EAAEp2B,GAAGza,IAAIuK,EAAEA,CAAE,IAAG2+C,kBAAkBv/C,GAAGknC,EAAEp2B,GAAG9Q,KAAK,OAAOknC,EAAE,OAAOtmC,EAAE0+C,WAAW,MAAM/Q,IAAIrH,EAAEp2B,GAAGy9B,IAAI3tC,EAAE0+C,YAAY1+C,CAAE,KAAIomD,UAAU/7C,EAAElU,OAAO,GAAG,WAAWw3C,EAAEyX,YAAY/6C,EAAE,OAAO,oBAAoBO,WAAW,SAASmD,KAAKnD,UAAUC,aAAa,oBAAoBkD,KAAKnD,UAAUC,YAAY,GAAG1K,OAAOyK,UAAUC,UAAUf,MAAM,kBAAkB,GAAG,KAAK,CAAn0B,CAAq0B1K,EAAEiL,GAAGrK,EAAEvK,EAAE6wD,OAAO14C,KAAKxO,GAAG,SAASA,GAAG,MAAMuuC,EAAEvuC,EAAEoI,KAAK,MAAM,CAACA,KAAKmmC,EAAEkN,OAAOz7C,EAAE09C,OAAO,UAAU1D,MAAMh6C,EAAEjF,KAAKwB,EAAEqS,KAAK3D,EAAE+tB,OAAO3iC,EAAEmS,MAAM0+B,IAAI,OAAO,IAAI72B,SAAQ,CAAEzP,EAAE6tC,KAAK7tC,EAAE61C,GAAG71C,GAAG,MAAMwf,EAAEpgB,EAAEgmD,YAAYzX,GAAG9vC,EAAE,MAAM2hB,EAAEm8B,QAAQzmC,EAAE,QAAQvZ,GAAG,QAAQA,EAAE,IAAIuZ,GAAG,WAAWvZ,GAAG,gBAAgBA,EAAE,MAAM,IAAI5E,MAAM,2BAA2B4E,GAAG,MAAMxF,OAAOse,GAAGpK,GAAG5U,GAAG,CAACU,OAAO,GAAG,GAAGkU,GAAG5U,GAAG4U,EAAElU,SAASV,EAAEU,OAAO,MAAM,IAAIY,MAAM,iEAAiE,GAAG,IAAI0d,EAAE,OAAOzU,EAAE,CAAC+8C,YAAY,EAAE9M,SAAS,CAAC,EAAEyN,QAAQ,GAAGV,gBAAW,IAAS,IAAIlP,EAAE,MAAM3vB,EAAE,GAAGje,EAAE,GAAG,IAAItE,EAAE,EAAE,MAAMmQ,EAAE3M,MAAMxD,EAAE4nD,GAAGpkD,EAAC,EAAG,GAAG,gBAAgBzD,EAAE,CAAC,GAAG,IAAI2qC,EAAEnsC,KAAK,OAAO6F,EAAE,CAAC+8C,YAAYnhD,EAAEq0C,SAAS/vC,EAAEw9C,QAAQ,GAAGV,gBAAW,IAAS,IAAI1W,EAAEnsC,KAAKgkB,EAAE3nB,KAAKs3C,EAAEtuB,EAAEjB,SAASJ,EAAE3nB,KAAKs3C,EAAEtuB,EAAEsnB,OAAOpyB,EAAE4xB,IAAI,KAAK,CAAC,MAAMlnC,EAAEuuC,GAAGz4B,EAAErX,EAAE,CAACpI,EAAE4U,GAAG,CAAC5U,EAAE,MAAM,CAAC4U,EAAE,MAAM,GAAG6K,EAAE,IAAI,IAAI7K,EAAE,EAAEA,EAAEoK,IAAIpK,EAAE8T,EAAE3nB,KAAKs3C,EAAEH,QAAG,IAASA,EAAEtjC,GAAGmV,EAAE7jB,GAAGyD,EAAEiL,GAAGsjC,EAAEtjC,IAAImV,EAAE7jB,GAAGyD,EAAEiL,KAAKyjC,EAAEttB,QAAQzU,OAAO,IAAI,IAAI4hC,EAAE,EAAEA,EAAEl5B,IAAIk5B,EAAExvB,EAAE3nB,KAAKs3C,EAAEtuB,EAAE7jB,GAAGyD,EAAEuuC,KAAKG,EAAEttB,QAAQzU,CAAC,CAAC,MAAM+L,EAAE1Y,IAAI,MAAMuuC,EAAEvuC,EAAE4B,OAAOqxB,OAAOlU,EAAElQ,SAAQ,CAAE7O,EAAEuuC,IAAI,MAAMvuC,EAAEG,QAAQW,EAAEytC,GAAGvuC,EAAEG,SAASS,EAAE,CAAC+8C,YAAYnhD,EAAEq0C,SAAS/vC,EAAEw9C,QAAQ,WAAW/hD,EAAE0O,EAAE8T,EAAEvQ,KAAKxO,GAAGA,EAAEizB,SAAS2qB,WAAWrP,GAAE,EAAGG,EAAEttB,QAAQphB,IAAI2M,EAAE3M,GAAG0Y,EAAE1Y,EAAC,EAAG0uC,EAAEwD,UAAUx5B,CAAE,GAAE,EAAEwlC,QAAQ,EAAElE,MAAMh6C,EAAE4O,KAAKrS,KAAK,IAAI8T,SAAQ,CAAEpF,EAAEqK,KAAKrK,EAAEwrC,GAAGxrC,GAAG,MAAM5U,EAAE2J,EAAEgmD,YAAYzX,GAAGrH,EAAE3qC,EAAExF,OAAO6J,EAAE,IAAInJ,MAAMyvC,GAAG,IAAIuH,EAAEruB,EAAE,EAAE3hB,EAAE,EAAE,MAAMqX,EAAE9V,IAAI,MAAMuuC,EAAEvuC,EAAE4B,OAAOhB,EAAE2tC,EAAEgZ,MAAMhZ,EAAEtb,SAASx0B,IAAI2hB,GAAGnV,EAAErK,EAAC,EAAGyU,EAAE8uC,GAAG7uC,GAAG,IAAI,IAAItV,EAAE,EAAEA,EAAEknC,IAAIlnC,EAAE,MAAMzD,EAAEyD,KAAKyuC,EAAEp4C,EAAEiK,IAAI/D,EAAEyD,IAAIyuC,EAAE8Y,KAAKvnD,EAAEyuC,EAAEyD,UAAUp8B,EAAE24B,EAAErtB,QAAQ/L,IAAI+K,GAAG,IAAIA,GAAGnV,EAAErK,EAAG,IAAGN,IAAI,EAAE05C,MAAMh6C,EAAE8O,IAAIvS,KAAK,IAAI8T,SAAQ,CAAEpF,EAAEqK,KAAKrK,EAAEwrC,GAAGxrC,GAAG,MAAM5U,EAAE2J,EAAEgmD,YAAYzX,GAAGjuC,IAAI/D,GAAGlG,EAAE67C,UAAUlyC,GAAGiL,EAAEjL,EAAE4B,OAAOqxB,QAAQ58B,EAAE+qB,QAAQ+iC,GAAG7uC,EAAG,IAAGuqC,MAAM,SAAS7/C,GAAG,OAAOzD,GAAG,IAAI8T,SAAQ,CAAEpF,EAAE5U,KAAK4U,EAAEwrC,GAAGxrC,GAAG,MAAM+uC,MAAM9S,EAAElO,OAAOp4B,EAAE+F,MAAM8nC,EAAEoR,MAAMz/B,GAAG7jB,EAAEkC,EAAEgwC,IAAI,SAAI,EAAOA,GAAGjkC,MAAMsL,EAAEtN,MAAM6M,GAAG+K,EAAEsuB,EAAExH,EAAE8e,YAAYzX,GAAGxvB,EAAEjJ,EAAEsxC,aAAa1Y,EAAEA,EAAElkC,MAAMsL,EAAE1N,MAAMtH,EAAEwU,EAAED,GAAG,GAAG,IAAIo5B,EAAE,OAAOxjC,EAAE,CAACgoB,OAAO,KAAK,GAAGjzB,EAAE,CAAC,MAAMA,EAAEY,EAAEme,EAAEyoC,OAAO1mD,EAAErC,GAAGsgB,EAAE0oC,WAAW3mD,EAAErC,GAAGuB,EAAEkyC,UAAUlyC,GAAGiL,EAAE,CAACgoB,OAAOjzB,EAAE4B,OAAOqxB,SAASjzB,EAAEohB,QAAQ+iC,GAAG9tD,EAAE,KAAK,CAAC,IAAI2J,EAAE,EAAE,MAAMuuC,EAAE3tC,KAAK,kBAAkBme,GAAGA,EAAE2gC,WAAW5+C,GAAGie,EAAE2oC,cAAc5mD,GAAGvE,EAAE,GAAGgyC,EAAE2D,UAAU58B,IAAI,MAAMjf,EAAEk4C,EAAEtb,OAAO,OAAO58B,GAAGkG,EAAEnF,KAAKwJ,EAAEvK,EAAEgD,MAAMhD,EAAEipD,cAAct/C,IAAIyuC,EAAExjC,EAAE,CAACgoB,OAAO12B,SAASlG,EAAE+pD,YAAYn1C,EAAE,CAACgoB,OAAO12B,GAAE,EAAGgyC,EAAEntB,QAAQ+iC,GAAG9tD,EAAE,CAAE,GAAE,CAAvjB,CAAyjB6wC,GAAGwY,WAAW,UAAU1F,MAAMh6C,EAAEg5B,OAAOz8B,EAAEsjD,MAAM50C,EAAEuiC,QAAQn3C,EAAEupD,OAAO1Y,IAAI,OAAO,IAAI72B,SAAQ,CAAEzP,EAAE6tC,KAAK7tC,EAAE61C,GAAG71C,GAAG,MAAM4J,MAAM4V,EAAE5X,MAAM/J,GAAGwM,EAAE6K,EAAE9V,EAAEgmD,YAAYzX,GAAGl5B,EAAE+K,EAAEgnC,aAAatxC,EAAEA,EAAEtL,MAAM4V,EAAEhY,MAAMsmC,EAAEr4C,EAAE6wC,EAAE,aAAa,OAAOA,EAAE,aAAa,OAAOnoB,EAAExiB,KAAK,kBAAkB8Y,GAAGA,EAAEqqC,WAAWpqC,EAAE7W,GAAGiwC,GAAGr5B,EAAEqyC,cAAcpyC,EAAE7W,GAAGiwC,GAAG3vB,EAAEqC,QAAQ+iC,GAAG1V,GAAG1vB,EAAEmzB,UAAUuE,IAAIlI,IAAI,MAAMhyC,EAAEwiB,EAAEkU,OAAO,IAAI12B,EAAE,YAAYqE,EAAE,MAAMrE,EAAEorD,QAAQhB,GAAGpqD,EAAE4mB,MAAK,EAAG,MAAMlY,EAAE1O,EAAE6jD,SAAS7tC,KAAKhW,GAAG,IAAI+Y,EAAE/Y,EAAEqrD,mBAAmBtyC,IAAIA,EAAEA,EAAE/C,KAAKhW,IAAI,MAAMlG,EAAEkG,EAAEwkD,QAAQxuC,KAAKhW,GAAG2qC,EAAE,KAAK,MAAM,IAAIvvC,MAAM,qBAAoB,EAAG4E,EAAEy9C,MAAMh6C,EAAEzD,EAAEwjD,KAAKxjD,EAAE6jD,SAAS7jD,EAAEqrD,mBAAmBrrD,EAAEwkD,QAAQ,KAAK,MAAM,IAAIppD,MAAM,qBAAoB,EAAG4E,EAAEyjD,KAAKvJ,GAAGhI,GAAGlyC,EAAE2iB,KAAK,WAAW,IAAIlf,EAAE,EAAE,OAAOjE,KAAKlE,OAAM,IAAKmI,IAAIjE,KAAKqkD,WAAWrkD,KAAKgkD,SAASnnC,MAAK,IAAK7c,MAAM,EAAEQ,EAAE1E,MAAMmI,IAAI,MAAMuuC,EAAE,IAAIl+B,SAAQ,CAAErQ,EAAEuuC,KAAKvuC,EAAEy2C,GAAGz2C,GAAG+e,EAAEqC,QAAQ+iC,GAAG5V,GAAGhyC,EAAEyjD,KAAKzR,EAAEhyC,EAAEwjD,KAAKxR,IAAIhyC,EAAEwjD,KAAKxjD,EAAE6jD,SAAS7jD,EAAEqrD,mBAAmBrrD,EAAEwkD,QAAQ7Z,EAAElnC,EAAEuuC,EAAC,CAAG,IAAG3tC,EAAE,KAAK,GAAGme,EAAEkU,OAAO,IAAIjzB,GAAG,CAAC,MAAMA,GAAGzD,EAAEyjD,KAAKhgD,EAAE,MAAMzD,EAAE4mB,MAAK,EAAG5mB,EAAE1E,MAAM,KAAK,MAAM,IAAIF,MAAM,2BAA0B,EAAG4E,EAAEwjD,MAAK,EAAG,OAAOhhC,EAAEmzB,UAAUuE,IAAIz2C,IAAI+e,EAAEmzB,UAAUtxC,EAAEA,GAAI,IAAGrE,EAAE6jD,SAASn1C,EAAE1O,EAAEqrD,mBAAmBtyC,EAAE/Y,EAAEwkD,QAAQ1qD,EAAEuK,IAAI2tC,GAAG3tC,EAAErE,EAAG,GAAEkyC,EAAG,GAAE,EAAE,KAAAz8B,EAAO6tC,MAAM7/C,EAAEg6C,MAAMz9C,IAAI,MAAMiO,MAAMS,EAAEzC,MAAMnS,GAAG2J,EAAE,OAAO,IAAIqQ,SAAQ,CAAErQ,EAAEknC,KAAK,MAAMtmC,EAAErE,EAAEypD,YAAYzX,GAAGE,EAAExjC,EAAEm8C,aAAaxmD,EAAEA,EAAE4J,MAAMS,EAAE7C,MAAMgY,EAAE9K,EAAEjf,GAAGoI,EAAE2hB,EAAEquB,EAAEz8B,MAAMoO,GAAGquB,EAAEz8B,QAAQvT,EAAEyzC,UAAUuE,IAAIlI,GAAGvuC,EAAEuuC,EAAE3sC,OAAOqxB,UAAUx0B,EAAE2iB,QAAQ+iC,GAAGjd,EAAG,GAAE,EAAE,CAA38G,CAA68GlnC,KAAKyuC,EAAE,CAAC,EAAE,OAAO7tC,EAAEiO,SAAS7O,GAAGyuC,EAAEzuC,EAAEoI,MAAMpI,IAAI,CAACqI,MAAM,SAAS48C,YAAYjlD,EAAEilD,YAAY1yC,KAAKvS,GAAG,KAAA2J,CAAM3J,GAAG,IAAIyuC,EAAEzuC,GAAG,MAAM,IAAIrI,MAAM,UAAUqI,gBAAgB,OAAOyuC,EAAEzuC,EAAE,EAAE6nD,SAAQ,IAAKC,QAAQvB,GAAGhY,GAAGkN,OAAOplD,EAAE,CAAC,SAAS0xD,IAAIC,OAAOhoD,GAAGuuC,GAAG,MAAMhyC,EAAEgyC,EAAEqN,GAAG3wC,EAAE,SAASjL,EAAEuuC,GAAG0Z,YAAY1rD,EAAEogD,UAAU1xC,GAAGqK,GAAG,MAAMjf,EAAE,SAAS2J,EAAEuuC,GAAG,OAAOA,EAAE1iB,QAAO,CAAE7rB,GAAGqP,OAAOk/B,MAAK,IAAKvuC,KAAKuuC,EAAEvuC,MAAMA,EAAE,CAAnE,CAAqE4mD,GAAGrY,EAAEhyC,EAAE+Y,GAAGtV,EAAEkoD,QAAQ,MAAM,CAACA,OAAO7xD,EAAE,CAA7J,CAA+J2J,EAAEmoD,aAAa5rD,EAAEyD,EAAE08C,MAAMnO,GAAGvuC,EAAE+7C,KAAK9wC,EAAEi9C,OAAOloD,EAAEknD,OAAOr4C,SAAS0/B,IAAI,MAAMhyC,EAAEgyC,EAAEnmC,KAAKpI,EAAE+7C,KAAKN,OAAOyL,OAAO7hB,MAAMrlC,GAAGA,EAAEoI,OAAO7L,MAAMgyC,EAAEwN,KAAK/7C,EAAE+7C,KAAKpyC,MAAMpN,GAAGyD,EAAEzD,aAAayD,EAAEmmD,QAAQnmD,EAAEzD,GAAGw/C,KAAKxN,EAAEwN,MAAO,GAAE,CAAC,SAASqM,IAAIJ,OAAOhoD,GAAGuuC,EAAEhyC,EAAE0O,GAAG1O,EAAEsS,SAAStS,IAAI,MAAM+Y,EAAErK,EAAE1O,GAAGgyC,EAAE1/B,SAAS0/B,IAAI,MAAMtjC,EAAEoK,EAAEk5B,EAAEhyC,KAAK0O,GAAG,UAAUA,QAAG,IAASA,EAAE5R,SAASk1C,IAAIvuC,EAAEqoD,YAAYtvD,WAAWw1C,aAAavuC,EAAEqoD,YAAYjoC,EAAEmuB,EAAEhyC,EAAE,CAAC,GAAA+D,GAAM,OAAOvE,KAAK4N,MAAMpN,EAAE,EAAE,GAAA2E,CAAIlB,GAAGyuC,EAAE1yC,KAAKQ,EAAE,CAAClD,MAAM2G,EAAEkI,UAAS,EAAGC,cAAa,EAAG9H,YAAW,GAAI,IAAIkuC,EAAEhyC,GAAG,IAAIyD,EAAEmmD,MAAM5pD,EAAE+Y,GAAI,GAAG,GAAE,CAAC,SAASgzC,IAAIN,OAAOhoD,GAAGuuC,GAAGA,EAAE1/B,SAAS0/B,IAAI,IAAI,IAAIhyC,KAAKgyC,EAAEA,EAAEhyC,aAAayD,EAAEmmD,cAAc5X,EAAEhyC,EAAG,GAAE,CAAC,SAASgsD,GAAGvoD,EAAEuuC,GAAG,OAAOvuC,EAAEwoD,KAAKtwC,QAAQq2B,EAAEia,KAAKtwC,OAAO,CAAC,SAASuwC,GAAGzoD,EAAEzD,EAAE0O,EAAEqK,GAAG,MAAMjf,EAAE2J,EAAE05C,UAAUxS,EAAElnC,EAAEy5C,mBAAmB,YAAYz5C,EAAE0oD,YAAYryD,GAAG6wC,EAAE73B,OAAOpE,GAAGi8B,EAAE+S,YAAYphC,MAAMvD,GAAG,MAAM1U,EAAEsmC,EAAEme,QAAQ9yC,KAAK20B,GAAGuH,EAAEgG,GAAGoH,WAAWpH,GAAG0C,IAAG,KAAM1C,GAAGuF,MAAM9S,EAAEuN,GAAGoH,UAAUpN,EAAE,IAAIlyC,GAAGgyC,EAAEl4C,GAAGwY,SAAS7O,IAAI2oD,GAAG19C,EAAEjL,EAAE3J,EAAE2J,GAAGo8C,QAAQ/lD,EAAE2J,GAAGm8C,QAAS,IAAG4L,GAAG/nD,EAAEiL,GAAG2pC,GAAG2C,QAAO,IAAKv3C,EAAE8Q,GAAG83C,SAAS3M,KAAK/U,KAAKruB,MAAMjY,IAAI,UAAUonD,OAAOhoD,GAAGzD,EAAE0O,EAAEqK,GAAG,MAAMjf,EAAE,GAAG6wC,EAAElnC,EAAE6oD,UAAU,IAAIjoD,EAAEZ,EAAE05C,UAAUoP,GAAG9oD,EAAEA,EAAEq5C,MAAM/jC,GAAGm5B,GAAE,EAAuF,OAAOvH,EAAEne,QAAQ/oB,GAAGA,EAAEwoD,KAAKtwC,SAAS3b,IAAIsS,SAASq4B,IAAI7wC,EAAEe,MAAK,KAAM,MAAMf,EAAEuK,EAAEwf,EAAE8mB,EAAEshB,KAAKO,SAASC,GAAGhpD,EAAE3J,EAAEif,GAAG0zC,GAAGhpD,EAAEogB,EAAE9K,GAAG1U,EAAEZ,EAAE05C,UAAUt5B,EAAE,MAAM3hB,EAAEoL,GAAGxT,EAAE+pB,GAAG3hB,EAAEmvB,IAAI/e,SAAS7O,IAAI2oD,GAAGrzC,EAAEtV,EAAE,GAAGA,EAAE,GAAGo8C,QAAQp8C,EAAE,GAAGm8C,QAAS,IAAG19C,EAAEwqD,OAAOp6C,SAAS7O,IAAI,GAAGA,EAAEkpD,SAAS,MAAM,IAAI7X,GAAE8X,QAAQ,4CAA4C,CAAC,MAAM5a,EAAEj5B,EAAE0wC,YAAYhmD,EAAEoI,MAAMpI,EAAE4tB,IAAI/e,SAAS7O,GAAGopD,GAAG7a,EAAEvuC,KAAKA,EAAEipD,OAAOp6C,SAAS7O,IAAIuuC,EAAE8a,YAAYrpD,EAAEoI,MAAMghD,GAAG7a,EAAEvuC,EAAG,IAAGA,EAAEspD,IAAIz6C,SAAS7O,GAAGuuC,EAAE8a,YAAYrpD,IAAI,CAAE,IAAG,MAAM8V,EAAEoxB,EAAEshB,KAAKe,eAAe,GAAGzzC,GAAGoxB,EAAEshB,KAAKtwC,QAAQ3b,EAAE,CAACwrD,GAAG/nD,EAAEsV,GAAGrK,EAAEi7C,gBAAgB,CAAC,EAAEzX,GAAE,EAAG,IAAIlyC,EAAEwV,EAAEqO,GAAG3hB,EAAE6qD,IAAIz6C,SAAS7O,IAAIzD,EAAEyD,GAAG3J,EAAE2J,EAAG,IAAGsoD,GAAGtoD,EAAE,CAACA,EAAEqoD,YAAYtvD,YAAYqvD,GAAGpoD,EAAE,CAACA,EAAEqoD,YAAYtvD,WAAWw1C,EAAEhyC,GAAGA,GAAG0O,EAAEwwC,OAAOl/C,EAAE,MAAM2qC,EAAEsI,EAAE15B,GAAG,IAAIlV,EAAEsmC,GAAGsR,KAAK,MAAMnjC,EAAEu/B,GAAG2C,QAAO,KAAM,GAAG32C,EAAEkV,EAAE7K,GAAGrK,GAAGsmC,EAAE,CAAC,IAAIlnC,EAAEw1C,GAAGjjC,KAAK,KAAK,MAAM3R,EAAEgY,KAAK5Y,EAAEA,EAAE,CAAE,IAAG,OAAOY,GAAG,mBAAmBA,EAAEgY,KAAKg8B,GAAGtkC,QAAQ1P,GAAGyU,EAAEuD,MAAK,IAAKhY,GAAG,CAAE,IAAGvK,EAAEe,MAAMm3C,IAAQE,GAAIkM,IAAK,SAAS36C,EAAEuuC,GAAG,GAAG50C,MAAMkD,KAAK0xC,EAAEqN,GAAGqL,kBAAkBp4C,SAAStS,GAAG,MAAMyD,EAAEzD,IAAIgyC,EAAEqN,GAAG4N,kBAAkBjtD,IAAI,CAAtG,CAAwG2qC,EAAEshB,KAAKO,SAASxa,GAAG+Z,GAAGtoD,EAAE,CAACA,EAAEqoD,YAAYtvD,YAAYqvD,GAAGpoD,EAAE,CAACA,EAAEqoD,YAAYtvD,WAAWiH,EAAE0oD,YAAY1oD,EAAE05C,WAAWzuC,EAAEwwC,OAAOz7C,EAAE05C,SAAU,GAAG,IAA7qC,SAASt5B,IAAI,OAAO/pB,EAAEU,OAAO69C,GAAGtkC,QAAQja,EAAEud,OAAFvd,CAAU4U,EAAE0wC,WAAW/iC,KAAKwH,GAAGw0B,GAAGtkC,SAAS,CAA6lC8P,GAAIxH,MAAK,KAAM,IAAI5Y,EAAEzD,EAAEA,EAAE+Y,EAAEi5B,EAAEvuC,EAAEY,GAAGiO,SAAS0/B,IAAIhyC,EAAEq/C,GAAGqL,iBAAiBwC,SAASlb,IAAIoa,GAAGpsD,EAAEgyC,EAAEvuC,EAAEuuC,GAAG6N,QAAQp8C,EAAEuuC,GAAG4N,QAAS,GAAG,GAAE,CAAp4C,CAAs4Cn8C,EAAEzD,EAAE2qC,EAAEj8B,GAAG4N,MAAMjY,EAAG,GAAE,CAAC,SAASiJ,GAAG7J,EAAEuuC,GAAG,MAAMhyC,EAAE,CAAC+sD,IAAI,GAAG17B,IAAI,GAAGq7B,OAAO,IAAI,IAAIh+C,EAAE,IAAIA,KAAKjL,EAAEuuC,EAAEtjC,IAAI1O,EAAE+sD,IAAIlyD,KAAK6T,GAAG,IAAIA,KAAKsjC,EAAE,CAAC,MAAMj5B,EAAEtV,EAAEiL,GAAG5U,EAAEk4C,EAAEtjC,GAAG,GAAGqK,EAAE,CAAC,MAAMtV,EAAE,CAACoI,KAAK6C,EAAEy+C,IAAIrzD,EAAE6yD,UAAS,EAAGI,IAAI,GAAG17B,IAAI,GAAGq7B,OAAO,IAAI,GAAG,IAAI3zC,EAAE8mC,QAAQG,SAAS,KAAK,IAAIlmD,EAAE+lD,QAAQG,SAAS,KAAKjnC,EAAE8mC,QAAQqB,OAAOpnD,EAAE+lD,QAAQqB,OAAO/C,GAAG16C,EAAEkpD,UAAS,EAAG3sD,EAAE0sD,OAAO7xD,KAAK4I,OAAO,CAAC,MAAMuuC,EAAEj5B,EAAEmnC,UAAUxxC,EAAE5U,EAAEomD,UAAU,IAAIvV,EAAE,IAAIA,KAAKqH,EAAEtjC,EAAEi8B,IAAIlnC,EAAEspD,IAAIlyD,KAAK8vC,GAAG,IAAIA,KAAKj8B,EAAE,CAAC,MAAM1O,EAAEgyC,EAAErH,GAAG5xB,EAAErK,EAAEi8B,GAAG3qC,EAAEA,EAAEiN,MAAM8L,EAAE9L,KAAKxJ,EAAEipD,OAAO7xD,KAAKke,GAAGtV,EAAE4tB,IAAIx2B,KAAKke,EAAE,EAAEtV,EAAEspD,IAAIvyD,OAAO,GAAGiJ,EAAE4tB,IAAI72B,OAAO,GAAGiJ,EAAEipD,OAAOlyD,OAAO,IAAIwF,EAAE0sD,OAAO7xD,KAAK4I,EAAE,CAAC,MAAMzD,EAAEqxB,IAAIx2B,KAAK,CAAC6T,EAAE5U,GAAG,CAAC,OAAOkG,CAAC,CAAC,SAASosD,GAAG3oD,EAAEuuC,EAAEhyC,EAAE0O,GAAG,MAAMqK,EAAEtV,EAAE47C,GAAG+N,kBAAkBpb,EAAEhyC,EAAEggD,QAAQ,CAACA,QAAQhgD,EAAEggD,QAAQ4K,cAAc5qD,EAAEkhD,MAAM,CAAC0J,cAAc5qD,EAAEkhD,OAAO,OAAOxyC,EAAE4D,SAAS7O,GAAGopD,GAAG9zC,EAAEtV,KAAKsV,CAAC,CAAC,SAAS8zC,GAAGppD,EAAEuuC,GAAGvuC,EAAE4pD,YAAYrb,EAAEnmC,KAAKmmC,EAAEgO,QAAQ,CAACqD,OAAOrR,EAAEqR,OAAO0H,WAAW/Y,EAAEsO,OAAO,CAAC,SAASiM,GAAG9oD,EAAEuuC,EAAEhyC,GAAG,MAAM0O,EAAE,CAAC,EAAE,OAAO8T,EAAEwvB,EAAE0Y,iBAAiB,GAAGp4C,SAAS7O,IAAI,MAAMuuC,EAAEhyC,EAAEypD,YAAYhmD,GAAG,IAAIsV,EAAEi5B,EAAEgO,QAAQ,MAAMlmD,EAAE+vD,GAAGC,GAAG/wC,GAAGA,GAAG,IAAG,GAAG,IAAKi5B,EAAE4Y,cAAc7xC,GAAG,iBAAiBA,GAAE,GAAI4xB,EAAE,GAAG,IAAI,IAAIlnC,EAAE,EAAEA,EAAEuuC,EAAE8Y,WAAWtwD,SAASiJ,EAAE,CAAC,MAAMzD,EAAEgyC,EAAE/jC,MAAM+jC,EAAE8Y,WAAWrnD,IAAIsV,EAAE/Y,EAAEggD,QAAQ,IAAI37C,EAAEwlD,GAAG7pD,EAAE6L,KAAKkN,IAAI/Y,EAAEqjD,SAASrjD,EAAE+qD,YAAW,EAAGhyC,GAAG,iBAAiBA,GAAE,GAAI4xB,EAAE9vC,KAAKwJ,EAAE,CAACqK,EAAEjL,GAAGsmD,GAAGtmD,EAAE3J,EAAE6wC,EAAG,IAAGj8B,CAAC,CAAC,SAAS+9C,IAAIhB,OAAOzZ,GAAGhyC,EAAE0O,GAAG,MAAMqK,EAAErK,EAAE2wC,GAAGqL,iBAAiB,IAAI,IAAIjnD,EAAE,EAAEA,EAAEsV,EAAEve,SAASiJ,EAAE,CAAC,MAAM3J,EAAEif,EAAEtV,GAAGknC,EAAEj8B,EAAE+6C,YAAY3vD,GAAGk4C,EAAEsb,WAAW,WAAW3iB,EAAE,IAAI,IAAIlnC,EAAE,EAAEA,EAAEknC,EAAEmgB,WAAWtwD,SAASiJ,EAAE,CAAC,MAAMuuC,EAAErH,EAAEmgB,WAAWrnD,GAAGiL,EAAEi8B,EAAE18B,MAAM+jC,GAAGgO,QAAQjnC,EAAE,iBAAiBrK,EAAEA,EAAE,IAAI8T,EAAE9T,GAAG1T,KAAK,KAAK,IAAI,GAAGgF,EAAElG,GAAG,CAAC,MAAM2J,EAAEzD,EAAElG,GAAGomD,UAAUnnC,GAAGtV,IAAIA,EAAEoI,KAAKmmC,SAAShyC,EAAElG,GAAGomD,UAAUnnC,GAAG/Y,EAAElG,GAAGomD,UAAUlO,GAAGvuC,EAAE,CAAC,CAAC,CAAC,oBAAoBwL,WAAW,SAASmD,KAAKnD,UAAUC,aAAa,oBAAoBkD,KAAKnD,UAAUC,YAAYzL,EAAE8pD,mBAAmB9pD,aAAaA,EAAE8pD,mBAAmB,GAAG/oD,OAAOyK,UAAUC,UAAUf,MAAM,kBAAkB,GAAG,MAAM6jC,EAAEsb,YAAW,EAAG,CAAC,MAAME,GAAG,gBAAAC,CAAiBhqD,EAAEiL,GAAGsjC,EAAEvuC,GAAG6O,SAAS0/B,IAAI,GAAG,OAAOvuC,EAAEuuC,GAAG,CAAC,IAAIj5B,EAAEtV,EAAEuuC,GAAGjlC,MAAM,KAAKkF,KAAI,CAAExO,EAAEuuC,KAAK,MAAMtjC,GAAGjL,EAAEA,EAAE2B,QAAQD,QAAQ,eAAe,IAAI4T,EAAE,MAAM3G,KAAK1D,GAAGA,EAAEP,MAAM,cAAc,GAAGpB,MAAM,KAAK2B,EAAE,OAAOm7C,GAAGn7C,EAAEqK,GAAG,KAAK,KAAK3G,KAAK3O,GAAG,KAAK2O,KAAK3O,GAAG,OAAO2O,KAAK3O,GAAGzD,EAAE+Y,GAAG,IAAIi5B,EAAG,IAAGl4C,EAAEif,EAAE1B,QAAQ,GAAGvd,EAAEwmD,MAAM,MAAM,IAAIxL,GAAEmO,OAAO,sCAAsClqC,EAAEzG,SAAS7O,IAAI,GAAGA,EAAEy9C,KAAK,MAAM,IAAIpM,GAAEmO,OAAO,wDAAwD,IAAIx/C,EAAEu8C,QAAQ,MAAM,IAAIlL,GAAEmO,OAAO,uDAAwD,IAAGv0C,EAAEsjC,GAAG+X,GAAG/X,EAAEl4C,EAAEif,EAAE,CAAE,GAAE,CAAC,MAAA20C,CAAOjqD,GAAG,MAAMzD,EAAER,KAAK6/C,GAAG7/C,KAAKysD,KAAK0B,aAAanuD,KAAKysD,KAAK0B,aAAaj/C,EAAElP,KAAKysD,KAAK0B,aAAalqD,GAAGA,EAAE,MAAMsV,EAAE/Y,EAAEssD,UAAUxyD,EAAE,CAAC,EAAE,IAAI6wC,EAAE,CAAC,EAAE,OAAO5xB,EAAEzG,SAAS7O,IAAIiL,EAAE5U,EAAE2J,EAAEwoD,KAAK0B,cAAchjB,EAAElnC,EAAEwoD,KAAKO,SAAS,CAAC,EAAE/oD,EAAEgqD,iBAAiB3zD,EAAE6wC,EAAG,IAAG3qC,EAAEm9C,UAAUxS,EAAEohB,GAAG/rD,EAAE,CAACA,EAAE4tD,WAAW5tD,EAAEA,EAAE8rD,YAAYtvD,YAAYqvD,GAAG7rD,EAAE,CAACA,EAAE4tD,WAAW5tD,EAAEA,EAAE8rD,YAAYtvD,UAAUgD,KAAKysD,KAAKtB,QAAQ3Y,EAAErH,GAAGA,GAAG3qC,EAAEmsD,YAAYna,EAAErH,GAAGnrC,IAAI,CAAC,OAAAquD,CAAQpqD,GAAG,OAAOjE,KAAKysD,KAAKe,eAAejX,GAAGv2C,KAAKysD,KAAKe,gBAAgB1X,GAAG7xC,GAAGjE,IAAI,EAAE,SAASsuD,GAAGrqD,EAAEuuC,GAAG,IAAIhyC,EAAEyD,EAAEsqD,WAAW,OAAO/tD,IAAIA,EAAEyD,EAAEsqD,WAAW,IAAIC,GAAG,YAAY,CAACC,OAAO,GAAG7N,UAAU38C,EAAEioD,YAAY1Z,IAAIhyC,EAAE2b,QAAQ,GAAG+xC,OAAO,CAACQ,QAAQ,UAAUluD,EAAEoN,MAAM,UAAU,CAAC,SAAS+gD,GAAG1qD,GAAG,OAAOA,GAAG,mBAAmBA,EAAE2qD,SAAS,CAAC,SAASC,GAAG5qD,GAAG,OAAOm3C,IAAG,WAAY,OAAO1C,GAAG8E,YAAW,EAAGv5C,GAAI,GAAE,CAAC,SAAS6qD,KAAK,IAAI7qD,EAAE,OAAOwL,UAAUs/C,eAAe,WAAWn8C,KAAKnD,UAAUC,aAAa,iBAAiBkD,KAAKnD,UAAUC,YAAYkxC,UAAUgO,UAAU,IAAIt6C,SAAQ,SAAUk+B,GAAG,IAAIhyC,EAAE,WAAW,OAAOogD,UAAUgO,YAAYhU,QAAQpI,EAAE,EAAEvuC,EAAE+hC,YAAYxlC,EAAE,KAAKA,GAAI,IAAGo6C,SAAQ,WAAY,OAAO3V,cAAchhC,EAAG,IAAGqQ,QAAQC,SAAS,CAAu1E,SAASy6C,GAAG/qD,GAAG,IAAIuuC,EAAEA,GAAGvuC,EAAEkf,KAAKqvB,GAAGtjC,EAAE5U,EAAEk4C,GAAGj5B,EAAEjf,GAAGk4C,GAAGvuC,EAAEgrD,MAAMzc,KAAK,SAASl4C,EAAE2J,GAAG,OAAOuuC,IAAI,IAAIl4C,EAAE2J,EAAEuuC,GAAGrH,EAAE7wC,EAAEgD,MAAM,OAAOhD,EAAE8sB,KAAK+jB,EAAEA,GAAG,mBAAmBA,EAAEtuB,KAAKsuB,EAAEtuB,KAAK3N,EAAEqK,GAAG/Y,EAAE2qC,GAAG72B,QAAQu7B,IAAI1E,GAAGtuB,KAAK3N,EAAEqK,GAAGrK,EAAEi8B,EAAC,CAAE,CAAC,OAAO7wC,EAAEk4C,EAAFl4C,EAAM,CAAC,SAAS40D,GAAGjrD,EAAEuuC,EAAEhyC,GAAG,IAAI0O,EAAExP,UAAU1E,OAAO,GAAGkU,EAAE,EAAE,MAAM,IAAIomC,GAAE0M,gBAAgB,qBAAqB,IAAI,IAAIzoC,EAAE,IAAI7d,MAAMwT,EAAE,KAAKA,GAAGqK,EAAErK,EAAE,GAAGxP,UAAUwP,GAAwB,OAArB1O,EAAE+Y,EAAEzB,MAAuB,CAAC7T,EAAZ6uC,EAAEv5B,GAAc/Y,EAAE,CAAC,SAAS2uD,GAAGlrD,EAAEuuC,EAAEhyC,EAAE0O,EAAEqK,GAAG,OAAOs/B,GAAGtkC,UAAUsI,MAAK,KAAM,MAAMviB,EAAEo+C,GAAGoH,WAAWpH,GAAGvN,EAAElnC,EAAEy5C,mBAAmBlL,EAAEhyC,EAAEyD,EAAE05C,UAAUzuC,GAAGrK,EAAE,CAACo5C,MAAM9S,EAAE2U,UAAUxlD,GAAG,GAAG4U,EAAEi8B,EAAEyU,SAAS1wC,EAAE0wC,cAAc,IAAIzU,EAAE73B,SAASrP,EAAEm1C,OAAOwE,eAAe,CAAC,CAAC,MAAM1uC,GAAG,OAAOA,EAAE7C,OAAO+oC,EAAEyI,cAAc55C,EAAE65C,YAAY75C,EAAEm1C,OAAOwE,eAAe,GAAGz5C,QAAQoM,KAAK,4BAA4BtM,EAAE85C,SAAS95C,EAAE+5C,OAAOnhC,MAAK,IAAKsyC,GAAGlrD,EAAEuuC,EAAEhyC,EAAE,KAAK+Y,MAAMmjC,GAAGxtC,EAAE,CAAC,MAAMwjC,EAAEe,EAAEl6B,GAAG,IAAI8K,EAAEquB,GAAG+J,KAAK,MAAM/5C,EAAEm2C,GAAG2C,QAAO,KAAM,GAAGn3B,EAAE9K,EAAEzY,KAAKqqC,EAAEA,GAAG9mB,EAAE,GAAGquB,EAAE,CAAC,IAAIzuC,EAAEw1C,GAAGjjC,KAAK,KAAK,MAAM6N,EAAExH,KAAK5Y,EAAEA,EAAE,KAAK,mBAAmBogB,EAAElB,MAAM,mBAAmBkB,EAAE4qC,QAAQ5qC,EAAE2qC,GAAG3qC,GAAI,GAAExf,GAAG,OAAOwf,GAAG,mBAAmBA,EAAExH,KAAKg8B,GAAGtkC,QAAQ8P,GAAGxH,MAAM5Y,GAAGknC,EAAE/Q,OAAOn2B,EAAEy4C,GAAG,IAAIpH,GAAE8Z,gBAAgB,iEAAiE1sD,EAAEma,MAAK,IAAKwH,KAAKxH,MAAM5Y,IAAIiL,GAAGi8B,EAAEse,WAAWte,EAAE+S,YAAYrhC,MAAK,IAAK5Y,OAAO6Y,OAAO7Y,IAAIknC,EAAEme,QAAQrlD,GAAGy4C,GAAGz4C,KAAM,GAAE,CAAC,SAASorD,GAAGprD,EAAEuuC,EAAEtjC,GAAG,MAAMqK,EAAE/Y,EAAEyD,GAAGA,EAAErG,QAAQ,CAACqG,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEiL,IAAIjL,EAAEsV,EAAEle,KAAKm3C,GAAG,OAAOj5B,CAAC,CAAC,MAAM+1C,GAAG,CAAChjD,MAAM,SAASD,KAAK,yBAAyBkjD,MAAM,EAAEj8C,OAAO,SAASrP,GAAG,MAAM,IAAIA,EAAE,KAAA2J,CAAM4kC,GAAG,MAAMhyC,EAAEyD,EAAE2J,MAAM4kC,IAAIkN,OAAOxwC,GAAG1O,EAAE+Y,EAAE,CAAC,EAAEjf,EAAE,GAAG,SAAS6wC,EAAElnC,EAAEuuC,EAAEhyC,GAAG,MAAM0O,EAAE6F,GAAG9Q,GAAGY,EAAE0U,EAAErK,GAAGqK,EAAErK,IAAI,GAAGwjC,EAAE,MAAMzuC,EAAE,EAAE,iBAAiBA,EAAE,EAAEA,EAAEjJ,OAAOqpB,EAAEmuB,EAAE,EAAE9vC,EAAE,IAAIlC,EAAEgvD,UAAUnrC,EAAEorC,QAAQjd,EAAEkd,UAAUhd,EAAEoT,WAAW4E,GAAGzmD,GAAG4/C,QAAQx/B,GAAG7jB,EAAEqjD,QAAuF,OAA5Eh/C,EAAExJ,KAAKqH,GAAGA,EAAE2oD,cAAc/wD,EAAEe,KAAKqH,GAAGgwC,EAAE,GAAGvH,EAAE,IAAIuH,EAAEzuC,EAAE,GAAGA,EAAErG,MAAM,EAAE80C,EAAE,GAAGF,EAAE,EAAEhyC,GAAUqE,EAAEkgD,MAAK,CAAE9gD,EAAEuuC,IAAIvuC,EAAEwrD,QAAQjd,EAAEid,UAAU/sD,CAAC,CAAC,MAAMmC,EAAEsmC,EAAEj8B,EAAEq0C,WAAW/C,QAAQ,EAAEtxC,EAAEq0C,YAAYhqC,EAAE,OAAO,CAAC1U,GAAG,IAAI,MAAMZ,KAAKiL,EAAEkxC,QAAQjV,EAAElnC,EAAEu8C,QAAQ,EAAEv8C,GAAG,SAASyuC,EAAEF,GAAG,MAAMhyC,EAAEgyC,EAAEsR,MAAMr1C,MAAM,OAAOjO,EAAEgvD,UAAU,IAAIhd,EAAEsR,MAAM,CAACr1C,MAAMjO,EAAEiM,OAAOyC,EAAEsjC,EAAEsR,MAAMr3C,MAAM8M,EAAE/Y,EAAEivD,QAAQ,CAACzwD,KAAK,IAAIkQ,EAAElQ,KAAK,EAAEkQ,EAAElQ,KAAKigD,MAAMoQ,GAAGngD,EAAE+vC,MAAM/vC,EAAEgwC,UAAUj7C,EAAE8nD,QAAQ9nD,EAAE6nD,QAAQvyC,GAAG2lC,WAAU,EAAGC,MAAMkQ,GAAGngD,EAAEiwC,MAAMjwC,EAAEkwC,UAAUn7C,EAAE6nD,QAAQ7nD,EAAE8nD,QAAQxyC,GAAG6lC,WAAU,MAAO5M,EAAE,IAAItjC,EAAEqK,CAAC,CAAC,MAAM8K,EAAE,IAAI7jB,EAAEk/C,OAAO,IAAIxwC,EAAEq0C,WAAW1+C,EAAEu7C,QAAQ9lD,EAAEkpD,kBAAkB,SAASv/C,GAAG,MAAMuuC,EAAEj5B,EAAExE,GAAG9Q,IAAI,OAAOuuC,GAAGA,EAAE,EAAE,GAAGv8B,MAAMhS,GAAGzD,EAAEyV,MAAMy8B,EAAEzuC,IAAI6/C,MAAM7/C,GAAGzD,EAAEsjD,MAAMpR,EAAEzuC,IAAI,UAAA0/C,CAAWnR,GAAG,MAAMid,QAAQvgD,EAAEsgD,UAAUj2C,EAAEm2C,UAAUp1D,GAAGk4C,EAAEsR,MAAMr1C,MAAM,OAAI8K,EAAgC/Y,EAAEmjD,WAAWjR,EAAEF,IAAI31B,MAAMrc,GAAGA,GAAG,SAASA,GAAG,MAAM+Y,EAAEzc,OAAOwW,OAAO9S,EAAE,CAAC6jD,SAAS,CAAC/mD,MAAM,SAASic,GAAG,MAAMA,EAAE/Y,EAAE6jD,SAASgL,GAAG91C,EAAEi5B,EAAEf,QAAQxtC,EAAE8nD,QAAQ9nD,EAAE6nD,QAAQ58C,IAAIsjC,EAAEqR,OAAOrjD,EAAE6jD,SAAS7jD,EAAEuS,IAAInV,MAAM,EAAEtD,GAAG0K,OAAOwtC,EAAEf,QAAQxtC,EAAE6nD,QAAQ7nD,EAAE8nD,QAAQ78C,IAAI1O,EAAE6jD,UAAU,GAAGwH,mBAAmB,CAAC,KAAAvuD,CAAMk1C,EAAEj5B,GAAG/Y,EAAEqrD,mBAAmBwD,GAAG7c,EAAEvuC,EAAE8nD,QAAQ78C,GAAGqK,EAAE,GAAGgqC,WAAW,CAACh/C,IAAI,IAAI/D,EAAE+iD,YAAYxwC,IAAI,CAAC,GAAAxO,GAAM,MAAMN,EAAEzD,EAAEuS,IAAI,OAAO,IAAIzY,EAAE2J,EAAE,GAAGA,EAAErG,MAAM,EAAEtD,EAAE,GAAGgD,MAAM,CAACiH,IAAI,IAAI/D,EAAElD,SAAS,OAAOic,CAAC,CAAja,CAAma/Y,KAAzdA,EAAEmjD,WAAWnR,EAAgd,GAAG,OAAOnuB,CAAC,EAAE,GAAG,SAASsrC,GAAG1rD,EAAEzD,EAAE0O,EAAEqK,GAAG,OAAOrK,EAAEA,GAAG,CAAC,EAAEqK,EAAEA,GAAG,GAAGi5B,EAAEvuC,GAAG6O,SAAS0/B,IAAI,GAAGrH,EAAE3qC,EAAEgyC,GAAG,CAAC,IAAIl4C,EAAE2J,EAAEuuC,GAAG3tC,EAAErE,EAAEgyC,GAAG,GAAG,iBAAiBl4C,GAAG,iBAAiBuK,GAAGvK,GAAGuK,EAAE,CAAC,MAAMZ,EAAEovC,EAAE/4C,GAAG2J,IAAIovC,EAAExuC,GAAGqK,EAAEqK,EAAEi5B,GAAGhyC,EAAEgyC,GAAG,WAAWvuC,EAAE0rD,GAAGr1D,EAAEuK,EAAEqK,EAAEqK,EAAEi5B,EAAE,KAAKl4C,IAAIuK,IAAIqK,EAAEqK,EAAEi5B,GAAGhyC,EAAEgyC,GAAG,MAAMl4C,IAAIuK,IAAIqK,EAAEqK,EAAEi5B,GAAGhyC,EAAEgyC,GAAG,MAAMtjC,EAAEqK,EAAEi5B,QAAG,CAAO,IAAGA,EAAEhyC,GAAGsS,SAAS0/B,IAAIrH,EAAElnC,EAAEuuC,KAAKtjC,EAAEqK,EAAEi5B,GAAGhyC,EAAEgyC,GAAI,IAAGtjC,CAAC,CAAC,MAAM0gD,GAAG,CAACtjD,MAAM,SAASD,KAAK,kBAAkBkjD,MAAM,EAAEj8C,OAAOrP,IAAG,IAAKA,EAAE,KAAA2J,CAAM4kC,GAAG,MAAMhyC,EAAEyD,EAAE2J,MAAM4kC,IAAI+Q,WAAWr0C,GAAG1O,EAAEk/C,OAAOnmC,EAAE,IAAI/Y,EAAE,MAAAmhD,CAAO19C,GAAG,MAAMsV,EAAEm/B,GAAGuF,OAAO4R,SAASv1D,EAAEw1D,SAASjrD,EAAEkrD,SAASrd,GAAGn5B,EAAE3L,MAAM4kC,GAAGyN,KAAK,OAAOh8C,EAAEjF,MAAM,IAAI,MAAM,GAAG6F,EAAEq7C,OAAOpK,GAAG,MAAM,OAAOv8B,EAAE8gC,SAAS,aAAY,IAAKh2B,EAAEpgB,KAAI,GAAI,IAAI,MAAM,GAAGY,EAAEq7C,OAAOpK,IAAIpD,EAAEwN,OAAOpK,GAAG,MAAM,OAAOv8B,EAAE8gC,SAAS,aAAY,IAAKh2B,EAAEpgB,KAAI,GAAI,IAAI,SAAS,GAAG3J,EAAE4lD,OAAOpK,GAAG,MAAM,OAAOv8B,EAAE8gC,SAAS,aAAY,IAAKh2B,EAAEpgB,KAAI,GAAI,IAAI,cAAc,GAAG3J,EAAE4lD,OAAOpK,GAAG,MAAM,OAAOv8B,EAAE8gC,SAAS,aAAY,IAAK,SAASp2C,GAAG,OAAOvB,EAAEuB,EAAEg6C,MAAMh6C,EAAEwI,MAAM,IAAI,CAAzC,CAA2CxI,KAAI,GAAI,OAAOzD,EAAEmhD,OAAO19C,GAAG,SAASogB,EAAEpgB,GAAG,MAAMuuC,EAAEkG,GAAGuF,MAAM1kC,EAAEtV,EAAE4O,MAAM,SAAS5O,EAAEuuC,GAAG,MAAM,WAAWA,EAAExzC,KAAKwzC,EAAE3/B,KAAK2/B,EAAE3/B,MAAM2/B,EAAEvV,OAAOxqB,IAAIxO,EAAE6hD,WAAW,CAA/E,CAAiF52C,EAAEjL,GAAG,IAAIsV,EAAE,MAAM,IAAI3d,MAAM,gBAAgB,MAAM,YAAYqI,EAAE,QAAQA,EAAEjF,MAAM,QAAQiF,EAAEjF,KAAK,IAAIiF,EAAE4O,KAAK0G,GAAG,IAAItV,IAAIjF,OAAOiF,EAAEg5B,OAAO,IAAIh5B,EAAEg5B,SAASh5B,EAAE4O,OAAO5O,EAAE4O,KAAK,IAAI5O,EAAE4O,OAAO,SAAS5O,EAAEuuC,EAAEhyC,GAAG,MAAM,QAAQgyC,EAAExzC,KAAKsV,QAAQC,QAAQ,IAAItQ,EAAEk+C,QAAQ,CAAClE,MAAMzL,EAAEyL,MAAMprC,KAAKrS,EAAEwlD,MAAM,aAAa,CAA5G,CAA8GxlD,EAAEyD,EAAEsV,GAAGsD,MAAMwH,IAAI,MAAM3hB,EAAE6W,EAAE9G,KAAI,CAAEjS,EAAE+Y,KAAK,MAAM7W,EAAE2hB,EAAE9K,GAAGQ,EAAE,CAACsL,QAAQ,KAAK8wB,UAAU,MAAM,GAAG,WAAWlyC,EAAEjF,KAAK1E,EAAE4lD,KAAKp/C,KAAKiZ,EAAEvZ,EAAEkC,EAAE8vC,QAAQ,GAAG,QAAQvuC,EAAEjF,WAAM,IAAS0D,EAAE,CAAC,MAAMpI,EAAEuK,EAAEq7C,KAAKp/C,KAAKiZ,EAAEvZ,EAAEyD,EAAEg5B,OAAO1jB,GAAGi5B,GAAG,MAAMhyC,GAAG,MAAMlG,IAAIkG,EAAElG,EAAE2J,EAAE4O,KAAK0G,GAAG/Y,EAAE0O,EAAE22C,UAAUzyC,EAAEnP,EAAEg5B,OAAO1jB,GAAGrK,EAAEsxC,QAAQhgD,GAAG,KAAK,CAAC,MAAM0O,EAAEygD,GAAGjtD,EAAEuB,EAAEg5B,OAAO1jB,IAAIjf,EAAEo4C,EAAEwN,KAAKp/C,KAAKiZ,EAAE7K,EAAE1O,EAAEkC,EAAE8vC,GAAG,GAAGl4C,EAAE,CAAC,MAAMk4C,EAAEvuC,EAAEg5B,OAAO1jB,GAAGzc,OAAO+V,KAAKvY,GAAGwY,SAAS7O,IAAIknC,EAAEqH,EAAEvuC,GAAGuuC,EAAEvuC,GAAG3J,EAAE2J,GAAGmP,EAAEo/B,EAAEvuC,EAAE3J,EAAE2J,GAAI,GAAE,CAAC,CAAC,OAAO8V,CAAE,IAAG,OAAOvZ,EAAEmhD,OAAO19C,GAAG4Y,MAAK,EAAGi4B,SAAStC,EAAE+P,QAAQ/hD,EAAEohD,YAAY1yC,EAAE2yC,WAAWvnD,MAAM,IAAI,IAAI4U,EAAE,EAAEA,EAAEqK,EAAEve,SAASkU,EAAE,CAAC,MAAM5U,EAAEkG,EAAEA,EAAE0O,GAAGqK,EAAErK,GAAGi8B,EAAEzoC,EAAEwM,GAAG,MAAM5U,EAAE6wC,EAAE9lB,SAAS8lB,EAAE9lB,QAAQmtB,EAAEtjC,IAAIi8B,EAAEgL,WAAWhL,EAAEgL,UAAU,QAAQlyC,EAAEjF,MAAMqlB,EAAEnV,GAAGjL,EAAEg5B,OAAO/tB,GAAG5U,EAAE,CAAC,MAAM,CAACw6C,SAAStC,EAAE+P,QAAQ/hD,EAAEohD,YAAY1yC,EAAE2yC,WAAWvnD,EAAG,IAAGwiB,OAAO7Y,IAAIvB,EAAEoQ,SAAS0/B,GAAGA,EAAEntB,SAASmtB,EAAEntB,QAAQphB,KAAKqQ,QAAQE,OAAOvQ,KAAM,GAAE,CAAC,SAASvB,EAAEuB,EAAEuuC,EAAEj5B,GAAG,OAAO/Y,EAAEsjD,MAAM,CAAC7F,MAAMh6C,EAAEg5B,QAAO,EAAG6mB,MAAM,CAACr1C,MAAMS,EAAEzC,MAAM+lC,GAAG5nC,MAAM2O,IAAIsD,MAAK,EAAGqa,OAAO12B,KAAK6jB,EAAE,CAACrlB,KAAK,SAAS6T,KAAKrS,EAAEy9C,MAAMh6C,IAAI4Y,MAAM3N,GAAGA,EAAE0yC,YAAY,EAAEttC,QAAQE,OAAOtF,EAAE4lC,SAAS,IAAIt0C,EAAExF,OAAOue,EAAE,CAACu7B,SAAS,GAAG8M,YAAY,EAAEC,gBAAW,GAAQn/C,EAAEuB,EAAE,IAAIuuC,EAAEyM,MAAMz+C,EAAEA,EAAExF,OAAO,GAAGkkD,WAAU,GAAI3lC,MAAM,CAAC,GAAG,OAAOA,CAAC,KAAK,SAASy2C,GAAG/rD,EAAEuuC,EAAEhyC,GAAG,IAAI,IAAIgyC,EAAE,OAAO,KAAK,GAAGA,EAAE3/B,KAAK7X,OAAOiJ,EAAEjJ,OAAO,OAAO,KAAK,MAAMkU,EAAE,GAAG,IAAI,IAAIqK,EAAE,EAAEjf,EAAE,EAAEif,EAAEi5B,EAAE3/B,KAAK7X,QAAQV,EAAE2J,EAAEjJ,SAASue,EAAE,IAAI+qC,GAAG9R,EAAE3/B,KAAK0G,GAAGtV,EAAE3J,MAAM4U,EAAE7T,KAAKmF,EAAEyyC,EAAET,EAAEvV,OAAO1jB,IAAIi5B,EAAEvV,OAAO1jB,MAAMjf,GAAG,OAAO4U,EAAElU,SAASiJ,EAAEjJ,OAAOkU,EAAE,IAAI,CAAC,MAAMjL,GAAG,OAAO,IAAI,CAAC,CAAC,MAAMgsD,GAAG,CAAC3jD,MAAM,SAASijD,OAAO,EAAEj8C,OAAOrP,IAAG,CAAE2J,MAAM4kC,IAAI,MAAMhyC,EAAEyD,EAAE2J,MAAM4kC,GAAG,MAAM,IAAIhyC,EAAE2hD,QAAQl+C,IAAI,IAAIA,EAAE+hD,MAAM,OAAOxlD,EAAE2hD,QAAQl+C,GAAG,MAAMuuC,EAAEwd,GAAG/rD,EAAE4O,KAAK5O,EAAEg6C,MAAMiS,OAAO,UAAUjsD,EAAE+hD,OAAO,OAAOxT,EAAEqG,GAAGtkC,QAAQi+B,GAAGhyC,EAAE2hD,QAAQl+C,GAAG4Y,MAAM21B,IAAIvuC,EAAEg6C,MAAMiS,OAAO,CAACr9C,KAAK5O,EAAE4O,KAAKoqB,OAAO,UAAUh5B,EAAE+hD,MAAM/S,EAAET,GAAGA,GAAGA,IAAG,EAAGmP,OAAO19C,IAAI,QAAQA,EAAEjF,OAAOiF,EAAEg6C,MAAMiS,OAAO,MAAM1vD,EAAEmhD,OAAO19C,IAAG,KAAM,SAASksD,GAAGlsD,GAAG,QAAQ,SAASA,EAAE,CAAC,MAAMmsD,GAAG,SAASnsD,EAAEuuC,GAAG,IAAIxyC,KAAK,CAAC,MAAMwyC,EAAE,IAAI4d,GAAG,OAAOnsD,GAAG,MAAMA,GAAGiL,EAAEsjC,EAAEvuC,GAAGuuC,CAAC,CAACtjC,EAAElP,KAAKN,UAAU1E,OAAO,CAACse,EAAE,EAAEjc,KAAK4G,EAAEurB,GAAG9vB,UAAU1E,OAAO,EAAEw3C,EAAEvuC,GAAG,CAACqV,EAAE,GAAG,EAAE,SAAS+2C,GAAGpsD,EAAEuuC,EAAEhyC,GAAG,MAAM+Y,EAAE+qC,GAAG9R,EAAEhyC,GAAG,GAAG0T,MAAMqF,GAAG,OAAO,GAAGA,EAAE,EAAE,MAAM3c,aAAa,GAAGuzD,GAAGlsD,GAAG,OAAOiL,EAAEjL,EAAE,CAAC5G,KAAKm1C,EAAEhjB,GAAGhvB,EAAE8Y,EAAE,IAAI,MAAMhf,EAAE2J,EAAEogB,EAAE8mB,EAAElnC,EAAEiL,EAAE,GAAGo1C,GAAG9jD,EAAEyD,EAAE5G,MAAM,EAAE,OAAO/C,EAAE+1D,GAAG/1D,EAAEk4C,EAAEhyC,GAAGyD,EAAEogB,EAAE,CAAChnB,KAAKm1C,EAAEhjB,GAAGhvB,EAAE8Y,EAAE,EAAE+K,EAAE,KAAKnV,EAAE,MAAMohD,GAAGrsD,GAAG,GAAGqgD,GAAG9R,EAAEvuC,EAAEurB,IAAI,EAAE,OAAO2b,EAAEklB,GAAGllB,EAAEqH,EAAEhyC,GAAGyD,EAAEiL,EAAE,CAAC7R,KAAKm1C,EAAEhjB,GAAGhvB,EAAE8Y,EAAE,EAAE+K,EAAE,KAAKnV,EAAE,MAAMohD,GAAGrsD,GAAGqgD,GAAG9R,EAAEvuC,EAAE5G,MAAM,IAAI4G,EAAE5G,KAAKm1C,EAAEvuC,EAAEogB,EAAE,KAAKpgB,EAAEqV,EAAE6xB,EAAEA,EAAE7xB,EAAE,EAAE,GAAGgrC,GAAG9jD,EAAEyD,EAAEurB,IAAI,IAAIvrB,EAAEurB,GAAGhvB,EAAEyD,EAAEiL,EAAE,KAAKjL,EAAEqV,EAAErV,EAAEogB,EAAEpgB,EAAEogB,EAAE/K,EAAE,EAAE,GAAG,MAAMzU,GAAGZ,EAAEiL,EAAE5U,IAAI2J,EAAEogB,GAAGksC,GAAGtsD,EAAE3J,GAAG6wC,GAAGtmC,GAAG0rD,GAAGtsD,EAAEknC,EAAE,CAAC,SAASolB,GAAGtsD,EAAEuuC,GAAG2d,GAAG3d,IAAI,SAASvuC,EAAEuuC,GAAGn1C,KAAKmD,EAAEgvB,GAAGtgB,EAAEmV,EAAE9K,EAAErK,EAAE5U,IAAI+1D,GAAG7d,EAAEhyC,EAAE0O,GAAGqK,GAAGtV,EAAEuuC,EAAEj5B,GAAGjf,GAAG2J,EAAEuuC,EAAEl4C,EAAE,CAAjE,CAAmE2J,EAAEuuC,EAAE,CAA2R,SAASge,GAAGvsD,GAAG,IAAIuuC,EAAE2d,GAAGlsD,GAAG,KAAK,CAACsV,EAAE,EAAE/Y,EAAEyD,GAAG,MAAM,CAAC,IAAAkf,CAAKlf,GAAG,MAAMzD,EAAEd,UAAU1E,OAAO,EAAE,KAAKw3C,GAAG,OAAOA,EAAEj5B,GAAG,KAAK,EAAE,GAAGi5B,EAAEj5B,EAAE,EAAE/Y,EAAE,KAAKgyC,EAAEhyC,EAAE6jB,GAAGigC,GAAGrgD,EAAEuuC,EAAEhyC,EAAEnD,MAAM,GAAGm1C,EAAE,CAACie,GAAGje,EAAEhyC,EAAEgyC,EAAEhyC,EAAE6jB,EAAE9K,EAAE,QAAQ,KAAKi5B,EAAEhyC,EAAE6jB,GAAGmuB,EAAE,CAACie,GAAGje,EAAEhyC,EAAEgyC,EAAEhyC,EAAE6jB,EAAE9K,EAAE,GAAG,KAAK,EAAE,GAAGi5B,EAAEj5B,EAAE,GAAG/Y,GAAG8jD,GAAGrgD,EAAEuuC,EAAEhyC,EAAEgvB,KAAK,EAAE,MAAM,CAAClyB,MAAMk1C,EAAEhyC,EAAE4mB,MAAK,GAAI,KAAK,EAAE,GAAGorB,EAAEhyC,EAAE0O,EAAE,CAACsjC,EAAEj5B,EAAE,EAAEi5B,EAAE,CAACie,GAAGje,EAAEhyC,EAAEgyC,EAAEhyC,EAAE0O,EAAEqK,EAAE,GAAG,QAAQ,CAAC,KAAK,EAAEi5B,EAAEA,EAAEie,GAAG,MAAM,CAACrpC,MAAK,EAAG,EAAE,CAAC,SAASkpC,GAAGrsD,GAAG,IAAIuuC,EAAEhyC,EAAE,MAAM0O,IAAI,QAAQsjC,EAAEvuC,EAAEiL,SAAI,IAASsjC,OAAE,EAAOA,EAAEl5B,IAAI,KAAK,QAAQ9Y,EAAEyD,EAAEogB,SAAI,IAAS7jB,OAAE,EAAOA,EAAE8Y,IAAI,GAAGC,EAAErK,EAAE,EAAE,IAAIA,GAAG,EAAE,IAAI,GAAG,GAAGqK,EAAE,CAAC,MAAMi5B,EAAE,MAAMj5B,EAAE,IAAI,IAAI/Y,EAAE,IAAIyD,GAAGiL,EAAEjL,EAAEsV,GAAGtV,EAAE5G,KAAK6R,EAAE7R,KAAK4G,EAAEurB,GAAGtgB,EAAEsgB,GAAGvrB,EAAEsV,GAAGrK,EAAEqK,GAAG/Y,EAAE+Y,GAAGrK,EAAEsjC,GAAGvuC,EAAEuuC,GAAGhyC,EAAEA,EAAE8Y,EAAEo3C,GAAGlwD,EAAE,CAACyD,EAAEqV,EAAEo3C,GAAGzsD,EAAE,CAAC,SAASysD,IAAIxhD,EAAEjL,EAAEogB,EAAEmuB,IAAI,OAAOvuC,EAAEuuC,EAAE1vC,KAAK4C,IAAIzB,EAAEqV,EAAEk5B,EAAEl5B,GAAGrV,EAAEqV,EAAEk5B,EAAEA,EAAEl5B,EAAE,GAAG,CAAC,CAACzU,EAAEurD,GAAGpzD,UAAU,CAAC,GAAA60B,CAAI5tB,GAAG,OAAOssD,GAAGvwD,KAAKiE,GAAGjE,IAAI,EAAE,MAAA2wD,CAAO1sD,GAAG,OAAOosD,GAAGrwD,KAAKiE,EAAEA,GAAGjE,IAAI,EAAE,OAAA4wD,CAAQ3sD,GAAG,OAAOA,EAAE6O,SAAS7O,GAAGosD,GAAGrwD,KAAKiE,EAAEA,KAAKjE,IAAI,EAAE,CAACwB,KAAK,OAAOgvD,GAAGxwD,KAAK,IAAI,MAAM6wD,GAAG,CAACvkD,MAAM,SAASijD,MAAM,EAAEj8C,OAAOrP,IAAI,MAAMiL,EAAEjL,EAAEy7C,OAAOrzC,KAAKkN,EAAE,IAAI62C,GAAGnsD,EAAE6nD,QAAQ7nD,EAAE8nD,SAAS,MAAM,IAAI9nD,EAAE2J,MAAMtT,IAAI,MAAM6wC,EAAElnC,EAAE2J,MAAMtT,IAAIolD,OAAO76C,GAAGsmC,GAAGoY,WAAW7Q,GAAG7tC,GAAGihD,WAAWzhC,EAAEwhC,SAASnjD,GAAGgwC,EAAE34B,EAAE,IAAIoxB,EAAEwW,OAAO19C,IAAI,MAAMuuC,EAAEvuC,EAAEg6C,MAAMvL,EAAEF,EAAEmX,eAAenX,EAAEmX,aAAa,CAAC,GAAGtlC,EAAEpgB,IAAI,MAAMuuC,EAAE,SAAStjC,KAAK5U,KAAK2J,IAAI,OAAOyuC,EAAEF,KAAKE,EAAEF,GAAG,IAAI4d,GAAE,EAAG1tD,EAAE2hB,EAAE,IAAItK,EAAEsK,EAAE,UAAUrlB,KAAKsa,GAAGrV,EAAE,IAAI0uC,EAAE3vB,GAAG,gBAAgB/e,EAAEjF,KAAK,CAACiF,EAAEwI,OAAO,WAAWxI,EAAEjF,KAAK,CAACiF,EAAE4O,MAAM5O,EAAEg5B,OAAOjiC,OAAO,GAAG,CAAC,GAAGiJ,EAAEg5B,QAAQ,GAAG,MAAMl4B,EAAEd,EAAEg6C,MAAMiS,OAAO,OAAO/kB,EAAEwW,OAAO19C,GAAG4Y,MAAM5Y,IAAI,GAAGzD,EAAEmyC,GAAG,CAAC,WAAWr5B,IAAIq5B,EAAE1uC,EAAEs+C,SAAS7/C,EAAEkuD,QAAQje,GAAG,MAAMH,EAAEwd,GAAGrd,EAAE5tC,GAAGytC,GAAG,QAAQl5B,GAAGS,EAAE62C,QAAQje,IAAIH,GAAGxvB,IAAI,SAAS/e,EAAEuuC,EAAEtjC,EAAEqK,GAAqQi5B,EAAE4N,QAAQttC,SAA5Q,SAAW0/B,GAAG,MAAMl4C,EAAE2J,EAAEuuC,EAAEnmC,MAAM,IAAI,SAAS8+B,EAAElnC,GAAG,OAAO,MAAMA,EAAEuuC,EAAEsT,WAAW7hD,GAAG,IAAI,CAAC,MAAMY,EAAEZ,GAAGuuC,EAAE+Y,YAAY/qD,EAAEyD,GAAGA,EAAE6O,SAAS7O,GAAG3J,EAAEq2D,OAAO1sD,KAAK3J,EAAEq2D,OAAO1sD,IAAIiL,GAAGqK,GAAGzG,SAAQ,CAAE7O,EAAEuuC,KAAK,MAAMhyC,EAAE0O,GAAGi8B,EAAEj8B,EAAEsjC,IAAIl4C,EAAEif,GAAG4xB,EAAE5xB,EAAEi5B,IAAI,IAAI8R,GAAG9jD,EAAElG,KAAK,MAAMkG,GAAGqE,EAAErE,GAAG,MAAMlG,GAAGuK,EAAEvK,GAAI,GAAE,GAAqB,CAAxS,CAA0S+pB,EAAExf,EAAE2tC,EAAExvB,EAAE,MAAM,GAAG2vB,EAAE,CAAC,MAAM1uC,EAAE,CAAC5G,KAAKs1C,EAAEsM,MAAMzvB,GAAGmjB,EAAEwM,OAAOplC,EAAE8X,IAAI5tB,GAAGvB,EAAEmvB,IAAI5tB,EAAE,MAAMvB,EAAEmvB,IAAItY,GAAGQ,EAAE8X,IAAItY,GAAG1U,EAAEu7C,QAAQttC,SAAS7O,GAAGogB,EAAEpgB,EAAEoI,MAAMwlB,IAAItY,KAAK,OAAOtV,CAAE,GAAC,GAAIqV,EAAE,EAAEwqC,OAAOr1C,MAAM+jC,EAAE/lC,MAAMjM,OAAO,IAAI0O,EAAEqK,EAAE,MAAM,CAACi5B,EAAE,IAAI4d,GAAG,QAAQlhD,EAAE1O,EAAEy+C,aAAQ,IAAS/vC,EAAEA,EAAEjL,EAAE6nD,QAAQ,QAAQvyC,EAAE/Y,EAAE2+C,aAAQ,IAAS5lC,EAAEA,EAAEtV,EAAE8nD,SAAQ,EAAGpZ,EAAE,CAACpuC,IAAIN,GAAG,CAACyuC,EAAE,IAAI0d,GAAGnsD,EAAE8O,MAAMovC,QAAQl+C,GAAG,CAACyuC,GAAE,IAAK0d,IAAIQ,QAAQ3sD,EAAE4O,OAAOoD,MAAMqD,EAAEwqC,MAAMxqC,EAAEqqC,WAAWrqC,GAAG,OAAOk5B,EAAEG,GAAG7/B,SAAS7O,IAAI8V,EAAE9V,GAAG,SAASuuC,GAAG,MAAMse,OAAOtwD,GAAGk4C,GAAG,GAAGl4C,EAAE,CAAC,MAAMqE,EAAEZ,IAAI,MAAMuuC,EAAE,SAAStjC,KAAK5U,KAAK2J,IAAI,OAAOzD,EAAEgyC,KAAKhyC,EAAEgyC,GAAG,IAAI4d,GAAE,EAAG1d,EAAE7tC,EAAE,IAAIkV,EAAElV,EAAE,UAAUyU,EAAE0J,GAAG2vB,EAAE1uC,GAAGuuC,GAAG,GAAG3tC,EAAEyU,EAAEjN,MAAM,IAAIwlB,IAAI7O,IAAI1J,EAAE+xC,aAAa,CAAC,GAAG,UAAUpnD,EAAE,CAAC,MAAMzD,EAAE,UAAUyD,GAAGvB,GAAG8vC,EAAEvV,QAAQkO,EAAE2Y,MAAM,IAAItR,EAAEvV,QAAO,IAAK,OAAOkO,EAAElnC,GAAGN,MAAM3D,KAAKN,WAAWmd,MAAM3N,IAAI,GAAG,UAAUjL,EAAE,CAAC,GAAGvB,GAAG8vC,EAAEvV,OAAO,OAAOz8B,EAAEqc,MAAK,EAAGqa,OAAOjzB,MAAMyuC,EAAEke,QAAQ3sD,GAAGiL,KAAK,MAAMjL,EAAEuuC,EAAEvV,OAAO/tB,EAAEgoB,OAAOzkB,IAAI4R,GAAGnV,EAAEgoB,OAAOsb,EAAEvV,OAAOyV,EAAEke,QAAQ3sD,GAAG8V,EAAE62C,QAAQ3sD,EAAE,MAAM,GAAG,eAAeA,EAAE,CAAC,MAAMA,EAAEiL,EAAE1O,EAAEgyC,EAAEvV,OAAO,OAAOh5B,GAAGnH,OAAOwW,OAAOrP,EAAE,CAAC8O,IAAI,CAACxO,IAAI,KAAKwV,EAAE42C,OAAO1sD,EAAEs/C,YAAYt/C,EAAE8O,MAAMwwC,WAAW,CAAC,GAAAh/C,GAAM,MAAMiuC,EAAEvuC,EAAEs/C,WAAW,OAAOxpC,EAAE42C,OAAOne,GAAGA,CAAC,GAAGl1C,MAAM,CAACiH,IAAI,KAAK/D,GAAGkyC,EAAEie,OAAO1sD,EAAEs/C,YAAYt/C,EAAE3G,SAAS,CAAC,OAAO4R,CAAE,GAAE,CAAC6K,EAAE8X,IAAItY,EAAE,CAAC,CAAC,OAAO4xB,EAAElnC,GAAGN,MAAM3D,KAAKN,UAAU,CAAE,IAAGqa,GAAE,GAAI,MAAMy0C,GAAG,WAAAviD,CAAYhI,EAAEuuC,GAAGxyC,KAAKosD,aAAa,CAAC,EAAEpsD,KAAK+wD,MAAM,EAAE,MAAMvwD,EAAEguD,GAAGwC,aAAahxD,KAAKq+C,SAAS7L,EAAE,CAACic,OAAOD,GAAGC,OAAOnQ,UAAS,EAAGsC,UAAUpgD,EAAEogD,UAAUsL,YAAY1rD,EAAE0rD,eAAe1Z,GAAGxyC,KAAK2gD,MAAM,CAACC,UAAUpO,EAAEoO,UAAUsL,YAAY1Z,EAAE0Z,aAAa,MAAMuC,OAAOv/C,GAAGsjC,EAAExyC,KAAK29C,UAAU,CAAC,EAAE39C,KAAK8sD,UAAU,GAAG9sD,KAAK2sD,YAAY,GAAG3sD,KAAKouD,WAAW,CAAC,EAAEpuD,KAAKs9C,MAAM,KAAKt9C,KAAKisD,OAAOjsD,KAAK,MAAMuZ,EAAE,CAAC4kC,YAAY,KAAKC,eAAc,EAAG6S,kBAAkB,KAAK1T,cAAa,EAAG2T,eAAepb,GAAGyI,eAAe,KAAK4S,WAAWrb,GAAGsb,cAAc,KAAKC,YAAW,EAAGzT,eAAe,GAAG,IAAItjD,EAAEif,EAAEglC,eAAe,IAAI1F,IAAI50C,IAAIsV,EAAE23C,eAAejtD,CAAE,IAAGsV,EAAE63C,cAAc,IAAIvY,IAAG,CAAE50C,EAAEuuC,KAAKj5B,EAAE43C,WAAW3e,CAAE,IAAGxyC,KAAKo5C,OAAO7/B,EAAEvZ,KAAKqM,KAAKpI,EAAEjE,KAAK+U,GAAG2tC,GAAG1iD,KAAK,WAAW,UAAU,gBAAgB,QAAQ,CAACsxD,MAAM,CAAC/a,GAAGT,MAAM91C,KAAK+U,GAAGu8C,MAAMngC,UAAUpsB,EAAE/E,KAAK+U,GAAGu8C,MAAMngC,WAAWltB,GAAG,CAACuuC,EAAEhyC,KAAKguD,GAAG+C,KAAI,KAAM,MAAMriD,EAAElP,KAAKo5C,OAAO,GAAGlqC,EAAEquC,aAAaruC,EAAEivC,aAAatF,GAAGtkC,UAAUsI,KAAK21B,GAAGhyC,GAAGyD,EAAEuuC,QAAQ,GAAGtjC,EAAE+hD,kBAAkB/hD,EAAE+hD,kBAAkB51D,KAAKm3C,GAAGhyC,GAAGyD,EAAEuuC,OAAO,CAACvuC,EAAEuuC,GAAG,MAAMtjC,EAAElP,KAAKQ,GAAGyD,GAAE,SAAUA,IAAIiL,EAAE6F,GAAGu8C,MAAMp/B,YAAYsgB,GAAGtjC,EAAE6F,GAAGu8C,MAAMp/B,YAAYjuB,EAAG,GAAE,CAAE,GAAC,IAAKjE,KAAKmhD,YAAY7mD,EAAE0F,KAAK6iD,GAAG4B,GAAGznD,WAAU,SAAUiH,EAAEuuC,GAAGxyC,KAAK6/C,GAAGvlD,EAAE,IAAIkG,EAAEw+C,GAAG9vC,EAAE,KAAK,GAAGsjC,EAAE,IAAIhyC,EAAEgyC,GAAG,CAAC,MAAMvuC,GAAGiL,EAAEjL,CAAC,CAAC,MAAMsV,EAAEtV,EAAEygD,KAAKvZ,EAAE5xB,EAAE3L,MAAM/I,EAAEsmC,EAAE8U,KAAK/+B,QAAQg/B,KAAKlgD,KAAK0kD,KAAK,CAAC92C,MAAMu9B,EAAE18B,MAAM8K,EAAE9K,MAAM60C,WAAW/pC,EAAE9K,OAAO08B,EAAEuU,OAAOW,QAAQG,SAASjnC,EAAE9K,QAAQ08B,EAAEuU,OAAOW,QAAQh0C,KAAKI,MAAMjM,EAAEojD,UAAS,EAAGhjD,IAAI,OAAOijD,OAAO,GAAGd,UAAU,KAAK/1B,OAAO,KAAKk2B,aAAa,KAAKD,WAAU,EAAGiC,QAAQ,KAAKxjD,OAAO,EAAEkJ,MAAM,IAAIxG,MAAM8K,EAAE8zC,GAAGzpC,EAAEypC,GAAGoB,YAAYv/C,IAAIkxC,GAAGlxC,EAAE,KAAM,KAAI7E,KAAKoqD,MAAM,SAASnmD,GAAG,OAAO4+C,GAAGtD,GAAGviD,WAAU,SAAUw1C,EAAEhyC,EAAE0O,GAAGlP,KAAK6/C,GAAG57C,EAAEjE,KAAKy/C,IAAIvwC,EAAElP,KAAKqM,KAAKmmC,EAAExyC,KAAK0/C,OAAOl/C,EAAER,KAAKigD,KAAKh8C,EAAEmqD,WAAW5b,GAAGvuC,EAAEmqD,WAAW5b,GAAGyN,KAAKyC,GAAG,KAAK,CAACoN,SAAS,CAAC5Z,GAAGJ,IAAI50B,QAAQ,CAAC80B,GAAGD,IAAIga,SAAS,CAAC1Z,GAAGP,IAAI+Z,SAAS,CAACzZ,GAAGN,KAAM,GAAE,CAAlO,CAAoO91C,MAAMA,KAAKssD,YAAY,SAASroD,GAAG,OAAO4+C,GAAG4F,GAAGzrD,WAAU,SAAUw1C,EAAEhyC,EAAE0O,EAAEqK,EAAEjf,GAAG0F,KAAK6/C,GAAG57C,EAAEjE,KAAKgpD,KAAKxW,EAAExyC,KAAKmpD,WAAW3oD,EAAER,KAAK0/C,OAAOxwC,EAAElP,KAAKqpD,4BAA4B9vC,EAAEvZ,KAAK4/C,SAAS,KAAK5/C,KAAK+U,GAAG2tC,GAAG1iD,KAAK,WAAW,QAAQ,SAASA,KAAKi2B,OAAO37B,GAAG,KAAK0F,KAAKo6B,QAAO,EAAGp6B,KAAK2oD,UAAU,EAAE3oD,KAAK8oD,cAAc,GAAG9oD,KAAKypD,SAAS,KAAKzpD,KAAKspD,QAAQ,KAAKtpD,KAAK+pD,YAAY,KAAK/pD,KAAKgqD,cAAc,KAAKhqD,KAAKkqD,WAAW,EAAElqD,KAAKk+C,YAAY,IAAIrF,IAAG,CAAE50C,EAAEuuC,KAAKxyC,KAAKypD,SAASxlD,EAAEjE,KAAKspD,QAAQ9W,CAAE,IAAGxyC,KAAKk+C,YAAYrhC,MAAK,KAAM7c,KAAKo6B,QAAO,EAAGp6B,KAAK+U,GAAGyc,SAAS0uB,MAAO,IAAGj8C,IAAI,IAAIuuC,EAAExyC,KAAKo6B,OAAO,OAAOp6B,KAAKo6B,QAAO,EAAGp6B,KAAK+U,GAAG3Q,MAAM87C,KAAKj8C,GAAGjE,KAAKi2B,OAAOj2B,KAAKi2B,OAAOqzB,QAAQrlD,GAAGuuC,GAAGxyC,KAAK4/C,UAAU5/C,KAAK4/C,SAASvwB,QAAQqtB,GAAGz4C,EAAG,GAAG,GAAE,CAAhqB,CAAkqBjE,MAAMA,KAAKwxD,QAAQ,SAASvtD,GAAG,OAAO4+C,GAAGmL,GAAGhxD,WAAU,SAAUw1C,GAAGxyC,KAAK6/C,GAAG57C,EAAEjE,KAAKysD,KAAK,CAACtwC,QAAQq2B,EAAE2b,aAAa,KAAKnB,SAAS,CAAC,EAAE7B,OAAO,CAAC,EAAEqC,eAAe,KAAM,GAAE,CAA9I,CAAgJxtD,MAAMA,KAAKmgD,YAAY,SAASl8C,GAAG,OAAO4+C,GAAG0D,GAAGvpD,WAAU,SAAUw1C,EAAEhyC,EAAE0O,GAAGlP,KAAK6/C,GAAG57C,EAAEjE,KAAK0kD,KAAK,CAAC92C,MAAM4kC,EAAE/jC,MAAM,QAAQjO,EAAE,KAAKA,EAAEwiD,GAAG9zC,GAAG,MAAMqK,EAAEtV,EAAE08C,MAAMC,UAAU,IAAIrnC,EAAE,MAAM,IAAI+7B,GAAEb,WAAWz0C,KAAK+mD,KAAK/mD,KAAK0nD,WAAWnuC,EAAEsnC,IAAIrqC,KAAK+C,GAAGvZ,KAAK2nD,YAAY,CAAC1jD,EAAEuuC,IAAIj5B,EAAEsnC,IAAIrO,EAAEvuC,GAAGjE,KAAKkoD,KAAK,CAACjkD,EAAEuuC,IAAIj5B,EAAEsnC,IAAI58C,EAAEuuC,GAAG,EAAEvuC,EAAEuuC,EAAExyC,KAAKioD,KAAK,CAAChkD,EAAEuuC,IAAIj5B,EAAEsnC,IAAI58C,EAAEuuC,GAAG,EAAEvuC,EAAEuuC,EAAExyC,KAAKyxD,aAAaxtD,EAAE08C,MAAMuL,WAAY,GAAE,CAA5V,CAA8VlsD,MAAMA,KAAK+U,GAAG,iBAAiB9Q,IAAIA,EAAEytD,WAAW,EAAEvtD,QAAQoM,KAAK,iDAAiDvQ,KAAKqM,gDAAgDlI,QAAQoM,KAAK,gDAAgDvQ,KAAKqM,uDAAuDrM,KAAKklC,OAAQ,IAAGllC,KAAK+U,GAAG,WAAW9Q,KAAKA,EAAEytD,YAAYztD,EAAEytD,WAAWztD,EAAE0tD,WAAWxtD,QAAQoM,KAAK,iBAAiBvQ,KAAKqM,sBAAsBlI,QAAQoM,KAAK,YAAYvQ,KAAKqM,qDAAqDpI,EAAE0tD,WAAW,KAAM,IAAG3xD,KAAKygD,QAAQ+J,GAAGhY,EAAE0Z,aAAalsD,KAAK09C,mBAAmB,CAACz5C,EAAEuuC,EAAEhyC,EAAE0O,IAAI,IAAIlP,KAAKssD,YAAYroD,EAAEuuC,EAAEhyC,EAAER,KAAKq+C,SAASgL,4BAA4Bn6C,GAAGlP,KAAK4xD,eAAe3tD,IAAIjE,KAAK+U,GAAG,WAAWmrC,KAAKj8C,GAAGy6C,GAAG1xB,QAAQ/oB,GAAGA,EAAEoI,OAAOrM,KAAKqM,MAAMpI,IAAIjE,OAAOiE,EAAEm1C,OAAOyY,UAAUp/C,KAAK+/B,GAAGA,EAAEz9B,GAAG,iBAAiBmrC,KAAKj8C,IAAG,EAAGjE,KAAK8xD,IAAIxC,IAAItvD,KAAK8xD,IAAIlC,IAAI5vD,KAAK8xD,IAAIjB,IAAI7wD,KAAK8xD,IAAI7B,IAAIjwD,KAAKuxD,IAAIz0D,OAAOwW,OAAOtT,KAAK,CAACy9C,KAAK,CAACngD,OAAM,KAAM4R,EAAE4D,SAAS7O,GAAGA,EAAEjE,OAAO,CAAC,OAAAmc,CAAQlY,GAAG,GAAGiQ,MAAMjQ,IAAIA,EAAE,GAAG,MAAM,IAAIqxC,GAAEI,KAAK,0CAA0C,GAAGzxC,EAAEnB,KAAKqX,MAAM,GAAGlW,GAAG,GAAGjE,KAAKs9C,OAAOt9C,KAAKo5C,OAAOgF,cAAc,MAAM,IAAI9I,GAAEmO,OAAO,4CAA4CzjD,KAAK+wD,MAAMjuD,KAAK4C,IAAI1F,KAAK+wD,MAAM9sD,GAAG,MAAMuuC,EAAExyC,KAAK8sD,UAAU,IAAItsD,EAAEgyC,EAAExlB,QAAQwlB,GAAGA,EAAEia,KAAKtwC,UAAUlY,IAAI,GAAG,OAAOzD,IAAIA,EAAE,IAAIR,KAAKwxD,QAAQvtD,GAAGuuC,EAAEn3C,KAAKmF,GAAGgyC,EAAEuS,KAAKyH,IAAIhsD,EAAE0tD,OAAO,CAAC,GAAGluD,KAAKo5C,OAAOiY,YAAW,EAAG7wD,EAAE,CAAC,UAAAuxD,CAAW9tD,GAAG,OAAOjE,KAAKs9C,QAAQt9C,KAAKo5C,OAAOmE,cAAc7E,GAAG8E,YAAYx9C,KAAKy9C,MAAMx5C,IAAI,IAAI40C,IAAG,CAAE50C,EAAEuuC,KAAK,GAAGxyC,KAAKo5C,OAAOmE,aAAa,OAAO/K,EAAE,IAAI8C,GAAEhB,eAAet0C,KAAKo5C,OAAO+E,cAAc,IAAIn+C,KAAKo5C,OAAOgF,cAAc,CAAC,IAAIp+C,KAAKq+C,SAASC,SAAS,YAAY9L,EAAE,IAAI8C,GAAEhB,gBAAgBt0C,KAAKg+C,OAAOlhC,MAAMg5B,GAAG,CAAC91C,KAAKo5C,OAAOmF,eAAe1hC,KAAK5Y,EAAEuuC,EAAG,IAAG31B,KAAK5Y,EAAE,CAAC,GAAA6tD,EAAKxlD,MAAMrI,EAAEqP,OAAOk/B,EAAE+c,MAAM/uD,EAAE6L,KAAK6C,IAAIA,GAAGlP,KAAKgyD,MAAM,CAAC1lD,MAAMrI,EAAEoI,KAAK6C,IAAI,MAAMqK,EAAEvZ,KAAKosD,aAAanoD,KAAKjE,KAAKosD,aAAanoD,GAAG,IAAI,OAAOsV,EAAEle,KAAK,CAACiR,MAAMrI,EAAEqP,OAAOk/B,EAAE+c,MAAM,MAAM/uD,EAAE,GAAGA,EAAE6L,KAAK6C,IAAIqK,EAAEwrC,MAAK,CAAE9gD,EAAEuuC,IAAIvuC,EAAEsrD,MAAM/c,EAAE+c,QAAQvvD,IAAI,CAAC,KAAAgyD,EAAO1lD,MAAMrI,EAAEoI,KAAKmmC,EAAEl/B,OAAO9S,IAAI,OAAOyD,GAAGjE,KAAKosD,aAAanoD,KAAKjE,KAAKosD,aAAanoD,GAAGjE,KAAKosD,aAAanoD,GAAG+oB,QAAQ/oB,GAAGzD,EAAEyD,EAAEqP,SAAS9S,IAAIgyC,GAAGvuC,EAAEoI,OAAOmmC,KAAKxyC,IAAI,CAAC,IAAAg+C,GAAO,OAAnhiB,SAAY/5C,GAAG,MAAMzD,EAAEyD,EAAEm1C,QAAQwH,UAAU1xC,GAAGjL,EAAE08C,MAAM,GAAGngD,EAAE49C,eAAen6C,EAAEq5C,MAAM,OAAO98C,EAAE+9C,eAAe1hC,MAAK,IAAKrc,EAAE29C,YAAYzB,GAAGl8C,EAAE29C,aAAal6C,IAAIwP,IAAIjT,EAAE4wD,cAAcnY,aAAajF,KAAKxzC,EAAE49C,eAAc,EAAG59C,EAAE29C,YAAY,KAAK39C,EAAE+8C,cAAa,EAAG,MAAMhkC,EAAE/Y,EAAE4wD,cAAc,SAAS92D,IAAI,GAAGkG,EAAE4wD,gBAAgB73C,EAAE,MAAM,IAAI+7B,GAAEhB,eAAe,0BAA0B,CAAC,IAAInJ,EAAE3qC,EAAE0wD,eAAersD,EAAE,KAAK6tC,GAAE,EAAG,OAAOmG,GAAGmC,KAAK,CAACzhC,GAAG,oBAAoB9J,UAAUopC,GAAGtkC,UAAUu6C,MAAMjyC,MAAK,IAAK,IAAIg8B,IAAG,CAAEt/B,EAAE4xB,KAAK,GAAG7wC,KAAK4U,EAAE,MAAM,IAAIomC,GAAEb,WAAW,MAAMpwB,EAAEpgB,EAAEoI,KAAK3J,EAAElC,EAAE6wD,WAAWniD,EAAE8uC,KAAK35B,GAAGnV,EAAE8uC,KAAK35B,EAAEvhB,KAAKqX,MAAM,GAAGlW,EAAE8sD,QAAQ,IAAIruD,EAAE,MAAM,IAAI4yC,GAAEb,WAAW/xC,EAAE2iB,QAAQ+iC,GAAGjd,GAAGzoC,EAAEuvD,UAAUvX,GAAGz2C,EAAE2tD,gBAAgBlvD,EAAEwvD,gBAAgBxX,IAAIlI,IAAI,GAAG3tC,EAAEnC,EAAEwmD,YAAY1oD,EAAE6wD,aAAaptD,EAAEo6C,SAAS8T,aAAa,CAACzvD,EAAE2iB,QAAQgjC,GAAGxjD,EAAEwqB,QAAQ3sB,EAAEw0B,OAAOgO,QAAQ,MAAMjhC,EAAEiL,EAAEkjD,eAAe/tC,GAAGpgB,EAAEkyC,UAAUlyC,EAAEohB,QAAQq1B,IAAG,KAAMvP,EAAE,IAAImK,GAAE+c,eAAe,YAAYhuC,kBAAmB,GAAE,KAAK,CAACxf,EAAEwgB,QAAQ+iC,GAAGjd,GAAG,IAAI5xB,EAAEi5B,EAAEmf,WAAW7uD,KAAKgG,IAAI,EAAE,IAAI,EAAE0pC,EAAEmf,WAAWjf,EAAEn5B,EAAE,EAAEtV,EAAEgoD,OAAO3O,MAAM56C,EAAEw0B,OAAOw1B,GAAGzoD,EAAEsV,EAAE,GAAG1U,EAAEsmC,EAAE,CAAE,GAAEA,GAAGzoC,EAAEyzC,UAAUuE,IAAG,KAAM71C,EAAE,KAAK,MAAMqK,EAAEjL,EAAEgoD,OAAO3O,MAAM56C,EAAEw0B,OAAO58B,EAAE0oB,EAAE9T,EAAEg8C,kBAAkB,GAAG5wD,EAAEU,OAAO,EAAE,IAAI,MAAMue,EAAErK,EAAEg6C,YAAY,KAAK/d,EAAE7wC,GAAGU,OAAOmwC,EAAE,GAAGA,EAAE,YAAY3qC,EAAE6wD,WAAW,UAAUpF,OAAOhoD,GAAGzD,EAAE0O,GAAGjL,EAAE8sD,MAAMvwD,EAAE2b,QAAQ,GAAG,MAAM5C,EAAEtV,EAAE05C,UAAUoP,GAAG,EAAEvsD,EAAE0O,GAAGjL,EAAE0oD,YAAY3pC,EAAExiB,EAAE0qD,iBAAiB,GAAGmB,GAAGpoD,EAAE,CAACA,EAAEmqD,YAAY5b,EAAEj5B,GAAGA,EAAE,CAA7I,CAA+ItV,EAAEiL,EAAEqK,IAAI0zC,GAAGhpD,EAAEA,EAAE05C,UAAUpkC,GAAG,SAAStV,EAAEuuC,GAAG,MAAMhyC,EAAEsN,GAAGi/C,GAAG,EAAE9oD,EAAEq5C,MAAM9K,GAAGvuC,EAAE05C,WAAW,QAAQn9C,EAAEqxB,IAAI72B,QAAQwF,EAAE0sD,OAAO5jB,MAAMrlC,GAAGA,EAAE4tB,IAAI72B,QAAQiJ,EAAEipD,OAAOlyD,SAAS,CAA9H,CAAgIiJ,EAAEsV,IAAIpV,QAAQoM,KAAK,uHAAuHy7C,GAAG/nD,EAAEsV,EAAE,CAAC,MAAMtV,GAAG,CAAC,IAAIknC,EAAEuT,GAAGrjD,KAAK4I,GAAGiL,EAAEojD,gBAAgB5X,IAAIlI,IAAIhyC,EAAEqxD,SAAQ,EAAG5tD,EAAE8Q,GAAG,iBAAiBmrC,KAAK1N,EAAG,IAAGtjC,EAAEgW,QAAQw1B,IAAIlI,IAAIvuC,EAAE8Q,GAAG,SAASmrC,KAAK1N,EAAG,IAAGE,GAAG,UAAUkO,UAAU38C,EAAEioD,YAAY1Z,GAAGhyC,IAAImuD,GAAG1qD,IAAI,cAAczD,GAAG8tD,GAAGrqD,EAAEuuC,GAAGyP,IAAI,CAAC51C,KAAK7L,IAAIsc,MAAMg5B,GAAG,CAAhG,CAAkG7xC,EAAE08C,MAAMt8B,GAAG9K,GAAI,GAAE4xB,EAAG,QAAOtuB,MAAK,KAAMviB,IAAIkG,EAAEywD,kBAAkB,GAAGpY,GAAGtkC,QAAQs6C,IAAG,IAAK5qD,EAAE8Q,GAAGu8C,MAAMpR,KAAKj8C,EAAEstD,QAAQ10C,MAAK,SAAU21B,IAAI,GAAGhyC,EAAEywD,kBAAkBj2D,OAAO,EAAE,CAAC,IAAIkU,EAAE1O,EAAEywD,kBAAkBnhC,OAAOymB,GAAGT,IAAI,OAAOt1C,EAAEywD,kBAAkB,GAAGpY,GAAGtkC,QAAQs6C,IAAG,IAAK3/C,EAAEjL,EAAEstD,QAAQ10C,KAAK21B,EAAE,CAAE,OAAMoI,SAAQ,KAAMp6C,EAAEywD,kBAAkB,KAAKzwD,EAAE49C,eAAc,CAAG,IAAGvhC,MAAK,IAAK5Y,IAAI6Y,OAAO01B,IAAIhyC,EAAE29C,YAAY3L,EAAE,IAAI3tC,GAAGA,EAAEwqB,OAAO,CAAC,MAAMprB,GAAG,CAAC,OAAOsV,IAAI/Y,EAAE4wD,eAAentD,EAAE85C,SAASrB,GAAGlK,EAAG,IAAGoI,SAAQ,KAAMp6C,EAAE+8C,cAAa,EAAGpS,GAAI,GAAE,CAAqsdonB,CAAGvyD,KAAK,CAAC,MAAA+9C,GAAS,MAAM95C,EAAEjE,KAAKo5C,OAAO5G,EAAEkM,GAAG7iD,QAAQmE,MAAM,GAAGwyC,GAAG,GAAGkM,GAAGlwC,OAAOgkC,EAAE,GAAGxyC,KAAKs9C,MAAM,CAAC,IAAIt9C,KAAKs9C,MAAMpY,OAAO,CAAC,MAAMjhC,GAAG,CAACjE,KAAKisD,OAAO3O,MAAM,IAAI,CAACr5C,EAAEs6C,eAAe,IAAI1F,IAAIrG,IAAIvuC,EAAEitD,eAAe1e,CAAE,IAAGvuC,EAAEmtD,cAAc,IAAIvY,IAAG,CAAErG,EAAEhyC,KAAKyD,EAAEktD,WAAW3wD,CAAE,GAAE,CAAC,KAAA0kC,GAAQllC,KAAK+9C,SAAS,MAAM95C,EAAEjE,KAAKo5C,OAAOp5C,KAAKq+C,SAASC,UAAS,EAAGr6C,EAAEk6C,YAAY,IAAI7I,GAAEhB,eAAerwC,EAAEm6C,eAAen6C,EAAEktD,WAAWltD,EAAEk6C,YAAY,CAAC,SAAS,MAAMl6C,EAAEvE,UAAU1E,OAAO,EAAEw3C,EAAExyC,KAAKo5C,OAAO,OAAO,IAAIP,IAAG,CAAEr4C,EAAE0O,KAAK,MAAMqK,EAAE,KAAKvZ,KAAKklC,QAAQ,IAAIjhC,EAAEjE,KAAK2gD,MAAMC,UAAUwR,eAAepyD,KAAKqM,MAAMpI,EAAEkyC,UAAUuE,IAAG,MAAO,UAAUkG,UAAU38C,EAAEioD,YAAY1Z,GAAGhyC,IAAImuD,GAAG1qD,IAAI,cAAczD,GAAG8tD,GAAGrqD,EAAEuuC,GAAG7G,OAAOnrC,GAAGsc,MAAMg5B,GAAG,CAA5F,CAA8F91C,KAAK2gD,MAAM3gD,KAAKqM,MAAM7L,GAAI,IAAGyD,EAAEohB,QAAQ+iC,GAAGl5C,GAAGjL,EAAEguD,UAAUjyD,KAAK4xD,gBAAgB,GAAG3tD,EAAE,MAAM,IAAIqxC,GAAE0M,gBAAgB,wCAAwCxP,EAAE4L,cAAc5L,EAAE+L,eAAe1hC,KAAKtD,GAAGA,GAAI,GAAE,CAAC,SAAAi5C,GAAY,OAAOxyD,KAAKs9C,KAAK,CAAC,MAAAQ,GAAS,OAAO,OAAO99C,KAAKs9C,KAAK,CAAC,aAAAmV,GAAgB,MAAMxuD,EAAEjE,KAAKo5C,OAAO+E,YAAY,OAAOl6C,GAAG,mBAAmBA,EAAEoI,IAAI,CAAC,SAAAqmD,GAAY,OAAO,OAAO1yD,KAAKo5C,OAAO+E,WAAW,CAAC,iBAAAwU,GAAoB,OAAO3yD,KAAKo5C,OAAOiY,UAAU,CAAC,UAAIlG,GAAS,OAAO3Y,EAAExyC,KAAKouD,YAAY37C,KAAKxO,GAAGjE,KAAKouD,WAAWnqD,IAAI,CAAC,WAAAilD,GAAc,MAAMjlD,EAAEirD,GAAGvrD,MAAM3D,KAAKN,WAAW,OAAOM,KAAK4yD,aAAajvD,MAAM3D,KAAKiE,EAAE,CAAC,YAAA2uD,CAAa3uD,EAAEuuC,EAAEhyC,GAAG,IAAI0O,EAAEwpC,GAAGuF,MAAM/uC,GAAGA,EAAE2wC,KAAK7/C,OAAO,IAAIiE,EAAEpI,QAAQ,OAAOqT,EAAE,MAAM,MAAMqK,GAAG,IAAItV,EAAEpI,QAAQ,KAAK,IAAIvB,EAAE6wC,EAAElnC,EAAEA,EAAE0B,QAAQ,IAAI,IAAIA,QAAQ,IAAI,IAAI,IAAI,GAAGwlC,EAAEqH,EAAE//B,KAAKxO,IAAI,IAAIuuC,EAAEvuC,aAAajE,KAAKoqD,MAAMnmD,EAAEoI,KAAKpI,EAAE,GAAG,iBAAiBuuC,EAAE,MAAM,IAAIr1C,UAAU,mFAAmF,OAAOq1C,CAAE,IAAG,KAAKvuC,GAAG,aAAaA,EAAE3J,EAAE,eAAe,CAAC,GAAG,MAAM2J,GAAG,aAAaA,EAAE,MAAM,IAAIqxC,GAAE0M,gBAAgB,6BAA6B/9C,GAAG3J,EAAE,WAAW,CAAC,GAAG4U,EAAE,CAAC,GAAG,aAAaA,EAAE85C,MAAM,cAAc1uD,EAAE,CAAC,IAAIif,EAAE,MAAM,IAAI+7B,GAAEud,eAAe,0FAA0F3jD,EAAE,IAAI,CAACA,GAAGi8B,EAAEr4B,SAAS7O,IAAI,GAAGiL,IAAI,IAAIA,EAAEi6C,WAAWttD,QAAQoI,GAAG,CAAC,IAAIsV,EAAE,MAAM,IAAI+7B,GAAEud,eAAe,SAAS5uD,EAAE,wCAAwCiL,EAAE,IAAI,CAAE,IAAGqK,GAAGrK,IAAIA,EAAEkrB,SAASlrB,EAAE,KAAK,CAAC,CAAC,MAAMjL,GAAG,OAAOiL,EAAEA,EAAEmrC,SAAS,MAAK,CAAE7H,EAAEhyC,KAAKA,EAAEyD,EAAG,IAAGy4C,GAAGz4C,EAAE,CAAC,MAAMY,EAAEsqD,GAAG34C,KAAK,KAAKxW,KAAK1F,EAAE6wC,EAAEj8B,EAAE1O,GAAG,OAAO0O,EAAEA,EAAEmrC,SAAS//C,EAAEuK,EAAE,QAAQ6zC,GAAGuF,MAAM3C,GAAG5C,GAAGoH,WAAU,IAAK9/C,KAAK+xD,WAAWltD,KAAK7E,KAAK+xD,WAAWltD,EAAE,CAAC,KAAA+I,CAAM3J,GAAG,IAAIknC,EAAEnrC,KAAKouD,WAAWnqD,GAAG,MAAM,IAAIqxC,GAAEwd,aAAa,SAAS7uD,oBAAoB,OAAOjE,KAAKouD,WAAWnqD,EAAE,EAAE,MAAM8uD,GAAG,oBAAoB12D,QAAQ,eAAeA,OAAOA,OAAOi1B,WAAW,eAAe,MAAM0hC,GAAG,WAAA/mD,CAAYhI,GAAGjE,KAAKwwB,WAAWvsB,CAAC,CAAC,SAAAktB,CAAUltB,EAAEuuC,EAAEhyC,GAAG,OAAOR,KAAKwwB,WAAWvsB,GAAG,mBAAmBA,EAAEA,EAAE,CAACkf,KAAKlf,EAAEG,MAAMouC,EAAEhhB,SAAShxB,GAAG,CAAC,CAACuyD,MAAM,OAAO/yD,IAAI,EAAE,SAASizD,GAAGhvD,EAAEzD,GAAG,OAAOgyC,EAAEhyC,GAAGsS,SAAS0/B,IAAI+d,GAAGtsD,EAAEuuC,KAAKvuC,EAAEuuC,GAAG,IAAI4d,IAAI5vD,EAAEgyC,GAAI,IAAGvuC,CAAC,CAAsrB,IAAIivD,GAAG,IAAIA,GAAG,CAACtS,UAAU38C,EAAE28C,WAAW38C,EAAEkvD,cAAclvD,EAAEmvD,iBAAiBnvD,EAAEovD,YAAYnH,YAAYjoD,EAAEioD,aAAajoD,EAAEqvD,kBAAkB,CAAC,MAAMrvD,GAAGivD,GAAG,CAACtS,UAAU,KAAKsL,YAAY,KAAK,CAAC,MAAMqH,GAAG/E,GAAG,SAASgF,GAAGvvD,GAAG,IAAIuuC,EAAEihB,GAAG,IAAIA,IAAG,EAAGjL,GAAGkB,eAAexJ,KAAKj8C,EAAE,CAAC,QAAQwvD,GAAGjhB,CAAC,CAAC,CAAC3tC,EAAE0uD,GAAG,IAAI1d,GAAElK,OAAO1nC,GAAG,IAAIsvD,GAAGtvD,EAAE,CAACwqD,OAAO,KAAK9iB,SAAS+nB,OAAOzvD,GAAG,IAAIsvD,GAAGtvD,EAAE,CAACwqD,OAAO,KAAKzQ,OAAOnhC,MAAM5Y,IAAIA,EAAEihC,SAAQ,KAAMpoB,MAAM,uBAAsB,KAAK,IAAK,gBAAA62C,CAAiB1vD,GAAG,IAAI,OAAO,UAAU28C,UAAU38C,EAAEioD,YAAY1Z,IAAI,OAAOmc,GAAG1qD,GAAGqQ,QAAQC,QAAQtQ,EAAE2qD,aAAa/xC,MAAM5Y,GAAGA,EAAEwO,KAAKxO,GAAGA,EAAEoI,OAAO2gB,QAAQ/oB,GAAG,cAAcA,MAAMqqD,GAAGrqD,EAAEuuC,GAAGuO,eAAeyE,aAAa,CAAjL,CAAmL+N,GAAGvC,cAAcn0C,KAAK5Y,EAAE,CAAC,MAAMA,GAAG,OAAOy4C,GAAG,IAAIpH,GAAEb,WAAW,CAAC,EAAEgN,YAAY,IAAI,SAASx9C,GAAGiL,EAAElP,KAAKiE,EAAE,EAAE2vD,kBAAkB3vD,GAAGy0C,GAAGuF,MAAM3C,GAAG5C,GAAGoH,UAAU77C,GAAGA,IAAIstD,IAAI1C,GAAGpe,MAAM,SAASxsC,GAAG,OAAO,WAAW,IAAI,IAAIuuC,EAAEwc,GAAG/qD,EAAEN,MAAM3D,KAAKN,YAAY,OAAO8yC,GAAG,mBAAmBA,EAAE31B,KAAK21B,EAAEqG,GAAGtkC,QAAQi+B,EAAE,CAAC,MAAMvuC,GAAG,OAAOy4C,GAAGz4C,EAAE,CAAC,CAAC,EAAE4vD,MAAM,SAAS5vD,EAAEuuC,EAAEhyC,GAAG,IAAI,IAAI0O,EAAE8/C,GAAG/qD,EAAEN,MAAMnD,EAAEgyC,GAAG,KAAK,OAAOtjC,GAAG,mBAAmBA,EAAE2N,KAAK3N,EAAE2pC,GAAGtkC,QAAQrF,EAAE,CAAC,MAAMjL,GAAG,OAAOy4C,GAAGz4C,EAAE,CAAC,EAAE6vD,mBAAmB,CAACvvD,IAAI,IAAIm0C,GAAGuF,OAAO,MAAM6L,QAAQ,SAAS7lD,EAAEuuC,GAAG,MAAMhyC,EAAEq4C,GAAGtkC,QAAQ,mBAAmBtQ,EAAEsvD,GAAGK,kBAAkB3vD,GAAGA,GAAGwX,QAAQ+2B,GAAG,KAAK,OAAOkG,GAAGuF,MAAMvF,GAAGuF,MAAM6L,QAAQtpD,GAAGA,CAAC,EAAE8T,QAAQukC,GAAGnoC,MAAM,CAACnM,IAAI,IAAIkP,EAAEtO,IAAIlB,IAAI4vC,EAAE5vC,EAAE,UAAUA,EAAE,KAAI,EAAG66C,GAAE,GAAIiV,OAAOrxD,EAAEqP,OAAO7C,EAAEgE,MAAMrO,EAAEmvD,SAASjvD,EAAEkvD,OAAOvR,GAAG3tC,GAAGyzC,GAAG0L,UAA1hE,SAAYjwD,GAAG,OAAO,IAAI+uD,IAAIxyD,IAAI,MAAM0O,EAAEukC,EAAExvC,GAAG,IAAIsV,GAAE,EAAGjf,EAAE,CAAC,EAAE6wC,EAAE,CAAC,EAAE,MAAMtmC,EAAE,CAAC,UAAI+qB,GAAS,OAAOrW,CAAC,EAAE2Y,YAAY,KAAK3Y,GAAE,EAAGivC,GAAGkB,eAAex3B,YAAYnY,EAAC,GAAIvZ,EAAE1E,OAAO0E,EAAE1E,MAAM+I,GAAG,IAAI6tC,GAAE,EAAGruB,GAAE,EAAG,SAAS3hB,IAAI,OAAO8vC,EAAErH,GAAG7B,MAAMrlC,GAAG3J,EAAE2J,IAAtjW,SAAYA,EAAEuuC,GAAG,MAAMhyC,EAAEgwD,GAAGhe,GAAG,IAAItjC,EAAE1O,EAAE2iB,OAAO,GAAGjU,EAAEkY,KAAK,OAAM,EAAG,IAAI7N,EAAErK,EAAE5R,MAAM,MAAMhD,EAAEk2D,GAAGvsD,GAAG,IAAIknC,EAAE7wC,EAAE6oB,KAAK5J,EAAElc,MAAMwH,EAAEsmC,EAAE7tC,MAAM,MAAM4R,EAAEkY,OAAO+jB,EAAE/jB,MAAM,CAAC,GAAGk9B,GAAGz/C,EAAExH,KAAKkc,EAAEiW,KAAK,GAAG80B,GAAGz/C,EAAE2qB,GAAGjW,EAAElc,OAAO,EAAE,OAAM,EAAGinD,GAAG/qC,EAAElc,KAAKwH,EAAExH,MAAM,EAAEkc,GAAGrK,EAAE1O,EAAE2iB,KAAKte,EAAExH,OAAOC,MAAMuH,GAAGsmC,EAAE7wC,EAAE6oB,KAAK5J,EAAElc,OAAOC,KAAK,CAAC,OAAM,CAAE,CAAiyV62D,CAAG75D,EAAE2J,GAAGknC,EAAElnC,KAAK,CAAC,MAAM8V,EAAE9V,IAAIgvD,GAAG34D,EAAE2J,GAAGvB,KAAK4W,GAAE,EAAGA,EAAE,KAAK,GAAGo5B,GAAGn5B,EAAE,OAAOjf,EAAE,CAAC,EAAE,MAAMk4C,EAAE,CAAC,EAAEG,EAAE,SAASH,GAAGtjC,GAAGutC,KAAK,MAAMj8C,EAAE,IAAI46C,GAAGn3C,EAAE,CAAC6sD,OAAOte,EAAEyL,MAAM,OAAO1kC,EAAEm/B,GAAGuF,MAAM3C,GAAG5C,GAAGoH,UAAUt/C,GAAGA,IAAI,OAAO0O,GAAGqK,EAAEsD,KAAK48B,GAAGA,IAAIlgC,CAAC,CAAvH,CAAyHi5B,GAAGnuB,IAAImkC,GAAG,iBAAiBzuC,GAAGsK,GAAE,GAAIquB,GAAE,EAAGp+B,QAAQC,QAAQo+B,GAAG91B,MAAM5Y,IAAIyuC,GAAE,EAAGn5B,IAAI7W,IAAI4W,KAAKhf,EAAE,CAAC,EAAE6wC,EAAEqH,EAAEhyC,EAAE2iB,MAAM3iB,EAAE2iB,KAAKlf,IAAK,IAAGA,IAAI,CAAC,sBAAsB,cAAciC,SAAS,MAAMjC,OAAE,EAAOA,EAAEoI,QAAQqmC,GAAE,EAAGlyC,EAAE4D,OAAO5D,EAAE4D,MAAMH,GAAGY,EAAEqtB,cAAe,GAAC,EAAG,OAAO5Y,IAAIzU,CAAE,GAAE,EAAm3CuvD,uBAAuBnB,GAAGoB,aAAa31D,EAAE41D,aAAalhD,EAAEmhD,aAAa,SAAStwD,EAAEuuC,GAAG,iBAAiBA,EAAEp/B,EAAEnP,EAAEuuC,OAAE,GAAQ,WAAWA,GAAG,GAAG//B,IAAI3R,KAAK0xC,GAAE,SAAUA,GAAGp/B,EAAEnP,EAAEuuC,OAAE,EAAQ,GAAE,EAAEgiB,aAAax+C,EAAEy+C,UAAUxhB,EAAEyhB,cAAc/E,GAAG9O,IAAIyD,GAAGqQ,KAAK/jD,EAAEgkD,QAAQ,IAAMnG,OAAO,GAAGoG,YAAYnW,GAAGoW,SAAS1f,EAAE4b,aAAakC,GAAG6B,OAAO,gBAAgB54C,QAAQ,gBAAgB5O,MAAM,KAAKkF,KAAKxO,GAAGlC,SAASkC,KAAK6rB,QAAO,CAAE7rB,EAAEuuC,EAAEhyC,IAAIyD,EAAEuuC,EAAE1vC,KAAKgG,IAAI,GAAG,EAAEtI,OAAO+yD,GAAGyB,OAAOxK,GAAG+I,GAAGvC,aAAa9E,aAAa,oBAAoBjP,eAAe,oBAAoBlmC,mBAAmByxC,GAAG,kBAAkBvkD,IAAI,IAAIwvD,GAAG,CAAC,IAAIjhB,EAAEmM,IAAInM,EAAE7iC,SAASktC,YAAY,eAAerK,EAAEyiB,gBAAgB,sBAAqB,GAAG,EAAGhxD,IAAIuuC,EAAE,IAAIuK,YAAY,qBAAqB,CAACC,OAAO/4C,IAAIwvD,IAAG,EAAGxW,cAAczK,GAAGihB,IAAG,CAAE,CAAE,IAAG18C,iBAAiB,sBAAqB,EAAGimC,OAAO/4C,MAAMwvD,IAAID,GAAGvvD,EAAG,KAAI,IAAIwvD,IAAG,EAAG,GAAG,oBAAoByB,iBAAiB,CAAC,MAAMjxD,EAAE,IAAIixD,iBAAiB,sBAAsB,mBAAmBjxD,EAAEglC,OAAOhlC,EAAEglC,QAAQuf,GAAG,kBAAkBhW,IAAIihB,IAAIxvD,EAAEkxD,YAAY3iB,EAAG,IAAGvuC,EAAEkhC,UAAUlhC,IAAIA,EAAE/E,MAAMs0D,GAAGvvD,EAAE/E,KAAI,CAAE,MAAM,GAAG,oBAAoBmS,MAAM,oBAAoB5B,UAAU,CAAC+4C,GAAG,kBAAkBvkD,IAAI,IAAIwvD,KAAK,oBAAoBtjD,cAAcA,aAAapB,QAAQ,qBAAqB8B,KAAKC,UAAU,CAACskD,KAAKtyD,KAAKuyD,SAASC,aAAarxD,KAAK,iBAAiBoN,KAAKkkD,SAAS,IAAIlkD,KAAKkkD,QAAQC,SAAS,CAACC,qBAAoB,KAAM3iD,SAAS0/B,GAAGA,EAAE2iB,YAAY,CAACn2D,KAAK,qBAAqBs2D,aAAarxD,MAAM,CAAC,MAAMA,GAAG,CAAE,IAAG,oBAAoB8S,kBAAkBA,iBAAiB,WAAW9S,IAAI,GAAG,uBAAuBA,EAAE8O,IAAI,CAAC,MAAMy/B,EAAE3hC,KAAK0J,MAAMtW,EAAEyxD,UAAUljB,GAAGghB,GAAGhhB,EAAE8iB,aAAa,CAAE,IAAG,MAAMrxD,EAAEoN,KAAK1B,UAAUF,UAAUkmD,cAAc1xD,GAAGA,EAAE8S,iBAAiB,WAAU,UAAW7X,KAAK+E,IAAIA,GAAG,uBAAuBA,EAAEjF,MAAMw0D,GAAGvvD,EAAEqxD,aAAc,GAAE,CAACzc,GAAG0C,gBAAgB,SAASt3C,EAAEuuC,GAAG,IAAIvuC,GAAGA,aAAaywC,GAAGzwC,aAAa9G,WAAW8G,aAAawxC,cAAcxxC,EAAEoI,OAAOupC,GAAE3xC,EAAEoI,MAAM,OAAOpI,EAAE,IAAIzD,EAAE,IAAIo1C,GAAE3xC,EAAEoI,MAAMmmC,GAAGvuC,EAAEsI,QAAQtI,GAAG,MAAM,UAAUA,GAAGogB,EAAE7jB,EAAE,QAAQ,CAAC+D,IAAI,WAAW,OAAOvE,KAAKu1C,MAAMjpC,KAAK,IAAI9L,CAAC,EAAEqzC,EAAEpgC,EAAEqrC,yECSryzE8W,GAA0B,CACnC,YAAAC,CAAanW,EAAQoW,GACnB,IAAKA,EAAgB/Q,KACnB,MAAM,SAAW,MAAO,CACtBjB,MAAOgS,IASX,MAAO,CACLhS,MAAOgS,EACPC,WAHc,SAAarW,EAAQoW,GAKvC,EACAE,iBAAkB,OCtBTC,GAAwB,OACxBC,GAAgC,eAChCC,GAA2B,UAC3BC,GAAwB,QACxBC,GAAwBT,GAC/BU,GAAyB,IAAIl1B,IAC7Bm1B,GAAyB,IAAIn1B,IAC1B,SAASo1B,GAAqBC,EAAcC,EAAgBC,EAAUjX,GAC3E,IAAI5T,GAAc,SAA4B4T,EAAO6D,YACjDqT,EAAc,cAAgBH,EAAe,KAAO/W,EAAOvjC,QAAU,KAAOu6C,EAC5EpgD,GAAQ,QAAmBggD,GAAwBM,GAAa,KAClE,IAAIt5D,EAAQ,WAMV,IAAIu5D,GAAc,SAAUF,GAC5BE,EAAYvY,UAAW,EACvB,IAAIwY,EAAU,IAAI,GAAMF,EAAaC,GACjCE,EAAsB,CACxB,CAACd,IAAwBe,GAAoBtX,GAC7C,CAACyW,IAA2B,iBAU5B,CAACD,IAAgCpqB,EAAc,yBAA2BA,EAAc,KAI1F,OAFAgrB,EAAQ36C,QAAQ,GAAG+xC,OAAO6I,SACpBD,EAAQ9Y,OACP,CACL8Y,UACAG,WAAYH,EAAQb,IACpBiB,kBAAmBJ,EAAQZ,IAE9B,EA9BW,GAiCZ,OAFAI,GAAuBnxD,IAAIyxD,EAAatgD,GACxCigD,GAAuBpxD,IAAImR,EAAO,GAC3BhZ,CAAK,IAEd,OAAOgZ,CACT,CACOm6B,eAAe0mB,GAAaC,GACjC,IAAI9gD,QAAc8gD,EAEdC,EADYd,GAAuBhyD,IAAI6yD,GAChB,EACV,IAAbC,GACF/gD,EAAMwgD,QAAQ5xB,QACdqxB,GAAuB5qB,OAAOyrB,IAE9Bb,GAAuBpxD,IAAIiyD,EAAcC,EAE7C,CACO,SAASC,GAAqB5X,GACnC,GAAKA,EAAOU,QAAZ,CAGA,IAAImX,EAAgB,IAAIhW,IACxB7B,EAAOU,QAAQttC,SAAQrE,KACR,SAAQA,GACdqE,SAAQ0kD,IACb,IAAID,EAAc/rB,IAAIgsB,KAGtBD,EAAc1lC,IAAI2lC,GAEK,aADP,SAAsB9X,EAAQ8X,GAChCx4D,MACZ,MAAM,SAAW,OAAQ,CACvB0gD,SACAjxC,QACA+oD,SAEJ,GACA,GAjBJ,CAmBF,CAOO,IAAIC,GAAwB,KAC5B,SAASC,GAA6Bt1D,GAC3C,IAAImL,EAAQnL,EAAImL,MAAM,KACtB,GAAIA,EAAMvS,OAAS,EACjB,OAAOuS,EAAMkF,KAAIklD,GAAQD,GAA6BC,KAAOn8D,KAAK,KAEpE,GAAI4G,EAAIglD,WAAW,KAAM,CACvB,IAAIwQ,EAAex1D,EAAIiQ,UAAU,GACjC,OAAOolD,GAAwBG,CACjC,CACE,OAAOx1D,CAEX,CACO,SAASy1D,GAAmCz1D,GACjD,IAAImL,EAAQnL,EAAImL,MAAM,KACtB,OAAIA,EAAMvS,OAAS,EACVuS,EAAMkF,KAAIklD,GAAQE,GAAmCF,KAAOn8D,KAAK,KAEtE4G,EAAIglD,WAAWqQ,IAEV,IADYr1D,EAAIiQ,UAAUolD,GAAsBz8D,QAGhDoH,CAEX,CAKO,SAAS01D,GAAmBlrB,GACjC,IAAKA,GAAwC,iBAAjBA,GAAqD,iBAAjBA,GAAqD,kBAAjBA,EAClG,OAAOA,EACF,GAAIlxC,MAAMuD,QAAQ2tC,GACvB,OAAOA,EAAan6B,KAAIslD,GAAOD,GAAmBC,KAC7C,GAA4B,iBAAjBnrB,EAA2B,CAC3C,IAAItmC,EAAM,CAAC,EAOX,OANAxJ,OAAO8zC,QAAQhE,GAAc95B,SAAQ,EAAEC,EAAKzV,MACrB,iBAAVA,IACTA,EAAQw6D,GAAmBx6D,IAE7BgJ,EAAIoxD,GAA6B3kD,IAAQzV,CAAK,IAEzCgJ,CACT,CACF,CACO,SAAS0xD,GAAmBprB,GACjC,IAAKA,GAAwC,iBAAjBA,GAAqD,iBAAjBA,GAAqD,kBAAjBA,EAClG,OAAOA,EACF,GAAIlxC,MAAMuD,QAAQ2tC,GACvB,OAAOA,EAAan6B,KAAIslD,GAAOC,GAAmBD,KAC7C,GAA4B,iBAAjBnrB,EAA2B,CAC3C,IAAItmC,EAAM,CAAC,EAOX,OANAxJ,OAAO8zC,QAAQhE,GAAc95B,SAAQ,EAAEC,EAAKzV,OACrB,iBAAVA,GAAsB5B,MAAMuD,QAAQ2tC,MAC7CtvC,EAAQ06D,GAAmB16D,IAE7BgJ,EAAIuxD,GAAmC9kD,IAAQzV,CAAK,IAE/CgJ,CACT,CACF,CAMO,SAAS0wD,GAAoBiB,GAClC,IAAI/8D,EAAQ,GAMRqoD,GAAa,SAA4B0U,EAAa1U,YAsB1D,OArBAroD,EAAMG,KAAK,CAACkoD,IAGR0U,EAAa7X,SACf6X,EAAa7X,QAAQttC,SAAQrE,IAC3B,IAAIypD,GAAU,SAAQzpD,GACtBvT,EAAMG,KAAK68D,EAAQ,IAKvBh9D,EAAMG,KAAK,CAAC,YAAakoD,KAOzBroD,EAAQA,EAAMuX,KAAIklD,GACTA,EAAKllD,KAAIrQ,GAAOs1D,GAA6Bt1D,QAEzCqQ,KAAIklD,GACK,IAAhBA,EAAK38D,OACA28D,EAAK,GAEL,IAAMA,EAAKn8D,KAAK,KAAO,MAE/BA,KAAK,KACV,CAMOi1C,eAAe0nB,GAAYC,EAAWC,GAC3C,IAAI/hD,QAAc8hD,GACbE,EAAoBC,SAAyBjkD,QAAQu7B,IAAI,CAACv5B,EAAM2gD,WAAW/U,QAAQmW,GAAS/hD,EAAM4gD,kBAAkBhV,QAAQmW,KAC7HG,EAAWD,EAAgB36D,MAAM,GAMrC,OALA06D,EAAmBxlD,SAAQ,CAAC66B,EAAK8qB,KAC3B9qB,IACF6qB,EAASC,GAAO9qB,EAClB,IAEK6qB,CACT,+BCnNO,SAASE,EAAYnoB,GAC1B,OAAOA,EAAGA,EAAGv1C,OAAS,EACxB,CAQO,SAASkmD,EAAQn0C,GACtB,OAAOrR,MAAMuD,QAAQ8N,GAASA,EAAMnP,MAAM,GAAK,CAACmP,EAClD,CAMO,SAAS4rD,EAAWp5D,EAAOq5D,GAChCr5D,EAAQA,EAAM3B,MAAM,GAEpB,IADA,IAAI0I,EAAM,GACH/G,EAAMvE,QAAQ,CACnB,IAAI69D,EAAQt5D,EAAMiP,OAAO,EAAGoqD,GAC5BtyD,EAAIjL,KAAKw9D,EACX,CACA,OAAOvyD,CACT,CAqBO,SAASwyD,EAAqBh0D,GAQnC,OAAOpJ,MAAMuD,QAAQ6F,EACvB,CAiBO,SAASi0D,EAAoBz7D,GAClC,OAAIA,OAIN,CACO,SAAS07D,EAAsBzoB,EAAI0oB,GACxC,IAAIhjD,EAAQ,EACRwiD,GAAO,EACX,IAAK,IAAIS,KAAS3oB,EAAI,CAGpB,IADe0oB,EAAWC,EAD1BT,GAAY,GAKV,MAFAxiD,GAAgB,CAIpB,CACA,OAAOA,CACT,CA2BO,SAASkjD,EAAc5oB,EAAI1e,GAEhC,IADA,IAAIunC,EAASvnC,EAAI72B,OACRV,EAAI,EAAGA,EAAI8+D,IAAU9+D,EAAG,CAC/B,IAAI++D,EAAUxnC,EAAIv3B,GAClBi2C,EAAGl1C,KAAKg+D,EACV,CACF,qKCxHO,IAAIC,EAAsB,EAC1B,SAASC,IACd,MAAO,CAOLC,IAAKF,EAET,CAOO,SAASG,IAMd,MAAO,EACT,CACO,SAASC,EAA0BxsB,GACxC,OAAOpwC,OAAOmW,OAAO,CAAC,EAAGi6B,EAAS,CAChCgF,WAAOpzC,EACPizC,cAAUjzC,EACVquC,UAAMruC,GAEV,CAOO,SAAS66D,EAAyB7tB,EAAa8tB,EAAKC,GACzD,GAAID,EAAI5+D,SAAW6+D,EAAI7+D,OACrB,OAAO,EAIT,IAFA,IAAIV,EAAI,EACJK,EAAMi/D,EAAI5+D,OACPV,EAAIK,GAAK,CACd,IAAIm/D,EAAOF,EAAIt/D,GACXy/D,EAAOF,EAAIv/D,GAEf,GADAA,IACIw/D,EAAK3sB,OAAS4sB,EAAK5sB,MAAQ2sB,EAAKhuB,KAAiBiuB,EAAKjuB,GACxD,OAAO,CAEX,CACA,OAAO,CACT,CAcO,SAASkuB,EAA6BluB,EAAagF,GACxD,OAAOA,EAAKiU,KAdP,SAAmDjZ,GACxD,MAAO,CAACjnC,EAAGnG,IACLmG,EAAEqtC,MAAMsnB,MAAQ96D,EAAEwzC,MAAMsnB,IACtB96D,EAAEotC,GAAejnC,EAAEinC,GACd,GAEC,EAGHjnC,EAAEqtC,MAAMsnB,IAAM96D,EAAEwzC,MAAMsnB,GAGnC,CAEmBS,CAA0CnuB,GAC7D,sECpEO,SAASouB,EAAcC,GAC5B,IAAIC,EAAWD,EAAU5sD,MAAM,KAC3B8sD,EAAa,OAKjB,OAJAD,EAAStnD,SAAQ6kD,IACf0C,IAAc,QAAQ1C,EAAK,IAE7B0C,GAAc,SACP,IAAIz+D,MAAM,8KAAgLy+D,EAAa,yBAA2BF,EAAY,+BAAiCE,EAAa,eACrS,CACO,SAASC,EAAiBnnD,GAe/B,MAdU,CACR9G,KAAM8G,EAAI9G,KACVE,QAAS4G,EAAI5G,QACbguD,KAAMpnD,EAAIonD,KACVC,WAAYrnD,EAAIqnD,WAChB7+D,KAAMwX,EAAIxX,KAOV2Q,MAAQ6G,EAAI7G,MAAoB6G,EAAI7G,MAAM3G,QAAQ,MAAO,aAArC7G,EAGxB,iDChCiBhC,OAAO29D,OAAO,CAC7BC,eAAe,EACfC,aAAa,EACbC,sBAAsB,EACtBC,2BAA2B,EAC3BC,kBAAkB,EAClBC,iBAAiB,EACjBC,eAAe,EACfC,iBAAa,EACbC,mBAAe,EACfC,cAAU,IAYkBr+D,OAAO29D,OAAO,CAC1C,YACA,YACA,gBAmSF,MAAMW,EAAa,kBACMA,EAAWpgE,OAQpC,MAAMqgE,EACJ,WAAApvD,CAAYqvD,EAAOC,GACjBD,EAAQt7D,KAAKs7D,MAAQA,GAAS,GAC9Bt7D,KAAKu7D,cAAwB,IAAbA,EAAqC,EAAfD,EAAMtgE,OAAaugE,CAC3D,CACA,QAAA/7D,CAASg8D,GACP,OAAQA,GAAWC,GAAK3qD,UAAU9Q,KACpC,CACA,MAAAgF,CAAO02D,GAEL,GADA17D,KAAK27D,QACD37D,KAAKu7D,SAAW,EAClB,IAAK,IAAIjhE,EAAI,EAAGA,EAAIohE,EAAUH,SAAUjhE,IAAK,CAC3C,MAAMshE,EAAWF,EAAUJ,MAAMhhE,IAAM,KAAO,GAAKA,EAAI,EAAI,EAAI,IAC/D0F,KAAKs7D,MAAMt7D,KAAKu7D,SAAWjhE,IAAM,IAAMshE,GAAY,IAAM57D,KAAKu7D,SAAWjhE,GAAK,EAAI,CACpF,MAEA,IAAK,IAAIkH,EAAI,EAAGA,EAAIk6D,EAAUH,SAAU/5D,GAAK,EAC3CxB,KAAKs7D,MAAMt7D,KAAKu7D,SAAW/5D,IAAM,GAAKk6D,EAAUJ,MAAM95D,IAAM,GAIhE,OADAxB,KAAKu7D,UAAYG,EAAUH,SACpBv7D,IACT,CACA,KAAA27D,GACE37D,KAAKs7D,MAAMt7D,KAAKu7D,WAAa,IAAM,YAAc,GAAKv7D,KAAKu7D,SAAW,EAAI,EAC1Ev7D,KAAKs7D,MAAMtgE,OAAS8H,KAAK+4D,KAAK77D,KAAKu7D,SAAW,EAChD,CACA,KAAA3W,GACE,OAAO,IAAIyW,EAAU,IAAIr7D,KAAKs7D,OAChC,EAEF,MAAMG,EAAM,CACV,SAAA3qD,CAAU4qD,GACR,MAAMI,EAAW,GACjB,IAAK,IAAIxhE,EAAI,EAAGA,EAAIohE,EAAUH,SAAUjhE,IAAK,CAC3C,MAAMyhE,EAAOL,EAAUJ,MAAMhhE,IAAM,KAAO,GAAKA,EAAI,EAAI,EAAI,IAC3DwhE,EAASzgE,MAAM0gE,IAAS,GAAGv8D,SAAS,KAAa,GAAPu8D,GAAWv8D,SAAS,IAChE,CACA,OAAOs8D,EAAStgE,KAAK,GACvB,GAkBIwgE,EAAS,CACb,KAAAzhD,CAAM0hD,GACJ,MAAMC,EAAkBD,EAAUjhE,OAC5BsgE,EAAQ,GACd,IAAK,IAAIhhE,EAAI,EAAGA,EAAI4hE,EAAiB5hE,IACnCghE,EAAMhhE,IAAM,KAAiC,IAA1B2hE,EAAUphE,WAAWP,KAAa,GAAKA,EAAI,EAAI,EAEpE,OAAO,IAAI+gE,EAAUC,EAAOY,EAC9B,GAEIC,EAAO,CACX5hD,MAAM6hD,GACGJ,EAAOzhD,MAAM8hD,SAASC,mBAAmBF,MAGpD,MAAMG,EACJ,WAAAtwD,GACEjM,KAAKw8D,MAAQ,IAAInB,EACjBr7D,KAAKy8D,YAAc,EACnBz8D,KAAK08D,eAAiB,EACtB18D,KAAK28D,UAAY,EACnB,CACA,KAAAjhC,GACE17B,KAAKw8D,MAAQ,IAAInB,EACjBr7D,KAAKy8D,YAAc,CACrB,CACA,OAAAG,CAAQ19D,GACc,iBAATA,IACTA,EAAOi9D,EAAK5hD,MAAMrb,IAEpBc,KAAKw8D,MAAMx3D,OAAO9F,GAClBc,KAAKy8D,aAAev9D,EAAKq8D,QAC3B,CAEA,eAAAsB,CAAgBC,EAAYC,GAC5B,CACA,QAAAC,CAASC,GACP,IAAIC,EACAC,EAAen9D,KAAKw8D,MAAMjB,UAA6B,EAAjBv7D,KAAK28D,WAE7CQ,EADEF,EACan6D,KAAK+4D,KAAKsB,GAEVr6D,KAAK4C,KAAoB,EAAfy3D,GAAoBn9D,KAAK08D,eAAgB,GAEpE,MAAMU,EAAcD,EAAen9D,KAAK28D,UAClCU,EAAcv6D,KAAKC,IAAkB,EAAdq6D,EAAiBp9D,KAAKw8D,MAAMjB,UACzD,GAAI6B,EAAa,CACf,IAAK,IAAI17D,EAAS,EAAGA,EAAS07D,EAAa17D,GAAU1B,KAAK28D,UACxD38D,KAAK68D,gBAAgB78D,KAAKw8D,MAAMlB,MAAO55D,GAEzCw7D,EAAiBl9D,KAAKw8D,MAAMlB,MAAM9sD,OAAO,EAAG4uD,GAC5Cp9D,KAAKw8D,MAAMjB,UAAY8B,CACzB,CACA,OAAO,IAAIhC,EAAU6B,EAAgBG,EACvC,EAEF,MAAMC,UAAef,EACnB,MAAAza,CAAOyb,GAGL,OAFAv9D,KAAK48D,QAAQW,GACbv9D,KAAKg9D,WACEh9D,IACT,CACA,QAAAy4C,CAAS8kB,GACHA,GACFv9D,KAAK48D,QAAQW,EAEjB,EAGF,MAAMnoB,EAAI,CACR,YACC,WACD,YACC,WACD,YACC,WACD,UACA,YAEIpC,EAAI,CACR,WACA,YACC,YACA,UACD,UACA,YACC,YACA,YACA,UACD,UACA,UACA,WACA,YACC,YACA,YACA,YACA,WACA,UACD,UACA,UACA,UACA,WACA,WACA,YACC,YACA,YACA,YACA,YACA,WACA,UACD,UACA,UACA,UACA,UACA,WACA,WACA,WACA,YACC,YACA,YACA,YACA,YACA,YACA,WACA,WACA,WACA,UACD,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,YACC,YACA,YACA,YACA,YACA,YACA,WAEG0B,EAAI,GACV,MAAM8oB,UAAeF,EACnB,WAAArxD,GACEC,SAASxM,WACTM,KAAKy9D,MAAQ,IAAIpC,EAAU,IAAIjmB,GACjC,CACA,KAAA1Z,GACExvB,MAAMwvB,QACN17B,KAAKy9D,MAAQ,IAAIpC,EAAU,IAAIjmB,GACjC,CACA,eAAAynB,CAAgB/oB,EAAGpyC,GACjB,MAAMg8D,EAAK19D,KAAKy9D,MAAMnC,MACtB,IAAIz2D,EAAI64D,EAAG,GACPh/D,EAAIg/D,EAAG,GACPh7D,EAAIg7D,E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","sources":["webpack://rxdb-quickstart/webpack/runtime/load script","webpack://rxdb-quickstart/./node_modules/base64-js/index.js","webpack://rxdb-quickstart/./node_modules/buffer/index.js","webpack://rxdb-quickstart/./node_modules/debug/src/browser.js","webpack://rxdb-quickstart/./node_modules/debug/src/common.js","webpack://rxdb-quickstart/./node_modules/err-code/index.js","webpack://rxdb-quickstart/./node_modules/events/events.js","webpack://rxdb-quickstart/./node_modules/get-browser-rtc/index.js","webpack://rxdb-quickstart/./node_modules/ieee754/index.js","webpack://rxdb-quickstart/./node_modules/inherits/inherits_browser.js","webpack://rxdb-quickstart/./node_modules/ms/index.js","webpack://rxdb-quickstart/./node_modules/process/browser.js","webpack://rxdb-quickstart/./node_modules/queue-microtask/index.js","webpack://rxdb-quickstart/./node_modules/randombytes/browser.js","webpack://rxdb-quickstart/./node_modules/readable-stream/errors-browser.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/_stream_duplex.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/_stream_passthrough.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/_stream_readable.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/_stream_transform.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/_stream_writable.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/internal/streams/async_iterator.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/internal/streams/from-browser.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/internal/streams/state.js","webpack://rxdb-quickstart/./node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack://rxdb-quickstart/./node_modules/readable-stream/readable-browser.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/Observable.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/Subject.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/config.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/EmptyError.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/observeOn.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/subscribeOn.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleAsyncIterable.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduled.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleObservable.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleArray.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/scheduled/schedulePromise.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleIterable.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleReadableStreamLike.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/observable/from.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/filter.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/mergeInternals.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/scheduler/dateTimestampProvider.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/share.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/observable/concat.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/concatAll.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/startWith.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/args.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/isScheduler.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/isIterable.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/isPromise.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","webpack://rxdb-quickstart/./node_modules/safe-buffer/index.js","webpack://rxdb-quickstart/./node_modules/simple-peer/index.js","webpack://rxdb-quickstart/./node_modules/string_decoder/lib/string_decoder.js","webpack://rxdb-quickstart/./node_modules/util-deprecate/browser.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://rxdb-quickstart/./node_modules/oblivious-set/dist/esm/src/index.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/doc-cache.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/hooks.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/incremental-write.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/overwritable.js","webpack://rxdb-quickstart/./node_modules/dexie/dist/modern/dexie.min.mjs","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-storage-statics.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/storage-dexie/dexie-helper.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-array.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-document.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-error.js","webpack://rxdb-quickstart/./node_modules/ohash/dist/index.mjs","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-hash.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-map.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-object-deep-equal.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-object-dot-prop.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-object.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-other.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-promise.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-revision.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-rxdb-version.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-string.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-time.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/query-cache.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/query-planner.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/replication-protocol/conflicts.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-change-event.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-collection-helper.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/change-event-buffer.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-document-prototype-merge.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-collection.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-database-internal-store.js","webpack://rxdb-quickstart/./node_modules/custom-idle-queue/dist/es/index.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-database.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-document.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://rxdb-quickstart/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-error.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/util.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/core.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/lazy.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/aggregator.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/cursor.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/query.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/window/_internal.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/pipeline/group.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/pipeline/sort.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/pipeline/setWindowFields.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/_predicates.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/array/nin.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/bitwise/_internal.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/bitwise/bitAnd.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/bitwise/bitOr.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/bitwise/bitXor.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/comparison/eq.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/comparison/gt.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/comparison/gte.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/comparison/lt.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/comparison/lte.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/comparison/ne.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/date/dateFromParts.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/date/dateFromString.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/string/substrBytes.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/_internal.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/acos.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/acosh.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/asin.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/asinh.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/atan.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/atanh.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/cos.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/cosh.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/degreesToRadians.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/radiansToDegrees.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/sin.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/sinh.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/trignometry/tan.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/expression/type/toBool.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/pipeline/project.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/pipeline/redact.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/logical/and.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/logical/or.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/logical/nor.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/logical/not.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/comparison/eq.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/comparison/gt.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/comparison/gte.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/comparison/in.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/comparison/lt.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/comparison/lte.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/comparison/ne.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/comparison/nin.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/evaluation/mod.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/evaluation/regex.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/array/all.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/array/elemMatch.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/array/size.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/element/exists.js","webpack://rxdb-quickstart/./node_modules/mingo/dist/esm/operators/query/element/type.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-query-mingo.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-query-helper.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/observable/empty.js","webpack://rxdb-quickstart/./node_modules/event-reduce-js/dist/esm/src/actions/action-functions.js","webpack://rxdb-quickstart/./node_modules/array-push-at-sort-position/dist/esm/index.js","webpack://rxdb-quickstart/./node_modules/event-reduce-js/dist/esm/src/actions/index.js","webpack://rxdb-quickstart/./node_modules/binary-decision-diagram/dist/esm/src/util.js","webpack://rxdb-quickstart/./node_modules/binary-decision-diagram/dist/esm/src/minimal-string/string-format.js","webpack://rxdb-quickstart/./node_modules/event-reduce-js/dist/esm/src/util.js","webpack://rxdb-quickstart/./node_modules/event-reduce-js/dist/esm/src/states/state-resolver.js","webpack://rxdb-quickstart/./node_modules/event-reduce-js/dist/esm/src/states/index.js","webpack://rxdb-quickstart/./node_modules/event-reduce-js/dist/esm/src/bdd/bdd.generated.js","webpack://rxdb-quickstart/./node_modules/binary-decision-diagram/dist/esm/src/minimal-string/minimal-string-to-simple-bdd.js","webpack://rxdb-quickstart/./node_modules/binary-decision-diagram/dist/esm/src/minimal-string/resolve-with-simple-bdd.js","webpack://rxdb-quickstart/./node_modules/event-reduce-js/dist/esm/src/index.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/event-reduce.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-query-single-result.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-query.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/observable/merge.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/utils/utils-regex.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-schema-helper.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-schema.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-storage-helper.js","webpack://rxdb-quickstart/./node_modules/tslib/tslib.es6.mjs","webpack://rxdb-quickstart/webpack/bootstrap","webpack://rxdb-quickstart/webpack/runtime/define property getters","webpack://rxdb-quickstart/webpack/runtime/ensure chunk","webpack://rxdb-quickstart/webpack/runtime/get javascript chunk filename","webpack://rxdb-quickstart/webpack/runtime/get mini-css chunk filename","webpack://rxdb-quickstart/webpack/runtime/global","webpack://rxdb-quickstart/webpack/runtime/hasOwnProperty shorthand","webpack://rxdb-quickstart/webpack/runtime/make namespace object","webpack://rxdb-quickstart/webpack/runtime/publicPath","webpack://rxdb-quickstart/webpack/runtime/jsonp chunk loading","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugin.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/argsArgArrayOrObject.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/mapOneOrManyArgs.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/createObject.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/replication-protocol/checkpoint.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/replication-protocol/helper.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/replication-protocol/meta-instance.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/replication-protocol/downstream.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/attachments/attachments-utils.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/replication-protocol/upstream.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/replication-protocol/index.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/util.js","webpack://rxdb-quickstart/./node_modules/unload/dist/es/index.js","webpack://rxdb-quickstart/./node_modules/unload/dist/es/node.js","webpack://rxdb-quickstart/./node_modules/unload/dist/es/browser.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/leader-election-util.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/leader-election-web-lock.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/leader-election.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/util/argsOrArgArray.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/merge.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/methods/native.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/options.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/methods/indexed-db.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/methods/localstorage.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/methods/simulate.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/method-chooser.js","webpack://rxdb-quickstart/./node_modules/broadcast-channel/dist/esbrowser/broadcast-channel.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/rx-storage-multiinstance.js","webpack://rxdb-quickstart/./node_modules/rxjs/dist/esm5/internal/operators/mergeWith.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/leader-election/index.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/replication/replication-helper.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/replication/index.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/replication-webrtc/webrtc-helper.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/replication-webrtc/index.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/replication-webrtc/connection-handler-simple-peer.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/storage-dexie/dexie-query.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/storage-dexie/rx-storage-instance-dexie.js","webpack://rxdb-quickstart/./node_modules/rxdb/dist/esm/plugins/storage-dexie/rx-storage-dexie.js","webpack://rxdb-quickstart/./src/database.ts","webpack://rxdb-quickstart/./src/index.ts"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"rxdb-quickstart:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","'use strict';\n\n/**\n * @typedef {{ [key: string]: any }} Extensions\n * @typedef {Error} Err\n * @property {string} message\n */\n\n/**\n *\n * @param {Error} obj\n * @param {Extensions} props\n * @returns {Error & Extensions}\n */\nfunction assign(obj, props) {\n    for (const key in props) {\n        Object.defineProperty(obj, key, {\n            value: props[key],\n            enumerable: true,\n            configurable: true,\n        });\n    }\n\n    return obj;\n}\n\n/**\n *\n * @param {any} err - An Error\n * @param {string|Extensions} code - A string code or props to set on the error\n * @param {Extensions} [props] - Props to set on the error\n * @returns {Error & Extensions}\n */\nfunction createError(err, code, props) {\n    if (!err || typeof err === 'string') {\n        throw new TypeError('Please pass an Error to err-code');\n    }\n\n    if (!props) {\n        props = {};\n    }\n\n    if (typeof code === 'object') {\n        props = code;\n        code = '';\n    }\n\n    if (code) {\n        props.code = code;\n    }\n\n    try {\n        return assign(err, props);\n    } catch (_) {\n        props.message = err.message;\n        props.stack = err.stack;\n\n        const ErrClass = function () {};\n\n        ErrClass.prototype = Object.create(Object.getPrototypeOf(err));\n\n        // @ts-ignore\n        const output = assign(new ErrClass(), props);\n\n        return output;\n    }\n}\n\nmodule.exports = createError;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","// originally pulled out of simple-peer\n\nmodule.exports = function getBrowserRTC () {\n  if (typeof globalThis === 'undefined') return null\n  var wrtc = {\n    RTCPeerConnection: globalThis.RTCPeerConnection || globalThis.mozRTCPeerConnection ||\n      globalThis.webkitRTCPeerConnection,\n    RTCSessionDescription: globalThis.RTCSessionDescription ||\n      globalThis.mozRTCSessionDescription || globalThis.webkitRTCSessionDescription,\n    RTCIceCandidate: globalThis.RTCIceCandidate || globalThis.mozRTCIceCandidate ||\n      globalThis.webkitRTCIceCandidate\n  }\n  if (!wrtc.RTCPeerConnection) return null\n  return wrtc\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","'use strict'\n\n// limit of Crypto.getRandomValues()\n// https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\nvar MAX_BYTES = 65536\n\n// Node supports requesting up to this number of bytes\n// https://github.com/nodejs/node/blob/master/lib/internal/crypto/random.js#L48\nvar MAX_UINT32 = 4294967295\n\nfunction oldBrowser () {\n  throw new Error('Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11')\n}\n\nvar Buffer = require('safe-buffer').Buffer\nvar crypto = global.crypto || global.msCrypto\n\nif (crypto && crypto.getRandomValues) {\n  module.exports = randomBytes\n} else {\n  module.exports = oldBrowser\n}\n\nfunction randomBytes (size, cb) {\n  // phantomjs needs to throw\n  if (size > MAX_UINT32) throw new RangeError('requested too many random bytes')\n\n  var bytes = Buffer.allocUnsafe(size)\n\n  if (size > 0) {  // getRandomValues fails on IE if size == 0\n    if (size > MAX_BYTES) { // this is the max bytes crypto.getRandomValues\n      // can do at once see https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n      for (var generated = 0; generated < size; generated += MAX_BYTES) {\n        // buffer.slice automatically checks if the end is past the end of\n        // the buffer so we don't have to here\n        crypto.getRandomValues(bytes.slice(generated, generated + MAX_BYTES))\n      }\n    } else {\n      crypto.getRandomValues(bytes)\n    }\n  }\n\n  if (typeof cb === 'function') {\n    return process.nextTick(function () {\n      cb(null, bytes)\n    })\n  }\n\n  return bytes\n}\n","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\nrequire('inherits')(Duplex, Readable);\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(onEndNT, this);\n}\nfunction onEndNT(self) {\n  self.end();\n}\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\nvar Transform = require('./_stream_transform');\nrequire('inherits')(PassThrough, Transform);\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/buffer_list');\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\n// Lazy loaded to improve the startup performance.\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\nrequire('inherits')(Readable, Stream);\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'end' (and potentially 'finish')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex);\n\n  // legacy\n  this.readable = true;\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n  Stream.call(this);\n}\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n  return er;\n}\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder;\n  // If setEncoding(null), decoder.encoding equals utf8\n  this._readableState.encoding = this._readableState.decoder.encoding;\n\n  // Iterate over current buffer to convert already stored Buffers:\n  var p = this._readableState.buffer.head;\n  var content = '';\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n  this._readableState.buffer.clear();\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n};\n\n// Don't raise the hwm > 1GB\nvar MAX_HWM = 0x40000000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  }\n\n  // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n  return dest;\n};\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    for (var i = 0; i < len; i++) dests[i].emit('unpipe', this, {\n      hasUnpiped: false\n    });\n    return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0;\n\n    // Try start flowing on next tick if stream isn't explicitly paused\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true;\n\n    // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n  state.paused = false;\n  return this;\n};\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n  if (!state.reading) {\n    stream.read(0);\n  }\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  this._readableState.paused = true;\n  return this;\n};\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null);\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n  return this;\n};\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n    return createReadableStreamAsyncIterator(this);\n  };\n}\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n});\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length);\n\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = require('./internal/streams/from');\n    }\n    return from(Readable, iterable, opts);\n  };\n}\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\nvar _require$codes = require('../errors').codes,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n  ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\nvar Duplex = require('./_stream_duplex');\nrequire('inherits')(Transform, Duplex);\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\nfunction prefinish() {\n  var _this = this;\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n  ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nrequire('inherits')(Writable, Stream);\nfunction nop() {}\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'finish' (and potentially 'end')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex);\n\n  // legacy.\n  this.writable = true;\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END();\n  // TODO: defer error events consistently everywhere, not just the cb\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n  return true;\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n  return ret;\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\nWritable.prototype._writev = null;\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n  return need;\n}\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n\n  // reuse the free corkReq.\n  state.corkedRequestsFree.next = corkReq;\n}\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};","'use strict';\n\nvar _Object$setPrototypeO;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar finished = require('./end-of-stream');\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n  if (resolve !== null) {\n    var data = iter[kStream].read();\n    // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n  next: function next() {\n    var _this = this;\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    }\n\n    // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n    var lastPromise = this[kLastPromise];\n    var promise;\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n      promise = new Promise(this[kHandlePromise]);\n    }\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject];\n      // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n      iterator[kError] = err;\n      return;\n    }\n    var resolve = iterator[kLastResolve];\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\nmodule.exports = createReadableStreamAsyncIterator;","'use strict';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar _require = require('buffer'),\n  Buffer = _require.Buffer;\nvar _require2 = require('util'),\n  inspect = _require2.inspect;\nvar custom = inspect && inspect.custom || 'inspect';\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\nmodule.exports = /*#__PURE__*/function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n      while (p = p.next) ret += s + p.data;\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes or characters from the buffered data.\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    }\n\n    // Consumes a specified amount of characters from the buffered data.\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes from the buffered data.\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Make sure the linked list only shows the minimal necessary information.\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread(_objectSpread({}, options), {}, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n  return BufferList;\n}();","'use strict';\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n  return this;\n}\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};","// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    callback.apply(this, args);\n  };\n}\nfunction noop() {}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n  var writableEnded = stream._writableState && stream._writableState.finished;\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n  var onclose = function onclose() {\n    var err;\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\nmodule.exports = eos;","module.exports = function () {\n  throw new Error('Readable.from is not available in the browser')\n};\n","// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar eos;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\nvar _require$codes = require('../../../errors').codes,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true;\n\n    // request.destroy just do .end - .abort is what we want\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\nfunction call(fn) {\n  fn();\n}\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\nmodule.exports = pipeline;","'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n    return Math.floor(hwm);\n  }\n\n  // Default value\n  return state.objectMode ? 16 : 16 * 1024;\n}\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};","module.exports = require('events').EventEmitter;\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nexports.finished = require('./lib/internal/streams/end-of-stream.js');\nexports.pipeline = require('./lib/internal/streams/pipeline.js');\n","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nvar BehaviorSubject = (function (_super) {\n    __extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        !subscription.closed && subscriber.next(this._value);\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, _value = _a._value;\n        if (hasError) {\n            throw thrownError;\n        }\n        this._throwIfClosed();\n        return _value;\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, (this._value = value));\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { createErrorClass } from './createErrorClass';\nexport var EmptyError = createErrorClass(function (_super) { return function EmptyErrorImpl() {\n    _super(this);\n    this.name = 'EmptyError';\n    this.message = 'no elements in sequence';\n}; });\n//# sourceMappingURL=EmptyError.js.map","import { EmptyError } from './util/EmptyError';\nimport { SafeSubscriber } from './Subscriber';\nexport function firstValueFrom(source, config) {\n    var hasConfig = typeof config === 'object';\n    return new Promise(function (resolve, reject) {\n        var subscriber = new SafeSubscriber({\n            next: function (value) {\n                resolve(value);\n                subscriber.unsubscribe();\n            },\n            error: reject,\n            complete: function () {\n                if (hasConfig) {\n                    resolve(config.defaultValue);\n                }\n                else {\n                    reject(new EmptyError());\n                }\n            },\n        });\n        source.subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=firstValueFrom.js.map","import { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return executeSchedule(subscriber, scheduler, function () { return subscriber.next(value); }, delay); }, function () { return executeSchedule(subscriber, scheduler, function () { return subscriber.complete(); }, delay); }, function (err) { return executeSchedule(subscriber, scheduler, function () { return subscriber.error(err); }, delay); }));\n    });\n}\n//# sourceMappingURL=observeOn.js.map","import { operate } from '../util/lift';\nexport function subscribeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        subscriber.add(scheduler.schedule(function () { return source.subscribe(subscriber); }, delay));\n    });\n}\n//# sourceMappingURL=subscribeOn.js.map","import { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleAsyncIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        executeSchedule(subscriber, scheduler, function () {\n            var iterator = input[Symbol.asyncIterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                iterator.next().then(function (result) {\n                    if (result.done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(result.value);\n                    }\n                });\n            }, 0, true);\n        });\n    });\n}\n//# sourceMappingURL=scheduleAsyncIterable.js.map","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        if (isAsyncIterable(input)) {\n            return scheduleAsyncIterable(input, scheduler);\n        }\n        if (isIterable(input)) {\n            return scheduleIterable(input, scheduler);\n        }\n        if (isReadableStreamLike(input)) {\n            return scheduleReadableStreamLike(input, scheduler);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\n//# sourceMappingURL=scheduled.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function scheduleObservable(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=scheduleObservable.js.map","import { Observable } from '../Observable';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var i = 0;\n        return scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n            }\n            else {\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    this.schedule();\n                }\n            }\n        });\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function schedulePromise(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=schedulePromise.js.map","import { Observable } from '../Observable';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleIterable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var iterator;\n        executeSchedule(subscriber, scheduler, function () {\n            iterator = input[Symbol_iterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                var _a;\n                var value;\n                var done;\n                try {\n                    (_a = iterator.next(), value = _a.value, done = _a.done);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                }\n            }, 0, true);\n        });\n        return function () { return isFunction(iterator === null || iterator === void 0 ? void 0 : iterator.return) && iterator.return(); };\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map","import { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nexport function scheduleReadableStreamLike(input, scheduler) {\n    return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n//# sourceMappingURL=scheduleReadableStreamLike.js.map","import { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\nexport function from(input, scheduler) {\n    return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n//# sourceMappingURL=from.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function distinctUntilChanged(comparator, keySelector) {\n    if (keySelector === void 0) { keySelector = identity; }\n    comparator = comparator !== null && comparator !== void 0 ? comparator : defaultCompare;\n    return operate(function (source, subscriber) {\n        var previousKey;\n        var first = true;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var currentKey = keySelector(value);\n            if (first || !comparator(previousKey, currentKey)) {\n                first = false;\n                previousKey = currentKey;\n                subscriber.next(value);\n            }\n        }));\n    });\n}\nfunction defaultCompare(a, b) {\n    return a === b;\n}\n//# sourceMappingURL=distinctUntilChanged.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map","import { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nimport { isFunction } from '../util/isFunction';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    if (isFunction(resultSelector)) {\n        return mergeMap(function (a, i) { return map(function (b, ii) { return resultSelector(a, b, i, ii); })(innerFrom(project(a, i))); }, concurrent);\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return operate(function (source, subscriber) { return mergeInternals(source, subscriber, project, concurrent); });\n}\n//# sourceMappingURL=mergeMap.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {\n    var buffer = [];\n    var active = 0;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function () {\n        if (isComplete && !buffer.length && !active) {\n            subscriber.complete();\n        }\n    };\n    var outerNext = function (value) { return (active < concurrent ? doInnerSub(value) : buffer.push(value)); };\n    var doInnerSub = function (value) {\n        expand && subscriber.next(value);\n        active++;\n        var innerComplete = false;\n        innerFrom(project(value, index++)).subscribe(createOperatorSubscriber(subscriber, function (innerValue) {\n            onBeforeNext === null || onBeforeNext === void 0 ? void 0 : onBeforeNext(innerValue);\n            if (expand) {\n                outerNext(innerValue);\n            }\n            else {\n                subscriber.next(innerValue);\n            }\n        }, function () {\n            innerComplete = true;\n        }, undefined, function () {\n            if (innerComplete) {\n                try {\n                    active--;\n                    var _loop_1 = function () {\n                        var bufferedValue = buffer.shift();\n                        if (innerSubScheduler) {\n                            executeSchedule(subscriber, innerSubScheduler, function () { return doInnerSub(bufferedValue); });\n                        }\n                        else {\n                            doInnerSub(bufferedValue);\n                        }\n                    };\n                    while (buffer.length && active < concurrent) {\n                        _loop_1();\n                    }\n                    checkComplete();\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }\n        }));\n    };\n    source.subscribe(createOperatorSubscriber(subscriber, outerNext, function () {\n        isComplete = true;\n        checkComplete();\n    }));\n    return function () {\n        additionalFinalizer === null || additionalFinalizer === void 0 ? void 0 : additionalFinalizer();\n    };\n}\n//# sourceMappingURL=mergeInternals.js.map","export var dateTimestampProvider = {\n    now: function () {\n        return (dateTimestampProvider.delegate || Date).now();\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=dateTimestampProvider.js.map","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nvar ReplaySubject = (function (_super) {\n    __extends(ReplaySubject, _super);\n    function ReplaySubject(_bufferSize, _windowTime, _timestampProvider) {\n        if (_bufferSize === void 0) { _bufferSize = Infinity; }\n        if (_windowTime === void 0) { _windowTime = Infinity; }\n        if (_timestampProvider === void 0) { _timestampProvider = dateTimestampProvider; }\n        var _this = _super.call(this) || this;\n        _this._bufferSize = _bufferSize;\n        _this._windowTime = _windowTime;\n        _this._timestampProvider = _timestampProvider;\n        _this._buffer = [];\n        _this._infiniteTimeWindow = true;\n        _this._infiniteTimeWindow = _windowTime === Infinity;\n        _this._bufferSize = Math.max(1, _bufferSize);\n        _this._windowTime = Math.max(1, _windowTime);\n        return _this;\n    }\n    ReplaySubject.prototype.next = function (value) {\n        var _a = this, isStopped = _a.isStopped, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow, _timestampProvider = _a._timestampProvider, _windowTime = _a._windowTime;\n        if (!isStopped) {\n            _buffer.push(value);\n            !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n        }\n        this._trimBuffer();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._trimBuffer();\n        var subscription = this._innerSubscribe(subscriber);\n        var _a = this, _infiniteTimeWindow = _a._infiniteTimeWindow, _buffer = _a._buffer;\n        var copy = _buffer.slice();\n        for (var i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n            subscriber.next(copy[i]);\n        }\n        this._checkFinalizedStatuses(subscriber);\n        return subscription;\n    };\n    ReplaySubject.prototype._trimBuffer = function () {\n        var _a = this, _bufferSize = _a._bufferSize, _timestampProvider = _a._timestampProvider, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow;\n        var adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n        _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n        if (!_infiniteTimeWindow) {\n            var now = _timestampProvider.now();\n            var last = 0;\n            for (var i = 1; i < _buffer.length && _buffer[i] <= now; i += 2) {\n                last = i;\n            }\n            last && _buffer.splice(0, last + 1);\n        }\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\n//# sourceMappingURL=ReplaySubject.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { innerFrom } from '../observable/innerFrom';\nimport { Subject } from '../Subject';\nimport { SafeSubscriber } from '../Subscriber';\nimport { operate } from '../util/lift';\nexport function share(options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.connector, connector = _a === void 0 ? function () { return new Subject(); } : _a, _b = options.resetOnError, resetOnError = _b === void 0 ? true : _b, _c = options.resetOnComplete, resetOnComplete = _c === void 0 ? true : _c, _d = options.resetOnRefCountZero, resetOnRefCountZero = _d === void 0 ? true : _d;\n    return function (wrapperSource) {\n        var connection;\n        var resetConnection;\n        var subject;\n        var refCount = 0;\n        var hasCompleted = false;\n        var hasErrored = false;\n        var cancelReset = function () {\n            resetConnection === null || resetConnection === void 0 ? void 0 : resetConnection.unsubscribe();\n            resetConnection = undefined;\n        };\n        var reset = function () {\n            cancelReset();\n            connection = subject = undefined;\n            hasCompleted = hasErrored = false;\n        };\n        var resetAndUnsubscribe = function () {\n            var conn = connection;\n            reset();\n            conn === null || conn === void 0 ? void 0 : conn.unsubscribe();\n        };\n        return operate(function (source, subscriber) {\n            refCount++;\n            if (!hasErrored && !hasCompleted) {\n                cancelReset();\n            }\n            var dest = (subject = subject !== null && subject !== void 0 ? subject : connector());\n            subscriber.add(function () {\n                refCount--;\n                if (refCount === 0 && !hasErrored && !hasCompleted) {\n                    resetConnection = handleReset(resetAndUnsubscribe, resetOnRefCountZero);\n                }\n            });\n            dest.subscribe(subscriber);\n            if (!connection &&\n                refCount > 0) {\n                connection = new SafeSubscriber({\n                    next: function (value) { return dest.next(value); },\n                    error: function (err) {\n                        hasErrored = true;\n                        cancelReset();\n                        resetConnection = handleReset(reset, resetOnError, err);\n                        dest.error(err);\n                    },\n                    complete: function () {\n                        hasCompleted = true;\n                        cancelReset();\n                        resetConnection = handleReset(reset, resetOnComplete);\n                        dest.complete();\n                    },\n                });\n                innerFrom(source).subscribe(connection);\n            }\n        })(wrapperSource);\n    };\n}\nfunction handleReset(reset, on) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    if (on === true) {\n        reset();\n        return;\n    }\n    if (on === false) {\n        return;\n    }\n    var onSubscriber = new SafeSubscriber({\n        next: function () {\n            onSubscriber.unsubscribe();\n            reset();\n        },\n    });\n    return innerFrom(on.apply(void 0, __spreadArray([], __read(args)))).subscribe(onSubscriber);\n}\n//# sourceMappingURL=share.js.map","import { ReplaySubject } from '../ReplaySubject';\nimport { share } from './share';\nexport function shareReplay(configOrBufferSize, windowTime, scheduler) {\n    var _a, _b, _c;\n    var bufferSize;\n    var refCount = false;\n    if (configOrBufferSize && typeof configOrBufferSize === 'object') {\n        (_a = configOrBufferSize.bufferSize, bufferSize = _a === void 0 ? Infinity : _a, _b = configOrBufferSize.windowTime, windowTime = _b === void 0 ? Infinity : _b, _c = configOrBufferSize.refCount, refCount = _c === void 0 ? false : _c, scheduler = configOrBufferSize.scheduler);\n    }\n    else {\n        bufferSize = (configOrBufferSize !== null && configOrBufferSize !== void 0 ? configOrBufferSize : Infinity);\n    }\n    return share({\n        connector: function () { return new ReplaySubject(bufferSize, windowTime, scheduler); },\n        resetOnError: true,\n        resetOnComplete: false,\n        resetOnRefCountZero: refCount,\n    });\n}\n//# sourceMappingURL=shareReplay.js.map","import { concatAll } from '../operators/concatAll';\nimport { popScheduler } from '../util/args';\nimport { from } from './from';\nexport function concat() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    return concatAll()(from(args, popScheduler(args)));\n}\n//# sourceMappingURL=concat.js.map","import { mergeAll } from './mergeAll';\nexport function concatAll() {\n    return mergeAll(1);\n}\n//# sourceMappingURL=concatAll.js.map","import { concat } from '../observable/concat';\nimport { popScheduler } from '../util/args';\nimport { operate } from '../util/lift';\nexport function startWith() {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(values);\n    return operate(function (source, subscriber) {\n        (scheduler ? concat(values, source, scheduler) : concat(values, source)).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=startWith.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","import { isFunction } from './isFunction';\nimport { isScheduler } from './isScheduler';\nfunction last(arr) {\n    return arr[arr.length - 1];\n}\nexport function popResultSelector(args) {\n    return isFunction(last(args)) ? args.pop() : undefined;\n}\nexport function popScheduler(args) {\n    return isScheduler(last(args)) ? args.pop() : undefined;\n}\nexport function popNumber(args, defaultValue) {\n    return typeof last(args) === 'number' ? args.pop() : defaultValue;\n}\n//# sourceMappingURL=args.js.map","import { isFunction } from './isFunction';\nexport function isScheduler(value) {\n    return value && isFunction(value.schedule);\n}\n//# sourceMappingURL=isScheduler.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","export function executeSchedule(parentSubscription, scheduler, work, delay, repeat) {\n    if (delay === void 0) { delay = 0; }\n    if (repeat === void 0) { repeat = false; }\n    var scheduleSubscription = scheduler.schedule(function () {\n        work();\n        if (repeat) {\n            parentSubscription.add(this.schedule(null, delay));\n        }\n        else {\n            this.unsubscribe();\n        }\n    }, delay);\n    parentSubscription.add(scheduleSubscription);\n    if (!repeat) {\n        return scheduleSubscription;\n    }\n}\n//# sourceMappingURL=executeSchedule.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nconst debug = require('debug')('simple-peer')\nconst getBrowserRTC = require('get-browser-rtc')\nconst randombytes = require('randombytes')\nconst stream = require('readable-stream')\nconst queueMicrotask = require('queue-microtask') // TODO: remove when Node 10 is not supported\nconst errCode = require('err-code')\nconst { Buffer } = require('buffer')\n\nconst MAX_BUFFERED_AMOUNT = 64 * 1024\nconst ICECOMPLETE_TIMEOUT = 5 * 1000\nconst CHANNEL_CLOSING_TIMEOUT = 5 * 1000\n\n// HACK: Filter trickle lines when trickle is disabled #354\nfunction filterTrickle (sdp) {\n  return sdp.replace(/a=ice-options:trickle\\s\\n/g, '')\n}\n\nfunction warn (message) {\n  console.warn(message)\n}\n\n/**\n * WebRTC peer connection. Same API as node core `net.Socket`, plus a few extra methods.\n * Duplex stream.\n * @param {Object} opts\n */\nclass Peer extends stream.Duplex {\n  constructor (opts) {\n    opts = Object.assign({\n      allowHalfOpen: false\n    }, opts)\n\n    super(opts)\n\n    this._id = randombytes(4).toString('hex').slice(0, 7)\n    this._debug('new peer %o', opts)\n\n    this.channelName = opts.initiator\n      ? opts.channelName || randombytes(20).toString('hex')\n      : null\n\n    this.initiator = opts.initiator || false\n    this.channelConfig = opts.channelConfig || Peer.channelConfig\n    this.channelNegotiated = this.channelConfig.negotiated\n    this.config = Object.assign({}, Peer.config, opts.config)\n    this.offerOptions = opts.offerOptions || {}\n    this.answerOptions = opts.answerOptions || {}\n    this.sdpTransform = opts.sdpTransform || (sdp => sdp)\n    this.streams = opts.streams || (opts.stream ? [opts.stream] : []) // support old \"stream\" option\n    this.trickle = opts.trickle !== undefined ? opts.trickle : true\n    this.allowHalfTrickle = opts.allowHalfTrickle !== undefined ? opts.allowHalfTrickle : false\n    this.iceCompleteTimeout = opts.iceCompleteTimeout || ICECOMPLETE_TIMEOUT\n\n    this.destroyed = false\n    this.destroying = false\n    this._connected = false\n\n    this.remoteAddress = undefined\n    this.remoteFamily = undefined\n    this.remotePort = undefined\n    this.localAddress = undefined\n    this.localFamily = undefined\n    this.localPort = undefined\n\n    this._wrtc = (opts.wrtc && typeof opts.wrtc === 'object')\n      ? opts.wrtc\n      : getBrowserRTC()\n\n    if (!this._wrtc) {\n      if (typeof window === 'undefined') {\n        throw errCode(new Error('No WebRTC support: Specify `opts.wrtc` option in this environment'), 'ERR_WEBRTC_SUPPORT')\n      } else {\n        throw errCode(new Error('No WebRTC support: Not a supported browser'), 'ERR_WEBRTC_SUPPORT')\n      }\n    }\n\n    this._pcReady = false\n    this._channelReady = false\n    this._iceComplete = false // ice candidate trickle done (got null candidate)\n    this._iceCompleteTimer = null // send an offer/answer anyway after some timeout\n    this._channel = null\n    this._pendingCandidates = []\n\n    this._isNegotiating = false // is this peer waiting for negotiation to complete?\n    this._firstNegotiation = true\n    this._batchedNegotiation = false // batch synchronous negotiations\n    this._queuedNegotiation = false // is there a queued negotiation request?\n    this._sendersAwaitingStable = []\n    this._senderMap = new Map()\n    this._closingInterval = null\n\n    this._remoteTracks = []\n    this._remoteStreams = []\n\n    this._chunk = null\n    this._cb = null\n    this._interval = null\n\n    try {\n      this._pc = new (this._wrtc.RTCPeerConnection)(this.config)\n    } catch (err) {\n      this.destroy(errCode(err, 'ERR_PC_CONSTRUCTOR'))\n      return\n    }\n\n    // We prefer feature detection whenever possible, but sometimes that's not\n    // possible for certain implementations.\n    this._isReactNativeWebrtc = typeof this._pc._peerConnectionId === 'number'\n\n    this._pc.oniceconnectionstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onicegatheringstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onconnectionstatechange = () => {\n      this._onConnectionStateChange()\n    }\n    this._pc.onsignalingstatechange = () => {\n      this._onSignalingStateChange()\n    }\n    this._pc.onicecandidate = event => {\n      this._onIceCandidate(event)\n    }\n\n    // HACK: Fix for odd Firefox behavior, see: https://github.com/feross/simple-peer/pull/783\n    if (typeof this._pc.peerIdentity === 'object') {\n      this._pc.peerIdentity.catch(err => {\n        this.destroy(errCode(err, 'ERR_PC_PEER_IDENTITY'))\n      })\n    }\n\n    // Other spec events, unused by this implementation:\n    // - onconnectionstatechange\n    // - onicecandidateerror\n    // - onfingerprintfailure\n    // - onnegotiationneeded\n\n    if (this.initiator || this.channelNegotiated) {\n      this._setupData({\n        channel: this._pc.createDataChannel(this.channelName, this.channelConfig)\n      })\n    } else {\n      this._pc.ondatachannel = event => {\n        this._setupData(event)\n      }\n    }\n\n    if (this.streams) {\n      this.streams.forEach(stream => {\n        this.addStream(stream)\n      })\n    }\n    this._pc.ontrack = event => {\n      this._onTrack(event)\n    }\n\n    this._debug('initial negotiation')\n    this._needsNegotiation()\n\n    this._onFinishBound = () => {\n      this._onFinish()\n    }\n    this.once('finish', this._onFinishBound)\n  }\n\n  get bufferSize () {\n    return (this._channel && this._channel.bufferedAmount) || 0\n  }\n\n  // HACK: it's possible channel.readyState is \"closing\" before peer.destroy() fires\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n  get connected () {\n    return (this._connected && this._channel.readyState === 'open')\n  }\n\n  address () {\n    return { port: this.localPort, family: this.localFamily, address: this.localAddress }\n  }\n\n  signal (data) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot signal after peer is destroyed'), 'ERR_DESTROYED')\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data)\n      } catch (err) {\n        data = {}\n      }\n    }\n    this._debug('signal()')\n\n    if (data.renegotiate && this.initiator) {\n      this._debug('got request to renegotiate')\n      this._needsNegotiation()\n    }\n    if (data.transceiverRequest && this.initiator) {\n      this._debug('got request for transceiver')\n      this.addTransceiver(data.transceiverRequest.kind, data.transceiverRequest.init)\n    }\n    if (data.candidate) {\n      if (this._pc.remoteDescription && this._pc.remoteDescription.type) {\n        this._addIceCandidate(data.candidate)\n      } else {\n        this._pendingCandidates.push(data.candidate)\n      }\n    }\n    if (data.sdp) {\n      this._pc.setRemoteDescription(new (this._wrtc.RTCSessionDescription)(data))\n        .then(() => {\n          if (this.destroyed) return\n\n          this._pendingCandidates.forEach(candidate => {\n            this._addIceCandidate(candidate)\n          })\n          this._pendingCandidates = []\n\n          if (this._pc.remoteDescription.type === 'offer') this._createAnswer()\n        })\n        .catch(err => {\n          this.destroy(errCode(err, 'ERR_SET_REMOTE_DESCRIPTION'))\n        })\n    }\n    if (!data.sdp && !data.candidate && !data.renegotiate && !data.transceiverRequest) {\n      this.destroy(errCode(new Error('signal() called with invalid signal data'), 'ERR_SIGNALING'))\n    }\n  }\n\n  _addIceCandidate (candidate) {\n    const iceCandidateObj = new this._wrtc.RTCIceCandidate(candidate)\n    this._pc.addIceCandidate(iceCandidateObj)\n      .catch(err => {\n        if (!iceCandidateObj.address || iceCandidateObj.address.endsWith('.local')) {\n          warn('Ignoring unsupported ICE candidate.')\n        } else {\n          this.destroy(errCode(err, 'ERR_ADD_ICE_CANDIDATE'))\n        }\n      })\n  }\n\n  /**\n   * Send text/binary data to the remote peer.\n   * @param {ArrayBufferView|ArrayBuffer|Buffer|string|Blob} chunk\n   */\n  send (chunk) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot send after peer is destroyed'), 'ERR_DESTROYED')\n    this._channel.send(chunk)\n  }\n\n  /**\n   * Add a Transceiver to the connection.\n   * @param {String} kind\n   * @param {Object} init\n   */\n  addTransceiver (kind, init) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addTransceiver after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addTransceiver()')\n\n    if (this.initiator) {\n      try {\n        this._pc.addTransceiver(kind, init)\n        this._needsNegotiation()\n      } catch (err) {\n        this.destroy(errCode(err, 'ERR_ADD_TRANSCEIVER'))\n      }\n    } else {\n      this.emit('signal', { // request initiator to renegotiate\n        type: 'transceiverRequest',\n        transceiverRequest: { kind, init }\n      })\n    }\n  }\n\n  /**\n   * Add a MediaStream to the connection.\n   * @param {MediaStream} stream\n   */\n  addStream (stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addStream after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addStream()')\n\n    stream.getTracks().forEach(track => {\n      this.addTrack(track, stream)\n    })\n  }\n\n  /**\n   * Add a MediaStreamTrack to the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  addTrack (track, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addTrack()')\n\n    const submap = this._senderMap.get(track) || new Map() // nested Maps map [track, stream] to sender\n    let sender = submap.get(stream)\n    if (!sender) {\n      sender = this._pc.addTrack(track, stream)\n      submap.set(stream, sender)\n      this._senderMap.set(track, submap)\n      this._needsNegotiation()\n    } else if (sender.removed) {\n      throw errCode(new Error('Track has been removed. You should enable/disable tracks that you want to re-add.'), 'ERR_SENDER_REMOVED')\n    } else {\n      throw errCode(new Error('Track has already been added to that stream.'), 'ERR_SENDER_ALREADY_ADDED')\n    }\n  }\n\n  /**\n   * Replace a MediaStreamTrack by another in the connection.\n   * @param {MediaStreamTrack} oldTrack\n   * @param {MediaStreamTrack} newTrack\n   * @param {MediaStream} stream\n   */\n  replaceTrack (oldTrack, newTrack, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot replaceTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('replaceTrack()')\n\n    const submap = this._senderMap.get(oldTrack)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(new Error('Cannot replace track that was never added.'), 'ERR_TRACK_NOT_ADDED')\n    }\n    if (newTrack) this._senderMap.set(newTrack, submap)\n\n    if (sender.replaceTrack != null) {\n      sender.replaceTrack(newTrack)\n    } else {\n      this.destroy(errCode(new Error('replaceTrack is not supported in this browser'), 'ERR_UNSUPPORTED_REPLACETRACK'))\n    }\n  }\n\n  /**\n   * Remove a MediaStreamTrack from the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  removeTrack (track, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot removeTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('removeSender()')\n\n    const submap = this._senderMap.get(track)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(new Error('Cannot remove track that was never added.'), 'ERR_TRACK_NOT_ADDED')\n    }\n    try {\n      sender.removed = true\n      this._pc.removeTrack(sender)\n    } catch (err) {\n      if (err.name === 'NS_ERROR_UNEXPECTED') {\n        this._sendersAwaitingStable.push(sender) // HACK: Firefox must wait until (signalingState === stable) https://bugzilla.mozilla.org/show_bug.cgi?id=1133874\n      } else {\n        this.destroy(errCode(err, 'ERR_REMOVE_TRACK'))\n      }\n    }\n    this._needsNegotiation()\n  }\n\n  /**\n   * Remove a MediaStream from the connection.\n   * @param {MediaStream} stream\n   */\n  removeStream (stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot removeStream after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('removeSenders()')\n\n    stream.getTracks().forEach(track => {\n      this.removeTrack(track, stream)\n    })\n  }\n\n  _needsNegotiation () {\n    this._debug('_needsNegotiation')\n    if (this._batchedNegotiation) return // batch synchronous renegotiations\n    this._batchedNegotiation = true\n    queueMicrotask(() => {\n      this._batchedNegotiation = false\n      if (this.initiator || !this._firstNegotiation) {\n        this._debug('starting batched negotiation')\n        this.negotiate()\n      } else {\n        this._debug('non-initiator initial negotiation request discarded')\n      }\n      this._firstNegotiation = false\n    })\n  }\n\n  negotiate () {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot negotiate after peer is destroyed'), 'ERR_DESTROYED')\n\n    if (this.initiator) {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('start negotiation')\n        setTimeout(() => { // HACK: Chrome crashes if we immediately call createOffer\n          this._createOffer()\n        }, 0)\n      }\n    } else {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('requesting negotiation from initiator')\n        this.emit('signal', { // request initiator to renegotiate\n          type: 'renegotiate',\n          renegotiate: true\n        })\n      }\n    }\n    this._isNegotiating = true\n  }\n\n  // TODO: Delete this method once readable-stream is updated to contain a default\n  // implementation of destroy() that automatically calls _destroy()\n  // See: https://github.com/nodejs/readable-stream/issues/283\n  destroy (err) {\n    this._destroy(err, () => {})\n  }\n\n  _destroy (err, cb) {\n    if (this.destroyed || this.destroying) return\n    this.destroying = true\n\n    this._debug('destroying (error: %s)', err && (err.message || err))\n\n    queueMicrotask(() => { // allow events concurrent with the call to _destroy() to fire (see #692)\n      this.destroyed = true\n      this.destroying = false\n\n      this._debug('destroy (error: %s)', err && (err.message || err))\n\n      this.readable = this.writable = false\n\n      if (!this._readableState.ended) this.push(null)\n      if (!this._writableState.finished) this.end()\n\n      this._connected = false\n      this._pcReady = false\n      this._channelReady = false\n      this._remoteTracks = null\n      this._remoteStreams = null\n      this._senderMap = null\n\n      clearInterval(this._closingInterval)\n      this._closingInterval = null\n\n      clearInterval(this._interval)\n      this._interval = null\n      this._chunk = null\n      this._cb = null\n\n      if (this._onFinishBound) this.removeListener('finish', this._onFinishBound)\n      this._onFinishBound = null\n\n      if (this._channel) {\n        try {\n          this._channel.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._channel.onmessage = null\n        this._channel.onopen = null\n        this._channel.onclose = null\n        this._channel.onerror = null\n      }\n      if (this._pc) {\n        try {\n          this._pc.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._pc.oniceconnectionstatechange = null\n        this._pc.onicegatheringstatechange = null\n        this._pc.onsignalingstatechange = null\n        this._pc.onicecandidate = null\n        this._pc.ontrack = null\n        this._pc.ondatachannel = null\n      }\n      this._pc = null\n      this._channel = null\n\n      if (err) this.emit('error', err)\n      this.emit('close')\n      cb()\n    })\n  }\n\n  _setupData (event) {\n    if (!event.channel) {\n      // In some situations `pc.createDataChannel()` returns `undefined` (in wrtc),\n      // which is invalid behavior. Handle it gracefully.\n      // See: https://github.com/feross/simple-peer/issues/163\n      return this.destroy(errCode(new Error('Data channel event is missing `channel` property'), 'ERR_DATA_CHANNEL'))\n    }\n\n    this._channel = event.channel\n    this._channel.binaryType = 'arraybuffer'\n\n    if (typeof this._channel.bufferedAmountLowThreshold === 'number') {\n      this._channel.bufferedAmountLowThreshold = MAX_BUFFERED_AMOUNT\n    }\n\n    this.channelName = this._channel.label\n\n    this._channel.onmessage = event => {\n      this._onChannelMessage(event)\n    }\n    this._channel.onbufferedamountlow = () => {\n      this._onChannelBufferedAmountLow()\n    }\n    this._channel.onopen = () => {\n      this._onChannelOpen()\n    }\n    this._channel.onclose = () => {\n      this._onChannelClose()\n    }\n    this._channel.onerror = event => {\n      const err = event.error instanceof Error\n        ? event.error\n        : new Error(`Datachannel error: ${event.message} ${event.filename}:${event.lineno}:${event.colno}`)\n      this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n    }\n\n    // HACK: Chrome will sometimes get stuck in readyState \"closing\", let's check for this condition\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n    let isClosing = false\n    this._closingInterval = setInterval(() => { // No \"onclosing\" event\n      if (this._channel && this._channel.readyState === 'closing') {\n        if (isClosing) this._onChannelClose() // closing timed out: equivalent to onclose firing\n        isClosing = true\n      } else {\n        isClosing = false\n      }\n    }, CHANNEL_CLOSING_TIMEOUT)\n  }\n\n  _read () {}\n\n  _write (chunk, encoding, cb) {\n    if (this.destroyed) return cb(errCode(new Error('cannot write after peer is destroyed'), 'ERR_DATA_CHANNEL'))\n\n    if (this._connected) {\n      try {\n        this.send(chunk)\n      } catch (err) {\n        return this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n      }\n      if (this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n        this._debug('start backpressure: bufferedAmount %d', this._channel.bufferedAmount)\n        this._cb = cb\n      } else {\n        cb(null)\n      }\n    } else {\n      this._debug('write before connect')\n      this._chunk = chunk\n      this._cb = cb\n    }\n  }\n\n  // When stream finishes writing, close socket. Half open connections are not\n  // supported.\n  _onFinish () {\n    if (this.destroyed) return\n\n    // Wait a bit before destroying so the socket flushes.\n    // TODO: is there a more reliable way to accomplish this?\n    const destroySoon = () => {\n      setTimeout(() => this.destroy(), 1000)\n    }\n\n    if (this._connected) {\n      destroySoon()\n    } else {\n      this.once('connect', destroySoon)\n    }\n  }\n\n  _startIceCompleteTimeout () {\n    if (this.destroyed) return\n    if (this._iceCompleteTimer) return\n    this._debug('started iceComplete timeout')\n    this._iceCompleteTimer = setTimeout(() => {\n      if (!this._iceComplete) {\n        this._iceComplete = true\n        this._debug('iceComplete timeout completed')\n        this.emit('iceTimeout')\n        this.emit('_iceComplete')\n      }\n    }, this.iceCompleteTimeout)\n  }\n\n  _createOffer () {\n    if (this.destroyed) return\n\n    this._pc.createOffer(this.offerOptions)\n      .then(offer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) offer.sdp = filterTrickle(offer.sdp)\n        offer.sdp = this.sdpTransform(offer.sdp)\n\n        const sendOffer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || offer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n        }\n\n        const onSuccess = () => {\n          this._debug('createOffer success')\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendOffer()\n          else this.once('_iceComplete', sendOffer) // wait for candidates\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(offer)\n          .then(onSuccess)\n          .catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_OFFER'))\n      })\n  }\n\n  _requestMissingTransceivers () {\n    if (this._pc.getTransceivers) {\n      this._pc.getTransceivers().forEach(transceiver => {\n        if (!transceiver.mid && transceiver.sender.track && !transceiver.requested) {\n          transceiver.requested = true // HACK: Safari returns negotiated transceivers with a null mid\n          this.addTransceiver(transceiver.sender.track.kind)\n        }\n      })\n    }\n  }\n\n  _createAnswer () {\n    if (this.destroyed) return\n\n    this._pc.createAnswer(this.answerOptions)\n      .then(answer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) answer.sdp = filterTrickle(answer.sdp)\n        answer.sdp = this.sdpTransform(answer.sdp)\n\n        const sendAnswer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || answer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n          if (!this.initiator) this._requestMissingTransceivers()\n        }\n\n        const onSuccess = () => {\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendAnswer()\n          else this.once('_iceComplete', sendAnswer)\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(answer)\n          .then(onSuccess)\n          .catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_ANSWER'))\n      })\n  }\n\n  _onConnectionStateChange () {\n    if (this.destroyed) return\n    if (this._pc.connectionState === 'failed') {\n      this.destroy(errCode(new Error('Connection failed.'), 'ERR_CONNECTION_FAILURE'))\n    }\n  }\n\n  _onIceStateChange () {\n    if (this.destroyed) return\n    const iceConnectionState = this._pc.iceConnectionState\n    const iceGatheringState = this._pc.iceGatheringState\n\n    this._debug(\n      'iceStateChange (connection: %s) (gathering: %s)',\n      iceConnectionState,\n      iceGatheringState\n    )\n    this.emit('iceStateChange', iceConnectionState, iceGatheringState)\n\n    if (iceConnectionState === 'connected' || iceConnectionState === 'completed') {\n      this._pcReady = true\n      this._maybeReady()\n    }\n    if (iceConnectionState === 'failed') {\n      this.destroy(errCode(new Error('Ice connection failed.'), 'ERR_ICE_CONNECTION_FAILURE'))\n    }\n    if (iceConnectionState === 'closed') {\n      this.destroy(errCode(new Error('Ice connection closed.'), 'ERR_ICE_CONNECTION_CLOSED'))\n    }\n  }\n\n  getStats (cb) {\n    // statreports can come with a value array instead of properties\n    const flattenValues = report => {\n      if (Object.prototype.toString.call(report.values) === '[object Array]') {\n        report.values.forEach(value => {\n          Object.assign(report, value)\n        })\n      }\n      return report\n    }\n\n    // Promise-based getStats() (standard)\n    if (this._pc.getStats.length === 0 || this._isReactNativeWebrtc) {\n      this._pc.getStats()\n        .then(res => {\n          const reports = []\n          res.forEach(report => {\n            reports.push(flattenValues(report))\n          })\n          cb(null, reports)\n        }, err => cb(err))\n\n    // Single-parameter callback-based getStats() (non-standard)\n    } else if (this._pc.getStats.length > 0) {\n      this._pc.getStats(res => {\n        // If we destroy connection in `connect` callback this code might happen to run when actual connection is already closed\n        if (this.destroyed) return\n\n        const reports = []\n        res.result().forEach(result => {\n          const report = {}\n          result.names().forEach(name => {\n            report[name] = result.stat(name)\n          })\n          report.id = result.id\n          report.type = result.type\n          report.timestamp = result.timestamp\n          reports.push(flattenValues(report))\n        })\n        cb(null, reports)\n      }, err => cb(err))\n\n    // Unknown browser, skip getStats() since it's anyone's guess which style of\n    // getStats() they implement.\n    } else {\n      cb(null, [])\n    }\n  }\n\n  _maybeReady () {\n    this._debug('maybeReady pc %s channel %s', this._pcReady, this._channelReady)\n    if (this._connected || this._connecting || !this._pcReady || !this._channelReady) return\n\n    this._connecting = true\n\n    // HACK: We can't rely on order here, for details see https://github.com/js-platform/node-webrtc/issues/339\n    const findCandidatePair = () => {\n      if (this.destroyed) return\n\n      this.getStats((err, items) => {\n        if (this.destroyed) return\n\n        // Treat getStats error as non-fatal. It's not essential.\n        if (err) items = []\n\n        const remoteCandidates = {}\n        const localCandidates = {}\n        const candidatePairs = {}\n        let foundSelectedCandidatePair = false\n\n        items.forEach(item => {\n          // TODO: Once all browsers support the hyphenated stats report types, remove\n          // the non-hypenated ones\n          if (item.type === 'remotecandidate' || item.type === 'remote-candidate') {\n            remoteCandidates[item.id] = item\n          }\n          if (item.type === 'localcandidate' || item.type === 'local-candidate') {\n            localCandidates[item.id] = item\n          }\n          if (item.type === 'candidatepair' || item.type === 'candidate-pair') {\n            candidatePairs[item.id] = item\n          }\n        })\n\n        const setSelectedCandidatePair = selectedCandidatePair => {\n          foundSelectedCandidatePair = true\n\n          let local = localCandidates[selectedCandidatePair.localCandidateId]\n\n          if (local && (local.ip || local.address)) {\n            // Spec\n            this.localAddress = local.ip || local.address\n            this.localPort = Number(local.port)\n          } else if (local && local.ipAddress) {\n            // Firefox\n            this.localAddress = local.ipAddress\n            this.localPort = Number(local.portNumber)\n          } else if (typeof selectedCandidatePair.googLocalAddress === 'string') {\n            // TODO: remove this once Chrome 58 is released\n            local = selectedCandidatePair.googLocalAddress.split(':')\n            this.localAddress = local[0]\n            this.localPort = Number(local[1])\n          }\n          if (this.localAddress) {\n            this.localFamily = this.localAddress.includes(':') ? 'IPv6' : 'IPv4'\n          }\n\n          let remote = remoteCandidates[selectedCandidatePair.remoteCandidateId]\n\n          if (remote && (remote.ip || remote.address)) {\n            // Spec\n            this.remoteAddress = remote.ip || remote.address\n            this.remotePort = Number(remote.port)\n          } else if (remote && remote.ipAddress) {\n            // Firefox\n            this.remoteAddress = remote.ipAddress\n            this.remotePort = Number(remote.portNumber)\n          } else if (typeof selectedCandidatePair.googRemoteAddress === 'string') {\n            // TODO: remove this once Chrome 58 is released\n            remote = selectedCandidatePair.googRemoteAddress.split(':')\n            this.remoteAddress = remote[0]\n            this.remotePort = Number(remote[1])\n          }\n          if (this.remoteAddress) {\n            this.remoteFamily = this.remoteAddress.includes(':') ? 'IPv6' : 'IPv4'\n          }\n\n          this._debug(\n            'connect local: %s:%s remote: %s:%s',\n            this.localAddress,\n            this.localPort,\n            this.remoteAddress,\n            this.remotePort\n          )\n        }\n\n        items.forEach(item => {\n          // Spec-compliant\n          if (item.type === 'transport' && item.selectedCandidatePairId) {\n            setSelectedCandidatePair(candidatePairs[item.selectedCandidatePairId])\n          }\n\n          // Old implementations\n          if (\n            (item.type === 'googCandidatePair' && item.googActiveConnection === 'true') ||\n            ((item.type === 'candidatepair' || item.type === 'candidate-pair') && item.selected)\n          ) {\n            setSelectedCandidatePair(item)\n          }\n        })\n\n        // Ignore candidate pair selection in browsers like Safari 11 that do not have any local or remote candidates\n        // But wait until at least 1 candidate pair is available\n        if (!foundSelectedCandidatePair && (!Object.keys(candidatePairs).length || Object.keys(localCandidates).length)) {\n          setTimeout(findCandidatePair, 100)\n          return\n        } else {\n          this._connecting = false\n          this._connected = true\n        }\n\n        if (this._chunk) {\n          try {\n            this.send(this._chunk)\n          } catch (err) {\n            return this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n          }\n          this._chunk = null\n          this._debug('sent chunk from \"write before connect\"')\n\n          const cb = this._cb\n          this._cb = null\n          cb(null)\n        }\n\n        // If `bufferedAmountLowThreshold` and 'onbufferedamountlow' are unsupported,\n        // fallback to using setInterval to implement backpressure.\n        if (typeof this._channel.bufferedAmountLowThreshold !== 'number') {\n          this._interval = setInterval(() => this._onInterval(), 150)\n          if (this._interval.unref) this._interval.unref()\n        }\n\n        this._debug('connect')\n        this.emit('connect')\n      })\n    }\n    findCandidatePair()\n  }\n\n  _onInterval () {\n    if (!this._cb || !this._channel || this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n      return\n    }\n    this._onChannelBufferedAmountLow()\n  }\n\n  _onSignalingStateChange () {\n    if (this.destroyed) return\n\n    if (this._pc.signalingState === 'stable') {\n      this._isNegotiating = false\n\n      // HACK: Firefox doesn't yet support removing tracks when signalingState !== 'stable'\n      this._debug('flushing sender queue', this._sendersAwaitingStable)\n      this._sendersAwaitingStable.forEach(sender => {\n        this._pc.removeTrack(sender)\n        this._queuedNegotiation = true\n      })\n      this._sendersAwaitingStable = []\n\n      if (this._queuedNegotiation) {\n        this._debug('flushing negotiation queue')\n        this._queuedNegotiation = false\n        this._needsNegotiation() // negotiate again\n      } else {\n        this._debug('negotiated')\n        this.emit('negotiated')\n      }\n    }\n\n    this._debug('signalingStateChange %s', this._pc.signalingState)\n    this.emit('signalingStateChange', this._pc.signalingState)\n  }\n\n  _onIceCandidate (event) {\n    if (this.destroyed) return\n    if (event.candidate && this.trickle) {\n      this.emit('signal', {\n        type: 'candidate',\n        candidate: {\n          candidate: event.candidate.candidate,\n          sdpMLineIndex: event.candidate.sdpMLineIndex,\n          sdpMid: event.candidate.sdpMid\n        }\n      })\n    } else if (!event.candidate && !this._iceComplete) {\n      this._iceComplete = true\n      this.emit('_iceComplete')\n    }\n    // as soon as we've received one valid candidate start timeout\n    if (event.candidate) {\n      this._startIceCompleteTimeout()\n    }\n  }\n\n  _onChannelMessage (event) {\n    if (this.destroyed) return\n    let data = event.data\n    if (data instanceof ArrayBuffer) data = Buffer.from(data)\n    this.push(data)\n  }\n\n  _onChannelBufferedAmountLow () {\n    if (this.destroyed || !this._cb) return\n    this._debug('ending backpressure: bufferedAmount %d', this._channel.bufferedAmount)\n    const cb = this._cb\n    this._cb = null\n    cb(null)\n  }\n\n  _onChannelOpen () {\n    if (this._connected || this.destroyed) return\n    this._debug('on channel open')\n    this._channelReady = true\n    this._maybeReady()\n  }\n\n  _onChannelClose () {\n    if (this.destroyed) return\n    this._debug('on channel close')\n    this.destroy()\n  }\n\n  _onTrack (event) {\n    if (this.destroyed) return\n\n    event.streams.forEach(eventStream => {\n      this._debug('on track')\n      this.emit('track', event.track, eventStream)\n\n      this._remoteTracks.push({\n        track: event.track,\n        stream: eventStream\n      })\n\n      if (this._remoteStreams.some(remoteStream => {\n        return remoteStream.id === eventStream.id\n      })) return // Only fire one 'stream' event, even though there may be multiple tracks per stream\n\n      this._remoteStreams.push(eventStream)\n      queueMicrotask(() => {\n        this._debug('on stream')\n        this.emit('stream', eventStream) // ensure all tracks have been added\n      })\n    })\n  }\n\n  _debug () {\n    const args = [].slice.call(arguments)\n    args[0] = '[' + this._id + '] ' + args[0]\n    debug.apply(null, args)\n  }\n}\n\nPeer.WEBRTC_SUPPORT = !!getBrowserRTC()\n\n/**\n * Expose peer and data channel config for overriding all Peer\n * instances. Otherwise, just set opts.config or opts.channelConfig\n * when constructing a Peer.\n */\nPeer.config = {\n  iceServers: [\n    {\n      urls: [\n        'stun:stun.l.google.com:19302',\n        'stun:global.stun.twilio.com:3478'\n      ]\n    }\n  ],\n  sdpSemantics: 'unified-plan'\n}\n\nPeer.channelConfig = {}\n\nmodule.exports = Peer\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","/**\n * this is a set which automatically forgets\n * a given entry when a new entry is set and the ttl\n * of the old one is over\n */\nexport class ObliviousSet {\n    ttl;\n    map = new Map();\n    /**\n     * Creating calls to setTimeout() is expensive,\n     * so we only do that if there is not timeout already open.\n     */\n    _to = false;\n    constructor(ttl) {\n        this.ttl = ttl;\n    }\n    has(value) {\n        return this.map.has(value);\n    }\n    add(value) {\n        this.map.set(value, now());\n        /**\n         * When a new value is added,\n         * start the cleanup at the next tick\n         * to not block the cpu for more important stuff\n         * that might happen.\n         */\n        if (!this._to) {\n            this._to = true;\n            setTimeout(() => {\n                this._to = false;\n                removeTooOldValues(this);\n            }, 0);\n        }\n    }\n    clear() {\n        this.map.clear();\n    }\n}\n/**\n * Removes all entries from the set\n * where the TTL has expired\n */\nexport function removeTooOldValues(obliviousSet) {\n    const olderThen = now() - obliviousSet.ttl;\n    const iterator = obliviousSet.map[Symbol.iterator]();\n    /**\n     * Because we can assume the new values are added at the bottom,\n     * we start from the top and stop as soon as we reach a non-too-old value.\n     */\n    while (true) {\n        const next = iterator.next().value;\n        if (!next) {\n            return; // no more elements\n        }\n        const value = next[0];\n        const time = next[1];\n        if (time < olderThen) {\n            obliviousSet.map.delete(value);\n        }\n        else {\n            // We reached a value that is not old enough\n            return;\n        }\n    }\n}\nexport function now() {\n    return Date.now();\n}\n//# sourceMappingURL=index.js.map","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport { getFromMapOrCreate, getFromMapOrThrow, getHeightOfRevision, overwriteGetterForCaching, requestIdlePromiseNoQueue } from \"./plugins/utils/index.js\";\nimport { overwritable } from \"./overwritable.js\";\nimport { getDocumentDataOfRxChangeEvent } from \"./rx-change-event.js\";\n\n/**\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/FinalizationRegistry\n */\n\n/**\n * The DocumentCache stores RxDocument objects\n * by their primary key and revision.\n * This is useful on client side applications where\n * it is not known how much memory can be used, so\n * we de-duplicate RxDocument states to save memory.\n * To not fill up the memory with old document states, the DocumentCache\n * only contains weak references to the RxDocuments themself.\n * @link https://caniuse.com/?search=weakref\n */\nexport var DocumentCache = /*#__PURE__*/function () {\n  /**\n   * Some JavaScript runtimes like QuickJS,\n   * so not have a FinalizationRegistry or WeakRef.\n   * Therefore we need a workaround which might waste a lot of memory,\n   * but at least works.\n   */\n\n  /**\n   * Calling registry.register(() has shown to have\n   * really bad performance. So we add the cached documents\n   * lazily.\n   */\n\n  function DocumentCache(primaryPath, changes$,\n  /**\n   * A method that can create a RxDocument by the given document data.\n   */\n  documentCreator) {\n    this.cacheItemByDocId = new Map();\n    this.registry = typeof FinalizationRegistry === 'function' ? new FinalizationRegistry(docMeta => {\n      var docId = docMeta.docId;\n      var cacheItem = this.cacheItemByDocId.get(docId);\n      if (cacheItem) {\n        cacheItem.byRev.delete(docMeta.revisionHeight);\n        if (cacheItem.byRev.size === 0) {\n          /**\n           * No state of the document is cached anymore,\n           * so we can clean up.\n           */\n          this.cacheItemByDocId.delete(docId);\n        }\n      }\n    }) : undefined;\n    this.registerIdleTasks = [];\n    this.primaryPath = primaryPath;\n    this.changes$ = changes$;\n    this.documentCreator = documentCreator;\n    changes$.subscribe(changeEvent => {\n      var docId = changeEvent.documentId;\n      var cacheItem = this.cacheItemByDocId.get(docId);\n      if (cacheItem) {\n        var documentData = getDocumentDataOfRxChangeEvent(changeEvent);\n        cacheItem.last = documentData;\n      }\n    });\n  }\n\n  /**\n   * Get the RxDocument from the cache\n   * and create a new one if not exits before.\n   * @overwrites itself with the actual function\n   * because this is @performance relevant.\n   * It is called on each document row for each write and read.\n   */\n  var _proto = DocumentCache.prototype;\n  /**\n   * Throws if not exists\n   */\n  _proto.getLatestDocumentData = function getLatestDocumentData(docId) {\n    var cacheItem = getFromMapOrThrow(this.cacheItemByDocId, docId);\n    return cacheItem.last;\n  };\n  _proto.getLatestDocumentDataIfExists = function getLatestDocumentDataIfExists(docId) {\n    var cacheItem = this.cacheItemByDocId.get(docId);\n    if (cacheItem) {\n      return cacheItem.last;\n    }\n  };\n  _createClass(DocumentCache, [{\n    key: \"getCachedRxDocument\",\n    get: function () {\n      var fn = getCachedRxDocumentMonad(this);\n      return overwriteGetterForCaching(this, 'getCachedRxDocument', fn);\n    }\n  }]);\n  return DocumentCache;\n}();\n\n/**\n * This function is called very very often.\n * This is likely the most important function for RxDB overall performance\n */\nfunction getCachedRxDocumentMonad(docCache) {\n  var primaryPath = docCache.primaryPath;\n  var cacheItemByDocId = docCache.cacheItemByDocId;\n  var registry = docCache.registry;\n  var deepFreezeWhenDevMode = overwritable.deepFreezeWhenDevMode;\n  var documentCreator = docCache.documentCreator;\n  var fn = docData => {\n    var docId = docData[primaryPath];\n    var revisionHeight = getHeightOfRevision(docData._rev);\n    var cacheItem = getFromMapOrCreate(cacheItemByDocId, docId, () => getNewCacheItem(docData));\n    var byRev = cacheItem.byRev;\n    var cachedRxDocumentWeakRef = byRev.get(revisionHeight);\n    var cachedRxDocument = cachedRxDocumentWeakRef ? cachedRxDocumentWeakRef.deref() : undefined;\n    if (!cachedRxDocument) {\n      docData = deepFreezeWhenDevMode(docData);\n      cachedRxDocument = documentCreator(docData);\n      byRev.set(revisionHeight, createWeakRefWithFallback(cachedRxDocument));\n      if (registry) {\n        docCache.registerIdleTasks.push(cachedRxDocument);\n        if (!docCache.registerIdlePromise) {\n          docCache.registerIdlePromise = requestIdlePromiseNoQueue().then(() => {\n            docCache.registerIdlePromise = undefined;\n            var tasks = docCache.registerIdleTasks;\n            if (tasks.length === 0) {\n              return;\n            }\n            docCache.registerIdleTasks = [];\n            tasks.forEach(doc => {\n              registry.register(doc, {\n                docId: doc.primary,\n                revisionHeight: getHeightOfRevision(doc.revision)\n              });\n            });\n          });\n        }\n      }\n    }\n    return cachedRxDocument;\n  };\n  return fn;\n}\nexport function mapDocumentsDataToCacheDocs(docCache, docsData) {\n  var getCachedRxDocument = docCache.getCachedRxDocument;\n  var documents = [];\n  for (var i = 0; i < docsData.length; i++) {\n    var _docData = docsData[i];\n    var doc = getCachedRxDocument(_docData);\n    documents.push(doc);\n  }\n  return documents;\n}\nfunction getNewCacheItem(docData) {\n  return {\n    byRev: new Map(),\n    last: docData\n  };\n}\n\n/**\n * Fallback for JavaScript runtimes that do not support WeakRef.\n * The fallback will keep the items in cache forever,\n * but at least works.\n */\nvar HAS_WEAK_REF = typeof WeakRef === 'function';\nvar createWeakRefWithFallback = HAS_WEAK_REF ? createWeakRef : createWeakRefFallback;\nfunction createWeakRef(obj) {\n  return new WeakRef(obj);\n}\nfunction createWeakRefFallback(obj) {\n  return {\n    deref() {\n      return obj;\n    }\n  };\n}\n//# sourceMappingURL=doc-cache.js.map","/**\n * hook-functions that can be extended by the plugin\n */\nexport var HOOKS = {\n  /**\n   * Runs before a plugin is added.\n   * Use this to block the usage of non-compatible plugins.\n   */\n  preAddRxPlugin: [],\n  /**\n   * functions that run before the database is created\n   */\n  preCreateRxDatabase: [],\n  /**\n   * runs after the database is created and prepared\n   * but before the instance is returned to the user\n   * @async\n   */\n  createRxDatabase: [],\n  preCreateRxCollection: [],\n  createRxCollection: [],\n  /**\n  * runs at the end of the destroy-process of a collection\n  * @async\n  */\n  postDestroyRxCollection: [],\n  /**\n   * Runs after a collection is removed.\n   * @async\n   */\n  postRemoveRxCollection: [],\n  /**\n    * functions that get the json-schema as input\n    * to do additionally checks/manipulation\n    */\n  preCreateRxSchema: [],\n  /**\n   * functions that run after the RxSchema is created\n   * gets RxSchema as attribute\n   */\n  createRxSchema: [],\n  preCreateRxQuery: [],\n  /**\n   * Runs before a query is send to the\n   * prepareQuery function of the storage engine.\n   */\n  prePrepareQuery: [],\n  createRxDocument: [],\n  /**\n   * runs after a RxDocument is created,\n   * cannot be async\n   */\n  postCreateRxDocument: [],\n  /**\n   * Runs before a RxStorageInstance is created\n   * gets the params of createStorageInstance()\n   * as attribute so you can manipulate them.\n   * Notice that you have to clone stuff before mutating the inputs.\n   */\n  preCreateRxStorageInstance: [],\n  /**\n   * runs on the document-data before the document is migrated\n   * {\n   *   doc: Object, // original doc-data\n   *   migrated: // migrated doc-data after run through migration-strategies\n   * }\n   */\n  preMigrateDocument: [],\n  /**\n   * runs after the migration of a document has been done\n   */\n  postMigrateDocument: [],\n  /**\n   * runs at the beginning of the destroy-process of a database\n   */\n  preDestroyRxDatabase: [],\n  /**\n   * runs after a database has been removed\n   * @async\n   */\n  postRemoveRxDatabase: [],\n  /**\n   * runs before the replication writes the rows to master\n   * but before the rows have been modified\n   * @async\n   */\n  preReplicationMasterWrite: [],\n  /**\n   * runs after the replication has been sent to the server\n   * but before the new documents have been handled\n   * @async\n   */\n  preReplicationMasterWriteDocumentsHandle: []\n};\nexport function runPluginHooks(hookKey, obj) {\n  if (HOOKS[hookKey]) {\n    HOOKS[hookKey].forEach(fun => fun(obj));\n  }\n}\n\n/**\n * TODO\n * we should not run the hooks in parallel\n * this makes stuff unpredictable.\n */\nexport function runAsyncPluginHooks(hookKey, obj) {\n  return Promise.all(HOOKS[hookKey].map(fun => fun(obj)));\n}\n\n/**\n * used in tests to remove hooks\n */\nexport function _clearHook(type, fun) {\n  HOOKS[type] = HOOKS[type].filter(h => h !== fun);\n}\n//# sourceMappingURL=hooks.js.map","import { isBulkWriteConflictError, rxStorageWriteErrorToRxError } from \"./rx-error.js\";\nimport { clone, ensureNotFalsy, getFromMapOrCreate, getFromMapOrThrow, parseRevision, stripMetaDataFromDocument } from \"./plugins/utils/index.js\";\n/**\n * The incremental write queue\n * batches up all incremental writes to a collection\n * so that performance can be improved by:\n * - Running only one write even when there are multiple modifications to the same document.\n * - Run all writes ins a single bulkWrite() call even when there are writes to many documents.\n */\nexport var IncrementalWriteQueue = /*#__PURE__*/function () {\n  function IncrementalWriteQueue(storageInstance, primaryPath,\n  // can be used to run hooks etc.\n  preWrite, postWrite) {\n    this.queueByDocId = new Map();\n    this.isRunning = false;\n    this.storageInstance = storageInstance;\n    this.primaryPath = primaryPath;\n    this.preWrite = preWrite;\n    this.postWrite = postWrite;\n  }\n  var _proto = IncrementalWriteQueue.prototype;\n  _proto.addWrite = function addWrite(lastKnownDocumentState, modifier) {\n    var docId = lastKnownDocumentState[this.primaryPath];\n    var ar = getFromMapOrCreate(this.queueByDocId, docId, () => []);\n    var ret = new Promise((resolve, reject) => {\n      var item = {\n        lastKnownDocumentState,\n        modifier,\n        resolve,\n        reject\n      };\n      ensureNotFalsy(ar).push(item);\n      this.triggerRun();\n    });\n    return ret;\n  };\n  _proto.triggerRun = async function triggerRun() {\n    if (this.isRunning === true || this.queueByDocId.size === 0) {\n      // already running\n      return;\n    }\n    this.isRunning = true;\n    var writeRows = [];\n\n    /**\n     * 'take over' so that while the async functions runs,\n     * new incremental updates could be added from the outside.\n     */\n    var itemsById = this.queueByDocId;\n    this.queueByDocId = new Map();\n    await Promise.all(Array.from(itemsById.entries()).map(async ([_docId, items]) => {\n      var oldData = findNewestOfDocumentStates(items.map(i => i.lastKnownDocumentState));\n      var newData = oldData;\n      for (var item of items) {\n        try {\n          newData = await item.modifier(\n          /**\n           * We have to clone() each time because the modifier\n           * might throw while it already changed some properties\n           * of the document.\n           */\n          clone(newData));\n        } catch (err) {\n          item.reject(err);\n          item.reject = () => {};\n          item.resolve = () => {};\n        }\n      }\n      try {\n        await this.preWrite(newData, oldData);\n      } catch (err) {\n        /**\n         * If the before-hooks fail,\n         * we reject all of the writes because it is\n         * not possible to determine which one is to blame.\n         */\n        items.forEach(item => item.reject(err));\n        return;\n      }\n      writeRows.push({\n        previous: oldData,\n        document: newData\n      });\n    }));\n    var writeResult = writeRows.length > 0 ? await this.storageInstance.bulkWrite(writeRows, 'incremental-write') : {\n      error: [],\n      success: []\n    };\n\n    // process success\n    await Promise.all(writeResult.success.map(result => {\n      var docId = result[this.primaryPath];\n      this.postWrite(result);\n      var items = getFromMapOrThrow(itemsById, docId);\n      items.forEach(item => item.resolve(result));\n    }));\n\n    // process errors\n    writeResult.error.forEach(error => {\n      var docId = error.documentId;\n      var items = getFromMapOrThrow(itemsById, docId);\n      var isConflict = isBulkWriteConflictError(error);\n      if (isConflict) {\n        // had conflict -> retry afterwards\n        var ar = getFromMapOrCreate(this.queueByDocId, docId, () => []);\n        /**\n         * Add the items back to this.queueByDocId\n         * by maintaining the original order.\n         */\n        items.reverse().forEach(item => {\n          item.lastKnownDocumentState = ensureNotFalsy(isConflict.documentInDb);\n          ensureNotFalsy(ar).unshift(item);\n        });\n      } else {\n        // other error -> must be thrown\n        var rxError = rxStorageWriteErrorToRxError(error);\n        items.forEach(item => item.reject(rxError));\n      }\n    });\n    this.isRunning = false;\n\n    /**\n     * Always trigger another run\n     * because in between there might be new items\n     * been added to the queue.\n     */\n    return this.triggerRun();\n  };\n  return IncrementalWriteQueue;\n}();\nexport function modifierFromPublicToInternal(publicModifier) {\n  var ret = async docData => {\n    var withoutMeta = stripMetaDataFromDocument(docData);\n    withoutMeta._deleted = docData._deleted;\n    var modified = await publicModifier(withoutMeta);\n    var reattachedMeta = Object.assign({}, modified, {\n      _meta: docData._meta,\n      _attachments: docData._attachments,\n      _rev: docData._rev,\n      _deleted: typeof modified._deleted !== 'undefined' ? modified._deleted : docData._deleted\n    });\n    if (typeof reattachedMeta._deleted === 'undefined') {\n      reattachedMeta._deleted = false;\n    }\n    return reattachedMeta;\n  };\n  return ret;\n}\nexport function findNewestOfDocumentStates(docs) {\n  var newest = docs[0];\n  var newestRevisionHeight = parseRevision(newest._rev).height;\n  docs.forEach(doc => {\n    var height = parseRevision(doc._rev).height;\n    if (height > newestRevisionHeight) {\n      newest = doc;\n      newestRevisionHeight = height;\n    }\n  });\n  return newest;\n}\n//# sourceMappingURL=incremental-write.js.map","/**\n * functions that can or should be overwritten by plugins\n * IMPORTANT: Do not import any big stuff from RxDB here!\n * An 'overwritable' can be used inside WebWorkers for RxStorage only,\n * and we do not want to have the full RxDB lib bundled in them.\n */\n\nexport var overwritable = {\n  /**\n   * if this method is overwritten with one\n   * that returns true, we do additional checks\n   * which help the developer but have bad performance\n   */\n  isDevMode() {\n    return false;\n  },\n  /**\n   * Deep freezes and object when in dev-mode.\n   * Deep-Freezing has the same performance as deep-cloning, so we only do that in dev-mode.\n   * Also, we can ensure the readonly state via typescript\n   * @link https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n   */\n  deepFreezeWhenDevMode(obj) {\n    return obj;\n  },\n  /**\n   * overwritten to map error-codes to text-messages\n   */\n  tunnelErrorMessage(message) {\n    return \"RxDB Error-Code \" + message + \".\\n        Error messages are not included in RxDB core to reduce build size.\\n        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html\\n        - or search for the error code here: https://github.com/pubkey/rxdb/search?q=\" + message + \"\\n        \";\n  }\n};\n//# sourceMappingURL=overwritable.js.map","const e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:global,t=Object.keys,n=Array.isArray;function r(e,n){return\"object\"!=typeof n||t(n).forEach((function(t){e[t]=n[t]})),e}\"undefined\"==typeof Promise||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i={}.hasOwnProperty;function o(e,t){return i.call(e,t)}function a(e,n){\"function\"==typeof n&&(n=n(s(e))),(\"undefined\"==typeof Reflect?t:Reflect.ownKeys)(n).forEach((t=>{l(e,t,n[t])}))}const u=Object.defineProperty;function l(e,t,n,s){u(e,t,r(n&&o(n,\"get\")&&\"function\"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},s))}function c(e){return{from:function(t){return e.prototype=Object.create(t.prototype),l(e.prototype,\"constructor\",e),{extend:a.bind(null,e.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(e,t){let n;return h(e,t)||(n=s(e))&&d(n,t)}const f=[].slice;function p(e,t,n){return f.call(e,t,n)}function y(e,t){return t(e)}function m(e){if(!e)throw new Error(\"Assertion Failed\")}function v(t){e.setImmediate?setImmediate(t):setTimeout(t,0)}function g(e,t){return e.reduce(((e,n,r)=>{var s=t(n,r);return s&&(e[s[0]]=s[1]),e}),{})}function b(e,t){if(o(e,t))return e[t];if(!t)return e;if(\"string\"!=typeof t){for(var n=[],r=0,s=t.length;r<s;++r){var i=b(e,t[r]);n.push(i)}return n}var a=t.indexOf(\".\");if(-1!==a){var u=e[t.substr(0,a)];return void 0===u?void 0:b(u,t.substr(a+1))}}function _(e,t,r){if(e&&void 0!==t&&(!(\"isFrozen\"in Object)||!Object.isFrozen(e)))if(\"string\"!=typeof t&&\"length\"in t){m(\"string\"!=typeof r&&\"length\"in r);for(var s=0,i=t.length;s<i;++s)_(e,t[s],r[s])}else{var a=t.indexOf(\".\");if(-1!==a){var u=t.substr(0,a),l=t.substr(a+1);if(\"\"===l)void 0===r?n(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=r;else{var c=e[u];c&&o(e,u)||(c=e[u]={}),_(c,l,r)}}else void 0===r?n(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function w(e){var t={};for(var n in e)o(e,n)&&(t[n]=e[n]);return t}const x=[].concat;function k(e){return x.apply([],e)}const E=\"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\".split(\",\").concat(k([8,16,32,64].map((e=>[\"Int\",\"Uint\",\"Float\"].map((t=>t+e+\"Array\")))))).filter((t=>e[t])),P=E.map((t=>e[t]));g(E,(e=>[e,!0]));let K=null;function O(e){K=\"undefined\"!=typeof WeakMap&&new WeakMap;const t=S(e);return K=null,t}function S(e){if(!e||\"object\"!=typeof e)return e;let t=K&&K.get(e);if(t)return t;if(n(e)){t=[],K&&K.set(e,t);for(var r=0,i=e.length;r<i;++r)t.push(S(e[r]))}else if(P.indexOf(e.constructor)>=0)t=e;else{const n=s(e);for(var a in t=n===Object.prototype?{}:Object.create(n),K&&K.set(e,t),e)o(e,a)&&(t[a]=S(e[a]))}return t}const{toString:A}={};function C(e){return A.call(e).slice(8,-1)}const j=\"undefined\"!=typeof Symbol?Symbol.iterator:\"@@iterator\",D=\"symbol\"==typeof j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null},I={};function B(e){var t,r,s,i;if(1===arguments.length){if(n(e))return e.slice();if(this===I&&\"string\"==typeof e)return[e];if(i=D(e)){for(r=[];!(s=i.next()).done;)r.push(s.value);return r}if(null==e)return[e];if(\"number\"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const T=\"undefined\"!=typeof Symbol?e=>\"AsyncFunction\"===e[Symbol.toStringTag]:()=>!1;var R=\"undefined\"!=typeof location&&/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);function F(e,t){R=e,M=t}var M=()=>!0;const N=!new Error(\"\").stack;function q(){if(N)try{throw q.arguments,new Error}catch(e){return e}return new Error}function $(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split(\"\\n\").length),n.split(\"\\n\").slice(t).filter(M).map((e=>\"\\n\"+e)).join(\"\")):\"\"}var U=[\"Unknown\",\"Constraint\",\"Data\",\"TransactionInactive\",\"ReadOnly\",\"Version\",\"NotFound\",\"InvalidState\",\"InvalidAccess\",\"Abort\",\"Timeout\",\"QuotaExceeded\",\"Syntax\",\"DataClone\"],L=[\"Modify\",\"Bulk\",\"OpenFailed\",\"VersionChange\",\"Schema\",\"Upgrade\",\"InvalidTable\",\"MissingAPI\",\"NoSuchDatabase\",\"InvalidArgument\",\"SubTransaction\",\"Unsupported\",\"Internal\",\"DatabaseClosed\",\"PrematureCommit\",\"ForeignAwait\"].concat(U),V={VersionChanged:\"Database version changed by other database connection\",DatabaseClosed:\"Database has been closed\",Abort:\"Transaction aborted\",TransactionInactive:\"Transaction has already completed or failed\",MissingAPI:\"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"};function W(e,t){this._e=q(),this.name=e,this.message=t}function Y(e,t){return e+\". Errors: \"+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join(\"\\n\")}function z(e,t,n,r){this._e=q(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Y(e,t)}function G(e,t){this._e=q(),this.name=\"BulkError\",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Y(e,t)}c(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+\": \"+this.message+$(this._e,2))}},toString:function(){return this.name+\": \"+this.message}}),c(z).from(W),c(G).from(W);var H=L.reduce(((e,t)=>(e[t]=t+\"Error\",e)),{});const Q=W;var X=L.reduce(((e,t)=>{var n=t+\"Error\";function r(e,r){this._e=q(),this.name=n,e?\"string\"==typeof e?(this.message=`${e}${r?\"\\n \"+r:\"\"}`,this.inner=r||null):\"object\"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=V[t]||n,this.inner=null)}return c(r).from(Q),e[t]=r,e}),{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var J=U.reduce(((e,t)=>(e[t+\"Error\"]=X[t],e)),{});var Z=L.reduce(((e,t)=>(-1===[\"Syntax\",\"Type\",\"Range\"].indexOf(t)&&(e[t+\"Error\"]=X[t]),e)),{});function ee(){}function te(e){return e}function ne(e,t){return null==e||e===te?t:function(n){return t(e(n))}}function re(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function se(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?re(r,this.onsuccess):r),s&&(this.onerror=this.onerror?re(s,this.onerror):s),void 0!==i?i:n}}function ie(e,t){return e===ee?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?re(n,this.onsuccess):n),r&&(this.onerror=this.onerror?re(r,this.onerror):r)}}function oe(e,t){return e===ee?t:function(n){var s=e.apply(this,arguments);r(n,s);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?re(i,this.onsuccess):i),o&&(this.onerror=this.onerror?re(o,this.onerror):o),void 0===s?void 0===a?void 0:a:r(s,a)}}function ae(e,t){return e===ee?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ue(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);if(n&&\"function\"==typeof n.then){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=W,Z.BulkError=G;var le={};const[ce,he,de]=\"undefined\"==typeof Promise?[]:(()=>{let e=Promise.resolve();if(\"undefined\"==typeof crypto||!crypto.subtle)return[e,s(e),e];const t=crypto.subtle.digest(\"SHA-512\",new Uint8Array([0]));return[t,s(t),e]})(),fe=he&&he.then,pe=ce&&ce.constructor,ye=!!de;var me=!1,ve=de?()=>{de.then(qe)}:e.setImmediate?setImmediate.bind(null,qe):e.MutationObserver?()=>{var e=document.createElement(\"div\");new MutationObserver((()=>{qe(),e=null})).observe(e,{attributes:!0}),e.setAttribute(\"i\",\"1\")}:()=>{setTimeout(qe,0)},ge=function(e,t){Oe.push([e,t]),_e&&(ve(),_e=!1)},be=!0,_e=!0,we=[],xe=[],ke=null,Ee=te,Pe={id:\"global\",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{ct(e[0],e[1])}catch(e){}}))}},Ke=Pe,Oe=[],Se=0,Ae=[];function Ce(e){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");this._listeners=[],this.onuncatched=ee,this._lib=!1;var t=this._PSD=Ke;if(R&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),\"function\"!=typeof e){if(e!==le)throw new TypeError(\"Not a function\");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Be(this,this._value))}this._state=null,this._value=null,++t.ref,Ie(this,e)}const je={get:function(){var e=Ke,t=Qe;function n(n,r){var s=!e.global&&(e!==Ke||t!==Qe);const i=s&&!et();var o=new Ce(((t,o)=>{Re(this,new De(ut(n,e,s,i),ut(r,e,s,i),t,o,e))}));return R&&Ne(o,this),o}return n.prototype=le,n},set:function(e){l(this,\"then\",e&&e.prototype===le?je:{get:function(){return e},set:je.set})}};function De(e,t,n,r,s){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=s}function Ie(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError(\"A promise cannot be resolved with itself.\");var n=e._lib&&$e();t&&\"function\"==typeof t.then?Ie(e,((e,n)=>{t instanceof Ce?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Te(e)),n&&Ue()}}),Be.bind(null,e))}catch(t){Be(e,t)}}function Be(e,t){if(xe.push(t),null===e._state){var n=e._lib&&$e();t=Ee(t),e._state=!1,e._value=t,R&&null!==t&&\"object\"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((()=>{var n=d(t,\"stack\");t._promise=e,l(t,\"stack\",{get:()=>me?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){we.some((t=>t._value===e._value))||we.push(e)}(e),Te(e),n&&Ue()}}function Te(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Re(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),0===Se&&(++Se,ge((()=>{0==--Se&&Le()}),[]))}function Re(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Se,ge(Fe,[n,e,t])}else e._listeners.push(t)}function Fe(e,t,n){try{ke=t;var r,s=t._value;t._state?r=e(s):(xe.length&&(xe=[]),r=e(s),-1===xe.indexOf(s)&&function(e){var t=we.length;for(;t;)if(we[--t]._value===e._value)return void we.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{ke=null,0==--Se&&Le(),--n.psd.ref||n.psd.finalize()}}function Me(e,t,n){if(t.length===n)return t;var r=\"\";if(!1===e._state){var s,i,o=e._value;null!=o?(s=o.name||\"Error\",i=o.message||o,r=$(o,0)):(s=o,i=\"\"),t.push(s+(i?\": \"+i:\"\")+r)}return R&&((r=$(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Me(e._prev,t,n)),t}function Ne(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function qe(){$e()&&Ue()}function $e(){var e=be;return be=!1,_e=!1,e}function Ue(){var e,t,n;do{for(;Oe.length>0;)for(e=Oe,Oe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Oe.length>0);be=!0,_e=!0}function Le(){var e=we;we=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Ve(e){return new Ce(le,!1,e)}function We(e,t){var n=Ke;return function(){var r=$e(),s=Ke;try{return st(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{st(s,!1),r&&Ue()}}}a(Ce.prototype,{then:je,_then:function(e,t){Re(this,new De(null,null,e,t,Ke))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return\"function\"==typeof t?this.then(null,(e=>e instanceof t?n(e):Ve(e))):this.then(null,(e=>e&&e.name===t?n(e):Ve(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),Ve(t))))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var e=Me(this,[],20).join(\"\\nFrom previous: \");return null!==this._state&&(this._stack=e),e}finally{me=!1}}},timeout:function(e,t){return e<1/0?new Ce(((n,r)=>{var s=setTimeout((()=>r(new X.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,s))})):this}}),\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&l(Ce.prototype,Symbol.toStringTag,\"Dexie.Promise\"),Pe.env=it(),a(Ce,{all:function(){var e=B.apply(null,arguments).map(tt);return new Ce((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((s,i)=>Ce.resolve(s).then((n=>{e[i]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof Ce)return e;if(e&&\"function\"==typeof e.then)return new Ce(((t,n)=>{e.then(t,n)}));var t=new Ce(le,!0,e);return Ne(t,ke),t},reject:Ve,race:function(){var e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{e.map((e=>Ce.resolve(e).then(t,n)))}))},PSD:{get:()=>Ke,set:e=>Ke=e},totalEchoes:{get:()=>Qe},newPSD:Je,usePSD:ot,scheduler:{get:()=>ge,set:e=>{ge=e}},rejectionMapper:{get:()=>Ee,set:e=>{Ee=e}},follow:(e,t)=>new Ce(((n,r)=>Je(((t,n)=>{var r=Ke;r.unhandleds=[],r.onunhandled=n,r.finalize=re((function(){!function(e){function t(){e(),Ae.splice(Ae.indexOf(t),1)}Ae.push(t),++Se,ge((()=>{0==--Se&&Le()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),pe&&(pe.allSettled&&l(Ce,\"allSettled\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,s)=>Ce.resolve(e).then((e=>r[s]={status:\"fulfilled\",value:e}),(e=>r[s]={status:\"rejected\",reason:e})).then((()=>--n||t(r)))))}))})),pe.any&&\"undefined\"!=typeof AggregateError&&l(Ce,\"any\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach(((e,i)=>Ce.resolve(e).then((e=>t(e)),(e=>{s[i]=e,--r||n(new AggregateError(s))}))))}))})));const Ye={awaits:0,echoes:0,id:0};var ze=0,Ge=[],He=0,Qe=0,Xe=0;function Je(e,t,n,s){var i=Ke,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Xe;var a=Pe.env;o.env=ye?{Promise:Ce,PromiseProp:{value:Ce,configurable:!0,writable:!0},all:Ce.all,race:Ce.race,allSettled:Ce.allSettled,any:Ce.any,resolve:Ce.resolve,reject:Ce.reject,nthen:lt(a.nthen,o),gthen:lt(a.gthen,o)}:{},t&&r(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ot(o,e,n,s);return 0===o.ref&&o.finalize(),u}function Ze(){return Ye.id||(Ye.id=++ze),++Ye.awaits,Ye.echoes+=100,Ye.id}function et(){return!!Ye.awaits&&(0==--Ye.awaits&&(Ye.id=0),Ye.echoes=100*Ye.awaits,!0)}function tt(e){return Ye.echoes&&e&&e.constructor===pe?(Ze(),e.then((e=>(et(),e)),(e=>(et(),ht(e))))):e}function nt(e){++Qe,Ye.echoes&&0!=--Ye.echoes||(Ye.echoes=Ye.id=0),Ge.push(Ke),st(e,!0)}function rt(){var e=Ge[Ge.length-1];Ge.pop(),st(e,!1)}function st(t,n){var r=Ke;if((n?!Ye.echoes||He++&&t===Ke:!He||--He&&t===Ke)||at(n?nt.bind(null,t):rt),t!==Ke&&(Ke=t,r===Pe&&(Pe.env=it()),ye)){var s=Pe.env.Promise,i=t.env;he.then=i.nthen,s.prototype.then=i.gthen,(r.global||t.global)&&(Object.defineProperty(e,\"Promise\",i.PromiseProp),s.all=i.all,s.race=i.race,s.resolve=i.resolve,s.reject=i.reject,i.allSettled&&(s.allSettled=i.allSettled),i.any&&(s.any=i.any))}}function it(){var t=e.Promise;return ye?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(e,\"Promise\"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:he.then,gthen:t.prototype.then}:{}}function ot(e,t,n,r,s){var i=Ke;try{return st(e,!0),t(n,r,s)}finally{st(i,!1)}}function at(e){fe.call(ce,e)}function ut(e,t,n,r){return\"function\"!=typeof e?e:function(){var s=Ke;n&&Ze(),st(t,!0);try{return e.apply(this,arguments)}finally{st(s,!1),r&&at(et)}}}function lt(e,t){return function(n,r){return e.call(this,ut(n,t),ut(r,t))}}-1===(\"\"+fe).indexOf(\"[native code]\")&&(Ze=et=ee);function ct(t,n){var s;try{s=n.onuncatched(t)}catch(e){}if(!1!==s)try{var i,o={promise:n,reason:t};if(e.document&&document.createEvent?((i=document.createEvent(\"Event\")).initEvent(\"unhandledrejection\",!0,!0),r(i,o)):e.CustomEvent&&r(i=new CustomEvent(\"unhandledrejection\",{detail:o}),o),i&&e.dispatchEvent&&(dispatchEvent(i),!e.PromiseRejectionEvent&&e.onunhandledrejection))try{e.onunhandledrejection(i)}catch(e){}R&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch(e){}}var ht=Ce.reject;function dt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Ke.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>dt(e,t,n,r)))):ht(s)}return s._promise(t,((e,t)=>Je((()=>(Ke.trans=s,r(e,t,s)))))).then((e=>s._completion.then((()=>e))))}if(e._state.openComplete)return ht(new X.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ht(new X.DatabaseClosed);e.open().catch(ee)}return e._state.dbReadyPromise.then((()=>dt(e,t,n,r)))}const ft=String.fromCharCode(65535),pt=\"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\",yt=[],mt=\"undefined\"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vt=mt,gt=mt,bt=e=>!/(dexie\\.js|dexie\\.min\\.js)/.test(e);function _t(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const wt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(e){return\"string\"!=typeof e||/\\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=O(t))[e],t)}function kt(){throw X.Type()}class Et{_trans(e,t,n){const r=this._tx||Ke.trans,s=this.name;function i(e,n,r){if(!r.schema[s])throw new X.NotFound(\"Table \"+s+\" not part of transaction\");return t(r.idbtrans,r)}const o=$e();try{return r&&r.db===this.db?r===Ke.trans?r._promise(e,i,n):Je((()=>r._promise(e,i,n)),{trans:r,transless:Ke.transless||Ke}):dt(this.db,e,[this.name],i)}finally{o&&Ue()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans(\"readonly\",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if(\"string\"==typeof e)return new this.db.WhereClause(this,e);if(n(e))return new this.db.WhereClause(this,`[${e.join(\"+\")}]`);const r=t(e);if(1===r.length)return this.where(r[0]).equals(e[r[0]]);const s=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&r.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>r.indexOf(e)>=0))))[0];if(s&&this.db._maxKey!==ft)return this.where(s.name).equals(s.keyPath.map((t=>e[t])));!s&&R&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${r.join(\"+\")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function a(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}const[u,l]=r.reduce((([t,r],s)=>{const o=i[s],u=e[s];return[t||o,t||!o?_t(r,o&&o.multi?e=>{const t=b(e,s);return n(t)&&t.some((e=>a(u,e)))}:e=>a(u,b(e,s))):r]}),[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(l):s?this.filter(l):this.where(r).equals(\"\")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,n(e)?`[${e.join(\"+\")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){const{db:t,name:n}=this;this.schema.mappedClass=e,e.prototype instanceof kt&&(e=class extends e{get db(){return t}table(){return n}});const r=new Set;for(let t=e.prototype;t;t=s(t))Object.getOwnPropertyNames(t).forEach((e=>r.add(e)));const i=t=>{if(!t)return t;const n=Object.create(e.prototype);for(let e in t)if(!r.has(e))try{n[e]=t[e]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook(\"reading\",i),e}defineClass(){return this.mapToClass((function(e){r(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"add\",keys:null!=t?[t]:null,values:[s]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}update(e,r){if(\"object\"!=typeof e||n(e))return this.where(\":id\").equals(e).modify(r);{const n=b(e,this.schema.primKey.keyPath);if(void 0===n)return ht(new X.InvalidArgument(\"Given object does not contain its primary key\"));try{\"function\"!=typeof r?t(r).forEach((t=>{_(e,t,r[t])})):r(e,{value:e,primKey:n})}catch(e){}return this.where(\":id\").equals(n).modify(r)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"put\",values:[s],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}delete(e){return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:[e]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}clear(){return this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"deleteRange\",range:wt}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans(\"readonly\",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"add\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkAdd(): ${e} of ${o} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"put\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkPut(): ${e} of ${o} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new G(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function Pt(e){var r={},s=function(t,n){if(n){for(var s=arguments.length,i=new Array(s-1);--s;)i[s-1]=arguments[s];return r[t].subscribe.apply(null,i),e}if(\"string\"==typeof t)return r[t]};s.addEventType=a;for(var i=1,o=arguments.length;i<o;++i)a(arguments[i]);return s;function a(e,t,n){if(\"object\"==typeof e)return u(e);t||(t=ae),n||(n=ee);var i={subscribers:[],fire:n,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=t(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter((function(t){return t!==e})),i.fire=i.subscribers.reduce(t,n)}};return r[e]=s[e]=i,i}function u(e){t(e).forEach((function(t){var r=e[t];if(n(r))a(t,e[t][0],e[t][1]);else{if(\"asap\"!==r)throw new X.InvalidArgument(\"Invalid event config\");var s=a(t,te,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];s.subscribers.forEach((function(e){v((function(){e.apply(null,t)}))}))}))}}))}}function Kt(e,t){return c(t).from({prototype:e}),t}function Ot(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function St(e,t){e.filter=_t(e.filter,t)}function At(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>_t(r(),t()):t,e.justLimit=n&&!r}function Ct(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new X.Schema(\"KeyPath \"+e.index+\" on object store \"+t.name+\" is not indexed\");return n}function jt(e,t,n){const r=Ct(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:\"prev\"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Dt(e,t,n,r){const s=e.replayFilter?_t(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},a=(e,n,r)=>{if(!s||s(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var a=n.primaryKey,u=\"\"+a;\"[object ArrayBuffer]\"===u&&(u=\"\"+new Uint8Array(a)),o(i,u)||(i[u]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),It(jt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return It(jt(e,r,n),_t(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function It(e,t,n,r){var s=We(r?(e,t,s)=>n(r(e),t,s):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=ee}),(t=>{e.fail(t),n=ee}))||s(e.value,e,(e=>n=e)),n()}))}))}function Bt(e,t){try{const n=Tt(e),r=Tt(t);if(n!==r)return\"Array\"===n?1:\"Array\"===r?-1:\"binary\"===n?1:\"binary\"===r?-1:\"string\"===n?1:\"string\"===r?-1:\"Date\"===n?1:\"Date\"!==r?NaN:-1;switch(n){case\"number\":case\"Date\":case\"string\":return e>t?1:e<t?-1:0;case\"binary\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(Rt(e),Rt(t));case\"Array\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n){const r=Bt(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Tt(e){const t=typeof e;if(\"object\"!==t)return t;if(ArrayBuffer.isView(e))return\"binary\";const n=C(e);return\"ArrayBuffer\"===n?\"binary\":n}function Rt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Ft{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans(\"readonly\",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans(\"readwrite\",e,\"locked\")}_addAlgorithm(e){var t=this._ctx;t.algorithm=_t(t.algorithm,e)}_iterate(e,t){return Dt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&r(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>Dt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Ot(t,!0))return n.count({trans:e,query:{index:Ct(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return Dt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(\".\").reverse(),r=n[0],s=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var o=\"next\"===this._ctx.dir?1:-1;function a(e,t){var n=i(e,s),r=i(t,s);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(a)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if(\"next\"===t.dir&&Ot(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=Ct(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return Dt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Ot(t)?At(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):At(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),At(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return St(this._ctx,(function(n,r,s){return!e(n.value)||(r(s),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return St(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=_t(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=\"prev\"===this._ctx.dir?\"next\":\"prev\",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique=\"unique\",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if(\"next\"===t.dir&&Ot(t,!0)&&t.limit>0)return this._read((e=>{var n=Ct(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique=\"unique\",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return St(this._ctx,(function(e){var t=e.primaryKey.toString(),r=o(n,t);return n[t]=!0,!r})),this}modify(e){var n=this._ctx;return this._write((r=>{var s;if(\"function\"==typeof e)s=e;else{var i=t(e),o=i.length;s=function(t){for(var n=!1,r=0;r<o;++r){var s=i[r],a=e[s];b(t,s)!==a&&(_(t,s,a),n=!0)}return n}}const a=n.table.core,{outbound:u,extractKey:l}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,h=[];let d=0;const f=[],p=(e,n)=>{const{failures:r,numFailures:s}=n;d+=e-s;for(let e of t(r))h.push(r[e])};return this.clone().primaryKeys().then((t=>{const i=o=>{const h=Math.min(c,t.length-o);return a.getMany({trans:r,keys:t.slice(o,o+h),cache:\"immutable\"}).then((d=>{const f=[],y=[],m=u?[]:null,v=[];for(let e=0;e<h;++e){const n=d[e],r={value:O(n),primKey:t[o+e]};!1!==s.call(r,r.value,r)&&(null==r.value?v.push(t[o+e]):u||0===Bt(l(n),l(r.value))?(y.push(r.value),u&&m.push(t[o+e])):(v.push(t[o+e]),f.push(r.value)))}const g=Ot(n)&&n.limit===1/0&&(\"function\"!=typeof e||e===Mt)&&{index:n.index,range:n.range};return Promise.resolve(f.length>0&&a.mutate({trans:r,type:\"add\",values:f}).then((e=>{for(let t in e.failures)v.splice(parseInt(t),1);p(f.length,e)}))).then((()=>(y.length>0||g&&\"object\"==typeof e)&&a.mutate({trans:r,type:\"put\",keys:m,values:y,criteria:g,changeSpec:\"function\"!=typeof e&&e}).then((e=>p(y.length,e))))).then((()=>(v.length>0||g&&e===Mt)&&a.mutate({trans:r,type:\"delete\",keys:v,criteria:g}).then((e=>p(v.length,e))))).then((()=>t.length>o+h&&i(o+c)))}))};return i(0).then((()=>{if(h.length>0)throw new z(\"Error modifying one or more objects\",h,d,f);return t.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Ot(e)&&(e.isPrimKey&&!gt||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,s=t;return e.table.core.count({trans:n,query:{index:r,range:s}}).then((t=>e.table.core.mutate({trans:n,type:\"deleteRange\",range:s}).then((({failures:e,lastResult:n,results:r,numFailures:s})=>{if(s)throw new z(\"Could not delete some values\",Object.keys(e).map((t=>e[t])),t-s);return t-s}))))})):this.modify(Mt)}}const Mt=(e,t)=>t.value=null;function Nt(e,t){return e<t?-1:e===t?0:1}function qt(e,t){return e>t?-1:e===t?0:1}function $t(e,t,n){var r=e instanceof zt?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Ut(e){return new e.Collection(e,(()=>Yt(\"\"))).limit(0)}function Lt(e,t,n,r,s,i){for(var o=Math.min(e.length,r.length),a=-1,u=0;u<o;++u){var l=t[u];if(l!==r[u])return s(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):s(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;s(e[u],l)<0&&(a=u)}return o<r.length&&\"next\"===i?e+n.substr(e.length):o<e.length&&\"prev\"===i?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function Vt(e,t,n,r){var s,i,o,a,u,l,c,h=n.length;if(!n.every((e=>\"string\"==typeof e)))return $t(e,\"String expected.\");function d(e){s=function(e){return\"next\"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),i=function(e){return\"next\"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),o=\"next\"===e?Nt:qt;var t=n.map((function(e){return{lower:i(e),upper:s(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l=e,c=\"next\"===e?\"\":r}d(\"next\");var f=new e.Collection(e,(()=>Wt(a[0],u[h-1]+r)));f._ondirectionchange=function(e){d(e)};var p=0;return f._addAlgorithm((function(e,n,r){var s=e.key;if(\"string\"!=typeof s)return!1;var d=i(s);if(t(d,u,p))return!0;for(var f=null,y=p;y<h;++y){var m=Lt(s,d,a[y],u[y],o,l);null===m&&null===f?p=y+1:(null===f||o(f,m)>0)&&(f=m)}return n(null!==f?function(){e.continue(f+c)}:r),!1})),f}function Wt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Yt(e){return{type:1,lower:e,upper:e}}class zt{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Ut(this):new this.Collection(this,(()=>Wt(e,t,!n,!r)))}catch(e){return $t(this,pt)}}equals(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Yt(e)))}above(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Wt(e,void 0,!0)))}aboveOrEqual(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Wt(e,void 0,!1)))}below(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Wt(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Wt(void 0,e)))}startsWith(e){return\"string\"!=typeof e?$t(this,\"String expected.\"):this.between(e,e+ft,!0,!0)}startsWithIgnoreCase(e){return\"\"===e?this.startsWith(e):Vt(this,((e,t)=>0===e.indexOf(t[0])),[e],ft)}equalsIgnoreCase(e){return Vt(this,((e,t)=>e===t[0]),[e],\"\")}anyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?Ut(this):Vt(this,((e,t)=>-1!==t.indexOf(e)),e,\"\")}startsWithAnyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?Ut(this):Vt(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,ft)}anyOf(){const e=B.apply(I,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return $t(this,pt)}if(0===e.length)return Ut(this);const n=new this.Collection(this,(()=>Wt(e[0],e[e.length-1])));n._ondirectionchange=n=>{t=\"next\"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,s,i)=>{const o=n.key;for(;t(o,e[r])>0;)if(++r,r===e.length)return s(i),!1;return 0===t(o,e[r])||(s((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-(1/0),e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=B.apply(I,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return $t(this,pt)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,s=this._descending,i=this._min,o=this._max;if(0===e.length)return Ut(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return $t(this,\"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\",X.InvalidArgument);const a=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let l,c=r;function h(e,t){return c(e[0],t[0])}try{l=e.reduce((function(e,t){let r=0,s=e.length;for(;r<s;++r){const s=e[r];if(n(t[0],s[1])<0&&n(t[1],s[0])>0){s[0]=i(s[0],t[0]),s[1]=o(s[1],t[1]);break}}return r===s&&e.push(t),e}),[]),l.sort(h)}catch(e){return $t(this,pt)}let d=0;const f=u?e=>r(e,l[d][1])>0:e=>r(e,l[d][1])>=0,p=a?e=>s(e,l[d][0])>0:e=>s(e,l[d][0])>=0;let y=f;const m=new this.Collection(this,(()=>Wt(l[0][0],l[l.length-1][1],!a,!u)));return m._ondirectionchange=e=>{\"next\"===e?(y=f,c=r):(y=p,c=s),l.sort(h)},m._addAlgorithm(((e,t,n)=>{for(var s=e.key;y(s);)if(++d,d===l.length)return t(n),!1;return!!function(e){return!f(e)&&!p(e)}(s)||(0===this._cmp(s,l[d][1])||0===this._cmp(s,l[d][0])||t((()=>{c===r?e.continue(l[d][0]):e.continue(l[d][1])})),!1)})),m}startsWithAnyOf(){const e=B.apply(I,arguments);return e.every((e=>\"string\"==typeof e))?0===e.length?Ut(this):this.inAnyRange(e.map((e=>[e,e+ft]))):$t(this,\"startsWithAnyOf() only works with strings\")}}function Gt(e){return We((function(t){return Ht(t),e(t.target.error),!1}))}function Ht(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Qt=Pt(null,\"storagemutated\");class Xt{_lock(){return m(!Ke.global),++this._reculock,1!==this._reculock||Ke.global||(Ke.lockOwnerFor=this),this}_unlock(){if(m(!Ke.global),0==--this._reculock)for(Ke.global||(Ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ot(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Ke.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(m(!this.idbtrans),!e&&!t)switch(n&&n.name){case\"DatabaseClosedError\":throw new X.DatabaseClosed(n);case\"MissingAPIError\":throw new X.MissingAPI(n.message,n);default:throw new X.OpenFailed(n)}if(!this.active)throw new X.TransactionInactive;return m(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=We((t=>{Ht(t),this._reject(e.error)})),e.onabort=We((t=>{Ht(t),this.active&&this._reject(new X.Abort(e.error)),this.active=!1,this.on(\"abort\").fire(t)})),e.oncomplete=We((()=>{this.active=!1,this._resolve(),\"mutatedParts\"in e&&Qt.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if(\"readwrite\"===e&&\"readwrite\"!==this.mode)return ht(new X.ReadOnly(\"Transaction is readonly\"));if(!this.active)return ht(new X.TransactionInactive);if(this._locked())return new Ce(((r,s)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,s)},Ke])}));if(n)return Je((()=>{var e=new Ce(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new Ce(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Ce.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var s=t._waitingFor;return new Ce(((e,r)=>{n.then((n=>t._waitingQueue.push(We(e.bind(null,n)))),(e=>t._waitingQueue.push(We(r.bind(null,e))))).finally((()=>{t._waitingFor===s&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(o(t,e))return t[e];const n=this.schema[e];if(!n)throw new X.NotFound(\"Table \"+e+\" not part of transaction\");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function Jt(e,t,n,r,s,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?\"&\":\"\")+(r?\"*\":\"\")+(s?\"++\":\"\")+Zt(t)}}function Zt(e){return\"string\"==typeof e?e:e?\"[\"+[].join.call(e,\"+\")+\"]\":\"\"}function en(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:g(n,(e=>[e.name,e]))}}let tn=e=>{try{return e.only([[]]),tn=()=>[[]],[[]]}catch(e){return tn=()=>ft,ft}};function nn(e){return null==e?()=>{}:\"string\"==typeof e?function(e){return 1===e.split(\".\").length?t=>t[e]:t=>b(t,e)}(e):t=>b(t,e)}function rn(e){return[].slice.call(e)}let sn=0;function on(e){return null==e?\":id\":\"string\"==typeof e?e:`[${e.join(\"+\")}]`}function an(e,t,r){function s(e){if(3===e.type)return null;if(4===e.type)throw new Error(\"Cannot convert never type to IDBKeyRange\");const{lower:n,upper:r,lowerOpen:s,upperOpen:i}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!s):t.bound(n,r,!!s,!!i)}const{schema:i,hasGetAll:o}=function(e,t){const r=rn(e.objectStoreNames);return{schema:{name:e.name,tables:r.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:r}=e,s=n(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:s,keyPath:t,autoIncrement:r,unique:!0,extractKey:nn(t)},indexes:rn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:r,multiEntry:s,keyPath:i}=e,a={name:t,compound:n(i),keyPath:i,unique:r,multiEntry:s,extractKey:nn(i)};return o[on(i)]=a,a})),getIndexByKeyPath:e=>o[on(e)]};return o[\":id\"]=a.primaryKey,null!=t&&(o[on(t)]=a.primaryKey),a}))},hasGetAll:r.length>0&&\"getAll\"in t.objectStore(r[0])&&!(\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604)}}(e,r),a=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:r,values:i,range:o}){return new Promise(((a,u)=>{a=We(a);const l=e.objectStore(t),c=null==l.keyPath,h=\"put\"===n||\"add\"===n;if(!h&&\"delete\"!==n&&\"deleteRange\"!==n)throw new Error(\"Invalid operation type: \"+n);const{length:d}=r||i||{length:1};if(r&&i&&r.length!==i.length)throw new Error(\"Given keys array must have same length as given values array.\");if(0===d)return a({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],y=[];let m=0;const v=e=>{++m,Ht(e)};if(\"deleteRange\"===n){if(4===o.type)return a({numFailures:m,failures:y,results:[],lastResult:void 0});3===o.type?p.push(f=l.clear()):p.push(f=l.delete(s(o)))}else{const[e,t]=h?c?[i,r]:[i,null]:[r,null];if(h)for(let r=0;r<d;++r)p.push(f=t&&void 0!==t[r]?l[n](e[r],t[r]):l[n](e[r])),f.onerror=v;else for(let t=0;t<d;++t)p.push(f=l[n](e[t])),f.onerror=v}const g=e=>{const t=e.target.result;p.forEach(((e,t)=>null!=e.error&&(y[t]=e.error))),a({numFailures:m,failures:y,results:\"delete\"===n?r:p.map((e=>e.result)),lastResult:t})};f.onerror=e=>{v(e),g(e)},f.onsuccess=g}))},getMany:({trans:e,keys:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t),o=n.length,a=new Array(o);let u,l=0,c=0;const h=e=>{const t=e.target;a[t._pos]=t.result,++c===l&&r(a)},d=Gt(s);for(let e=0;e<o;++e)null!=n[e]&&(u=i.get(n[e]),u._pos=e,u.onsuccess=h,u.onerror=d,++l);0===l&&r(a)})),get:({trans:e,key:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t).get(n);i.onsuccess=e=>r(e.target.result),i.onerror=Gt(s)})),query:function(e){return n=>new Promise(((r,i)=>{r=We(r);const{trans:o,values:a,limit:u,query:l}=n,c=u===1/0?void 0:u,{index:h,range:d}=l,f=o.objectStore(t),p=h.isPrimaryKey?f:f.index(h.name),y=s(d);if(0===u)return r({result:[]});if(e){const e=a?p.getAll(y,c):p.getAllKeys(y,c);e.onsuccess=e=>r({result:e.target.result}),e.onerror=Gt(i)}else{let e=0;const t=a||!(\"openKeyCursor\"in p)?p.openCursor(y):p.openKeyCursor(y),n=[];t.onsuccess=s=>{const i=t.result;return i?(n.push(a?i.value:i.primaryKey),++e===u?r({result:n}):void i.continue()):r({result:n})},t.onerror=Gt(i)}}))}(o),openCursor:function({trans:e,values:n,query:r,reverse:i,unique:o}){return new Promise(((a,u)=>{a=We(a);const{index:l,range:c}=r,h=e.objectStore(t),d=l.isPrimaryKey?h:h.index(l.name),f=i?o?\"prevunique\":\"prev\":o?\"nextunique\":\"next\",p=n||!(\"openKeyCursor\"in d)?d.openCursor(s(c),f):d.openKeyCursor(s(c),f);p.onerror=Gt(u),p.onsuccess=We((t=>{const n=p.result;if(!n)return void a(null);n.___id=++sn,n.done=!1;const r=n.continue.bind(n);let s=n.continuePrimaryKey;s&&(s=s.bind(n));const i=n.advance.bind(n),o=()=>{throw new Error(\"Cursor not stopped\")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error(\"Cursor not started\")},n.fail=We(u),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=We(e),p.onerror=Gt(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=o,e(t)}})),a=()=>{if(p.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error(\"Cursor behind last entry\")},n.stop()};return p.onsuccess=We((e=>{p.onsuccess=a,a()})),n.continue=r,n.continuePrimaryKey=s,n.advance=i,a(),t},a(n)}),u)}))},count({query:e,trans:n}){const{index:r,range:i}=e;return new Promise(((e,o)=>{const a=n.objectStore(t),u=r.isPrimaryKey?a:a.index(r.name),l=s(i),c=l?u.count(l):u.count();c.onsuccess=We((t=>e(t.target.result))),c.onerror=Gt(o)}))}}}(e))),u={};return a.forEach((e=>u[e.name]=e)),{stack:\"dbcore\",transaction:e.transaction.bind(e),table(e){if(!u[e])throw new Error(`Table '${e}' not found`);return u[e]},MIN_KEY:-1/0,MAX_KEY:tn(t),schema:i}}function un({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},s){const i=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(an(t,n,s),e.dbcore);return{dbcore:i}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function ln({_novip:e},t,n,r){n.forEach((n=>{const s=r[n];t.forEach((t=>{const r=d(t,n);(!r||\"value\"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?l(t,n,{get(){return this.table(n)},set(e){u(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,s))}))}))}function cn({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function hn(e,t){return e._cfg.version-t._cfg.version}function dn(e,n,r,s){const i=e._dbSchema,o=e._createTransaction(\"readwrite\",e._storeNames,i);o.create(r),o._completion.catch(s);const a=o._reject.bind(o),u=Ke.transless||Ke;Je((()=>{Ke.trans=o,Ke.transless=u,0===n?(t(i).forEach((e=>{pn(r,e,i[e].primKey,i[e].indexes)})),un(e,r),Ce.follow((()=>e.on.populate.fire(o))).catch(a)):function({_novip:e},n,r,s){const i=[],o=e._versions;let a=e._dbSchema=mn(e,e.idbdb,s),u=!1;function l(){return i.length?Ce.resolve(i.shift()(r.idbtrans)).then(l):Ce.resolve()}return o.filter((e=>e._cfg.version>=n)).forEach((o=>{i.push((()=>{const i=a,l=o._cfg.dbschema;vn(e,i,s),vn(e,l,s),a=e._dbSchema=l;const c=fn(i,l);c.add.forEach((e=>{pn(s,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new X.Upgrade(\"Not yet support for changing primary key\");{const t=s.objectStore(e.name);e.add.forEach((e=>yn(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),yn(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const h=o._cfg.contentUpgrade;if(h&&o._cfg.version>n){un(e,s),r._memoizedTables={},u=!0;let n=w(l);c.del.forEach((e=>{n[e]=i[e]})),cn(e,[e.Transaction.prototype]),ln(e,[e.Transaction.prototype],t(n),n),r.schema=n;const o=T(h);let a;o&&Ze();const d=Ce.follow((()=>{if(a=h(r),a&&o){var e=et.bind(null,null);a.then(e,e)}}));return a&&\"function\"==typeof a.then?Ce.resolve(a):d.then((()=>a))}})),i.push((t=>{if(!u||!vt){!function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(o._cfg.dbschema,t)}cn(e,[e.Transaction.prototype]),ln(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}))})),l().then((()=>{var e,n;n=s,t(e=a).forEach((t=>{n.db.objectStoreNames.contains(t)||pn(n,t,e[t].primKey,e[t].indexes)}))}))}(e,n,o,r).catch(a)}))}function fn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],i=t[r];if(s){const e={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(\"\"+(s.primKey.keyPath||\"\")!=\"\"+(i.primKey.keyPath||\"\")||s.primKey.auto!==i.primKey.auto&&!mt)e.recreate=!0,n.change.push(e);else{const t=s.idxByName,r=i.idxByName;let o;for(o in t)r[o]||e.del.push(o);for(o in r){const n=t[o],s=r[o];n?n.src!==s.src&&e.change.push(s):e.add.push(s)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,i])}return n}function pn(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>yn(s,e))),s}function yn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function mn(e,t,n){const r={};return p(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let s=t.keyPath;const i=Jt(Zt(s),s||\"\",!1,!1,!!t.autoIncrement,s&&\"string\"!=typeof s,!0),o=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);s=n.keyPath;var a=Jt(n.name,s,!!n.unique,!!n.multiEntry,!1,s&&\"string\"!=typeof s,!1);o.push(a)}r[e]=en(e,i,o)})),r}function vn({_novip:t},n,r){const s=r.db.objectStoreNames;for(let e=0;e<s.length;++e){const i=s[e],o=r.objectStore(i);t._hasGetAll=\"getAll\"in o;for(let e=0;e<o.indexNames.length;++e){const t=o.indexNames[e],r=o.index(t).keyPath,s=\"string\"==typeof r?r:\"[\"+p(r).join(\"+\")+\"]\";if(n[i]){const e=n[i].idxByName[s];e&&(e.name=t,delete n[i].idxByName[s],n[i].idxByName[t]=e)}}}\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604&&(t._hasGetAll=!1)}class gn{_parseStoresSpec(e,r){t(e).forEach((t=>{if(null!==e[t]){var s=e[t].split(\",\").map(((e,t)=>{const r=(e=e.trim()).replace(/([&*]|\\+\\+)/g,\"\"),s=/^\\[/.test(r)?r.match(/^\\[(.*)\\]$/)[1].split(\"+\"):r;return Jt(r,s||null,/\\&/.test(e),/\\*/.test(e),/\\+\\+/.test(e),n(s),0===t)})),i=s.shift();if(i.multi)throw new X.Schema(\"Primary key cannot be multi-valued\");s.forEach((e=>{if(e.auto)throw new X.Schema(\"Only primary key can be marked as autoIncrement (++)\");if(!e.keyPath)throw new X.Schema(\"Index must have a name and cannot be an empty string\")})),r[t]=en(t,i,s)}}))}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,e):e;const s=n._versions,i={};let o={};return s.forEach((e=>{r(i,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(i,o)})),n._dbSchema=o,cn(n,[n._allTables,n,n.Transaction.prototype]),ln(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],t(o),o),n._storeNames=t(o),this}upgrade(e){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee,e),this}}function bn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Un(\"__dbnames\",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:\"name\"})),n.table(\"dbnames\")}function _n(e){return e&&\"function\"==typeof e.databases}function wn(e){return Je((function(){return Ke.letThrough=!0,e()}))}function xn(){var e;return!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function kn(e){const n=e._state,{indexedDB:r}=e._deps;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((()=>n.dbOpenError?ht(n.dbOpenError):e));R&&(n.openCanceller._stackHolder=q()),n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;const s=n.openCanceller;function i(){if(n.openCanceller!==s)throw new X.DatabaseClosed(\"db.open() was cancelled\")}let o=n.dbReadyResolve,a=null,u=!1;return Ce.race([s,(\"undefined\"==typeof navigator?Ce.resolve():xn()).then((()=>new Ce(((s,o)=>{if(i(),!r)throw new X.MissingAPI;const l=e.name,c=n.autoSchema?r.open(l):r.open(l,Math.round(10*e.verno));if(!c)throw new X.MissingAPI;c.onerror=Gt(o),c.onblocked=We(e._fireOnBlocked),c.onupgradeneeded=We((t=>{if(a=c.transaction,n.autoSchema&&!e._options.allowEmptyDB){c.onerror=Ht,a.abort(),c.result.close();const e=r.deleteDatabase(l);e.onsuccess=e.onerror=We((()=>{o(new X.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{a.onerror=Gt(o);var s=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;u=s<1,e._novip.idbdb=c.result,dn(e,s/10,a,o)}}),o),c.onsuccess=We((()=>{a=null;const r=e._novip.idbdb=c.result,i=p(r.objectStoreNames);if(i.length>0)try{const s=r.transaction(1===(o=i).length?o[0]:o,\"readonly\");n.autoSchema?function({_novip:e},n,r){e.verno=n.version/10;const s=e._dbSchema=mn(0,n,r);e._storeNames=p(n.objectStoreNames,0),ln(e,[e._allTables],t(s),s)}(e,r,s):(vn(e,e._dbSchema,s),function(e,t){const n=fn(mn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,s)||console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\")),un(e,s)}catch(e){}var o;yt.push(e),r.onversionchange=We((t=>{n.vcFired=!0,e.on(\"versionchange\").fire(t)})),r.onclose=We((t=>{e.on(\"close\").fire(t)})),u&&function({indexedDB:e,IDBKeyRange:t},n){!_n(e)&&\"__dbnames\"!==n&&bn(e,t).put({name:n}).catch(ee)}(e._deps,l),s()}),o)}))))]).then((()=>(i(),n.onReadyBeingFired=[],Ce.resolve(wn((()=>e.on.ready.fire(e.vip)))).then((function t(){if(n.onReadyBeingFired.length>0){let r=n.onReadyBeingFired.reduce(ue,ee);return n.onReadyBeingFired=[],Ce.resolve(wn((()=>r(e.vip)))).then(t)}}))))).finally((()=>{n.onReadyBeingFired=null,n.isBeingOpened=!1})).then((()=>e)).catch((t=>{n.dbOpenError=t;try{a&&a.abort()}catch(e){}return s===n.openCanceller&&e._close(),ht(t)})).finally((()=>{n.openComplete=!0,o()}))}function En(e){var t=t=>e.next(t),r=i(t),s=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),o=i.value;return i.done?o:o&&\"function\"==typeof o.then?o.then(r,s):n(o)?Promise.all(o).then(r,s):r(o)}}return i(t)()}function Pn(e,t,n){var r=arguments.length;if(r<2)throw new X.InvalidArgument(\"Too few arguments\");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];n=s.pop();var i=k(s);return[e,i,n]}function Kn(e,t,n,r,s){return Ce.resolve().then((()=>{const i=Ke.transless||Ke,o=e._createTransaction(t,n,e._dbSchema,r),a={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>Kn(e,t,n,null,s)))):ht(r)}const u=T(s);let l;u&&Ze();const c=Ce.follow((()=>{if(l=s.call(o,o),l)if(u){var e=et.bind(null,null);l.then(e,e)}else\"function\"==typeof l.next&&\"function\"==typeof l.throw&&(l=En(l))}),a);return(l&&\"function\"==typeof l.then?Ce.resolve(l).then((e=>o.active?e:ht(new X.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))):c.then((()=>l))).then((e=>(r&&o._resolve(),o._completion.then((()=>e))))).catch((e=>(o._reject(e),ht(e))))}))}function On(e,t,r){const s=n(e)?e.slice():[e];for(let e=0;e<r;++e)s.push(t);return s}const Sn={stack:\"dbcore\",name:\"VirtualIndexMiddleware\",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,s={},i=[];function o(e,t,n){const r=on(e),a=s[r]=s[r]||[],u=null==e?0:\"string\"==typeof e?1:e.length,l=t>0,c={...n,isVirtual:l,keyTail:t,keyLength:u,extractKey:nn(e),unique:!l&&n.unique};if(a.push(c),c.isPrimaryKey||i.push(c),u>1){o(2===u?e[0]:e.slice(0,u-1),t+1,n)}return a.sort(((e,t)=>e.keyTail-t.keyTail)),c}const a=o(r.primaryKey.keyPath,0,r.primaryKey);s[\":id\"]=[a];for(const e of r.indexes)o(e.keyPath,0,e);function u(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,s=n.keyTail,{type:1===r.type?2:r.type,lower:On(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,s),lowerOpen:!0,upper:On(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,s),upperOpen:!0})}}:t;var r,s}const l={...n,schema:{...r,primaryKey:a,indexes:i,getIndexByKeyPath:function(e){const t=s[on(e)];return t&&t[0]}},count:e=>n.count(u(e)),query:e=>n.query(u(e)),openCursor(t){const{keyTail:r,isVirtual:s,keyLength:i}=t.query.index;if(!s)return n.openCursor(t);return n.openCursor(u(t)).then((n=>n&&function(n){const s=Object.create(n,{continue:{value:function(s){null!=s?n.continue(On(s,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,s){n.continuePrimaryKey(On(t,e.MAX_KEY,r),s)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:()=>n.value}});return s}(n)))}};return l}}}};function An(e,n,r,s){return r=r||{},s=s||\"\",t(e).forEach((t=>{if(o(n,t)){var i=e[t],a=n[t];if(\"object\"==typeof i&&\"object\"==typeof a&&i&&a){const e=C(i);e!==C(a)?r[s+t]=n[t]:\"Object\"===e?An(i,a,r,s+t+\".\"):i!==a&&(r[s+t]=n[t])}else i!==a&&(r[s+t]=n[t])}else r[s+t]=void 0})),t(n).forEach((t=>{o(e,t)||(r[s+t]=n[t])})),r}const Cn={stack:\"dbcore\",name:\"HooksMiddleware\",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,s={...n,mutate(e){const s=Ke.trans,{deleting:i,creating:a,updating:u}=s.table(t).hook;switch(e.type){case\"add\":if(a.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"put\":if(a.fire===ee&&u.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"delete\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"deleteRange\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function l(e){const t=Ke.trans,s=e.keys||function(e,t){return\"delete\"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!s)throw new Error(\"Keys missing\");return\"delete\"!==(e=\"add\"===e.type||\"put\"===e.type?{...e,keys:s}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return\"add\"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:\"immutable\"})}(n,e,s).then((l=>{const c=s.map(((n,s)=>{const c=l[s],h={onerror:null,onsuccess:null};if(\"delete\"===e.type)i.fire.call(h,n,c,t);else if(\"add\"===e.type||void 0===c){const i=a.fire.call(h,n,e.values[s],t);null==n&&null!=i&&(n=i,e.keys[s]=n,r.outbound||_(e.values[s],r.keyPath,n))}else{const r=An(c,e.values[s]),i=u.fire.call(h,r,n,c,t);if(i){const t=e.values[s];Object.keys(i).forEach((e=>{o(t,e)?t[e]=i[e]:_(t,e,i[e])}))}}return h}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:i})=>{for(let r=0;r<s.length;++r){const i=n?n[r]:s[r],o=c[r];null==i?o.onerror&&o.onerror(t[r]):o.onsuccess&&o.onsuccess(\"put\"===e.type&&l[r]?e.values[r]:i)}return{failures:t,results:n,numFailures:r,lastResult:i}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,s){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:s}).then((({result:n})=>l({type:\"delete\",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<s?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:n[n.length-1],lowerOpen:!0},s)))))}}};return s}})};function jn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let s=0,i=0;s<t.keys.length&&i<e.length;++s)0===Bt(t.keys[s],e[i])&&(r.push(n?O(t.values[s]):t.values[s]),++i);return r.length===e.length?r:null}catch(e){return null}}const Dn={stack:\"dbcore\",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=jn(e.keys,e.trans._cache,\"clone\"===e.cache);return t?Ce.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:\"clone\"===e.cache?O(t):t},t)))},mutate:e=>(\"add\"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function In(e){return!(\"from\"in e)}const Bn=function(e,t){if(!this){const t=new Bn;return e&&\"d\"in e&&r(t,e),t}r(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Tn(e,t,n){const s=Bt(t,n);if(isNaN(s))return;if(s>0)throw RangeError();if(In(e))return r(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(Bt(n,e.from)<0)return i?Tn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Nn(e);if(Bt(t,e.to)>0)return o?Tn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Nn(e);Bt(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Bt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;i&&!e.l&&Rn(e,i),o&&a&&Rn(e,o)}function Rn(e,t){In(t)||function e(t,{from:n,to:r,l:s,r:i}){Tn(t,n,r),s&&e(t,s),i&&e(t,i)}(e,t)}function Fn(e,t){const n=Mn(t);let r=n.next();if(r.done)return!1;let s=r.value;const i=Mn(e);let o=i.next(s.from),a=o.value;for(;!r.done&&!o.done;){if(Bt(a.from,s.to)<=0&&Bt(a.to,s.from)>=0)return!0;Bt(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(o=i.next(s.from)).value}return!1}function Mn(e){let t=In(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Bt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Bt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Nn(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=r>1?\"r\":r<-1?\"l\":\"\";if(s){const t=\"r\"===s?\"l\":\"r\",n={...e},r=e[s];e.from=r.from,e.to=r.to,e[s]=r[s],n[s]=r[t],e[t]=n,n.d=qn(n)}e.d=qn(e)}function qn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}a(Bn.prototype,{add(e){return Rn(this,e),this},addKey(e){return Tn(this,e,e),this},addKeys(e){return e.forEach((e=>Tn(this,e,e))),this},[j](){return Mn(this)}});const $n={stack:\"dbcore\",level:0,create:e=>{const r=e.schema.name,s=new Bn(e.MIN_KEY,e.MAX_KEY);return{...e,table:i=>{const o=e.table(i),{schema:a}=o,{primaryKey:u}=a,{extractKey:l,outbound:c}=u,h={...o,mutate:e=>{const t=e.trans,u=t.mutatedParts||(t.mutatedParts={}),l=e=>{const t=`idb://${r}/${i}/${e}`;return u[t]||(u[t]=new Bn)},c=l(\"\"),h=l(\":dels\"),{type:d}=e;let[f,p]=\"deleteRange\"===e.type?[e.range]:\"delete\"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const y=e.trans._cache;return o.mutate(e).then((e=>{if(n(f)){\"delete\"!==d&&(f=e.results),c.addKeys(f);const t=jn(f,y);t||\"add\"===d||h.addKeys(f),(t||p)&&function(e,t,r,s){function i(t){const i=e(t.name||\"\");function o(e){return null!=e?t.extractKey(e):null}const a=e=>t.multiEntry&&n(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(r||s).forEach(((e,t)=>{const n=r&&o(r[t]),i=s&&o(s[t]);0!==Bt(n,i)&&(null!=n&&a(n),null!=i&&a(i))}))}t.indexes.forEach(i)}(l,a,t,p)}else if(f){const e={from:f.lower,to:f.upper};h.add(e),c.add(e)}else c.add(s),h.add(s),a.indexes.forEach((e=>l(e.name).add(s)));return e}))}},d=({query:{index:t,range:n}})=>{var r,s;return[t,new Bn(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(s=n.upper)&&void 0!==s?s:e.MAX_KEY)]},f={get:e=>[u,new Bn(e.key)],getMany:e=>[u,(new Bn).addKeys(e.keys)],count:d,query:d,openCursor:d};return t(f).forEach((e=>{h[e]=function(t){const{subscr:n}=Ke;if(n){const a=e=>{const t=`idb://${r}/${i}/${e}`;return n[t]||(n[t]=new Bn)},u=a(\"\"),h=a(\":dels\"),[d,p]=f[e](t);if(a(d.name||\"\").add(p),!d.isPrimaryKey){if(\"count\"!==e){const n=\"query\"===e&&c&&t.values&&o.query({...t,values:!1});return o[e].apply(this,arguments).then((r=>{if(\"query\"===e){if(c&&t.values)return n.then((({result:e})=>(u.addKeys(e),r)));const e=t.values?r.result.map(l):r.result;t.values?u.addKeys(e):h.addKeys(e)}else if(\"openCursor\"===e){const e=r,n=t.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(n&&u.addKey(e.primaryKey),e.value)}})}return r}))}h.add(s)}}return o[e].apply(this,arguments)}})),h}}}};class Un{constructor(e,t){this._middlewares={},this.verno=0;const n=Un.dependencies;this._options=t={addons:Un.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;s.dbReadyPromise=new Ce((e=>{s.dbReadyResolve=e})),s.openCanceller=new Ce(((e,t)=>{s.cancelOpen=t})),this._state=s,this.name=e,this.on=Pt(this,\"populate\",\"blocked\",\"versionchange\",\"close\",{ready:[ue,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(e=>(t,n)=>{Un.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||Ce.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(i=this,Kt(Ft.prototype,(function(e,t){this.db=i;let n=wt,r=null;if(t)try{n=t()}catch(e){r=e}const s=e._ctx,o=s.table,a=o.hook.reading.fire;this._ctx={table:o,index:s.index,isPrimKey:!s.index||o.schema.primKey.keyPath&&s.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:\"next\",unique:\"\",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:s.or,valueMapper:a!==te?a:null}}))),this.Table=function(e){return Kt(Et.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Pt(null,{creating:[se,ee],reading:[ne,te],updating:[oe,ee],deleting:[ie,ee]})}))}(this),this.Transaction=function(e){return Kt(Xt.prototype,(function(t,n,r,s,i){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Pt(this,\"complete\",\"error\",\"abort\"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ce(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),ht(e)}))}))}(this),this.Version=function(e){return Kt(gn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Kt(zt.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:\":id\"===n?null:n,or:r};const s=e._deps.indexedDB;if(!s)throw new X.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(e,t)=>s.cmp(t,e),this._max=(e,t)=>s.cmp(e,t)>0?e:t,this._min=(e,t)=>s.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on(\"versionchange\",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on(\"blocked\",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=tn(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on(\"blocked\").fire(e),yt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on(\"versionchange\").fire(e)))},this.use(Sn),this.use(Cn),this.use($n),this.use(Dn),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new X.Type(\"Given version is not a positive number\");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema(\"Cannot add version when database is open\");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(hn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Ke.letThrough||this._vip)?e():new Ce(((e,t)=>{if(this._state.openComplete)return t(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new X.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:t,level:null==n?10:n,name:r}),s.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return kn(this)}_close(){const e=this._state,t=yt.indexOf(this);if(t>=0&&yt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Ce((t=>{e.dbReadyResolve=t})),e.openCanceller=new Ce(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new X.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Ce(((n,r)=>{const s=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=We((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!_n(e)&&\"__dbnames\"!==n&&bn(e,t).delete(n).catch(ee)}(this._deps,this.name),n()})),e.onerror=Gt(r),e.onblocked=this._fireOnBlocked};if(e)throw new X.InvalidArgument(\"Arguments not allowed in db.delete()\");t.isBeingOpened?t.dbReadyPromise.then(s):s()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&\"DatabaseClosed\"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Pn.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Ke.trans;r&&r.db===this&&-1===e.indexOf(\"!\")||(r=null);const s=-1!==e.indexOf(\"?\");let i,o;e=e.replace(\"!\",\"\").replace(\"?\",\"\");try{if(o=t.map((e=>{var t=e instanceof this.Table?e.name:e;if(\"string\"!=typeof t)throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");return t})),\"r\"==e||\"readonly\"===e)i=\"readonly\";else{if(\"rw\"!=e&&\"readwrite\"!=e)throw new X.InvalidArgument(\"Invalid transaction mode: \"+e);i=\"readwrite\"}if(r){if(\"readonly\"===r.mode&&\"readwrite\"===i){if(!s)throw new X.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");r=null}r&&o.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!s)throw new X.SubTransaction(\"Table \"+e+\" not included in parent transaction.\");r=null}})),s&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):ht(e)}const a=Kn.bind(null,this,i,o,r,n);return r?r._promise(i,a,\"lock\"):Ke.trans?ot(Ke.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(e){if(!o(this._allTables,e))throw new X.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Ln=\"undefined\"!=typeof Symbol&&\"observable\"in Symbol?Symbol.observable:\"@@observable\";class Vn{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&\"function\"!=typeof e?e:{next:e,error:t,complete:n})}[Ln](){return this}}function Wn(e,n){return t(n).forEach((t=>{Rn(e[t]||(e[t]=new Bn),n[t])})),e}function Yn(e){return new Vn((n=>{const r=T(e);let s=!1,i={},o={};const a={get closed(){return s},unsubscribe:()=>{s=!0,Qt.storagemutated.unsubscribe(h)}};n.start&&n.start(a);let u=!1,l=!1;function c(){return t(o).some((e=>i[e]&&Fn(i[e],o[e])))}const h=e=>{Wn(i,e),c()&&d()},d=()=>{if(u||s)return;i={};const t={},f=function(t){r&&Ze();const n=()=>Je(e,{subscr:t,trans:null}),s=Ke.trans?ot(Ke.transless,n):n();return r&&s.then(et,et),s}(t);l||(Qt(\"storagemutated\",h),l=!0),u=!0,Promise.resolve(f).then((e=>{u=!1,s||(c()?d():(i={},o=t,n.next&&n.next(e)))}),(e=>{[\"DatabaseClosedError\",\"AbortError\"].includes(null==e?void 0:e.name)||(u=!1,n.error&&n.error(e),a.unsubscribe())}))};return d(),a}))}let zn;try{zn={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(e){zn={indexedDB:null,IDBKeyRange:null}}const Gn=Un;function Hn(e){let t=Qn;try{Qn=!0,Qt.storagemutated.fire(e)}finally{Qn=t}}a(Gn,{...Z,delete:e=>new Gn(e,{addons:[]}).delete(),exists:e=>new Gn(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch(\"NoSuchDatabaseError\",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return _n(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>\"__dbnames\"!==e)))):bn(e,t).toCollection().primaryKeys()}(Gn.dependencies).then(e)}catch(e){return ht(new X.MissingAPI)}},defineClass:()=>function(e){r(this,e)},ignoreTransaction:e=>Ke.trans?ot(Ke.transless,e):e(),vip:wn,async:function(e){return function(){try{var t=En(e.apply(this,arguments));return t&&\"function\"==typeof t.then?t:Ce.resolve(t)}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=En(e.apply(n,t||[]));return r&&\"function\"==typeof r.then?r:Ce.resolve(r)}catch(e){return ht(e)}},currentTransaction:{get:()=>Ke.trans||null},waitFor:function(e,t){const n=Ce.resolve(\"function\"==typeof e?Gn.ignoreTransaction(e):e).timeout(t||6e4);return Ke.trans?Ke.trans.waitFor(n):n},Promise:Ce,debug:{get:()=>R,set:e=>{F(e,\"dexie\"===e?()=>!0:bt)}},derive:c,extend:r,props:a,override:y,Events:Pt,on:Qt,liveQuery:Yn,extendObservabilitySet:Wn,getByKeyPath:b,setByKeyPath:_,delByKeyPath:function(e,t){\"string\"==typeof t?_(e,t,void 0):\"length\"in t&&[].map.call(t,(function(t){_(e,t,void 0)}))},shallowClone:w,deepClone:O,getObjectDiff:An,cmp:Bt,asap:v,minKey:-(1/0),addons:[],connections:yt,errnames:H,dependencies:zn,semVer:\"4.0.0-alpha.4\",version:\"4.0.0-alpha.4\".split(\".\").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),Gn.maxKey=tn(Gn.dependencies.IDBKeyRange),\"undefined\"!=typeof dispatchEvent&&\"undefined\"!=typeof addEventListener&&(Qt(\"storagemutated\",(e=>{if(!Qn){let t;mt?(t=document.createEvent(\"CustomEvent\"),t.initCustomEvent(\"x-storagemutated-1\",!0,!0,e)):t=new CustomEvent(\"x-storagemutated-1\",{detail:e}),Qn=!0,dispatchEvent(t),Qn=!1}})),addEventListener(\"x-storagemutated-1\",(({detail:e})=>{Qn||Hn(e)})));let Qn=!1;if(\"undefined\"!=typeof BroadcastChannel){const e=new BroadcastChannel(\"x-storagemutated-1\");\"function\"==typeof e.unref&&e.unref(),Qt(\"storagemutated\",(t=>{Qn||e.postMessage(t)})),e.onmessage=e=>{e.data&&Hn(e.data)}}else if(\"undefined\"!=typeof self&&\"undefined\"!=typeof navigator){Qt(\"storagemutated\",(e=>{try{Qn||(\"undefined\"!=typeof localStorage&&localStorage.setItem(\"x-storagemutated-1\",JSON.stringify({trig:Math.random(),changedParts:e})),\"object\"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:\"x-storagemutated-1\",changedParts:e}))))}catch(e){}})),\"undefined\"!=typeof addEventListener&&addEventListener(\"storage\",(e=>{if(\"x-storagemutated-1\"===e.key){const t=JSON.parse(e.newValue);t&&Hn(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener(\"message\",(function({data:e}){e&&\"x-storagemutated-1\"===e.type&&Hn(e.changedParts)}))}Ce.rejectionMapper=function(e,t){if(!e||e instanceof W||e instanceof TypeError||e instanceof SyntaxError||!e.name||!J[e.name])return e;var n=new J[e.name](t||e.message,e);return\"stack\"in e&&l(n,\"stack\",{get:function(){return this.inner.stack}}),n},F(R,bt);export{Un as Dexie,kt as Entity,Bn as RangeSet,Bt as cmp,Un as default,Yn as liveQuery,Rn as mergeRanges,Fn as rangesOverlap};","import { newRxError } from \"./rx-error.js\";\nimport { getQueryPlan } from \"./query-planner.js\";\nimport { DEFAULT_CHECKPOINT_SCHEMA } from \"./rx-schema-helper.js\";\n\n/**\n * Most RxStorage implementations use these static functions.\n * But you can use anything that implements the interface,\n * for example if your underlying database already has a query engine.\n */\nexport var RxStorageDefaultStatics = {\n  prepareQuery(schema, mutateableQuery) {\n    if (!mutateableQuery.sort) {\n      throw newRxError('SNH', {\n        query: mutateableQuery\n      });\n    }\n\n    /**\n     * Store the query plan together with the\n     * prepared query to save performance.\n     */\n    var queryPlan = getQueryPlan(schema, mutateableQuery);\n    return {\n      query: mutateableQuery,\n      queryPlan\n    };\n  },\n  checkpointSchema: DEFAULT_CHECKPOINT_SCHEMA\n};\n//# sourceMappingURL=rx-storage-statics.js.map","import { Dexie } from 'dexie';\nimport { flatClone, getFromMapOrCreate, toArray } from \"../utils/index.js\";\nimport { newRxError } from \"../../rx-error.js\";\nimport { getPrimaryFieldOfPrimaryKey, getSchemaByObjectPath } from \"../../rx-schema-helper.js\";\nimport { RxStorageDefaultStatics } from \"../../rx-storage-statics.js\";\nexport var DEXIE_DOCS_TABLE_NAME = 'docs';\nexport var DEXIE_DELETED_DOCS_TABLE_NAME = 'deleted-docs';\nexport var DEXIE_CHANGES_TABLE_NAME = 'changes';\nexport var RX_STORAGE_NAME_DEXIE = 'dexie';\nexport var RxStorageDexieStatics = RxStorageDefaultStatics;\nvar DEXIE_STATE_DB_BY_NAME = new Map();\nvar REF_COUNT_PER_DEXIE_DB = new Map();\nexport function getDexieDbWithTables(databaseName, collectionName, settings, schema) {\n  var primaryPath = getPrimaryFieldOfPrimaryKey(schema.primaryKey);\n  var dexieDbName = 'rxdb-dexie-' + databaseName + '--' + schema.version + '--' + collectionName;\n  var state = getFromMapOrCreate(DEXIE_STATE_DB_BY_NAME, dexieDbName, () => {\n    var value = (async () => {\n      /**\n       * IndexedDB was not designed for dynamically adding tables on the fly,\n       * so we create one dexie database per RxDB storage instance.\n       * @link https://github.com/dexie/Dexie.js/issues/684#issuecomment-373224696\n       */\n      var useSettings = flatClone(settings);\n      useSettings.autoOpen = false;\n      var dexieDb = new Dexie(dexieDbName, useSettings);\n      var dexieStoresSettings = {\n        [DEXIE_DOCS_TABLE_NAME]: getDexieStoreSchema(schema),\n        [DEXIE_CHANGES_TABLE_NAME]: '++sequence, id',\n        /**\n         * Instead of adding {deleted: false} to every query we run over the document store,\n         * we move deleted documents into a separate store where they can only be queried\n         * by primary key.\n         * This increases performance because it is way easier for the query planner to select\n         * a good index and we also do not have to add the _deleted field to every index.\n         *\n         * We also need the [_meta.lwt+' + primaryPath + '] index for getChangedDocumentsSince()\n         */\n        [DEXIE_DELETED_DOCS_TABLE_NAME]: primaryPath + ',_meta.lwt,[_meta.lwt+' + primaryPath + ']'\n      };\n      dexieDb.version(1).stores(dexieStoresSettings);\n      await dexieDb.open();\n      return {\n        dexieDb,\n        dexieTable: dexieDb[DEXIE_DOCS_TABLE_NAME],\n        dexieDeletedTable: dexieDb[DEXIE_DELETED_DOCS_TABLE_NAME]\n      };\n    })();\n    DEXIE_STATE_DB_BY_NAME.set(dexieDbName, state);\n    REF_COUNT_PER_DEXIE_DB.set(state, 0);\n    return value;\n  });\n  return state;\n}\nexport async function closeDexieDb(statePromise) {\n  var state = await statePromise;\n  var prevCount = REF_COUNT_PER_DEXIE_DB.get(statePromise);\n  var newCount = prevCount - 1;\n  if (newCount === 0) {\n    state.dexieDb.close();\n    REF_COUNT_PER_DEXIE_DB.delete(statePromise);\n  } else {\n    REF_COUNT_PER_DEXIE_DB.set(statePromise, newCount);\n  }\n}\nexport function ensureNoBooleanIndex(schema) {\n  if (!schema.indexes) {\n    return;\n  }\n  var checkedFields = new Set();\n  schema.indexes.forEach(index => {\n    var fields = toArray(index);\n    fields.forEach(field => {\n      if (checkedFields.has(field)) {\n        return;\n      }\n      checkedFields.add(field);\n      var schemaObj = getSchemaByObjectPath(schema, field);\n      if (schemaObj.type === 'boolean') {\n        throw newRxError('DXE1', {\n          schema,\n          index,\n          field\n        });\n      }\n    });\n  });\n}\n\n/**\n * It is not possible to set non-javascript-variable-syntax\n * keys as IndexedDB indexes. So we have to substitute the pipe-char\n * which comes from the key-compression plugin.\n */\nexport var DEXIE_PIPE_SUBSTITUTE = '__';\nexport function dexieReplaceIfStartsWithPipe(str) {\n  var split = str.split('.');\n  if (split.length > 1) {\n    return split.map(part => dexieReplaceIfStartsWithPipe(part)).join('.');\n  }\n  if (str.startsWith('|')) {\n    var withoutFirst = str.substring(1);\n    return DEXIE_PIPE_SUBSTITUTE + withoutFirst;\n  } else {\n    return str;\n  }\n}\nexport function dexieReplaceIfStartsWithPipeRevert(str) {\n  var split = str.split('.');\n  if (split.length > 1) {\n    return split.map(part => dexieReplaceIfStartsWithPipeRevert(part)).join('.');\n  }\n  if (str.startsWith(DEXIE_PIPE_SUBSTITUTE)) {\n    var withoutFirst = str.substring(DEXIE_PIPE_SUBSTITUTE.length);\n    return '|' + withoutFirst;\n  } else {\n    return str;\n  }\n}\n\n/**\n * @recursive\n */\nexport function fromStorageToDexie(documentData) {\n  if (!documentData || typeof documentData === 'string' || typeof documentData === 'number' || typeof documentData === 'boolean') {\n    return documentData;\n  } else if (Array.isArray(documentData)) {\n    return documentData.map(row => fromStorageToDexie(row));\n  } else if (typeof documentData === 'object') {\n    var ret = {};\n    Object.entries(documentData).forEach(([key, value]) => {\n      if (typeof value === 'object') {\n        value = fromStorageToDexie(value);\n      }\n      ret[dexieReplaceIfStartsWithPipe(key)] = value;\n    });\n    return ret;\n  }\n}\nexport function fromDexieToStorage(documentData) {\n  if (!documentData || typeof documentData === 'string' || typeof documentData === 'number' || typeof documentData === 'boolean') {\n    return documentData;\n  } else if (Array.isArray(documentData)) {\n    return documentData.map(row => fromDexieToStorage(row));\n  } else if (typeof documentData === 'object') {\n    var ret = {};\n    Object.entries(documentData).forEach(([key, value]) => {\n      if (typeof value === 'object' || Array.isArray(documentData)) {\n        value = fromDexieToStorage(value);\n      }\n      ret[dexieReplaceIfStartsWithPipeRevert(key)] = value;\n    });\n    return ret;\n  }\n}\n\n/**\n * Creates a string that can be used to create the dexie store.\n * @link https://dexie.org/docs/API-Reference#quick-reference\n */\nexport function getDexieStoreSchema(rxJsonSchema) {\n  var parts = [];\n\n  /**\n   * First part must be the primary key\n   * @link https://github.com/dexie/Dexie.js/issues/1307#issuecomment-846590912\n   */\n  var primaryKey = getPrimaryFieldOfPrimaryKey(rxJsonSchema.primaryKey);\n  parts.push([primaryKey]);\n\n  // add other indexes\n  if (rxJsonSchema.indexes) {\n    rxJsonSchema.indexes.forEach(index => {\n      var arIndex = toArray(index);\n      parts.push(arIndex);\n    });\n  }\n\n  // we also need the _meta.lwt+primaryKey index for the getChangedDocumentsSince() method.\n  parts.push(['_meta.lwt', primaryKey]);\n\n  /**\n   * It is not possible to set non-javascript-variable-syntax\n   * keys as IndexedDB indexes. So we have to substitute the pipe-char\n   * which comes from the key-compression plugin.\n   */\n  parts = parts.map(part => {\n    return part.map(str => dexieReplaceIfStartsWithPipe(str));\n  });\n  return parts.map(part => {\n    if (part.length === 1) {\n      return part[0];\n    } else {\n      return '[' + part.join('+') + ']';\n    }\n  }).join(', ');\n}\n\n/**\n * Returns all documents in the database.\n * Non-deleted plus deleted ones.\n */\nexport async function getDocsInDb(internals, docIds) {\n  var state = await internals;\n  var [nonDeletedDocsInDb, deletedDocsInDb] = await Promise.all([state.dexieTable.bulkGet(docIds), state.dexieDeletedTable.bulkGet(docIds)]);\n  var docsInDb = deletedDocsInDb.slice(0);\n  nonDeletedDocsInDb.forEach((doc, idx) => {\n    if (doc) {\n      docsInDb[idx] = doc;\n    }\n  });\n  return docsInDb;\n}\n//# sourceMappingURL=dexie-helper.js.map","export function lastOfArray(ar) {\n  return ar[ar.length - 1];\n}\n\n/**\n * shuffle the given array\n */\nexport function shuffleArray(arr) {\n  return arr.slice(0).sort(() => Math.random() - 0.5);\n}\nexport function toArray(input) {\n  return Array.isArray(input) ? input.slice(0) : [input];\n}\n\n/**\n * Split array with items into smaller arrays with items\n * @link https://stackoverflow.com/a/7273794/3443137\n */\nexport function batchArray(array, batchSize) {\n  array = array.slice(0);\n  var ret = [];\n  while (array.length) {\n    var batch = array.splice(0, batchSize);\n    ret.push(batch);\n  }\n  return ret;\n}\n\n/**\n * @link https://stackoverflow.com/a/15996017\n */\nexport function removeOneFromArrayIfMatches(ar, condition) {\n  ar = ar.slice();\n  var i = ar.length;\n  var done = false;\n  while (i-- && !done) {\n    if (condition(ar[i])) {\n      done = true;\n      ar.splice(i, 1);\n    }\n  }\n  return ar;\n}\n\n/**\n * returns true if the supplied argument is either an Array<T> or a Readonly<Array<T>>\n */\nexport function isMaybeReadonlyArray(x) {\n  // While this looks strange, it's a workaround for an issue in TypeScript:\n  // https://github.com/microsoft/TypeScript/issues/17002\n  //\n  // The problem is that `Array.isArray` as a type guard returns `false` for a readonly array,\n  // but at runtime the object is an array and the runtime call to `Array.isArray` would return `true`.\n  // The type predicate here allows for both `Array<T>` and `Readonly<Array<T>>` to pass a type check while\n  // still performing runtime type inspection.\n  return Array.isArray(x);\n}\nexport function isOneItemOfArrayInOtherArray(ar1, ar2) {\n  for (var i = 0; i < ar1.length; i++) {\n    var el = ar1[i];\n    var has = ar2.includes(el);\n    if (has) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Use this in array.filter() to remove all empty slots\n * and have the correct typings afterwards.\n * @link https://stackoverflow.com/a/46700791/3443137\n */\nexport function arrayFilterNotEmpty(value) {\n  if (value === null || value === undefined) {\n    return false;\n  }\n  return true;\n}\nexport function countUntilNotMatching(ar, matchingFn) {\n  var count = 0;\n  var idx = -1;\n  for (var _item of ar) {\n    idx = idx + 1;\n    var matching = matchingFn(_item, idx);\n    if (matching) {\n      count = count + 1;\n    } else {\n      break;\n    }\n  }\n  return count;\n}\nexport async function asyncFilter(array, predicate) {\n  var filters = await Promise.all(array.map(predicate));\n  return array.filter((...[, index]) => filters[index]);\n}\n\n/**\n * @link https://stackoverflow.com/a/3762735\n */\nexport function sumNumberArray(array) {\n  var count = 0;\n  for (var i = array.length; i--;) {\n    count += array[i];\n  }\n  return count;\n}\nexport function maxOfNumbers(arr) {\n  return Math.max(...arr);\n}\n\n/**\n * Appends the given documents to the given array.\n * This will mutate the first given array.\n * Mostly used as faster alternative to Array.concat()\n * because .concat() is so slow.\n * @link https://www.measurethat.net/Benchmarks/Show/4223/0/array-concat-vs-spread-operator-vs-push#latest_results_block\n */\nexport function appendToArray(ar, add) {\n  var amount = add.length;\n  for (var i = 0; i < amount; ++i) {\n    var element = add[i];\n    ar.push(element);\n  }\n}\n//# sourceMappingURL=utils-array.js.map","/**\n * We use 1 as minimum so that the value is never falsy.\n * This const is used in several places because querying\n * with a value lower then the minimum could give false results.\n */\nexport var RX_META_LWT_MINIMUM = 1;\nexport function getDefaultRxDocumentMeta() {\n  return {\n    /**\n     * Set this to 1 to not waste performance\n     * while calling new Date()..\n     * The storage wrappers will anyway update\n     * the lastWrite time while calling transformDocumentDataFromRxDBToRxStorage()\n     */\n    lwt: RX_META_LWT_MINIMUM\n  };\n}\n\n/**\n * Returns a revision that is not valid.\n * Use this to have correct typings\n * while the storage wrapper anyway will overwrite the revision.\n */\nexport function getDefaultRevision() {\n  /**\n   * Use a non-valid revision format,\n   * to ensure that the RxStorage will throw\n   * when the revision is not replaced downstream.\n   */\n  return '';\n}\nexport function stripMetaDataFromDocument(docData) {\n  return Object.assign({}, docData, {\n    _meta: undefined,\n    _deleted: undefined,\n    _rev: undefined\n  });\n}\n\n/**\n * Faster way to check the equality of document lists\n * compared to doing a deep-equal.\n * Here we only check the ids and revisions.\n */\nexport function areRxDocumentArraysEqual(primaryPath, ar1, ar2) {\n  if (ar1.length !== ar2.length) {\n    return false;\n  }\n  var i = 0;\n  var len = ar1.length;\n  while (i < len) {\n    var row1 = ar1[i];\n    var row2 = ar2[i];\n    i++;\n    if (row1._rev !== row2._rev || row1[primaryPath] !== row2[primaryPath]) {\n      return false;\n    }\n  }\n  return true;\n}\nexport function getSortDocumentsByLastWriteTimeComparator(primaryPath) {\n  return (a, b) => {\n    if (a._meta.lwt === b._meta.lwt) {\n      if (b[primaryPath] < a[primaryPath]) {\n        return 1;\n      } else {\n        return -1;\n      }\n    } else {\n      return a._meta.lwt - b._meta.lwt;\n    }\n  };\n}\nexport function sortDocumentsByLastWriteTime(primaryPath, docs) {\n  return docs.sort(getSortDocumentsByLastWriteTimeComparator(primaryPath));\n}\n//# sourceMappingURL=utils-document.js.map","import { ucfirst } from \"./utils-string.js\";\n\n/**\n * Returns an error that indicates that a plugin is missing\n * We do not throw a RxError because this should not be handled\n * programmatically but by using the correct import\n */\nexport function pluginMissing(pluginKey) {\n  var keyParts = pluginKey.split('-');\n  var pluginName = 'RxDB';\n  keyParts.forEach(part => {\n    pluginName += ucfirst(part);\n  });\n  pluginName += 'Plugin';\n  return new Error(\"You are using a function which must be overwritten by a plugin.\\n        You should either prevent the usage of this function or add the plugin via:\\n            import { \" + pluginName + \" } from 'rxdb/plugins/\" + pluginKey + \"';\\n            addRxPlugin(\" + pluginName + \");\\n        \");\n}\nexport function errorToPlainJson(err) {\n  var ret = {\n    name: err.name,\n    message: err.message,\n    rxdb: err.rxdb,\n    parameters: err.parameters,\n    code: err.code,\n    /**\n     * stack must be last to make it easier to read the json in a console.\n     * Also we ensure that each linebreak is spaced so that the chrome devtools\n     * shows urls to the source code that can be clicked to inspect\n     * the correct place in the code.\n     */\n    stack: !err.stack ? undefined : err.stack.replace(/\\n/g, ' \\n ')\n  };\n  return ret;\n}\n//# sourceMappingURL=utils-error.js.map","const defaults = Object.freeze({\n  ignoreUnknown: false,\n  respectType: false,\n  respectFunctionNames: false,\n  respectFunctionProperties: false,\n  unorderedObjects: true,\n  unorderedArrays: false,\n  unorderedSets: false,\n  excludeKeys: void 0,\n  excludeValues: void 0,\n  replacer: void 0\n});\nfunction objectHash(object, options) {\n  if (options) {\n    options = { ...defaults, ...options };\n  } else {\n    options = defaults;\n  }\n  const hasher = createHasher(options);\n  hasher.dispatch(object);\n  return hasher.toString();\n}\nconst defaultPrototypesKeys = Object.freeze([\n  \"prototype\",\n  \"__proto__\",\n  \"constructor\"\n]);\nfunction createHasher(options) {\n  let buff = \"\";\n  let context = /* @__PURE__ */ new Map();\n  const write = (str) => {\n    buff += str;\n  };\n  return {\n    toString() {\n      return buff;\n    },\n    getContext() {\n      return context;\n    },\n    dispatch(value) {\n      if (options.replacer) {\n        value = options.replacer(value);\n      }\n      const type = value === null ? \"null\" : typeof value;\n      return this[type](value);\n    },\n    object(object) {\n      if (object && typeof object.toJSON === \"function\") {\n        return this.object(object.toJSON());\n      }\n      const objString = Object.prototype.toString.call(object);\n      let objType = \"\";\n      const objectLength = objString.length;\n      if (objectLength < 10) {\n        objType = \"unknown:[\" + objString + \"]\";\n      } else {\n        objType = objString.slice(8, objectLength - 1);\n      }\n      objType = objType.toLowerCase();\n      let objectNumber = null;\n      if ((objectNumber = context.get(object)) === void 0) {\n        context.set(object, context.size);\n      } else {\n        return this.dispatch(\"[CIRCULAR:\" + objectNumber + \"]\");\n      }\n      if (typeof Buffer !== \"undefined\" && Buffer.isBuffer && Buffer.isBuffer(object)) {\n        write(\"buffer:\");\n        return write(object.toString(\"utf8\"));\n      }\n      if (objType !== \"object\" && objType !== \"function\" && objType !== \"asyncfunction\") {\n        if (this[objType]) {\n          this[objType](object);\n        } else if (!options.ignoreUnknown) {\n          this.unkown(object, objType);\n        }\n      } else {\n        let keys = Object.keys(object);\n        if (options.unorderedObjects) {\n          keys = keys.sort();\n        }\n        let extraKeys = [];\n        if (options.respectType !== false && !isNativeFunction(object)) {\n          extraKeys = defaultPrototypesKeys;\n        }\n        if (options.excludeKeys) {\n          keys = keys.filter((key) => {\n            return !options.excludeKeys(key);\n          });\n          extraKeys = extraKeys.filter((key) => {\n            return !options.excludeKeys(key);\n          });\n        }\n        write(\"object:\" + (keys.length + extraKeys.length) + \":\");\n        const dispatchForKey = (key) => {\n          this.dispatch(key);\n          write(\":\");\n          if (!options.excludeValues) {\n            this.dispatch(object[key]);\n          }\n          write(\",\");\n        };\n        for (const key of keys) {\n          dispatchForKey(key);\n        }\n        for (const key of extraKeys) {\n          dispatchForKey(key);\n        }\n      }\n    },\n    array(arr, unordered) {\n      unordered = unordered === void 0 ? options.unorderedArrays !== false : unordered;\n      write(\"array:\" + arr.length + \":\");\n      if (!unordered || arr.length <= 1) {\n        for (const entry of arr) {\n          this.dispatch(entry);\n        }\n        return;\n      }\n      const contextAdditions = /* @__PURE__ */ new Map();\n      const entries = arr.map((entry) => {\n        const hasher = createHasher(options);\n        hasher.dispatch(entry);\n        for (const [key, value] of hasher.getContext()) {\n          contextAdditions.set(key, value);\n        }\n        return hasher.toString();\n      });\n      context = contextAdditions;\n      entries.sort();\n      return this.array(entries, false);\n    },\n    date(date) {\n      return write(\"date:\" + date.toJSON());\n    },\n    symbol(sym) {\n      return write(\"symbol:\" + sym.toString());\n    },\n    unkown(value, type) {\n      write(type);\n      if (!value) {\n        return;\n      }\n      write(\":\");\n      if (value && typeof value.entries === \"function\") {\n        return this.array(\n          Array.from(value.entries()),\n          true\n          /* ordered */\n        );\n      }\n    },\n    error(err) {\n      return write(\"error:\" + err.toString());\n    },\n    boolean(bool) {\n      return write(\"bool:\" + bool);\n    },\n    string(string) {\n      write(\"string:\" + string.length + \":\");\n      write(string);\n    },\n    function(fn) {\n      write(\"fn:\");\n      if (isNativeFunction(fn)) {\n        this.dispatch(\"[native]\");\n      } else {\n        this.dispatch(fn.toString());\n      }\n      if (options.respectFunctionNames !== false) {\n        this.dispatch(\"function-name:\" + String(fn.name));\n      }\n      if (options.respectFunctionProperties) {\n        this.object(fn);\n      }\n    },\n    number(number) {\n      return write(\"number:\" + number);\n    },\n    xml(xml) {\n      return write(\"xml:\" + xml.toString());\n    },\n    null() {\n      return write(\"Null\");\n    },\n    undefined() {\n      return write(\"Undefined\");\n    },\n    regexp(regex) {\n      return write(\"regex:\" + regex.toString());\n    },\n    uint8array(arr) {\n      write(\"uint8array:\");\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    uint8clampedarray(arr) {\n      write(\"uint8clampedarray:\");\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    int8array(arr) {\n      write(\"int8array:\");\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    uint16array(arr) {\n      write(\"uint16array:\");\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    int16array(arr) {\n      write(\"int16array:\");\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    uint32array(arr) {\n      write(\"uint32array:\");\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    int32array(arr) {\n      write(\"int32array:\");\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    float32array(arr) {\n      write(\"float32array:\");\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    float64array(arr) {\n      write(\"float64array:\");\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    arraybuffer(arr) {\n      write(\"arraybuffer:\");\n      return this.dispatch(new Uint8Array(arr));\n    },\n    url(url) {\n      return write(\"url:\" + url.toString());\n    },\n    map(map) {\n      write(\"map:\");\n      const arr = [...map];\n      return this.array(arr, options.unorderedSets !== false);\n    },\n    set(set) {\n      write(\"set:\");\n      const arr = [...set];\n      return this.array(arr, options.unorderedSets !== false);\n    },\n    file(file) {\n      write(\"file:\");\n      return this.dispatch([file.name, file.size, file.type, file.lastModfied]);\n    },\n    blob() {\n      if (options.ignoreUnknown) {\n        return write(\"[blob]\");\n      }\n      throw new Error(\n        'Hashing Blob objects is currently not supported\\nUse \"options.replacer\" or \"options.ignoreUnknown\"\\n'\n      );\n    },\n    domwindow() {\n      return write(\"domwindow\");\n    },\n    bigint(number) {\n      return write(\"bigint:\" + number.toString());\n    },\n    /* Node.js standard native objects */\n    process() {\n      return write(\"process\");\n    },\n    timer() {\n      return write(\"timer\");\n    },\n    pipe() {\n      return write(\"pipe\");\n    },\n    tcp() {\n      return write(\"tcp\");\n    },\n    udp() {\n      return write(\"udp\");\n    },\n    tty() {\n      return write(\"tty\");\n    },\n    statwatcher() {\n      return write(\"statwatcher\");\n    },\n    securecontext() {\n      return write(\"securecontext\");\n    },\n    connection() {\n      return write(\"connection\");\n    },\n    zlib() {\n      return write(\"zlib\");\n    },\n    context() {\n      return write(\"context\");\n    },\n    nodescript() {\n      return write(\"nodescript\");\n    },\n    httpparser() {\n      return write(\"httpparser\");\n    },\n    dataview() {\n      return write(\"dataview\");\n    },\n    signal() {\n      return write(\"signal\");\n    },\n    fsevent() {\n      return write(\"fsevent\");\n    },\n    tlswrap() {\n      return write(\"tlswrap\");\n    }\n  };\n}\nconst nativeFunc = \"[native code] }\";\nconst nativeFuncLength = nativeFunc.length;\nfunction isNativeFunction(f) {\n  if (typeof f !== \"function\") {\n    return false;\n  }\n  return Function.prototype.toString.call(f).slice(-nativeFuncLength) === nativeFunc;\n}\n\nclass WordArray {\n  constructor(words, sigBytes) {\n    words = this.words = words || [];\n    this.sigBytes = sigBytes === void 0 ? words.length * 4 : sigBytes;\n  }\n  toString(encoder) {\n    return (encoder || Hex).stringify(this);\n  }\n  concat(wordArray) {\n    this.clamp();\n    if (this.sigBytes % 4) {\n      for (let i = 0; i < wordArray.sigBytes; i++) {\n        const thatByte = wordArray.words[i >>> 2] >>> 24 - i % 4 * 8 & 255;\n        this.words[this.sigBytes + i >>> 2] |= thatByte << 24 - (this.sigBytes + i) % 4 * 8;\n      }\n    } else {\n      for (let j = 0; j < wordArray.sigBytes; j += 4) {\n        this.words[this.sigBytes + j >>> 2] = wordArray.words[j >>> 2];\n      }\n    }\n    this.sigBytes += wordArray.sigBytes;\n    return this;\n  }\n  clamp() {\n    this.words[this.sigBytes >>> 2] &= 4294967295 << 32 - this.sigBytes % 4 * 8;\n    this.words.length = Math.ceil(this.sigBytes / 4);\n  }\n  clone() {\n    return new WordArray([...this.words]);\n  }\n}\nconst Hex = {\n  stringify(wordArray) {\n    const hexChars = [];\n    for (let i = 0; i < wordArray.sigBytes; i++) {\n      const bite = wordArray.words[i >>> 2] >>> 24 - i % 4 * 8 & 255;\n      hexChars.push((bite >>> 4).toString(16), (bite & 15).toString(16));\n    }\n    return hexChars.join(\"\");\n  }\n};\nconst Base64 = {\n  stringify(wordArray) {\n    const keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    const base64Chars = [];\n    for (let i = 0; i < wordArray.sigBytes; i += 3) {\n      const byte1 = wordArray.words[i >>> 2] >>> 24 - i % 4 * 8 & 255;\n      const byte2 = wordArray.words[i + 1 >>> 2] >>> 24 - (i + 1) % 4 * 8 & 255;\n      const byte3 = wordArray.words[i + 2 >>> 2] >>> 24 - (i + 2) % 4 * 8 & 255;\n      const triplet = byte1 << 16 | byte2 << 8 | byte3;\n      for (let j = 0; j < 4 && i * 8 + j * 6 < wordArray.sigBytes * 8; j++) {\n        base64Chars.push(keyStr.charAt(triplet >>> 6 * (3 - j) & 63));\n      }\n    }\n    return base64Chars.join(\"\");\n  }\n};\nconst Latin1 = {\n  parse(latin1Str) {\n    const latin1StrLength = latin1Str.length;\n    const words = [];\n    for (let i = 0; i < latin1StrLength; i++) {\n      words[i >>> 2] |= (latin1Str.charCodeAt(i) & 255) << 24 - i % 4 * 8;\n    }\n    return new WordArray(words, latin1StrLength);\n  }\n};\nconst Utf8 = {\n  parse(utf8Str) {\n    return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n  }\n};\nclass BufferedBlockAlgorithm {\n  constructor() {\n    this._data = new WordArray();\n    this._nDataBytes = 0;\n    this._minBufferSize = 0;\n    this.blockSize = 512 / 32;\n  }\n  reset() {\n    this._data = new WordArray();\n    this._nDataBytes = 0;\n  }\n  _append(data) {\n    if (typeof data === \"string\") {\n      data = Utf8.parse(data);\n    }\n    this._data.concat(data);\n    this._nDataBytes += data.sigBytes;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _doProcessBlock(_dataWords, _offset) {\n  }\n  _process(doFlush) {\n    let processedWords;\n    let nBlocksReady = this._data.sigBytes / (this.blockSize * 4);\n    if (doFlush) {\n      nBlocksReady = Math.ceil(nBlocksReady);\n    } else {\n      nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n    }\n    const nWordsReady = nBlocksReady * this.blockSize;\n    const nBytesReady = Math.min(nWordsReady * 4, this._data.sigBytes);\n    if (nWordsReady) {\n      for (let offset = 0; offset < nWordsReady; offset += this.blockSize) {\n        this._doProcessBlock(this._data.words, offset);\n      }\n      processedWords = this._data.words.splice(0, nWordsReady);\n      this._data.sigBytes -= nBytesReady;\n    }\n    return new WordArray(processedWords, nBytesReady);\n  }\n}\nclass Hasher extends BufferedBlockAlgorithm {\n  update(messageUpdate) {\n    this._append(messageUpdate);\n    this._process();\n    return this;\n  }\n  finalize(messageUpdate) {\n    if (messageUpdate) {\n      this._append(messageUpdate);\n    }\n  }\n}\n\nconst H = [\n  1779033703,\n  -1150833019,\n  1013904242,\n  -1521486534,\n  1359893119,\n  -1694144372,\n  528734635,\n  1541459225\n];\nconst K = [\n  1116352408,\n  1899447441,\n  -1245643825,\n  -373957723,\n  961987163,\n  1508970993,\n  -1841331548,\n  -1424204075,\n  -670586216,\n  310598401,\n  607225278,\n  1426881987,\n  1925078388,\n  -2132889090,\n  -1680079193,\n  -1046744716,\n  -459576895,\n  -272742522,\n  264347078,\n  604807628,\n  770255983,\n  1249150122,\n  1555081692,\n  1996064986,\n  -1740746414,\n  -1473132947,\n  -1341970488,\n  -1084653625,\n  -958395405,\n  -710438585,\n  113926993,\n  338241895,\n  666307205,\n  773529912,\n  1294757372,\n  1396182291,\n  1695183700,\n  1986661051,\n  -2117940946,\n  -1838011259,\n  -1564481375,\n  -1474664885,\n  -1035236496,\n  -949202525,\n  -778901479,\n  -694614492,\n  -200395387,\n  275423344,\n  430227734,\n  506948616,\n  659060556,\n  883997877,\n  958139571,\n  1322822218,\n  1537002063,\n  1747873779,\n  1955562222,\n  2024104815,\n  -2067236844,\n  -1933114872,\n  -1866530822,\n  -1538233109,\n  -1090935817,\n  -965641998\n];\nconst W = [];\nclass SHA256 extends Hasher {\n  constructor() {\n    super(...arguments);\n    this._hash = new WordArray([...H]);\n  }\n  reset() {\n    super.reset();\n    this._hash = new WordArray([...H]);\n  }\n  _doProcessBlock(M, offset) {\n    const H2 = this._hash.words;\n    let a = H2[0];\n    let b = H2[1];\n    let c = H2[2];\n    let d = H2[3];\n    let e = H2[4];\n    let f = H2[5];\n    let g = H2[6];\n    let h = H2[7];\n    for (let i = 0; i < 64; i++) {\n      if (i < 16) {\n        W[i] = M[offset + i] | 0;\n      } else {\n        const gamma0x = W[i - 15];\n        const gamma0 = (gamma0x << 25 | gamma0x >>> 7) ^ (gamma0x << 14 | gamma0x >>> 18) ^ gamma0x >>> 3;\n        const gamma1x = W[i - 2];\n        const gamma1 = (gamma1x << 15 | gamma1x >>> 17) ^ (gamma1x << 13 | gamma1x >>> 19) ^ gamma1x >>> 10;\n        W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n      }\n      const ch = e & f ^ ~e & g;\n      const maj = a & b ^ a & c ^ b & c;\n      const sigma0 = (a << 30 | a >>> 2) ^ (a << 19 | a >>> 13) ^ (a << 10 | a >>> 22);\n      const sigma1 = (e << 26 | e >>> 6) ^ (e << 21 | e >>> 11) ^ (e << 7 | e >>> 25);\n      const t1 = h + sigma1 + ch + K[i] + W[i];\n      const t2 = sigma0 + maj;\n      h = g;\n      g = f;\n      f = e;\n      e = d + t1 | 0;\n      d = c;\n      c = b;\n      b = a;\n      a = t1 + t2 | 0;\n    }\n    H2[0] = H2[0] + a | 0;\n    H2[1] = H2[1] + b | 0;\n    H2[2] = H2[2] + c | 0;\n    H2[3] = H2[3] + d | 0;\n    H2[4] = H2[4] + e | 0;\n    H2[5] = H2[5] + f | 0;\n    H2[6] = H2[6] + g | 0;\n    H2[7] = H2[7] + h | 0;\n  }\n  finalize(messageUpdate) {\n    super.finalize(messageUpdate);\n    const nBitsTotal = this._nDataBytes * 8;\n    const nBitsLeft = this._data.sigBytes * 8;\n    this._data.words[nBitsLeft >>> 5] |= 128 << 24 - nBitsLeft % 32;\n    this._data.words[(nBitsLeft + 64 >>> 9 << 4) + 14] = Math.floor(\n      nBitsTotal / 4294967296\n    );\n    this._data.words[(nBitsLeft + 64 >>> 9 << 4) + 15] = nBitsTotal;\n    this._data.sigBytes = this._data.words.length * 4;\n    this._process();\n    return this._hash;\n  }\n}\nfunction sha256(message) {\n  return new SHA256().finalize(message).toString();\n}\nfunction sha256base64(message) {\n  return new SHA256().finalize(message).toString(Base64);\n}\n\nfunction hash(object, options = {}) {\n  const hashed = typeof object === \"string\" ? object : objectHash(object, options);\n  return sha256base64(hashed).slice(0, 10);\n}\n\nfunction murmurHash(key, seed = 0) {\n  if (typeof key === \"string\") {\n    key = createBuffer(key);\n  }\n  let i = 0;\n  let h1 = seed;\n  let k1;\n  let h1b;\n  const remainder = key.length & 3;\n  const bytes = key.length - remainder;\n  const c1 = 3432918353;\n  const c2 = 461845907;\n  while (i < bytes) {\n    k1 = key[i] & 255 | (key[++i] & 255) << 8 | (key[++i] & 255) << 16 | (key[++i] & 255) << 24;\n    ++i;\n    k1 = (k1 & 65535) * c1 + (((k1 >>> 16) * c1 & 65535) << 16) & 4294967295;\n    k1 = k1 << 15 | k1 >>> 17;\n    k1 = (k1 & 65535) * c2 + (((k1 >>> 16) * c2 & 65535) << 16) & 4294967295;\n    h1 ^= k1;\n    h1 = h1 << 13 | h1 >>> 19;\n    h1b = (h1 & 65535) * 5 + (((h1 >>> 16) * 5 & 65535) << 16) & 4294967295;\n    h1 = (h1b & 65535) + 27492 + (((h1b >>> 16) + 58964 & 65535) << 16);\n  }\n  k1 = 0;\n  switch (remainder) {\n    case 3: {\n      k1 ^= (key[i + 2] & 255) << 16;\n      break;\n    }\n    case 2: {\n      k1 ^= (key[i + 1] & 255) << 8;\n      break;\n    }\n    case 1: {\n      k1 ^= key[i] & 255;\n      k1 = (k1 & 65535) * c1 + (((k1 >>> 16) * c1 & 65535) << 16) & 4294967295;\n      k1 = k1 << 15 | k1 >>> 17;\n      k1 = (k1 & 65535) * c2 + (((k1 >>> 16) * c2 & 65535) << 16) & 4294967295;\n      h1 ^= k1;\n    }\n  }\n  h1 ^= key.length;\n  h1 ^= h1 >>> 16;\n  h1 = (h1 & 65535) * 2246822507 + (((h1 >>> 16) * 2246822507 & 65535) << 16) & 4294967295;\n  h1 ^= h1 >>> 13;\n  h1 = (h1 & 65535) * 3266489909 + (((h1 >>> 16) * 3266489909 & 65535) << 16) & 4294967295;\n  h1 ^= h1 >>> 16;\n  return h1 >>> 0;\n}\nfunction createBuffer(val) {\n  return new TextEncoder().encode(val);\n}\n\nfunction isEqual(object1, object2, hashOptions = {}) {\n  if (object1 === object2) {\n    return true;\n  }\n  if (objectHash(object1, hashOptions) === objectHash(object2, hashOptions)) {\n    return true;\n  }\n  return false;\n}\n\nfunction diff(obj1, obj2, opts = {}) {\n  const h1 = _toHashedObject(obj1, opts);\n  const h2 = _toHashedObject(obj2, opts);\n  return _diff(h1, h2, opts);\n}\nfunction _diff(h1, h2, opts = {}) {\n  const diffs = [];\n  const allProps = /* @__PURE__ */ new Set([\n    ...Object.keys(h1.props || {}),\n    ...Object.keys(h2.props || {})\n  ]);\n  if (h1.props && h2.props) {\n    for (const prop of allProps) {\n      const p1 = h1.props[prop];\n      const p2 = h2.props[prop];\n      if (p1 && p2) {\n        diffs.push(..._diff(h1.props?.[prop], h2.props?.[prop], opts));\n      } else if (p1 || p2) {\n        diffs.push(\n          new DiffEntry((p2 || p1).key, p1 ? \"removed\" : \"added\", p2, p1)\n        );\n      }\n    }\n  }\n  if (allProps.size === 0 && h1.hash !== h2.hash) {\n    diffs.push(new DiffEntry((h2 || h1).key, \"changed\", h2, h1));\n  }\n  return diffs;\n}\nfunction _toHashedObject(obj, opts, key = \"\") {\n  if (obj && typeof obj !== \"object\") {\n    return new DiffHashedObject(key, obj, objectHash(obj, opts));\n  }\n  const props = {};\n  const hashes = [];\n  for (const _key in obj) {\n    props[_key] = _toHashedObject(\n      obj[_key],\n      opts,\n      key ? `${key}.${_key}` : _key\n    );\n    hashes.push(props[_key].hash);\n  }\n  return new DiffHashedObject(key, obj, `{${hashes.join(\":\")}}`, props);\n}\nclass DiffEntry {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(key, type, newValue, oldValue) {\n    this.key = key;\n    this.type = type;\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n  toString() {\n    return this.toJSON();\n  }\n  toJSON() {\n    switch (this.type) {\n      case \"added\": {\n        return `Added   \\`${this.key}\\``;\n      }\n      case \"removed\": {\n        return `Removed \\`${this.key}\\``;\n      }\n      case \"changed\": {\n        return `Changed \\`${this.key}\\` from \\`${this.oldValue?.toString() || \"-\"}\\` to \\`${this.newValue.toString()}\\``;\n      }\n    }\n  }\n}\nclass DiffHashedObject {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(key, value, hash, props) {\n    this.key = key;\n    this.value = value;\n    this.hash = hash;\n    this.props = props;\n  }\n  toString() {\n    if (this.props) {\n      return `{${Object.keys(this.props).join(\",\")}}`;\n    } else {\n      return JSON.stringify(this.value);\n    }\n  }\n  toJSON() {\n    const k = this.key || \".\";\n    if (this.props) {\n      return `${k}({${Object.keys(this.props).join(\",\")}})`;\n    }\n    return `${k}(${this.value})`;\n  }\n}\n\nexport { diff, hash, isEqual, murmurHash, objectHash, sha256, sha256base64 };\n","import { sha256 } from 'ohash';\n/**\n * TODO in the future we should no longer provide a\n * fallback to crypto.subtle.digest.\n * Instead users without crypto.subtle.digest support, should have to provide their own\n * hash function.\n */\nexport function jsSha256(input) {\n  return Promise.resolve(sha256(input));\n}\nexport async function nativeSha256(input) {\n  var data = new TextEncoder().encode(input);\n  var hashBuffer = await crypto.subtle.digest('SHA-256', data);\n  /**\n   * @link https://jameshfisher.com/2017/10/30/web-cryptography-api-hello-world/\n   */\n  var hash = Array.prototype.map.call(new Uint8Array(hashBuffer), x => ('00' + x.toString(16)).slice(-2)).join('');\n  return hash;\n}\nexport var canUseCryptoSubtle = typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined' && typeof crypto.subtle.digest === 'function';\n\n/**\n * Default hash method used to hash\n * strings and do equal comparisons.\n *\n * IMPORTANT: Changing the default hashing method\n * requires a BREAKING change!\n */\n\nexport var defaultHashSha256 = canUseCryptoSubtle ? nativeSha256 : jsSha256;\n//# sourceMappingURL=utils-hash.js.map","export function getFromMapOrThrow(map, key) {\n  var val = map.get(key);\n  if (typeof val === 'undefined') {\n    throw new Error('missing value from map ' + key);\n  }\n  return val;\n}\nexport function getFromMapOrCreate(map, index, creator, ifWasThere) {\n  var value = map.get(index);\n  if (typeof value === 'undefined') {\n    value = creator();\n    map.set(index, value);\n  } else if (ifWasThere) {\n    ifWasThere(value);\n  }\n  return value;\n}\n//# sourceMappingURL=utils-map.js.map","/**\n * Copied from the fast-deep-equal package\n * because it does not support es modules and causes optimization bailouts.\n * TODO use the npm package again when this is merged:\n * @link https://github.com/epoberezkin/fast-deep-equal/pull/105\n */\nexport function deepEqual(a, b) {\n  if (a === b) return true;\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length;\n    var i;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length !== b.length) return false;\n      for (i = length; i-- !== 0;) if (!deepEqual(a[i], b[i])) return false;\n      return true;\n    }\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    var keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n    for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!deepEqual(a[key], b[key])) return false;\n    }\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a !== a && b !== b;\n}\n//# sourceMappingURL=utils-object-deep-equal.js.map","/**\n * Copied from\n * @link https://github.com/sindresorhus/dot-prop/blob/main/index.js\n * because it is currently an esm only module.\n * TODO use the npm package again when RxDB is also fully esm.\n */\n\nvar isObject = value => {\n  var type = typeof value;\n  return value !== null && (type === 'object' || type === 'function');\n};\nvar disallowedKeys = new Set(['__proto__', 'prototype', 'constructor']);\nvar digits = new Set('0123456789');\nfunction getPathSegments(path) {\n  var parts = [];\n  var currentSegment = '';\n  var currentPart = 'start';\n  var isIgnoring = false;\n  for (var character of path) {\n    switch (character) {\n      case '\\\\':\n        {\n          if (currentPart === 'index') {\n            throw new Error('Invalid character in an index');\n          }\n          if (currentPart === 'indexEnd') {\n            throw new Error('Invalid character after an index');\n          }\n          if (isIgnoring) {\n            currentSegment += character;\n          }\n          currentPart = 'property';\n          isIgnoring = !isIgnoring;\n          break;\n        }\n      case '.':\n        {\n          if (currentPart === 'index') {\n            throw new Error('Invalid character in an index');\n          }\n          if (currentPart === 'indexEnd') {\n            currentPart = 'property';\n            break;\n          }\n          if (isIgnoring) {\n            isIgnoring = false;\n            currentSegment += character;\n            break;\n          }\n          if (disallowedKeys.has(currentSegment)) {\n            return [];\n          }\n          parts.push(currentSegment);\n          currentSegment = '';\n          currentPart = 'property';\n          break;\n        }\n      case '[':\n        {\n          if (currentPart === 'index') {\n            throw new Error('Invalid character in an index');\n          }\n          if (currentPart === 'indexEnd') {\n            currentPart = 'index';\n            break;\n          }\n          if (isIgnoring) {\n            isIgnoring = false;\n            currentSegment += character;\n            break;\n          }\n          if (currentPart === 'property') {\n            if (disallowedKeys.has(currentSegment)) {\n              return [];\n            }\n            parts.push(currentSegment);\n            currentSegment = '';\n          }\n          currentPart = 'index';\n          break;\n        }\n      case ']':\n        {\n          if (currentPart === 'index') {\n            parts.push(Number.parseInt(currentSegment, 10));\n            currentSegment = '';\n            currentPart = 'indexEnd';\n            break;\n          }\n          if (currentPart === 'indexEnd') {\n            throw new Error('Invalid character after an index');\n          }\n\n          // Falls through\n        }\n      default:\n        {\n          if (currentPart === 'index' && !digits.has(character)) {\n            throw new Error('Invalid character in an index');\n          }\n          if (currentPart === 'indexEnd') {\n            throw new Error('Invalid character after an index');\n          }\n          if (currentPart === 'start') {\n            currentPart = 'property';\n          }\n          if (isIgnoring) {\n            isIgnoring = false;\n            currentSegment += '\\\\';\n          }\n          currentSegment += character;\n        }\n    }\n  }\n  if (isIgnoring) {\n    currentSegment += '\\\\';\n  }\n  switch (currentPart) {\n    case 'property':\n      {\n        if (disallowedKeys.has(currentSegment)) {\n          return [];\n        }\n        parts.push(currentSegment);\n        break;\n      }\n    case 'index':\n      {\n        throw new Error('Index was not closed');\n      }\n    case 'start':\n      {\n        parts.push('');\n        break;\n      }\n    // No default\n  }\n  return parts;\n}\nfunction isStringIndex(object, key) {\n  if (typeof key !== 'number' && Array.isArray(object)) {\n    var index = Number.parseInt(key, 10);\n    return Number.isInteger(index) && object[index] === object[key];\n  }\n  return false;\n}\nfunction assertNotStringIndex(object, key) {\n  if (isStringIndex(object, key)) {\n    throw new Error('Cannot use string index');\n  }\n}\n\n/**\n * TODO we need some performance tests and improvements here.\n */\nexport function getProperty(object, path, value) {\n  if (Array.isArray(path)) {\n    path = path.join('.');\n  }\n\n  /**\n   * Performance shortcut.\n   * In most cases we just have a simple property name\n   * so we can directly return it.\n   */\n  if (!path.includes('.') && !path.includes('[')) {\n    return object[path];\n  }\n  if (!isObject(object) || typeof path !== 'string') {\n    return value === undefined ? object : value;\n  }\n  var pathArray = getPathSegments(path);\n  if (pathArray.length === 0) {\n    return value;\n  }\n  for (var index = 0; index < pathArray.length; index++) {\n    var key = pathArray[index];\n    if (isStringIndex(object, key)) {\n      object = index === pathArray.length - 1 ? undefined : null;\n    } else {\n      object = object[key];\n    }\n    if (object === undefined || object === null) {\n      // `object` is either `undefined` or `null` so we want to stop the loop, and\n      // if this is not the last bit of the path, and\n      // if it didn't return `undefined`\n      // it would return `null` if `object` is `null`\n      // but we want `get({foo: null}, 'foo.bar')` to equal `undefined`, or the supplied value, not `null`\n      if (index !== pathArray.length - 1) {\n        return value;\n      }\n      break;\n    }\n  }\n  return object === undefined ? value : object;\n}\nexport function setProperty(object, path, value) {\n  if (Array.isArray(path)) {\n    path = path.join('.');\n  }\n  if (!isObject(object) || typeof path !== 'string') {\n    return object;\n  }\n  var root = object;\n  var pathArray = getPathSegments(path);\n  for (var index = 0; index < pathArray.length; index++) {\n    var key = pathArray[index];\n    assertNotStringIndex(object, key);\n    if (index === pathArray.length - 1) {\n      object[key] = value;\n    } else if (!isObject(object[key])) {\n      object[key] = typeof pathArray[index + 1] === 'number' ? [] : {};\n    }\n    object = object[key];\n  }\n  return root;\n}\nexport function deleteProperty(object, path) {\n  if (!isObject(object) || typeof path !== 'string') {\n    return false;\n  }\n  var pathArray = getPathSegments(path);\n  for (var index = 0; index < pathArray.length; index++) {\n    var key = pathArray[index];\n    assertNotStringIndex(object, key);\n    if (index === pathArray.length - 1) {\n      delete object[key];\n      return true;\n    }\n    object = object[key];\n    if (!isObject(object)) {\n      return false;\n    }\n  }\n}\nexport function hasProperty(object, path) {\n  if (!isObject(object) || typeof path !== 'string') {\n    return false;\n  }\n  var pathArray = getPathSegments(path);\n  if (pathArray.length === 0) {\n    return false;\n  }\n  for (var key of pathArray) {\n    if (!isObject(object) || !(key in object) || isStringIndex(object, key)) {\n      return false;\n    }\n    object = object[key];\n  }\n  return true;\n}\n\n// TODO: Backslashes with no effect should not be escaped\nfunction escapePath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n  return path.replace(/[\\\\.[]/g, '\\\\$&');\n}\n\n// The keys returned by Object.entries() for arrays are strings\nfunction entries(value) {\n  if (Array.isArray(value)) {\n    return value.map((v, index) => [index, v]);\n  }\n  return Object.entries(value);\n}\nfunction stringifyPath(pathSegments) {\n  var result = '';\n\n  // eslint-disable-next-line prefer-const\n  for (var [index, segment] of entries(pathSegments)) {\n    if (typeof segment === 'number') {\n      result += \"[\" + segment + \"]\";\n    } else {\n      segment = escapePath(segment);\n      result += index === 0 ? segment : \".\" + segment;\n    }\n  }\n  return result;\n}\nfunction* deepKeysIterator(object, currentPath = []) {\n  if (!isObject(object)) {\n    if (currentPath.length > 0) {\n      yield stringifyPath(currentPath);\n    }\n    return;\n  }\n  for (var [key, value] of entries(object)) {\n    yield* deepKeysIterator(value, [...currentPath, key]);\n  }\n}\nexport function deepKeys(object) {\n  return [...deepKeysIterator(object)];\n}\n//# sourceMappingURL=utils-object-dot-prop.js.map","export function deepFreeze(o) {\n  Object.freeze(o);\n  Object.getOwnPropertyNames(o).forEach(function (prop) {\n    if (o.hasOwnProperty(prop) && o[prop] !== null && (typeof o[prop] === 'object' || typeof o[prop] === 'function') && !Object.isFrozen(o[prop])) {\n      deepFreeze(o[prop]);\n    }\n  });\n  return o;\n}\n\n/**\n * To get specific nested path values from objects,\n * RxDB normally uses the 'dot-prop' npm module.\n * But when performance is really relevant, this is not fast enough.\n * Instead we use a monad that can prepare some stuff up front\n * and we can reuse the generated function.\n */\n\nexport function objectPathMonad(objectPath) {\n  var split = objectPath.split('.');\n\n  // reuse this variable for better performance.\n  var splitLength = split.length;\n\n  /**\n   * Performance shortcut,\n   * if no nested path is used,\n   * directly return the field of the object.\n   */\n  if (splitLength === 1) {\n    return obj => obj[objectPath];\n  }\n  return obj => {\n    var currentVal = obj;\n    for (var i = 0; i < splitLength; ++i) {\n      var subPath = split[i];\n      currentVal = currentVal[subPath];\n      if (typeof currentVal === 'undefined') {\n        return currentVal;\n      }\n    }\n    return currentVal;\n  };\n}\nexport function getFromObjectOrThrow(obj, key) {\n  var val = obj[key];\n  if (!val) {\n    throw new Error('missing value from object ' + key);\n  }\n  return val;\n}\n\n/**\n * returns a flattened object\n * @link https://gist.github.com/penguinboy/762197\n */\nexport function flattenObject(ob) {\n  var toReturn = {};\n  for (var i in ob) {\n    if (!ob.hasOwnProperty(i)) continue;\n    if (typeof ob[i] === 'object') {\n      var flatObject = flattenObject(ob[i]);\n      for (var x in flatObject) {\n        if (!flatObject.hasOwnProperty(x)) continue;\n        toReturn[i + '.' + x] = flatObject[x];\n      }\n    } else {\n      toReturn[i] = ob[i];\n    }\n  }\n  return toReturn;\n}\n\n/**\n * does a flat copy on the objects,\n * is about 3 times faster then using deepClone\n * @link https://jsperf.com/object-rest-spread-vs-clone/2\n */\nexport function flatClone(obj) {\n  return Object.assign({}, obj);\n}\n\n/**\n * @link https://stackoverflow.com/a/11509718/3443137\n */\nexport function firstPropertyNameOfObject(obj) {\n  return Object.keys(obj)[0];\n}\nexport function firstPropertyValueOfObject(obj) {\n  var key = Object.keys(obj)[0];\n  return obj[key];\n}\n\n/**\n * deep-sort an object so its attributes are in lexical order.\n * Also sorts the arrays inside of the object if no-array-sort not set\n */\nexport function sortObject(obj, noArraySort = false) {\n  if (!obj) return obj; // do not sort null, false or undefined\n\n  // array\n  if (!noArraySort && Array.isArray(obj)) {\n    return obj.sort((a, b) => {\n      if (typeof a === 'string' && typeof b === 'string') return a.localeCompare(b);\n      if (typeof a === 'object') return 1;else return -1;\n    }).map(i => sortObject(i, noArraySort));\n  }\n\n  // object\n  // array is also of type object\n  if (typeof obj === 'object' && !Array.isArray(obj)) {\n    var out = {};\n    Object.keys(obj).sort((a, b) => a.localeCompare(b)).forEach(key => {\n      out[key] = sortObject(obj[key], noArraySort);\n    });\n    return out;\n  }\n\n  // everything else\n  return obj;\n}\n\n/**\n * Deep clone a plain json object.\n * Does not work with recursive stuff\n * or non-plain-json.\n * IMPORTANT: Performance of this is very important,\n * do not change it without running performance tests!\n *\n * @link https://github.com/zxdong262/deep-copy/blob/master/src/index.ts\n */\nfunction deepClone(src) {\n  if (!src) {\n    return src;\n  }\n  if (src === null || typeof src !== 'object') {\n    return src;\n  }\n  if (Array.isArray(src)) {\n    var ret = new Array(src.length);\n    var i = ret.length;\n    while (i--) {\n      ret[i] = deepClone(src[i]);\n    }\n    return ret;\n  }\n  var dest = {};\n  // eslint-disable-next-line guard-for-in\n  for (var key in src) {\n    dest[key] = deepClone(src[key]);\n  }\n  return dest;\n}\nexport var clone = deepClone;\n\n/**\n * overwrites the getter with the actual value\n * Mostly used for caching stuff on the first run\n */\nexport function overwriteGetterForCaching(obj, getterName, value) {\n  Object.defineProperty(obj, getterName, {\n    get: function () {\n      return value;\n    }\n  });\n  return value;\n}\n//# sourceMappingURL=utils-object.js.map","export function runXTimes(xTimes, fn) {\n  new Array(xTimes).fill(0).forEach((_v, idx) => fn(idx));\n}\nexport function ensureNotFalsy(obj) {\n  if (!obj) {\n    throw new Error('ensureNotFalsy() is falsy');\n  }\n  return obj;\n}\nexport function ensureInteger(obj) {\n  if (!Number.isInteger(obj)) {\n    throw new Error('ensureInteger() is falsy');\n  }\n  return obj;\n}\n\n/**\n * Using shareReplay() without settings will not unsubscribe\n * if there are no more subscribers.\n * So we use these defaults.\n * @link https://cartant.medium.com/rxjs-whats-changed-with-sharereplay-65c098843e95\n */\nexport var RXJS_SHARE_REPLAY_DEFAULTS = {\n  bufferSize: 1,\n  refCount: true\n};\n//# sourceMappingURL=utils-other.js.map","/**\n * returns a promise that resolves on the next tick\n */\nexport function nextTick() {\n  return new Promise(res => setTimeout(res, 0));\n}\nexport function promiseWait(ms = 0) {\n  return new Promise(res => setTimeout(res, ms));\n}\nexport function toPromise(maybePromise) {\n  if (maybePromise && typeof maybePromise.then === 'function') {\n    // is promise\n    return maybePromise;\n  } else {\n    return Promise.resolve(maybePromise);\n  }\n}\n\n/**\n * Reusing resolved promises has a better\n * performance than creating new ones each time.\n */\nexport var PROMISE_RESOLVE_TRUE = Promise.resolve(true);\nexport var PROMISE_RESOLVE_FALSE = Promise.resolve(false);\nexport var PROMISE_RESOLVE_NULL = Promise.resolve(null);\nexport var PROMISE_RESOLVE_VOID = Promise.resolve();\nexport function requestIdlePromiseNoQueue(\n/**\n * We always set a timeout!\n * RxDB might be used on the server side where the\n * server runs 24/4 on 99% CPU. So without a timeout\n * this would never resolve which could cause a memory leak.\n */\ntimeout = 10000) {\n  /**\n   * Do not use window.requestIdleCallback\n   * because some javascript runtimes like react-native,\n   * do not have a window object, but still have a global\n   * requestIdleCallback function.\n   * @link https://github.com/pubkey/rxdb/issues/4804\n  */\n  if (typeof requestIdleCallback === 'function') {\n    return new Promise(res => {\n      requestIdleCallback(() => res(), {\n        timeout\n      });\n    });\n  } else {\n    return promiseWait(0);\n  }\n}\n\n/**\n * If multiple operations wait for an requestIdlePromise\n * we do not want them to resolve all at the same time.\n * So we have to queue the calls.\n */\nvar idlePromiseQueue = PROMISE_RESOLVE_VOID;\nexport function requestIdlePromise(timeout = undefined) {\n  idlePromiseQueue = idlePromiseQueue.then(() => {\n    return requestIdlePromiseNoQueue(timeout);\n  });\n  return idlePromiseQueue;\n}\n\n/**\n * run the callback if requestIdleCallback available\n * do nothing if not\n * @link https://developer.mozilla.org/de/docs/Web/API/Window/requestIdleCallback\n */\nexport function requestIdleCallbackIfAvailable(fun) {\n  /**\n   * Do not use window.requestIdleCallback\n   * because some javascript runtimes like react-native,\n   * do not have a window object, but still have a global\n   * requestIdleCallback function.\n   * @link https://github.com/pubkey/rxdb/issues/4804\n  */\n  if (typeof requestIdleCallback === 'function') {\n    requestIdleCallback(() => {\n      fun();\n    });\n  }\n}\n\n/**\n * like Promise.all() but runs in series instead of parallel\n * @link https://github.com/egoist/promise.series/blob/master/index.js\n * @param tasks array with functions that return a promise\n */\nexport function promiseSeries(tasks, initial) {\n  return tasks.reduce((current, next) => current.then(next), Promise.resolve(initial));\n}\n//# sourceMappingURL=utils-promise.js.map","export function parseRevision(revision) {\n  var split = revision.split('-');\n  if (split.length !== 2) {\n    throw new Error('malformatted revision: ' + revision);\n  }\n  return {\n    height: parseInt(split[0], 10),\n    hash: split[1]\n  };\n}\n\n/**\n * @hotPath\n */\nexport function getHeightOfRevision(revision) {\n  var ret = parseInt(revision.split('-')[0], 10);\n  return ret;\n}\n\n/**\n * Creates the next write revision for a given document.\n */\nexport function createRevision(databaseInstanceToken, previousDocData) {\n  var previousRevision = previousDocData ? previousDocData._rev : null;\n  var previousRevisionHeight = previousRevision ? parseRevision(previousRevision).height : 0;\n  var newRevisionHeight = previousRevisionHeight + 1;\n  return newRevisionHeight + '-' + databaseInstanceToken;\n}\n//# sourceMappingURL=utils-revision.js.map","/**\n * This file is replaced in the 'npm run build:version' script.\n */\nexport var RXDB_VERSION = '15.0.0-beta.42';\n//# sourceMappingURL=utils-rxdb-version.js.map","var COUCH_NAME_CHARS = 'abcdefghijklmnopqrstuvwxyz';\n/**\n * get a random string which can be used with couchdb\n * @link http://stackoverflow.com/a/1349426/3443137\n */\nexport function randomCouchString(length = 10) {\n  var text = '';\n  for (var i = 0; i < length; i++) {\n    text += COUCH_NAME_CHARS.charAt(Math.floor(Math.random() * COUCH_NAME_CHARS.length));\n  }\n  return text;\n}\n\n/**\n * A random string that is never inside of any storage\n */\nexport var RANDOM_STRING = 'Fz7SZXPmYJujkzjY1rpXWvlWBqoGAfAX';\n\n/**\n * uppercase first char\n */\nexport function ucfirst(str) {\n  str += '';\n  var f = str.charAt(0).toUpperCase();\n  return f + str.substr(1);\n}\n\n/**\n * removes trailing and ending dots from the string\n */\nexport function trimDots(str) {\n  // start\n  while (str.charAt(0) === '.') {\n    str = str.substr(1);\n  }\n\n  // end\n  while (str.slice(-1) === '.') {\n    str = str.slice(0, -1);\n  }\n  return str;\n}\n\n/**\n * @link https://stackoverflow.com/a/44950500/3443137\n */\nexport function lastCharOfString(str) {\n  return str.charAt(str.length - 1);\n}\n\n/**\n * returns true if the given name is likely a folder path\n */\nexport function isFolderPath(name) {\n  // do not check, if foldername is given\n  if (name.includes('/') ||\n  // unix\n  name.includes('\\\\') // windows\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * @link https://gist.github.com/andreburgaud/6f73fd2d690b629346b8\n */\nexport function arrayBufferToString(buf) {\n  return String.fromCharCode.apply(null, new Uint16Array(buf));\n}\nexport function stringToArrayBuffer(str) {\n  var buf = new ArrayBuffer(str.length * 2);\n  var bufView = new Uint16Array(buf);\n  for (var i = 0, strLen = str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\n//# sourceMappingURL=utils-string.js.map","/**\n * Returns the current unix time in milliseconds (with two decimals!)\n * Because the accuracy of getTime() in javascript is bad,\n * and we cannot rely on performance.now() on all platforms,\n * this method implements a way to never return the same value twice.\n * This ensures that when now() is called often, we do not loose the information\n * about which call came first and which came after.\n *\n * We had to move from having no decimals, to having two decimal\n * because it turned out that some storages are such fast that\n * calling this method too often would return 'the future'.\n */\nvar _lastNow = 0;\n/**\n * Returns the current time in milliseconds,\n * also ensures to not return the same value twice.\n */\nexport function now() {\n  var ret = Date.now();\n  ret = ret + 0.01;\n  if (ret <= _lastNow) {\n    ret = _lastNow + 0.01;\n  }\n\n  /**\n   * Strip the returned number to max two decimals.\n   * In theory we would not need this but\n   * in practice JavaScript has no such good number precision\n   * so rounding errors could add another decimal place.\n   */\n  var twoDecimals = parseFloat(ret.toFixed(2));\n  _lastNow = twoDecimals;\n  return twoDecimals;\n}\n//# sourceMappingURL=utils-time.js.map","/**\n * the query-cache makes sure that on every query-state, exactly one instance can exist\n * if you use the same mango-query more then once, it will reuse the first RxQuery\n */\n\nimport { getFromMapOrCreate, nextTick, now, requestIdlePromise } from \"./plugins/utils/index.js\";\nexport var QueryCache = /*#__PURE__*/function () {\n  function QueryCache() {\n    this._map = new Map();\n  }\n  var _proto = QueryCache.prototype;\n  /**\n   * check if an equal query is in the cache,\n   * if true, return the cached one,\n   * if false, save the given one and return it\n   */\n  _proto.getByQuery = function getByQuery(rxQuery) {\n    var stringRep = rxQuery.toString();\n    return getFromMapOrCreate(this._map, stringRep, () => rxQuery);\n  };\n  return QueryCache;\n}();\nexport function createQueryCache() {\n  return new QueryCache();\n}\nexport function uncacheRxQuery(queryCache, rxQuery) {\n  rxQuery.uncached = true;\n  var stringRep = rxQuery.toString();\n  queryCache._map.delete(stringRep);\n}\nexport function countRxQuerySubscribers(rxQuery) {\n  return rxQuery.refCount$.observers.length;\n}\nexport var DEFAULT_TRY_TO_KEEP_MAX = 100;\nexport var DEFAULT_UNEXECUTED_LIFETIME = 30 * 1000;\n\n/**\n * The default cache replacement policy\n * See docs-src/query-cache.md to learn how it should work.\n * Notice that this runs often and should block the cpu as less as possible\n * This is a monad which makes it easier to unit test\n */\nexport var defaultCacheReplacementPolicyMonad = (tryToKeepMax, unExecutedLifetime) => (_collection, queryCache) => {\n  if (queryCache._map.size < tryToKeepMax) {\n    return;\n  }\n  var minUnExecutedLifetime = now() - unExecutedLifetime;\n  var maybeUncache = [];\n  var queriesInCache = Array.from(queryCache._map.values());\n  for (var rxQuery of queriesInCache) {\n    // filter out queries with subscribers\n    if (countRxQuerySubscribers(rxQuery) > 0) {\n      continue;\n    }\n    // directly uncache queries that never executed and are older then unExecutedLifetime\n    if (rxQuery._lastEnsureEqual === 0 && rxQuery._creationTime < minUnExecutedLifetime) {\n      uncacheRxQuery(queryCache, rxQuery);\n      continue;\n    }\n    maybeUncache.push(rxQuery);\n  }\n  var mustUncache = maybeUncache.length - tryToKeepMax;\n  if (mustUncache <= 0) {\n    return;\n  }\n  var sortedByLastUsage = maybeUncache.sort((a, b) => a._lastEnsureEqual - b._lastEnsureEqual);\n  var toRemove = sortedByLastUsage.slice(0, mustUncache);\n  toRemove.forEach(rxQuery => uncacheRxQuery(queryCache, rxQuery));\n};\nexport var defaultCacheReplacementPolicy = defaultCacheReplacementPolicyMonad(DEFAULT_TRY_TO_KEEP_MAX, DEFAULT_UNEXECUTED_LIFETIME);\nexport var COLLECTIONS_WITH_RUNNING_CLEANUP = new WeakSet();\n\n/**\n * Triggers the cache replacement policy after waitTime has passed.\n * We do not run this directly because at exactly the time a query is created,\n * we need all CPU to minimize latency.\n * Also this should not be triggered multiple times when waitTime is still waiting.\n */\nexport function triggerCacheReplacement(rxCollection) {\n  if (COLLECTIONS_WITH_RUNNING_CLEANUP.has(rxCollection)) {\n    // already started\n    return;\n  }\n  COLLECTIONS_WITH_RUNNING_CLEANUP.add(rxCollection);\n\n  /**\n   * Do not run directly to not reduce result latency of a new query\n   */\n  nextTick() // wait at least one tick\n  .then(() => requestIdlePromise(200)) // and then wait for the CPU to be idle\n  .then(() => {\n    if (!rxCollection.destroyed) {\n      rxCollection.cacheReplacementPolicy(rxCollection, rxCollection._queryCache);\n    }\n    COLLECTIONS_WITH_RUNNING_CLEANUP.delete(rxCollection);\n  });\n}\n//# sourceMappingURL=query-cache.js.map","import { countUntilNotMatching } from \"./plugins/utils/index.js\";\nimport { getPrimaryFieldOfPrimaryKey } from \"./rx-schema-helper.js\";\nexport var INDEX_MAX = String.fromCharCode(65535);\n\n/**\n * Do not use -Infinity here because it would be\n * transformed to null on JSON.stringify() which can break things\n * when the query plan is send to the storage as json.\n * @link https://stackoverflow.com/a/16644751\n * Notice that for IndexedDB IDBKeyRange we have\n * to transform the value back to -Infinity\n * before we can use it in IDBKeyRange.bound.\n *\n */\nexport var INDEX_MIN = Number.MIN_VALUE;\n\n/**\n * Returns the query plan which contains\n * information about how to run the query\n * and which indexes to use.\n *\n * This is used in some storage like Memory, dexie.js and IndexedDB.\n */\nexport function getQueryPlan(schema, query) {\n  var primaryPath = getPrimaryFieldOfPrimaryKey(schema.primaryKey);\n  var selector = query.selector;\n  var indexes = schema.indexes ? schema.indexes.slice(0) : [];\n  if (query.index) {\n    indexes = [query.index];\n  } else {\n    indexes.push([primaryPath]);\n  }\n  var optimalSortIndex = query.sort.map(sortField => Object.keys(sortField)[0]);\n  var optimalSortIndexCompareString = optimalSortIndex.join(',');\n  /**\n   * Most storages do not support descending indexes\n   * so having a 'desc' in the sorting, means we always have to re-sort the results.\n   */\n  var hasDescSorting = !!query.sort.find(sortField => Object.values(sortField)[0] === 'desc');\n  var currentBestQuality = -1;\n  var currentBestQueryPlan;\n  indexes.forEach(index => {\n    var inclusiveEnd = true;\n    var inclusiveStart = true;\n    var opts = index.map(indexField => {\n      var matcher = selector[indexField];\n      var operators = matcher ? Object.keys(matcher) : [];\n      var matcherOpts = {};\n      if (!matcher || !operators.length) {\n        var startKey = inclusiveStart ? INDEX_MIN : INDEX_MAX;\n        matcherOpts = {\n          startKey,\n          endKey: inclusiveEnd ? INDEX_MAX : INDEX_MIN,\n          inclusiveStart: true,\n          inclusiveEnd: true\n        };\n      } else {\n        operators.forEach(operator => {\n          if (LOGICAL_OPERATORS.has(operator)) {\n            var operatorValue = matcher[operator];\n            var partialOpts = getMatcherQueryOpts(operator, operatorValue);\n            matcherOpts = Object.assign(matcherOpts, partialOpts);\n          }\n        });\n      }\n\n      // fill missing attributes\n      if (typeof matcherOpts.startKey === 'undefined') {\n        matcherOpts.startKey = INDEX_MIN;\n      }\n      if (typeof matcherOpts.endKey === 'undefined') {\n        matcherOpts.endKey = INDEX_MAX;\n      }\n      if (typeof matcherOpts.inclusiveStart === 'undefined') {\n        matcherOpts.inclusiveStart = true;\n      }\n      if (typeof matcherOpts.inclusiveEnd === 'undefined') {\n        matcherOpts.inclusiveEnd = true;\n      }\n      if (inclusiveStart && !matcherOpts.inclusiveStart) {\n        inclusiveStart = false;\n      }\n      if (inclusiveEnd && !matcherOpts.inclusiveEnd) {\n        inclusiveEnd = false;\n      }\n      return matcherOpts;\n    });\n    var queryPlan = {\n      index,\n      startKeys: opts.map(opt => opt.startKey),\n      endKeys: opts.map(opt => opt.endKey),\n      inclusiveEnd,\n      inclusiveStart,\n      sortFieldsSameAsIndexFields: !hasDescSorting && optimalSortIndexCompareString === index.join(','),\n      selectorSatisfiedByIndex: isSelectorSatisfiedByIndex(index, query.selector)\n    };\n    var quality = rateQueryPlan(schema, query, queryPlan);\n    if (quality > 0 && quality > currentBestQuality || query.index) {\n      currentBestQuality = quality;\n      currentBestQueryPlan = queryPlan;\n    }\n  });\n\n  /**\n   * No index found, use the default index\n   */\n  if (!currentBestQueryPlan) {\n    currentBestQueryPlan = {\n      index: [primaryPath],\n      startKeys: [INDEX_MIN],\n      endKeys: [INDEX_MAX],\n      inclusiveEnd: true,\n      inclusiveStart: true,\n      sortFieldsSameAsIndexFields: !hasDescSorting && optimalSortIndexCompareString === primaryPath,\n      selectorSatisfiedByIndex: isSelectorSatisfiedByIndex([primaryPath], query.selector)\n    };\n  }\n  return currentBestQueryPlan;\n}\nexport var LOGICAL_OPERATORS = new Set(['$eq', '$gt', '$gte', '$lt', '$lte']);\nexport var LOWER_BOUND_LOGICAL_OPERATORS = new Set(['$eq', '$gt', '$gte']);\nexport var UPPER_BOUND_LOGICAL_OPERATORS = new Set(['$eq', '$lt', '$lte']);\nexport function isSelectorSatisfiedByIndex(index, selector) {\n  var selectorEntries = Object.entries(selector);\n  var hasNonMatchingOperator = selectorEntries.find(([fieldName, operation]) => {\n    if (!index.includes(fieldName)) {\n      return true;\n    }\n    var hasNonLogicOperator = Object.entries(operation).find(([op, _value]) => !LOGICAL_OPERATORS.has(op));\n    return hasNonLogicOperator;\n  });\n  if (hasNonMatchingOperator) {\n    return false;\n  }\n  var prevLowerBoundaryField;\n  var hasMoreThenOneLowerBoundaryField = index.find(fieldName => {\n    var operation = selector[fieldName];\n    if (!operation) {\n      return false;\n    }\n    var hasLowerLogicOp = Object.keys(operation).find(key => LOWER_BOUND_LOGICAL_OPERATORS.has(key));\n    if (prevLowerBoundaryField && hasLowerLogicOp) {\n      return true;\n    } else if (hasLowerLogicOp !== '$eq') {\n      prevLowerBoundaryField = hasLowerLogicOp;\n    }\n    return false;\n  });\n  if (hasMoreThenOneLowerBoundaryField) {\n    return false;\n  }\n  var prevUpperBoundaryField;\n  var hasMoreThenOneUpperBoundaryField = index.find(fieldName => {\n    var operation = selector[fieldName];\n    if (!operation) {\n      return false;\n    }\n    var hasUpperLogicOp = Object.keys(operation).find(key => UPPER_BOUND_LOGICAL_OPERATORS.has(key));\n    if (prevUpperBoundaryField && hasUpperLogicOp) {\n      return true;\n    } else if (hasUpperLogicOp !== '$eq') {\n      prevUpperBoundaryField = hasUpperLogicOp;\n    }\n    return false;\n  });\n  if (hasMoreThenOneUpperBoundaryField) {\n    return false;\n  }\n  var selectorFields = new Set(Object.keys(selector));\n  for (var fieldName of index) {\n    if (selectorFields.size === 0) {\n      break;\n    }\n    if (selectorFields.has(fieldName)) {\n      selectorFields.delete(fieldName);\n    } else {\n      return false;\n    }\n  }\n  return true;\n}\nexport function getMatcherQueryOpts(operator, operatorValue) {\n  switch (operator) {\n    case '$eq':\n      return {\n        startKey: operatorValue,\n        endKey: operatorValue\n      };\n    case '$lte':\n      return {\n        endKey: operatorValue\n      };\n    case '$gte':\n      return {\n        startKey: operatorValue\n      };\n    case '$lt':\n      return {\n        endKey: operatorValue,\n        inclusiveEnd: false\n      };\n    case '$gt':\n      return {\n        startKey: operatorValue,\n        inclusiveStart: false\n      };\n    default:\n      throw new Error('SNH');\n  }\n}\n\n/**\n * Returns a number that determines the quality of the query plan.\n * Higher number means better query plan.\n */\nexport function rateQueryPlan(schema, query, queryPlan) {\n  var quality = 0;\n  var addQuality = value => {\n    if (value > 0) {\n      quality = quality + value;\n    }\n  };\n  var pointsPerMatchingKey = 10;\n  var nonMinKeyCount = countUntilNotMatching(queryPlan.startKeys, keyValue => keyValue !== INDEX_MIN && keyValue !== INDEX_MAX);\n  addQuality(nonMinKeyCount * pointsPerMatchingKey);\n  var nonMaxKeyCount = countUntilNotMatching(queryPlan.startKeys, keyValue => keyValue !== INDEX_MAX && keyValue !== INDEX_MIN);\n  addQuality(nonMaxKeyCount * pointsPerMatchingKey);\n  var equalKeyCount = countUntilNotMatching(queryPlan.startKeys, (keyValue, idx) => {\n    if (keyValue === queryPlan.endKeys[idx]) {\n      return true;\n    } else {\n      return false;\n    }\n  });\n  addQuality(equalKeyCount * pointsPerMatchingKey * 1.5);\n  var pointsIfNoReSortMustBeDone = queryPlan.sortFieldsSameAsIndexFields ? 5 : 0;\n  addQuality(pointsIfNoReSortMustBeDone);\n\n  // console.log('rateQueryPlan() result:');\n  // console.log({\n  //     query,\n  //     queryPlan,\n  //     nonMinKeyCount,\n  //     nonMaxKeyCount,\n  //     equalKeyCount,\n  //     pointsIfNoReSortMustBeDone,\n  //     quality\n  // });\n\n  return quality;\n}\n//# sourceMappingURL=query-planner.js.map","import { getDefaultRevision, createRevision, now, flatClone, deepEqual } from \"../plugins/utils/index.js\";\nimport { stripAttachmentsDataFromDocument } from \"../rx-storage-helper.js\";\nexport var defaultConflictHandler = function (i, _context) {\n  var newDocumentState = stripAttachmentsDataFromDocument(i.newDocumentState);\n  var realMasterState = stripAttachmentsDataFromDocument(i.realMasterState);\n\n  /**\n   * If the documents are deep equal,\n   * we have no conflict.\n   * On your custom conflict handler you might only\n   * check some properties, like the updatedAt time,\n   * for better performance, because deepEqual is expensive.\n   */\n  if (deepEqual(newDocumentState, realMasterState)) {\n    return Promise.resolve({\n      isEqual: true\n    });\n  }\n\n  /**\n   * The default conflict handler will always\n   * drop the fork state and use the master state instead.\n   */\n  return Promise.resolve({\n    isEqual: false,\n    documentData: i.realMasterState\n  });\n};\n\n/**\n * Resolves a conflict error or determines that the given document states are equal.\n * Returns the resolved document that must be written to the fork.\n * Then the new document state can be pushed upstream.\n * If document is not in conflict, returns undefined.\n * If error is non-409, it throws an error.\n * Conflicts are only solved in the upstream, never in the downstream.\n */\nexport async function resolveConflictError(state, input, forkState) {\n  var conflictHandler = state.input.conflictHandler;\n  var conflictHandlerOutput = await conflictHandler(input, 'replication-resolve-conflict');\n  if (conflictHandlerOutput.isEqual) {\n    /**\n     * Documents are equal,\n     * so this is not a conflict -> do nothing.\n     */\n    return undefined;\n  } else {\n    /**\n     * We have a resolved conflict,\n     * use the resolved document data.\n     */\n    var resolvedDoc = Object.assign({}, conflictHandlerOutput.documentData, {\n      /**\n       * Because the resolved conflict is written to the fork,\n       * we have to keep/update the forks _meta data, not the masters.\n       */\n      _meta: flatClone(forkState._meta),\n      _rev: getDefaultRevision(),\n      _attachments: flatClone(forkState._attachments)\n    });\n    resolvedDoc._meta.lwt = now();\n    resolvedDoc._rev = createRevision(await state.checkpointKey, forkState);\n    return {\n      resolvedDoc,\n      output: conflictHandlerOutput\n    };\n  }\n}\n//# sourceMappingURL=conflicts.js.map","/**\n * RxChangeEvents a emitted when something in the database changes\n * they can be grabbed by the observables of database, collection and document\n */\n\nimport { overwritable } from \"./overwritable.js\";\nimport { appendToArray } from \"./plugins/utils/index.js\";\nexport function getDocumentDataOfRxChangeEvent(rxChangeEvent) {\n  if (rxChangeEvent.documentData) {\n    return rxChangeEvent.documentData;\n  } else {\n    return rxChangeEvent.previousDocumentData;\n  }\n}\n\n/**\n * Might return null which means an\n * already deleted document got modified but still is deleted.\n * These kind of events are not relevant for the event-reduce algorithm\n * and must be filtered out.\n */\nexport function rxChangeEventToEventReduceChangeEvent(rxChangeEvent) {\n  switch (rxChangeEvent.operation) {\n    case 'INSERT':\n      return {\n        operation: rxChangeEvent.operation,\n        id: rxChangeEvent.documentId,\n        doc: rxChangeEvent.documentData,\n        previous: null\n      };\n    case 'UPDATE':\n      return {\n        operation: rxChangeEvent.operation,\n        id: rxChangeEvent.documentId,\n        doc: overwritable.deepFreezeWhenDevMode(rxChangeEvent.documentData),\n        previous: rxChangeEvent.previousDocumentData ? rxChangeEvent.previousDocumentData : 'UNKNOWN'\n      };\n    case 'DELETE':\n      return {\n        operation: rxChangeEvent.operation,\n        id: rxChangeEvent.documentId,\n        doc: null,\n        previous: rxChangeEvent.previousDocumentData\n      };\n  }\n}\n\n/**\n * Flattens the given events into a single array of events.\n * Used mostly in tests.\n */\nexport function flattenEvents(input) {\n  var output = [];\n  if (Array.isArray(input)) {\n    input.forEach(inputItem => {\n      var add = flattenEvents(inputItem);\n      appendToArray(output, add);\n    });\n  } else {\n    if (input.id && input.events) {\n      // is bulk\n      input.events.forEach(ev => output.push(ev));\n    } else {\n      output.push(input);\n    }\n  }\n  var usedIds = new Set();\n  var nonDuplicate = [];\n  function getEventId(ev) {\n    return [ev.documentId, ev.documentData ? ev.documentData._rev : '', ev.previousDocumentData ? ev.previousDocumentData._rev : ''].join('|');\n  }\n  output.forEach(ev => {\n    var eventId = getEventId(ev);\n    if (!usedIds.has(eventId)) {\n      usedIds.add(eventId);\n      nonDuplicate.push(ev);\n    }\n  });\n  return nonDuplicate;\n}\n//# sourceMappingURL=rx-change-event.js.map","import { createRevision, flatClone, getDefaultRevision, getDefaultRxDocumentMeta, now } from \"./plugins/utils/index.js\";\nimport { fillObjectWithDefaults, fillPrimaryKey } from \"./rx-schema-helper.js\";\nimport { runAsyncPluginHooks } from \"./hooks.js\";\nimport { getAllCollectionDocuments } from \"./rx-database-internal-store.js\";\nimport { flatCloneDocWithMeta } from \"./rx-storage-helper.js\";\nimport { overwritable } from \"./overwritable.js\";\n\n/**\n * fills in the default data.\n * This also clones the data.\n */\nexport function fillObjectDataBeforeInsert(schema, data) {\n  data = flatClone(data);\n  data = fillObjectWithDefaults(schema, data);\n  data = fillPrimaryKey(schema.primaryPath, schema.jsonSchema, data);\n  data._meta = getDefaultRxDocumentMeta();\n  if (!data.hasOwnProperty('_deleted')) {\n    data._deleted = false;\n  }\n  if (!data.hasOwnProperty('_attachments')) {\n    data._attachments = {};\n  }\n  if (!data.hasOwnProperty('_rev')) {\n    data._rev = getDefaultRevision();\n  }\n  return data;\n}\n\n/**\n * Creates the storage instances that are used internally in the collection\n */\nexport async function createRxCollectionStorageInstance(rxDatabase, storageInstanceCreationParams) {\n  storageInstanceCreationParams.multiInstance = rxDatabase.multiInstance;\n  var storageInstance = await rxDatabase.storage.createStorageInstance(storageInstanceCreationParams);\n  return storageInstance;\n}\n\n/**\n * Removes the main storage of the collection\n * and all connected storages like the ones from the replication meta etc.\n */\nexport async function removeCollectionStorages(storage, databaseInternalStorage, databaseInstanceToken, databaseName, collectionName, password,\n/**\n * If no hash function is provided,\n * we assume that the whole internal store is removed anyway\n * so we do not have to delete the meta documents.\n */\nhashFunction) {\n  var allCollectionMetaDocs = await getAllCollectionDocuments(storage.statics, databaseInternalStorage);\n  var relevantCollectionMetaDocs = allCollectionMetaDocs.filter(metaDoc => metaDoc.data.name === collectionName);\n  var removeStorages = [];\n  relevantCollectionMetaDocs.forEach(metaDoc => {\n    removeStorages.push({\n      collectionName: metaDoc.data.name,\n      schema: metaDoc.data.schema,\n      isCollection: true\n    });\n    metaDoc.data.connectedStorages.forEach(row => removeStorages.push({\n      collectionName: row.collectionName,\n      isCollection: false,\n      schema: row.schema\n    }));\n  });\n\n  // ensure uniqueness\n  var alreadyAdded = new Set();\n  removeStorages = removeStorages.filter(row => {\n    var key = row.collectionName + '||' + row.schema.version;\n    if (alreadyAdded.has(key)) {\n      return false;\n    } else {\n      alreadyAdded.add(key);\n      return true;\n    }\n  });\n\n  // remove all the storages\n  await Promise.all(removeStorages.map(async row => {\n    var storageInstance = await storage.createStorageInstance({\n      collectionName: row.collectionName,\n      databaseInstanceToken,\n      databaseName,\n      multiInstance: false,\n      options: {},\n      schema: row.schema,\n      password,\n      devMode: overwritable.isDevMode()\n    });\n    await storageInstance.remove();\n    if (row.isCollection) {\n      await runAsyncPluginHooks('postRemoveRxCollection', {\n        storage,\n        databaseName: databaseName,\n        collectionName\n      });\n    }\n  }));\n\n  // remove the meta documents\n  if (hashFunction) {\n    var writeRows = relevantCollectionMetaDocs.map(doc => {\n      var writeDoc = flatCloneDocWithMeta(doc);\n      writeDoc._deleted = true;\n      writeDoc._meta.lwt = now();\n      writeDoc._rev = createRevision(databaseInstanceToken, doc);\n      return {\n        previous: doc,\n        document: writeDoc\n      };\n    });\n    await databaseInternalStorage.bulkWrite(writeRows, 'rx-database-remove-collection-all');\n  }\n}\n//# sourceMappingURL=rx-collection-helper.js.map","/**\n * a buffer-cache which holds the last X changeEvents of the collection\n */\n\nimport { filter } from 'rxjs/operators';\nexport var ChangeEventBuffer = /*#__PURE__*/function () {\n  /**\n   * array with changeEvents\n   * starts with oldest known event, ends with newest\n   */\n\n  function ChangeEventBuffer(collection) {\n    this.subs = [];\n    this.limit = 100;\n    this.counter = 0;\n    this.eventCounterMap = new WeakMap();\n    this.buffer = [];\n    this.collection = collection;\n    this.subs.push(this.collection.$.pipe(filter(cE => !cE.isLocal)).subscribe(cE => this._handleChangeEvent(cE)));\n  }\n  var _proto = ChangeEventBuffer.prototype;\n  _proto._handleChangeEvent = function _handleChangeEvent(changeEvent) {\n    this.counter++;\n    this.buffer.push(changeEvent);\n    this.eventCounterMap.set(changeEvent, this.counter);\n    while (this.buffer.length > this.limit) {\n      this.buffer.shift();\n    }\n  }\n\n  /**\n   * gets the array-index for the given pointer\n   * @return arrayIndex which can be used to iterate from there. If null, pointer is out of lower bound\n   */;\n  _proto.getArrayIndexByPointer = function getArrayIndexByPointer(pointer) {\n    var oldestEvent = this.buffer[0];\n    var oldestCounter = this.eventCounterMap.get(oldestEvent);\n    if (pointer < oldestCounter) return null; // out of bounds\n\n    var rest = pointer - oldestCounter;\n    return rest;\n  }\n\n  /**\n   * get all changeEvents which came in later than the pointer-event\n   * @return array with change-events. If null, pointer out of bounds\n   */;\n  _proto.getFrom = function getFrom(pointer) {\n    var ret = [];\n    var currentIndex = this.getArrayIndexByPointer(pointer);\n    if (currentIndex === null)\n      // out of bounds\n      return null;\n    while (true) {\n      var nextEvent = this.buffer[currentIndex];\n      currentIndex++;\n      if (!nextEvent) {\n        return ret;\n      } else {\n        ret.push(nextEvent);\n      }\n    }\n  };\n  _proto.runFrom = function runFrom(pointer, fn) {\n    var ret = this.getFrom(pointer);\n    if (ret === null) {\n      throw new Error('out of bounds');\n    } else {\n      ret.forEach(cE => fn(cE));\n    }\n  }\n\n  /**\n   * no matter how many operations are done on one document,\n   * only the last operation has to be checked to calculate the new state\n   * this function reduces the events to the last ChangeEvent of each doc\n   */;\n  _proto.reduceByLastOfDoc = function reduceByLastOfDoc(changeEvents) {\n    return changeEvents.slice(0);\n    // TODO the old implementation was wrong\n    // because it did not correctly reassigned the previousData of the changeevents\n    // this should be added to the event-reduce library and not be done in RxDB\n    var docEventMap = {};\n    changeEvents.forEach(changeEvent => {\n      docEventMap[changeEvent.documentId] = changeEvent;\n    });\n    return Object.values(docEventMap);\n  };\n  _proto.destroy = function destroy() {\n    this.subs.forEach(sub => sub.unsubscribe());\n  };\n  return ChangeEventBuffer;\n}();\nexport function createChangeEventBuffer(collection) {\n  return new ChangeEventBuffer(collection);\n}\n//# sourceMappingURL=change-event-buffer.js.map","/**\n * For the ORM capabilities,\n * we have to merge the document prototype\n * with the ORM functions and the data\n * We do this iterating over the properties and\n * adding them to a new object.\n * In the future we should do this by chaining the __proto__ objects\n */\n\nimport { createRxDocumentConstructor, basePrototype, createWithConstructor as createRxDocumentWithConstructor } from \"./rx-document.js\";\nimport { runPluginHooks } from \"./hooks.js\";\nimport { overwritable } from \"./overwritable.js\";\nimport { getFromMapOrCreate } from \"./plugins/utils/index.js\";\nvar constructorForCollection = new WeakMap();\nexport function getDocumentPrototype(rxCollection) {\n  var schemaProto = rxCollection.schema.getDocumentPrototype();\n  var ormProto = getDocumentOrmPrototype(rxCollection);\n  var baseProto = basePrototype;\n  var proto = {};\n  [schemaProto, ormProto, baseProto].forEach(obj => {\n    var props = Object.getOwnPropertyNames(obj);\n    props.forEach(key => {\n      var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n      /**\n       * When enumerable is true, it will show on console.dir(instance)\n       * To not pollute the output, only getters and methods are enumerable\n       */\n      var enumerable = true;\n      if (key.startsWith('_') || key.endsWith('_') || key.startsWith('$') || key.endsWith('$')) enumerable = false;\n      if (typeof desc.value === 'function') {\n        // when getting a function, we automatically do a .bind(this)\n        Object.defineProperty(proto, key, {\n          get() {\n            return desc.value.bind(this);\n          },\n          enumerable,\n          configurable: false\n        });\n      } else {\n        desc.enumerable = enumerable;\n        desc.configurable = false;\n        if (desc.writable) desc.writable = false;\n        Object.defineProperty(proto, key, desc);\n      }\n    });\n  });\n  return proto;\n}\nexport function getRxDocumentConstructor(rxCollection) {\n  return getFromMapOrCreate(constructorForCollection, rxCollection, () => createRxDocumentConstructor(getDocumentPrototype(rxCollection)));\n}\n\n/**\n * Create a RxDocument-instance from the jsonData\n * and the prototype merge.\n * You should never call this method directly,\n * instead you should get the document from collection._docCache.getCachedRxDocument().\n */\nexport function createNewRxDocument(rxCollection, docData) {\n  var doc = createRxDocumentWithConstructor(getRxDocumentConstructor(rxCollection), rxCollection, overwritable.deepFreezeWhenDevMode(docData));\n  rxCollection._runHooksSync('post', 'create', docData, doc);\n  runPluginHooks('postCreateRxDocument', doc);\n  return doc;\n}\n\n/**\n * returns the prototype-object\n * that contains the orm-methods,\n * used in the proto-merge\n */\nexport function getDocumentOrmPrototype(rxCollection) {\n  var proto = {};\n  Object.entries(rxCollection.methods).forEach(([k, v]) => {\n    proto[k] = v;\n  });\n  return proto;\n}\n//# sourceMappingURL=rx-document-prototype-merge.js.map","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport { filter, map, mergeMap } from 'rxjs';\nimport { ucfirst, flatClone, promiseSeries, pluginMissing, ensureNotFalsy, getFromMapOrThrow, PROMISE_RESOLVE_FALSE, PROMISE_RESOLVE_VOID } from \"./plugins/utils/index.js\";\nimport { fillObjectDataBeforeInsert, createRxCollectionStorageInstance, removeCollectionStorages } from \"./rx-collection-helper.js\";\nimport { createRxQuery, _getDefaultQuery } from \"./rx-query.js\";\nimport { newRxError, newRxTypeError } from \"./rx-error.js\";\nimport { DocumentCache, mapDocumentsDataToCacheDocs } from \"./doc-cache.js\";\nimport { createQueryCache, defaultCacheReplacementPolicy } from \"./query-cache.js\";\nimport { createChangeEventBuffer } from \"./change-event-buffer.js\";\nimport { runAsyncPluginHooks, runPluginHooks } from \"./hooks.js\";\nimport { createNewRxDocument } from \"./rx-document-prototype-merge.js\";\nimport { getWrappedStorageInstance, storageChangeEventToRxChangeEvent, throwIfIsStorageWriteError } from \"./rx-storage-helper.js\";\nimport { defaultConflictHandler } from \"./replication-protocol/index.js\";\nimport { IncrementalWriteQueue } from \"./incremental-write.js\";\nimport { beforeDocumentUpdateWrite } from \"./rx-document.js\";\nimport { overwritable } from \"./overwritable.js\";\nvar HOOKS_WHEN = ['pre', 'post'];\nvar HOOKS_KEYS = ['insert', 'save', 'remove', 'create'];\nvar hooksApplied = false;\nexport var RxCollectionBase = /*#__PURE__*/function () {\n  /**\n   * Stores all 'normal' documents\n   */\n\n  function RxCollectionBase(database, name, schema, internalStorageInstance, instanceCreationOptions = {}, migrationStrategies = {}, methods = {}, attachments = {}, options = {}, cacheReplacementPolicy = defaultCacheReplacementPolicy, statics = {}, conflictHandler = defaultConflictHandler) {\n    this.storageInstance = {};\n    this.timeouts = new Set();\n    this.incrementalWriteQueue = {};\n    this._incrementalUpsertQueues = new Map();\n    this.synced = false;\n    this.hooks = {};\n    this._subs = [];\n    this._docCache = {};\n    this._queryCache = createQueryCache();\n    this.$ = {};\n    this.checkpoint$ = {};\n    this._changeEventBuffer = {};\n    this.onDestroy = [];\n    this.destroyed = false;\n    this.database = database;\n    this.name = name;\n    this.schema = schema;\n    this.internalStorageInstance = internalStorageInstance;\n    this.instanceCreationOptions = instanceCreationOptions;\n    this.migrationStrategies = migrationStrategies;\n    this.methods = methods;\n    this.attachments = attachments;\n    this.options = options;\n    this.cacheReplacementPolicy = cacheReplacementPolicy;\n    this.statics = statics;\n    this.conflictHandler = conflictHandler;\n    _applyHookFunctions(this.asRxCollection);\n  }\n  var _proto = RxCollectionBase.prototype;\n  _proto.prepare = async function prepare() {\n    this.storageInstance = getWrappedStorageInstance(this.database, this.internalStorageInstance, this.schema.jsonSchema);\n    this.incrementalWriteQueue = new IncrementalWriteQueue(this.storageInstance, this.schema.primaryPath, (newData, oldData) => beforeDocumentUpdateWrite(this, newData, oldData), result => this._runHooks('post', 'save', result));\n    var collectionEventBulks$ = this.database.eventBulks$.pipe(filter(changeEventBulk => changeEventBulk.collectionName === this.name));\n    this.$ = collectionEventBulks$.pipe(mergeMap(changeEventBulk => changeEventBulk.events));\n    this.checkpoint$ = collectionEventBulks$.pipe(map(changeEventBulk => changeEventBulk.checkpoint));\n    this._changeEventBuffer = createChangeEventBuffer(this.asRxCollection);\n    this._docCache = new DocumentCache(this.schema.primaryPath, this.$.pipe(filter(cE => !cE.isLocal)), docData => createNewRxDocument(this.asRxCollection, docData));\n\n    /**\n     * Instead of resolving the EventBulk array here and spit it into\n     * single events, we should fully work with event bulks internally\n     * to save performance.\n     */\n    var databaseStorageToken = await this.database.storageToken;\n    var subDocs = this.storageInstance.changeStream().subscribe(eventBulk => {\n      var changeEventBulk = {\n        id: eventBulk.id,\n        internal: false,\n        collectionName: this.name,\n        storageToken: databaseStorageToken,\n        events: eventBulk.events.map(ev => storageChangeEventToRxChangeEvent(false, ev, this)),\n        databaseToken: this.database.token,\n        checkpoint: eventBulk.checkpoint,\n        context: eventBulk.context,\n        endTime: eventBulk.endTime,\n        startTime: eventBulk.startTime\n      };\n      this.database.$emit(changeEventBulk);\n    });\n    this._subs.push(subDocs);\n\n    /**\n     * Resolve the conflict tasks\n     * of the RxStorageInstance\n     */\n    this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(task => {\n      this.conflictHandler(task.input, task.context).then(output => {\n        this.storageInstance.resolveConflictResultionTask({\n          id: task.id,\n          output\n        });\n      });\n    }));\n    return PROMISE_RESOLVE_VOID;\n  }\n\n  /**\n   * Manually call the cleanup function of the storage.\n   * @link https://rxdb.info/cleanup.html\n   */;\n  _proto.cleanup = function cleanup(_minimumDeletedTime) {\n    throw pluginMissing('cleanup');\n  }\n\n  // overwritten by migration-plugin\n  ;\n  _proto.migrationNeeded = function migrationNeeded() {\n    throw pluginMissing('migration');\n  };\n  _proto.getMigrationState = function getMigrationState() {\n    throw pluginMissing('migration');\n  };\n  _proto.startMigration = function startMigration(batchSize = 10) {\n    return this.getMigrationState().startMigration(batchSize);\n  };\n  _proto.migratePromise = function migratePromise(batchSize = 10) {\n    return this.getMigrationState().migratePromise(batchSize);\n  };\n  _proto.insert = async function insert(json) {\n    var writeResult = await this.bulkInsert([json]);\n    var isError = writeResult.error[0];\n    throwIfIsStorageWriteError(this, json[this.schema.primaryPath], json, isError);\n    var insertResult = ensureNotFalsy(writeResult.success[0]);\n    return insertResult;\n  };\n  _proto.bulkInsert = async function bulkInsert(docsData) {\n    /**\n     * Optimization shortcut,\n     * do nothing when called with an empty array\n    */\n    if (docsData.length === 0) {\n      return {\n        success: [],\n        error: []\n      };\n    }\n    var primaryPath = this.schema.primaryPath;\n    var useDocs = docsData.map(docData => {\n      var useDocData = fillObjectDataBeforeInsert(this.schema, docData);\n      return useDocData;\n    });\n    var docs = this.hasHooks('pre', 'insert') ? await Promise.all(useDocs.map(doc => {\n      return this._runHooks('pre', 'insert', doc).then(() => {\n        return doc;\n      });\n    })) : useDocs;\n    var insertRows = docs.map(doc => {\n      var row = {\n        document: doc\n      };\n      return row;\n    });\n    var results = await this.storageInstance.bulkWrite(insertRows, 'rx-collection-bulk-insert');\n\n    // create documents\n    var rxDocuments = mapDocumentsDataToCacheDocs(this._docCache, results.success);\n    if (this.hasHooks('post', 'insert')) {\n      var docsMap = new Map();\n      docs.forEach(doc => {\n        docsMap.set(doc[primaryPath], doc);\n      });\n      await Promise.all(rxDocuments.map(doc => {\n        return this._runHooks('post', 'insert', docsMap.get(doc.primary), doc);\n      }));\n    }\n    return {\n      success: rxDocuments,\n      error: results.error\n    };\n  };\n  _proto.bulkRemove = async function bulkRemove(ids) {\n    var primaryPath = this.schema.primaryPath;\n    /**\n     * Optimization shortcut,\n     * do nothing when called with an empty array\n     */\n    if (ids.length === 0) {\n      return {\n        success: [],\n        error: []\n      };\n    }\n    var rxDocumentMap = await this.findByIds(ids).exec();\n    var docsData = [];\n    var docsMap = new Map();\n    Array.from(rxDocumentMap.values()).forEach(rxDocument => {\n      var data = rxDocument.toMutableJSON(true);\n      docsData.push(data);\n      docsMap.set(rxDocument.primary, data);\n    });\n    await Promise.all(docsData.map(doc => {\n      var primary = doc[this.schema.primaryPath];\n      return this._runHooks('pre', 'remove', doc, rxDocumentMap.get(primary));\n    }));\n    var removeDocs = docsData.map(doc => {\n      var writeDoc = flatClone(doc);\n      writeDoc._deleted = true;\n      return {\n        previous: doc,\n        document: writeDoc\n      };\n    });\n    var results = await this.storageInstance.bulkWrite(removeDocs, 'rx-collection-bulk-remove');\n    var successIds = results.success.map(d => d[primaryPath]);\n\n    // run hooks\n    await Promise.all(successIds.map(id => {\n      return this._runHooks('post', 'remove', docsMap.get(id), rxDocumentMap.get(id));\n    }));\n    var rxDocuments = successIds.map(id => getFromMapOrThrow(rxDocumentMap, id));\n    return {\n      success: rxDocuments,\n      error: results.error\n    };\n  }\n\n  /**\n   * same as bulkInsert but overwrites existing document with same primary\n   */;\n  _proto.bulkUpsert = async function bulkUpsert(docsData) {\n    var insertData = [];\n    var useJsonByDocId = new Map();\n    docsData.forEach(docData => {\n      var useJson = fillObjectDataBeforeInsert(this.schema, docData);\n      var primary = useJson[this.schema.primaryPath];\n      if (!primary) {\n        throw newRxError('COL3', {\n          primaryPath: this.schema.primaryPath,\n          data: useJson,\n          schema: this.schema.jsonSchema\n        });\n      }\n      useJsonByDocId.set(primary, useJson);\n      insertData.push(useJson);\n    });\n    var insertResult = await this.bulkInsert(insertData);\n    var success = insertResult.success.slice(0);\n    var error = [];\n\n    // update the ones that existed already\n    await Promise.all(insertResult.error.map(async err => {\n      if (err.status !== 409) {\n        error.push(err);\n      } else {\n        var id = err.documentId;\n        var writeData = getFromMapOrThrow(useJsonByDocId, id);\n        var docDataInDb = ensureNotFalsy(err.documentInDb);\n        var doc = this._docCache.getCachedRxDocument(docDataInDb);\n        var newDoc = await doc.incrementalModify(() => writeData);\n        success.push(newDoc);\n      }\n    }));\n    return {\n      error,\n      success\n    };\n  }\n\n  /**\n   * same as insert but overwrites existing document with same primary\n   */;\n  _proto.upsert = async function upsert(json) {\n    var bulkResult = await this.bulkUpsert([json]);\n    throwIfIsStorageWriteError(this.asRxCollection, json[this.schema.primaryPath], json, bulkResult.error[0]);\n    return bulkResult.success[0];\n  }\n\n  /**\n   * upserts to a RxDocument, uses incrementalModify if document already exists\n   */;\n  _proto.incrementalUpsert = function incrementalUpsert(json) {\n    var useJson = fillObjectDataBeforeInsert(this.schema, json);\n    var primary = useJson[this.schema.primaryPath];\n    if (!primary) {\n      throw newRxError('COL4', {\n        data: json\n      });\n    }\n\n    // ensure that it won't try 2 parallel runs\n    var queue = this._incrementalUpsertQueues.get(primary);\n    if (!queue) {\n      queue = PROMISE_RESOLVE_VOID;\n    }\n    queue = queue.then(() => _incrementalUpsertEnsureRxDocumentExists(this, primary, useJson)).then(wasInserted => {\n      if (!wasInserted.inserted) {\n        return _incrementalUpsertUpdate(wasInserted.doc, useJson);\n      } else {\n        return wasInserted.doc;\n      }\n    });\n    this._incrementalUpsertQueues.set(primary, queue);\n    return queue;\n  };\n  _proto.find = function find(queryObj) {\n    if (typeof queryObj === 'string') {\n      throw newRxError('COL5', {\n        queryObj\n      });\n    }\n    if (!queryObj) {\n      queryObj = _getDefaultQuery();\n    }\n    var query = createRxQuery('find', queryObj, this);\n    return query;\n  };\n  _proto.findOne = function findOne(queryObj) {\n    // TODO move this check to dev-mode plugin\n    if (typeof queryObj === 'number' || Array.isArray(queryObj)) {\n      throw newRxTypeError('COL6', {\n        queryObj\n      });\n    }\n    var query;\n    if (typeof queryObj === 'string') {\n      query = createRxQuery('findOne', {\n        selector: {\n          [this.schema.primaryPath]: queryObj\n        },\n        limit: 1\n      }, this);\n    } else {\n      if (!queryObj) {\n        queryObj = _getDefaultQuery();\n      }\n\n      // cannot have limit on findOne queries because it will be overwritten\n      if (queryObj.limit) {\n        throw newRxError('QU6');\n      }\n      queryObj = flatClone(queryObj);\n      queryObj.limit = 1;\n      query = createRxQuery('findOne', queryObj, this);\n    }\n    return query;\n  };\n  _proto.count = function count(queryObj) {\n    if (!queryObj) {\n      queryObj = _getDefaultQuery();\n    }\n    var query = createRxQuery('count', queryObj, this);\n    return query;\n  }\n\n  /**\n   * find a list documents by their primary key\n   * has way better performance then running multiple findOne() or a find() with a complex $or-selected\n   */;\n  _proto.findByIds = function findByIds(ids) {\n    var mangoQuery = {\n      selector: {\n        [this.schema.primaryPath]: {\n          $in: ids.slice(0)\n        }\n      }\n    };\n    var query = createRxQuery('findByIds', mangoQuery, this);\n    return query;\n  }\n\n  /**\n   * Export collection to a JSON friendly format.\n   */;\n  _proto.exportJSON = function exportJSON() {\n    throw pluginMissing('json-dump');\n  }\n\n  /**\n   * Import the parsed JSON export into the collection.\n   * @param _exportedJSON The previously exported data from the `<collection>.exportJSON()` method.\n   */;\n  _proto.importJSON = function importJSON(_exportedJSON) {\n    throw pluginMissing('json-dump');\n  };\n  _proto.insertCRDT = function insertCRDT(_updateObj) {\n    throw pluginMissing('crdt');\n  }\n\n  /**\n   * HOOKS\n   */;\n  _proto.addHook = function addHook(when, key, fun, parallel = false) {\n    if (typeof fun !== 'function') {\n      throw newRxTypeError('COL7', {\n        key,\n        when\n      });\n    }\n    if (!HOOKS_WHEN.includes(when)) {\n      throw newRxTypeError('COL8', {\n        key,\n        when\n      });\n    }\n    if (!HOOKS_KEYS.includes(key)) {\n      throw newRxError('COL9', {\n        key\n      });\n    }\n    if (when === 'post' && key === 'create' && parallel === true) {\n      throw newRxError('COL10', {\n        when,\n        key,\n        parallel\n      });\n    }\n\n    // bind this-scope to hook-function\n    var boundFun = fun.bind(this);\n    var runName = parallel ? 'parallel' : 'series';\n    this.hooks[key] = this.hooks[key] || {};\n    this.hooks[key][when] = this.hooks[key][when] || {\n      series: [],\n      parallel: []\n    };\n    this.hooks[key][when][runName].push(boundFun);\n  };\n  _proto.getHooks = function getHooks(when, key) {\n    if (!this.hooks[key] || !this.hooks[key][when]) {\n      return {\n        series: [],\n        parallel: []\n      };\n    }\n    return this.hooks[key][when];\n  };\n  _proto.hasHooks = function hasHooks(when, key) {\n    var hooks = this.getHooks(when, key);\n    if (!hooks) {\n      return false;\n    }\n    return hooks.series.length > 0 || hooks.parallel.length > 0;\n  };\n  _proto._runHooks = function _runHooks(when, key, data, instance) {\n    var hooks = this.getHooks(when, key);\n    if (!hooks) {\n      return PROMISE_RESOLVE_VOID;\n    }\n\n    // run parallel: false\n    var tasks = hooks.series.map(hook => () => hook(data, instance));\n    return promiseSeries(tasks)\n    // run parallel: true\n    .then(() => Promise.all(hooks.parallel.map(hook => hook(data, instance))));\n  }\n\n  /**\n   * does the same as ._runHooks() but with non-async-functions\n   */;\n  _proto._runHooksSync = function _runHooksSync(when, key, data, instance) {\n    var hooks = this.getHooks(when, key);\n    if (!hooks) return;\n    hooks.series.forEach(hook => hook(data, instance));\n  }\n\n  /**\n   * Returns a promise that resolves after the given time.\n   * Ensures that is properly cleans up when the collection is destroyed\n   * so that no running timeouts prevent the exit of the JavaScript process.\n   */;\n  _proto.promiseWait = function promiseWait(time) {\n    var ret = new Promise(res => {\n      var timeout = setTimeout(() => {\n        this.timeouts.delete(timeout);\n        res();\n      }, time);\n      this.timeouts.add(timeout);\n    });\n    return ret;\n  };\n  _proto.destroy = function destroy() {\n    if (this.destroyed) {\n      return PROMISE_RESOLVE_FALSE;\n    }\n\n    /**\n     * Settings destroyed = true\n     * must be the first thing to do,\n     * so for example the replication can directly stop\n     * instead of sending requests to a closed storage.\n     */\n    this.destroyed = true;\n    Array.from(this.timeouts).forEach(timeout => clearTimeout(timeout));\n    if (this._changeEventBuffer) {\n      this._changeEventBuffer.destroy();\n    }\n    /**\n     * First wait until the whole database is idle.\n     * This ensures that the storage does not get closed\n     * while some operation is running.\n     * It is important that we do not intercept a running call\n     * because it might lead to undefined behavior like when a doc is written\n     * but the change is not added to the changes collection.\n     */\n    return this.database.requestIdlePromise().then(() => Promise.all(this.onDestroy.map(fn => fn()))).then(() => this.storageInstance.close()).then(() => {\n      /**\n       * Unsubscribing must be done AFTER the storageInstance.close()\n       * Because the conflict handling is part of the subscriptions and\n       * otherwise there might be open conflicts to be resolved which\n       * will then stuck and never resolve.\n       */\n      this._subs.forEach(sub => sub.unsubscribe());\n      delete this.database.collections[this.name];\n      return runAsyncPluginHooks('postDestroyRxCollection', this).then(() => true);\n    });\n  }\n\n  /**\n   * remove all data of the collection\n   */;\n  _proto.remove = async function remove() {\n    await this.destroy();\n    await removeCollectionStorages(this.database.storage, this.database.internalStore, this.database.token, this.database.name, this.name, this.database.password, this.database.hashFunction);\n  };\n  _createClass(RxCollectionBase, [{\n    key: \"insert$\",\n    get: function () {\n      return this.$.pipe(filter(cE => cE.operation === 'INSERT'));\n    }\n  }, {\n    key: \"update$\",\n    get: function () {\n      return this.$.pipe(filter(cE => cE.operation === 'UPDATE'));\n    }\n  }, {\n    key: \"remove$\",\n    get: function () {\n      return this.$.pipe(filter(cE => cE.operation === 'DELETE'));\n    }\n\n    // defaults\n\n    /**\n     * When the collection is destroyed,\n     * these functions will be called an awaited.\n     * Used to automatically clean up stuff that\n     * belongs to this collection.\n     */\n  }, {\n    key: \"asRxCollection\",\n    get: function () {\n      return this;\n    }\n  }]);\n  return RxCollectionBase;\n}();\n\n/**\n * adds the hook-functions to the collections prototype\n * this runs only once\n */\nfunction _applyHookFunctions(collection) {\n  if (hooksApplied) return; // already run\n  hooksApplied = true;\n  var colProto = Object.getPrototypeOf(collection);\n  HOOKS_KEYS.forEach(key => {\n    HOOKS_WHEN.map(when => {\n      var fnName = when + ucfirst(key);\n      colProto[fnName] = function (fun, parallel) {\n        return this.addHook(when, key, fun, parallel);\n      };\n    });\n  });\n}\nfunction _incrementalUpsertUpdate(doc, json) {\n  return doc.incrementalModify(_innerDoc => {\n    return json;\n  });\n}\n\n/**\n * ensures that the given document exists\n * @return promise that resolves with new doc and flag if inserted\n */\nfunction _incrementalUpsertEnsureRxDocumentExists(rxCollection, primary, json) {\n  /**\n   * Optimisation shortcut,\n   * first try to find the document in the doc-cache\n   */\n  var docDataFromCache = rxCollection._docCache.getLatestDocumentDataIfExists(primary);\n  if (docDataFromCache) {\n    return Promise.resolve({\n      doc: rxCollection._docCache.getCachedRxDocument(docDataFromCache),\n      inserted: false\n    });\n  }\n  return rxCollection.findOne(primary).exec().then(doc => {\n    if (!doc) {\n      return rxCollection.insert(json).then(newDoc => ({\n        doc: newDoc,\n        inserted: true\n      }));\n    } else {\n      return {\n        doc,\n        inserted: false\n      };\n    }\n  });\n}\n\n/**\n * creates and prepares a new collection\n */\nexport function createRxCollection({\n  database,\n  name,\n  schema,\n  instanceCreationOptions = {},\n  migrationStrategies = {},\n  autoMigrate = true,\n  statics = {},\n  methods = {},\n  attachments = {},\n  options = {},\n  localDocuments = false,\n  cacheReplacementPolicy = defaultCacheReplacementPolicy,\n  conflictHandler = defaultConflictHandler\n}) {\n  var storageInstanceCreationParams = {\n    databaseInstanceToken: database.token,\n    databaseName: database.name,\n    collectionName: name,\n    schema: schema.jsonSchema,\n    options: instanceCreationOptions,\n    multiInstance: database.multiInstance,\n    password: database.password,\n    devMode: overwritable.isDevMode()\n  };\n  runPluginHooks('preCreateRxStorageInstance', storageInstanceCreationParams);\n  return createRxCollectionStorageInstance(database, storageInstanceCreationParams).then(storageInstance => {\n    var collection = new RxCollectionBase(database, name, schema, storageInstance, instanceCreationOptions, migrationStrategies, methods, attachments, options, cacheReplacementPolicy, statics, conflictHandler);\n    return collection.prepare().then(() => {\n      // ORM add statics\n      Object.entries(statics).forEach(([funName, fun]) => {\n        Object.defineProperty(collection, funName, {\n          get: () => fun.bind(collection)\n        });\n      });\n      var ret = PROMISE_RESOLVE_VOID;\n      if (autoMigrate && collection.schema.version !== 0) {\n        ret = collection.migratePromise();\n      }\n      return ret;\n    }).then(() => {\n      runPluginHooks('createRxCollection', {\n        collection,\n        creator: {\n          name,\n          schema,\n          storageInstance,\n          instanceCreationOptions,\n          migrationStrategies,\n          methods,\n          attachments,\n          options,\n          cacheReplacementPolicy,\n          localDocuments,\n          statics\n        }\n      });\n      return collection;\n    })\n    /**\n     * If the collection creation fails,\n     * we yet have to close the storage instances.\n     */.catch(err => {\n      return storageInstance.close().then(() => Promise.reject(err));\n    });\n  });\n}\nexport function isRxCollection(obj) {\n  return obj instanceof RxCollectionBase;\n}\n//# sourceMappingURL=rx-collection.js.map","import { isBulkWriteConflictError, newRxError } from \"./rx-error.js\";\nimport { fillWithDefaultSettings, getComposedPrimaryKeyOfDocumentData } from \"./rx-schema-helper.js\";\nimport { getSingleDocument, writeSingle } from \"./rx-storage-helper.js\";\nimport { clone, ensureNotFalsy, getDefaultRevision, getDefaultRxDocumentMeta, randomCouchString } from \"./plugins/utils/index.js\";\nexport var INTERNAL_CONTEXT_COLLECTION = 'collection';\nexport var INTERNAL_CONTEXT_STORAGE_TOKEN = 'storage-token';\nexport var INTERNAL_CONTEXT_MIGRATION_STATUS = 'rx-migration-status';\n\n/**\n * Do not change the title,\n * we have to flag the internal schema so that\n * some RxStorage implementations are able\n * to detect if the created RxStorageInstance\n * is from the internals or not,\n * to do some optimizations in some cases.\n */\nexport var INTERNAL_STORE_SCHEMA_TITLE = 'RxInternalDocument';\nexport var INTERNAL_STORE_SCHEMA = fillWithDefaultSettings({\n  version: 0,\n  title: INTERNAL_STORE_SCHEMA_TITLE,\n  primaryKey: {\n    key: 'id',\n    fields: ['context', 'key'],\n    separator: '|'\n  },\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n      maxLength: 200\n    },\n    key: {\n      type: 'string'\n    },\n    context: {\n      type: 'string',\n      enum: [INTERNAL_CONTEXT_COLLECTION, INTERNAL_CONTEXT_STORAGE_TOKEN, INTERNAL_CONTEXT_MIGRATION_STATUS, 'OTHER']\n    },\n    data: {\n      type: 'object',\n      additionalProperties: true\n    }\n  },\n  indexes: [],\n  required: ['key', 'context', 'data'],\n  additionalProperties: false,\n  /**\n   * If the sharding plugin is used,\n   * it must not shard on the internal RxStorageInstance\n   * because that one anyway has only a small amount of documents\n   * and also its creation is in the hot path of the initial page load,\n   * so we should spend less time creating multiple RxStorageInstances.\n   */\n  sharding: {\n    shards: 1,\n    mode: 'collection'\n  }\n});\nexport function getPrimaryKeyOfInternalDocument(key, context) {\n  return getComposedPrimaryKeyOfDocumentData(INTERNAL_STORE_SCHEMA, {\n    key,\n    context\n  });\n}\n\n/**\n * Returns all internal documents\n * with context 'collection'\n */\nexport async function getAllCollectionDocuments(storageStatics, storageInstance) {\n  var getAllQueryPrepared = storageStatics.prepareQuery(storageInstance.schema, {\n    selector: {\n      context: INTERNAL_CONTEXT_COLLECTION\n    },\n    sort: [{\n      id: 'asc'\n    }],\n    skip: 0\n  });\n  var queryResult = await storageInstance.query(getAllQueryPrepared);\n  var allDocs = queryResult.documents;\n  return allDocs;\n}\n\n/**\n * to not confuse multiInstance-messages with other databases that have the same\n * name and adapter, but do not share state with this one (for example in-memory-instances),\n * we set a storage-token and use it in the broadcast-channel\n */\nexport var STORAGE_TOKEN_DOCUMENT_KEY = 'storageToken';\nexport var STORAGE_TOKEN_DOCUMENT_ID = getPrimaryKeyOfInternalDocument(STORAGE_TOKEN_DOCUMENT_KEY, INTERNAL_CONTEXT_STORAGE_TOKEN);\nexport async function ensureStorageTokenDocumentExists(rxDatabase) {\n  /**\n   * To have less read-write cycles,\n   * we just try to insert a new document\n   * and only fetch the existing one if a conflict happened.\n   */\n  var storageToken = randomCouchString(10);\n  var passwordHash = rxDatabase.password ? await rxDatabase.hashFunction(JSON.stringify(rxDatabase.password)) : undefined;\n  var docData = {\n    id: STORAGE_TOKEN_DOCUMENT_ID,\n    context: INTERNAL_CONTEXT_STORAGE_TOKEN,\n    key: STORAGE_TOKEN_DOCUMENT_KEY,\n    data: {\n      rxdbVersion: rxDatabase.rxdbVersion,\n      token: storageToken,\n      /**\n       * We add the instance token here\n       * to be able to detect if a given RxDatabase instance\n       * is the first instance that was ever created\n       * or if databases have existed earlier on that storage\n       * with the same database name.\n       */\n      instanceToken: rxDatabase.token,\n      passwordHash\n    },\n    _deleted: false,\n    _meta: getDefaultRxDocumentMeta(),\n    _rev: getDefaultRevision(),\n    _attachments: {}\n  };\n  var writeResult = await rxDatabase.internalStore.bulkWrite([{\n    document: docData\n  }], 'internal-add-storage-token');\n  if (writeResult.success[0]) {\n    return writeResult.success[0];\n  }\n\n  /**\n   * If we get a 409 error,\n   * it means another instance already inserted the storage token.\n   * So we get that token from the database and return that one.\n   */\n  var error = ensureNotFalsy(writeResult.error[0]);\n  if (error.isError && isBulkWriteConflictError(error)) {\n    var conflictError = error;\n    if (!isDatabaseStateVersionCompatibleWithDatabaseCode(conflictError.documentInDb.data.rxdbVersion, rxDatabase.rxdbVersion)) {\n      throw newRxError('DM5', {\n        args: {\n          databaseStateVersion: conflictError.documentInDb.data.rxdbVersion,\n          codeVersion: rxDatabase.rxdbVersion\n        }\n      });\n    }\n    if (passwordHash && passwordHash !== conflictError.documentInDb.data.passwordHash) {\n      throw newRxError('DB1', {\n        passwordHash,\n        existingPasswordHash: conflictError.documentInDb.data.passwordHash\n      });\n    }\n    var storageTokenDocInDb = conflictError.documentInDb;\n    return ensureNotFalsy(storageTokenDocInDb);\n  }\n  throw error;\n}\nexport function isDatabaseStateVersionCompatibleWithDatabaseCode(databaseStateVersion, codeVersion) {\n  if (!databaseStateVersion) {\n    return false;\n  }\n  if (codeVersion.includes('beta') && codeVersion !== databaseStateVersion) {\n    return false;\n  }\n  var stateMajor = databaseStateVersion.split('.')[0];\n  var codeMajor = codeVersion.split('.')[0];\n  if (stateMajor !== codeMajor) {\n    return false;\n  }\n  return true;\n}\nexport async function addConnectedStorageToCollection(collection, storageCollectionName, schema) {\n  if (collection.schema.version !== schema.version) {\n    throw newRxError('SNH', {\n      schema,\n      version: collection.schema.version,\n      name: collection.name,\n      collection,\n      args: {\n        storageCollectionName\n      }\n    });\n  }\n  var collectionNameWithVersion = _collectionNamePrimary(collection.name, collection.schema.jsonSchema);\n  var collectionDocId = getPrimaryKeyOfInternalDocument(collectionNameWithVersion, INTERNAL_CONTEXT_COLLECTION);\n  while (true) {\n    var collectionDoc = await getSingleDocument(collection.database.internalStore, collectionDocId);\n    var saveData = clone(ensureNotFalsy(collectionDoc));\n\n    // do nothing if already in array\n    var alreadyThere = saveData.data.connectedStorages.find(row => row.collectionName === storageCollectionName && row.schema.version === schema.version);\n    if (alreadyThere) {\n      return;\n    }\n\n    // otherwise add to array and save\n    saveData.data.connectedStorages.push({\n      collectionName: storageCollectionName,\n      schema\n    });\n    try {\n      await writeSingle(collection.database.internalStore, {\n        previous: ensureNotFalsy(collectionDoc),\n        document: saveData\n      }, 'add-connected-storage-to-collection');\n    } catch (err) {\n      if (!isBulkWriteConflictError(err)) {\n        throw err;\n      }\n      // retry on conflict\n    }\n  }\n}\n\n/**\n * returns the primary for a given collection-data\n * used in the internal store of a RxDatabase\n */\nexport function _collectionNamePrimary(name, schema) {\n  return name + '-' + schema.version;\n}\n//# sourceMappingURL=rx-database-internal-store.js.map","/**\n * Creates a new Idle-Queue\n * @constructor\n * @param {number} [parallels=1] amount of parrallel runs of the limited-ressource\n */\nexport var IdleQueue = function IdleQueue() {\n  var parallels = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  this._parallels = parallels || 1;\n  /**\n   * _queueCounter\n   * each lock() increased this number\n   * each unlock() decreases this number\n   * If _qC==0, the state is in idle\n   * @type {Number}\n   */\n\n  this._qC = 0;\n  /**\n   * _idleCalls\n   * contains all promises that where added via requestIdlePromise()\n   * and not have been resolved\n   * @type {Set<Promise>} _iC with oldest promise first\n   */\n\n  this._iC = new Set();\n  /**\n   * _lastHandleNumber\n   * @type {Number}\n   */\n\n  this._lHN = 0;\n  /**\n   * _handlePromiseMap\n   * Contains the handleNumber on the left\n   * And the assigned promise on the right.\n   * This is stored so you can use cancelIdleCallback(handleNumber)\n   * to stop executing the callback.\n   * @type {Map<Number><Promise>}\n   */\n\n  this._hPM = new Map();\n  this._pHM = new Map(); // _promiseHandleMap\n};\nIdleQueue.prototype = {\n  isIdle: function isIdle() {\n    return this._qC < this._parallels;\n  },\n\n  /**\n   * creates a lock in the queue\n   * and returns an unlock-function to remove the lock from the queue\n   * @return {function} unlock function than must be called afterwards\n   */\n  lock: function lock() {\n    this._qC++;\n  },\n  unlock: function unlock() {\n    this._qC--;\n\n    _tryIdleCall(this);\n  },\n\n  /**\n   * wraps a function with lock/unlock and runs it\n   * @param  {function}  fun\n   * @return {Promise<any>}\n   */\n  wrapCall: function wrapCall(fun) {\n    var _this = this;\n\n    this.lock();\n    var maybePromise;\n\n    try {\n      maybePromise = fun();\n    } catch (err) {\n      this.unlock();\n      throw err;\n    }\n\n    if (!maybePromise.then || typeof maybePromise.then !== 'function') {\n      // no promise\n      this.unlock();\n      return maybePromise;\n    } else {\n      // promise\n      return maybePromise.then(function (ret) {\n        // sucessfull -> unlock before return\n        _this.unlock();\n\n        return ret;\n      })[\"catch\"](function (err) {\n        // not sucessfull -> unlock before throwing\n        _this.unlock();\n\n        throw err;\n      });\n    }\n  },\n\n  /**\n   * does the same as requestIdleCallback() but uses promises instead of the callback\n   * @param {{timeout?: number}} options like timeout\n   * @return {Promise<void>} promise that resolves when the database is in idle-mode\n   */\n  requestIdlePromise: function requestIdlePromise(options) {\n    var _this2 = this;\n\n    options = options || {};\n    var resolve;\n    var prom = new Promise(function (res) {\n      return resolve = res;\n    });\n\n    var resolveFromOutside = function resolveFromOutside() {\n      _removeIdlePromise(_this2, prom);\n\n      resolve();\n    };\n\n    prom._manRes = resolveFromOutside;\n\n    if (options.timeout) {\n      // if timeout has passed, resolve promise even if not idle\n      var timeoutObj = setTimeout(function () {\n        prom._manRes();\n      }, options.timeout);\n      prom._timeoutObj = timeoutObj;\n    }\n\n    this._iC.add(prom);\n\n    _tryIdleCall(this);\n\n    return prom;\n  },\n\n  /**\n   * remove the promise so it will never be resolved\n   * @param  {Promise} promise from requestIdlePromise()\n   * @return {void}\n   */\n  cancelIdlePromise: function cancelIdlePromise(promise) {\n    _removeIdlePromise(this, promise);\n  },\n\n  /**\n   * api equal to\n   * @link https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback\n   * @param  {Function} callback\n   * @param  {options}   options  [description]\n   * @return {number} handle which can be used with cancelIdleCallback()\n   */\n  requestIdleCallback: function requestIdleCallback(callback, options) {\n    var handle = this._lHN++;\n    var promise = this.requestIdlePromise(options);\n\n    this._hPM.set(handle, promise);\n\n    this._pHM.set(promise, handle);\n\n    promise.then(function () {\n      return callback();\n    });\n    return handle;\n  },\n\n  /**\n   * API equal to\n   * @link https://developer.mozilla.org/en-US/docs/Web/API/Window/cancelIdleCallback\n   * @param  {number} handle returned from requestIdleCallback()\n   * @return {void}\n   */\n  cancelIdleCallback: function cancelIdleCallback(handle) {\n    var promise = this._hPM.get(handle);\n\n    this.cancelIdlePromise(promise);\n  },\n\n  /**\n   * clears and resets everything\n   * @return {void}\n   */\n  clear: function clear() {\n    var _this3 = this;\n\n    // remove all non-cleared\n    this._iC.forEach(function (promise) {\n      return _removeIdlePromise(_this3, promise);\n    });\n\n    this._qC = 0;\n\n    this._iC.clear();\n\n    this._hPM = new Map();\n    this._pHM = new Map();\n  }\n};\n/**\n * processes the oldest call of the idleCalls-queue\n * @return {Promise<void>}\n */\n\nfunction _resolveOneIdleCall(idleQueue) {\n  if (idleQueue._iC.size === 0) return;\n\n  var iterator = idleQueue._iC.values();\n\n  var oldestPromise = iterator.next().value;\n\n  oldestPromise._manRes(); // try to call the next tick\n\n\n  setTimeout(function () {\n    return _tryIdleCall(idleQueue);\n  }, 0);\n}\n/**\n * removes the promise from the queue and maps and also its corresponding handle-number\n * @param  {Promise} promise from requestIdlePromise()\n * @return {void}\n */\n\n\nfunction _removeIdlePromise(idleQueue, promise) {\n  if (!promise) return; // remove timeout if exists\n\n  if (promise._timeoutObj) clearTimeout(promise._timeoutObj); // remove handle-nr if exists\n\n  if (idleQueue._pHM.has(promise)) {\n    var handle = idleQueue._pHM.get(promise);\n\n    idleQueue._hPM[\"delete\"](handle);\n\n    idleQueue._pHM[\"delete\"](promise);\n  } // remove from queue\n\n\n  idleQueue._iC[\"delete\"](promise);\n}\n/**\n * resolves the last entry of this._iC\n * but only if the queue is empty\n * @return {Promise}\n */\n\n\nfunction _tryIdleCall(idleQueue) {\n  // ensure this does not run in parallel\n  if (idleQueue._tryIR || idleQueue._iC.size === 0) return;\n  idleQueue._tryIR = true; // w8 one tick\n\n  setTimeout(function () {\n    // check if queue empty\n    if (!idleQueue.isIdle()) {\n      idleQueue._tryIR = false;\n      return;\n    }\n    /**\n     * wait 1 tick here\n     * because many functions do IO->CPU->IO\n     * which means the queue is empty for a short time\n     * but the ressource is not idle\n     */\n\n\n    setTimeout(function () {\n      // check if queue still empty\n      if (!idleQueue.isIdle()) {\n        idleQueue._tryIR = false;\n        return;\n      } // ressource is idle\n\n\n      _resolveOneIdleCall(idleQueue);\n\n      idleQueue._tryIR = false;\n    }, 0);\n  }, 0);\n}","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport { IdleQueue } from 'custom-idle-queue';\nimport { pluginMissing, flatClone, PROMISE_RESOLVE_FALSE, randomCouchString, ensureNotFalsy, getDefaultRevision, getDefaultRxDocumentMeta, defaultHashSha256, RXDB_VERSION } from \"./plugins/utils/index.js\";\nimport { newRxError } from \"./rx-error.js\";\nimport { createRxSchema } from \"./rx-schema.js\";\nimport { runPluginHooks, runAsyncPluginHooks } from \"./hooks.js\";\nimport { Subject } from 'rxjs';\nimport { mergeMap } from 'rxjs/operators';\nimport { createRxCollection } from \"./rx-collection.js\";\nimport { flatCloneDocWithMeta, getSingleDocument, getWrappedStorageInstance, INTERNAL_STORAGE_NAME } from \"./rx-storage-helper.js\";\nimport { ObliviousSet } from 'oblivious-set';\nimport { ensureStorageTokenDocumentExists, getAllCollectionDocuments, getPrimaryKeyOfInternalDocument, INTERNAL_CONTEXT_COLLECTION, INTERNAL_STORE_SCHEMA, _collectionNamePrimary } from \"./rx-database-internal-store.js\";\nimport { removeCollectionStorages } from \"./rx-collection-helper.js\";\nimport { overwritable } from \"./overwritable.js\";\n/**\n * stores the used database names\n * so we can throw when the same database is created more then once.\n */\nvar USED_DATABASE_NAMES = new Set();\nvar DB_COUNT = 0;\nexport var RxDatabaseBase = /*#__PURE__*/function () {\n  /**\n   * Contains all known non-closed storage instances\n   * that belong to this database.\n   * Used in plugins and unit tests.\n   */\n\n  function RxDatabaseBase(name,\n  /**\n   * Uniquely identifies the instance\n   * of this RxDatabase.\n   */\n  token, storage, instanceCreationOptions, password, multiInstance, eventReduce = false, options = {},\n  /**\n   * Stores information documents about the collections of the database\n   */\n  internalStore, hashFunction, cleanupPolicy, allowSlowCount) {\n    this.idleQueue = new IdleQueue();\n    this.rxdbVersion = RXDB_VERSION;\n    this.storageInstances = new Set();\n    this._subs = [];\n    this.startupErrors = [];\n    this.onDestroy = [];\n    this.destroyed = false;\n    this.collections = {};\n    this.eventBulks$ = new Subject();\n    this.observable$ = this.eventBulks$.pipe(mergeMap(changeEventBulk => changeEventBulk.events));\n    this.storageToken = PROMISE_RESOLVE_FALSE;\n    this.storageTokenDocument = PROMISE_RESOLVE_FALSE;\n    this.emittedEventBulkIds = new ObliviousSet(60 * 1000);\n    this.name = name;\n    this.token = token;\n    this.storage = storage;\n    this.instanceCreationOptions = instanceCreationOptions;\n    this.password = password;\n    this.multiInstance = multiInstance;\n    this.eventReduce = eventReduce;\n    this.options = options;\n    this.internalStore = internalStore;\n    this.hashFunction = hashFunction;\n    this.cleanupPolicy = cleanupPolicy;\n    this.allowSlowCount = allowSlowCount;\n    DB_COUNT++;\n\n    /**\n     * In the dev-mode, we create a pseudoInstance\n     * to get all properties of RxDatabase and ensure they do not\n     * conflict with the collection names etc.\n     * So only if it is not pseudoInstance,\n     * we have all values to prepare a real RxDatabase.\n     *\n     * TODO this is ugly, we should use a different way in the dev-mode\n     * so that all non-dev-mode code can be cleaner.\n     */\n    if (this.name !== 'pseudoInstance') {\n      /**\n       * Wrap the internal store\n       * to ensure that calls to it also end up in\n       * calculation of the idle state and the hooks.\n       */\n      this.internalStore = getWrappedStorageInstance(this.asRxDatabase, internalStore, INTERNAL_STORE_SCHEMA);\n\n      /**\n       * Start writing the storage token.\n       * Do not await the creation because it would run\n       * in a critical path that increases startup time.\n       *\n       * Writing the token takes about 20 milliseconds\n       * even on a fast adapter, so this is worth it.\n       */\n      this.storageTokenDocument = ensureStorageTokenDocumentExists(this.asRxDatabase).catch(err => this.startupErrors.push(err));\n      this.storageToken = this.storageTokenDocument.then(doc => doc.data.token).catch(err => this.startupErrors.push(err));\n    }\n  }\n  var _proto = RxDatabaseBase.prototype;\n  /**\n   * This is the main handle-point for all change events\n   * ChangeEvents created by this instance go:\n   * RxDocument -> RxCollection -> RxDatabase.$emit -> MultiInstance\n   * ChangeEvents created by other instances go:\n   * MultiInstance -> RxDatabase.$emit -> RxCollection -> RxDatabase\n   */\n  _proto.$emit = function $emit(changeEventBulk) {\n    if (this.emittedEventBulkIds.has(changeEventBulk.id)) {\n      return;\n    }\n    this.emittedEventBulkIds.add(changeEventBulk.id);\n\n    // emit into own stream\n    this.eventBulks$.next(changeEventBulk);\n  }\n\n  /**\n   * removes the collection-doc from the internalStore\n   */;\n  _proto.removeCollectionDoc = async function removeCollectionDoc(name, schema) {\n    var doc = await getSingleDocument(this.internalStore, getPrimaryKeyOfInternalDocument(_collectionNamePrimary(name, schema), INTERNAL_CONTEXT_COLLECTION));\n    if (!doc) {\n      throw newRxError('SNH', {\n        name,\n        schema\n      });\n    }\n    var writeDoc = flatCloneDocWithMeta(doc);\n    writeDoc._deleted = true;\n    await this.internalStore.bulkWrite([{\n      document: writeDoc,\n      previous: doc\n    }], 'rx-database-remove-collection');\n  }\n\n  /**\n   * creates multiple RxCollections at once\n   * to be much faster by saving db txs and doing stuff in bulk-operations\n   * This function is not called often, but mostly in the critical path at the initial page load\n   * So it must be as fast as possible.\n   */;\n  _proto.addCollections = async function addCollections(collectionCreators) {\n    var jsonSchemas = {};\n    var schemas = {};\n    var bulkPutDocs = [];\n    var useArgsByCollectionName = {};\n    await Promise.all(Object.entries(collectionCreators).map(async ([name, args]) => {\n      var collectionName = name;\n      var rxJsonSchema = args.schema;\n      jsonSchemas[collectionName] = rxJsonSchema;\n      var schema = createRxSchema(rxJsonSchema, this.hashFunction);\n      schemas[collectionName] = schema;\n\n      // collection already exists\n      if (this.collections[name]) {\n        throw newRxError('DB3', {\n          name\n        });\n      }\n      var collectionNameWithVersion = _collectionNamePrimary(name, rxJsonSchema);\n      var collectionDocData = {\n        id: getPrimaryKeyOfInternalDocument(collectionNameWithVersion, INTERNAL_CONTEXT_COLLECTION),\n        key: collectionNameWithVersion,\n        context: INTERNAL_CONTEXT_COLLECTION,\n        data: {\n          name: collectionName,\n          schemaHash: await schema.hash,\n          schema: schema.jsonSchema,\n          version: schema.version,\n          connectedStorages: []\n        },\n        _deleted: false,\n        _meta: getDefaultRxDocumentMeta(),\n        _rev: getDefaultRevision(),\n        _attachments: {}\n      };\n      bulkPutDocs.push({\n        document: collectionDocData\n      });\n      var useArgs = Object.assign({}, args, {\n        name: collectionName,\n        schema,\n        database: this\n      });\n\n      // run hooks\n      var hookData = flatClone(args);\n      hookData.database = this;\n      hookData.name = name;\n      runPluginHooks('preCreateRxCollection', hookData);\n      useArgs.conflictHandler = hookData.conflictHandler;\n      useArgsByCollectionName[collectionName] = useArgs;\n    }));\n    var putDocsResult = await this.internalStore.bulkWrite(bulkPutDocs, 'rx-database-add-collection');\n    await ensureNoStartupErrors(this);\n    await Promise.all(putDocsResult.error.map(async error => {\n      if (error.status !== 409) {\n        throw newRxError('DB12', {\n          database: this.name,\n          writeError: error\n        });\n      }\n      var docInDb = ensureNotFalsy(error.documentInDb);\n      var collectionName = docInDb.data.name;\n      var schema = schemas[collectionName];\n      // collection already exists but has different schema\n      if (docInDb.data.schemaHash !== (await schema.hash)) {\n        throw newRxError('DB6', {\n          database: this.name,\n          collection: collectionName,\n          previousSchemaHash: docInDb.data.schemaHash,\n          schemaHash: await schema.hash,\n          previousSchema: docInDb.data.schema,\n          schema: ensureNotFalsy(jsonSchemas[collectionName])\n        });\n      }\n    }));\n    var ret = {};\n    await Promise.all(Object.keys(collectionCreators).map(async collectionName => {\n      var useArgs = useArgsByCollectionName[collectionName];\n      var collection = await createRxCollection(useArgs);\n      ret[collectionName] = collection;\n\n      // set as getter to the database\n      this.collections[collectionName] = collection;\n      if (!this[collectionName]) {\n        Object.defineProperty(this, collectionName, {\n          get: () => this.collections[collectionName]\n        });\n      }\n    }));\n    return ret;\n  }\n\n  /**\n   * runs the given function between idleQueue-locking\n   */;\n  _proto.lockedRun = function lockedRun(fn) {\n    return this.idleQueue.wrapCall(fn);\n  };\n  _proto.requestIdlePromise = function requestIdlePromise() {\n    return this.idleQueue.requestIdlePromise();\n  }\n\n  /**\n   * Export database to a JSON friendly format.\n   */;\n  _proto.exportJSON = function exportJSON(_collections) {\n    throw pluginMissing('json-dump');\n  }\n\n  /**\n   * Import the parsed JSON export into the collection.\n   * @param _exportedJSON The previously exported data from the `<db>.exportJSON()` method.\n   * @note When an interface is loaded in this collection all base properties of the type are typed as `any`\n   * since data could be encrypted.\n   */;\n  _proto.importJSON = function importJSON(_exportedJSON) {\n    throw pluginMissing('json-dump');\n  };\n  _proto.backup = function backup(_options) {\n    throw pluginMissing('backup');\n  };\n  _proto.leaderElector = function leaderElector() {\n    throw pluginMissing('leader-election');\n  };\n  _proto.isLeader = function isLeader() {\n    throw pluginMissing('leader-election');\n  }\n  /**\n   * returns a promise which resolves when the instance becomes leader\n   */;\n  _proto.waitForLeadership = function waitForLeadership() {\n    throw pluginMissing('leader-election');\n  };\n  _proto.migrationStates = function migrationStates() {\n    throw pluginMissing('migration');\n  }\n\n  /**\n   * destroys the database-instance and all collections\n   */;\n  _proto.destroy = async function destroy() {\n    if (this.destroyed) {\n      return PROMISE_RESOLVE_FALSE;\n    }\n\n    // settings destroyed = true must be the first thing to do.\n    this.destroyed = true;\n    await runAsyncPluginHooks('preDestroyRxDatabase', this);\n    /**\n     * Complete the event stream\n     * to stop all subscribers who forgot to unsubscribe.\n     */\n    this.eventBulks$.complete();\n    DB_COUNT--;\n    this._subs.map(sub => sub.unsubscribe());\n\n    /**\n     * Destroying the pseudo instance will throw\n     * because stuff is missing\n     * TODO we should not need the pseudo instance on runtime.\n     * we should generate the property list on build time.\n     */\n    if (this.name === 'pseudoInstance') {\n      return PROMISE_RESOLVE_FALSE;\n    }\n\n    /**\n     * First wait until the database is idle\n     */\n    return this.requestIdlePromise().then(() => Promise.all(this.onDestroy.map(fn => fn())))\n    // destroy all collections\n    .then(() => Promise.all(Object.keys(this.collections).map(key => this.collections[key]).map(col => col.destroy())))\n    // destroy internal storage instances\n    .then(() => this.internalStore.close())\n    // remove combination from USED_COMBINATIONS-map\n    .then(() => USED_DATABASE_NAMES.delete(this.name)).then(() => true);\n  }\n\n  /**\n   * deletes the database and its stored data.\n   * Returns the names of all removed collections.\n   */;\n  _proto.remove = function remove() {\n    return this.destroy().then(() => removeRxDatabase(this.name, this.storage, this.password));\n  };\n  _createClass(RxDatabaseBase, [{\n    key: \"$\",\n    get: function () {\n      return this.observable$;\n    }\n\n    /**\n     * Because having unhandled exceptions would fail,\n     * we have to store the async errors of the constructor here\n     * so we can throw them later.\n     */\n\n    /**\n     * When the database is destroyed,\n     * these functions will be called an awaited.\n     * Used to automatically clean up stuff that\n     * belongs to this collection.\n     */\n\n    /**\n     * Unique token that is stored with the data.\n     * Used to detect if the dataset has been deleted\n     * and if two RxDatabase instances work on the same dataset or not.\n     *\n     * Because reading and writing the storageToken runs in the hot path\n     * of database creation, we do not await the storageWrites but instead\n     * work with the promise when we need the value.\n     */\n\n    /**\n     * Stores the whole state of the internal storage token document.\n     * We need this in some plugins.\n     */\n\n    /**\n     * Contains the ids of all event bulks that have been emitted\n     * by the database.\n     * Used to detect duplicates that come in again via BroadcastChannel\n     * or other streams.\n     * TODO instead of having this here, we should add a test to ensure each RxStorage\n     * behaves equal and does never emit duplicate eventBulks.\n     */\n  }, {\n    key: \"asRxDatabase\",\n    get: function () {\n      return this;\n    }\n  }]);\n  return RxDatabaseBase;\n}();\n\n/**\n * checks if an instance with same name and adapter already exists\n * @throws {RxError} if used\n */\nfunction throwIfDatabaseNameUsed(name) {\n  if (!USED_DATABASE_NAMES.has(name)) {\n    return;\n  } else {\n    throw newRxError('DB8', {\n      name,\n      link: 'https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate'\n    });\n  }\n}\n\n/**\n * Creates the storage instances that are used internally in the database\n * to store schemas and other configuration stuff.\n */\nexport async function createRxDatabaseStorageInstance(databaseInstanceToken, storage, databaseName, options, multiInstance, password) {\n  var internalStore = await storage.createStorageInstance({\n    databaseInstanceToken,\n    databaseName,\n    collectionName: INTERNAL_STORAGE_NAME,\n    schema: INTERNAL_STORE_SCHEMA,\n    options,\n    multiInstance,\n    password,\n    devMode: overwritable.isDevMode()\n  });\n  return internalStore;\n}\nexport function createRxDatabase({\n  storage,\n  instanceCreationOptions,\n  name,\n  password,\n  multiInstance = true,\n  eventReduce = true,\n  ignoreDuplicate = false,\n  options = {},\n  cleanupPolicy,\n  allowSlowCount = false,\n  localDocuments = false,\n  hashFunction = defaultHashSha256\n}) {\n  runPluginHooks('preCreateRxDatabase', {\n    storage,\n    instanceCreationOptions,\n    name,\n    password,\n    multiInstance,\n    eventReduce,\n    ignoreDuplicate,\n    options,\n    localDocuments\n  });\n  // check if combination already used\n  if (!ignoreDuplicate) {\n    throwIfDatabaseNameUsed(name);\n  }\n  USED_DATABASE_NAMES.add(name);\n  var databaseInstanceToken = randomCouchString(10);\n  return createRxDatabaseStorageInstance(databaseInstanceToken, storage, name, instanceCreationOptions, multiInstance, password)\n  /**\n   * Creating the internal store might fail\n   * if some RxStorage wrapper is used that does some checks\n   * and then throw.\n   * In that case we have to properly clean up the database.\n   */.catch(err => {\n    USED_DATABASE_NAMES.delete(name);\n    throw err;\n  }).then(storageInstance => {\n    var rxDatabase = new RxDatabaseBase(name, databaseInstanceToken, storage, instanceCreationOptions, password, multiInstance, eventReduce, options, storageInstance, hashFunction, cleanupPolicy, allowSlowCount);\n    return runAsyncPluginHooks('createRxDatabase', {\n      database: rxDatabase,\n      creator: {\n        storage,\n        instanceCreationOptions,\n        name,\n        password,\n        multiInstance,\n        eventReduce,\n        ignoreDuplicate,\n        options,\n        localDocuments\n      }\n    }).then(() => rxDatabase);\n  });\n}\n\n/**\n * Removes the database and all its known data\n * with all known collections and all internal meta data.\n *\n * Returns the names of the removed collections.\n */\nexport async function removeRxDatabase(databaseName, storage, password) {\n  var databaseInstanceToken = randomCouchString(10);\n  var dbInternalsStorageInstance = await createRxDatabaseStorageInstance(databaseInstanceToken, storage, databaseName, {}, false, password);\n  var collectionDocs = await getAllCollectionDocuments(storage.statics, dbInternalsStorageInstance);\n  var collectionNames = new Set();\n  collectionDocs.forEach(doc => collectionNames.add(doc.data.name));\n  var removedCollectionNames = Array.from(collectionNames);\n  await Promise.all(removedCollectionNames.map(collectionName => removeCollectionStorages(storage, dbInternalsStorageInstance, databaseInstanceToken, databaseName, collectionName, password)));\n  await runAsyncPluginHooks('postRemoveRxDatabase', {\n    databaseName,\n    storage\n  });\n  await dbInternalsStorageInstance.remove();\n  return removedCollectionNames;\n}\nexport function isRxDatabase(obj) {\n  return obj instanceof RxDatabaseBase;\n}\nexport function dbCount() {\n  return DB_COUNT;\n}\n\n/**\n * Returns true if the given RxDatabase was the first\n * instance that was created on the storage with this name.\n *\n * Can be used for some optimizations because on the first instantiation,\n * we can assume that no data was written before.\n */\nexport async function isRxDatabaseFirstTimeInstantiated(database) {\n  var tokenDoc = await database.storageTokenDocument;\n  return tokenDoc.data.instanceToken === database.token;\n}\n\n/**\n * For better performance some tasks run async\n * and are awaited later.\n * But we still have to ensure that there have been no errors\n * on database creation.\n */\nexport async function ensureNoStartupErrors(rxDatabase) {\n  await rxDatabase.storageToken;\n  if (rxDatabase.startupErrors[0]) {\n    throw rxDatabase.startupErrors[0];\n  }\n}\n//# sourceMappingURL=rx-database.js.map","import { distinctUntilChanged, filter, map, shareReplay, startWith } from 'rxjs/operators';\nimport { clone, trimDots, pluginMissing, flatClone, PROMISE_RESOLVE_NULL, RXJS_SHARE_REPLAY_DEFAULTS, getProperty, getFromMapOrCreate } from \"./plugins/utils/index.js\";\nimport { newRxError } from \"./rx-error.js\";\nimport { runPluginHooks } from \"./hooks.js\";\nimport { getDocumentDataOfRxChangeEvent } from \"./rx-change-event.js\";\nimport { overwritable } from \"./overwritable.js\";\nimport { getSchemaByObjectPath } from \"./rx-schema-helper.js\";\nimport { throwIfIsStorageWriteError } from \"./rx-storage-helper.js\";\nimport { modifierFromPublicToInternal } from \"./incremental-write.js\";\nexport var basePrototype = {\n  get primaryPath() {\n    var _this = this;\n    if (!_this.isInstanceOfRxDocument) {\n      return undefined;\n    }\n    return _this.collection.schema.primaryPath;\n  },\n  get primary() {\n    var _this = this;\n    if (!_this.isInstanceOfRxDocument) {\n      return undefined;\n    }\n    return _this._data[_this.primaryPath];\n  },\n  get revision() {\n    var _this = this;\n    if (!_this.isInstanceOfRxDocument) {\n      return undefined;\n    }\n    return _this._data._rev;\n  },\n  get deleted$() {\n    var _this = this;\n    if (!_this.isInstanceOfRxDocument) {\n      return undefined;\n    }\n    return _this.$.pipe(map(d => d._data._deleted));\n  },\n  get deleted() {\n    var _this = this;\n    if (!_this.isInstanceOfRxDocument) {\n      return undefined;\n    }\n    return _this._data._deleted;\n  },\n  getLatest() {\n    var latestDocData = this.collection._docCache.getLatestDocumentData(this.primary);\n    return this.collection._docCache.getCachedRxDocument(latestDocData);\n  },\n  /**\n   * returns the observable which emits the plain-data of this document\n   */\n  get $() {\n    var _this = this;\n    return _this.collection.$.pipe(filter(changeEvent => !changeEvent.isLocal), filter(changeEvent => changeEvent.documentId === this.primary), map(changeEvent => getDocumentDataOfRxChangeEvent(changeEvent)), startWith(_this.collection._docCache.getLatestDocumentData(this.primary)), distinctUntilChanged((prev, curr) => prev._rev === curr._rev), map(docData => this.collection._docCache.getCachedRxDocument(docData)), shareReplay(RXJS_SHARE_REPLAY_DEFAULTS));\n  },\n  /**\n   * returns observable of the value of the given path\n   */\n  get$(path) {\n    if (overwritable.isDevMode()) {\n      if (path.includes('.item.')) {\n        throw newRxError('DOC1', {\n          path\n        });\n      }\n      if (path === this.primaryPath) {\n        throw newRxError('DOC2');\n      }\n\n      // final fields cannot be modified and so also not observed\n      if (this.collection.schema.finalFields.includes(path)) {\n        throw newRxError('DOC3', {\n          path\n        });\n      }\n      var schemaObj = getSchemaByObjectPath(this.collection.schema.jsonSchema, path);\n      if (!schemaObj) {\n        throw newRxError('DOC4', {\n          path\n        });\n      }\n    }\n    return this.$.pipe(map(data => getProperty(data, path)), distinctUntilChanged());\n  },\n  /**\n   * populate the given path\n   */\n  populate(path) {\n    var schemaObj = getSchemaByObjectPath(this.collection.schema.jsonSchema, path);\n    var value = this.get(path);\n    if (!value) {\n      return PROMISE_RESOLVE_NULL;\n    }\n    if (!schemaObj) {\n      throw newRxError('DOC5', {\n        path\n      });\n    }\n    if (!schemaObj.ref) {\n      throw newRxError('DOC6', {\n        path,\n        schemaObj\n      });\n    }\n    var refCollection = this.collection.database.collections[schemaObj.ref];\n    if (!refCollection) {\n      throw newRxError('DOC7', {\n        ref: schemaObj.ref,\n        path,\n        schemaObj\n      });\n    }\n    if (schemaObj.type === 'array') {\n      return refCollection.findByIds(value).exec().then(res => {\n        var valuesIterator = res.values();\n        return Array.from(valuesIterator);\n      });\n    } else {\n      return refCollection.findOne(value).exec();\n    }\n  },\n  /**\n   * get data by objectPath\n   * @hotPath Performance here is really important,\n   * run some tests before changing anything.\n   */\n  get(objPath) {\n    return getFromMapOrCreate(this._propertyCache, objPath, () => {\n      var valueObj = getProperty(this._data, objPath);\n\n      // direct return if array or non-object\n      if (typeof valueObj !== 'object' || valueObj === null || Array.isArray(valueObj)) {\n        return overwritable.deepFreezeWhenDevMode(valueObj);\n      }\n      var _this = this;\n      var proxy = new Proxy(\n      /**\n       * In dev-mode, the _data is deep-frozen\n       * so we have to flat clone here so that\n       * the proxy can work.\n       */\n      flatClone(valueObj), {\n        get(target, property) {\n          if (typeof property !== 'string') {\n            return target[property];\n          }\n          var lastChar = property.charAt(property.length - 1);\n          if (lastChar === '$') {\n            var key = property.slice(0, -1);\n            return _this.get$(trimDots(objPath + '.' + key));\n          } else if (lastChar === '_') {\n            var _key = property.slice(0, -1);\n            return _this.populate(trimDots(objPath + '.' + _key));\n          } else {\n            return _this.get(trimDots(objPath + '.' + property));\n          }\n        }\n      });\n      return proxy;\n    });\n  },\n  toJSON(withMetaFields = false) {\n    if (!withMetaFields) {\n      var data = flatClone(this._data);\n      delete data._rev;\n      delete data._attachments;\n      delete data._deleted;\n      delete data._meta;\n      return overwritable.deepFreezeWhenDevMode(data);\n    } else {\n      return overwritable.deepFreezeWhenDevMode(this._data);\n    }\n  },\n  toMutableJSON(withMetaFields = false) {\n    return clone(this.toJSON(withMetaFields));\n  },\n  /**\n   * updates document\n   * @overwritten by plugin (optional)\n   * @param updateObj mongodb-like syntax\n   */\n  update(_updateObj) {\n    throw pluginMissing('update');\n  },\n  incrementalUpdate(_updateObj) {\n    throw pluginMissing('update');\n  },\n  updateCRDT(_updateObj) {\n    throw pluginMissing('crdt');\n  },\n  putAttachment() {\n    throw pluginMissing('attachments');\n  },\n  getAttachment() {\n    throw pluginMissing('attachments');\n  },\n  allAttachments() {\n    throw pluginMissing('attachments');\n  },\n  get allAttachments$() {\n    throw pluginMissing('attachments');\n  },\n  async modify(mutationFunction,\n  // used by some plugins that wrap the method\n  _context) {\n    var oldData = this._data;\n    var newData = await modifierFromPublicToInternal(mutationFunction)(oldData);\n    return this._saveData(newData, oldData);\n  },\n  /**\n   * runs an incremental update over the document\n   * @param function that takes the document-data and returns a new data-object\n   */\n  incrementalModify(mutationFunction,\n  // used by some plugins that wrap the method\n  _context) {\n    return this.collection.incrementalWriteQueue.addWrite(this._data, modifierFromPublicToInternal(mutationFunction)).then(result => this.collection._docCache.getCachedRxDocument(result));\n  },\n  patch(patch) {\n    var oldData = this._data;\n    var newData = clone(oldData);\n    Object.entries(patch).forEach(([k, v]) => {\n      newData[k] = v;\n    });\n    return this._saveData(newData, oldData);\n  },\n  /**\n   * patches the given properties\n   */\n  incrementalPatch(patch) {\n    return this.incrementalModify(docData => {\n      Object.entries(patch).forEach(([k, v]) => {\n        docData[k] = v;\n      });\n      return docData;\n    });\n  },\n  /**\n   * saves the new document-data\n   * and handles the events\n   */\n  async _saveData(newData, oldData) {\n    newData = flatClone(newData);\n\n    // deleted documents cannot be changed\n    if (this._data._deleted) {\n      throw newRxError('DOC11', {\n        id: this.primary,\n        document: this\n      });\n    }\n    await beforeDocumentUpdateWrite(this.collection, newData, oldData);\n    var writeResult = await this.collection.storageInstance.bulkWrite([{\n      previous: oldData,\n      document: newData\n    }], 'rx-document-save-data');\n    var isError = writeResult.error[0];\n    throwIfIsStorageWriteError(this.collection, this.primary, newData, isError);\n    await this.collection._runHooks('post', 'save', newData, this);\n    return this.collection._docCache.getCachedRxDocument(writeResult.success[0]);\n  },\n  /**\n   * Remove the document.\n   * Notice that there is no hard delete,\n   * instead deleted documents get flagged with _deleted=true.\n   */\n  remove() {\n    var collection = this.collection;\n    if (this.deleted) {\n      return Promise.reject(newRxError('DOC13', {\n        document: this,\n        id: this.primary\n      }));\n    }\n    var deletedData = flatClone(this._data);\n    var removedDocData;\n    return collection._runHooks('pre', 'remove', deletedData, this).then(async () => {\n      deletedData._deleted = true;\n      var writeResult = await collection.storageInstance.bulkWrite([{\n        previous: this._data,\n        document: deletedData\n      }], 'rx-document-remove');\n      var isError = writeResult.error[0];\n      throwIfIsStorageWriteError(collection, this.primary, deletedData, isError);\n      return writeResult.success[0];\n    }).then(removed => {\n      removedDocData = removed;\n      return this.collection._runHooks('post', 'remove', deletedData, this);\n    }).then(() => {\n      return this.collection._docCache.getCachedRxDocument(removedDocData);\n    });\n  },\n  incrementalRemove() {\n    return this.incrementalModify(async docData => {\n      await this.collection._runHooks('pre', 'remove', docData, this);\n      docData._deleted = true;\n      return docData;\n    }).then(async newDoc => {\n      await this.collection._runHooks('post', 'remove', newDoc._data, newDoc);\n      return newDoc;\n    });\n  },\n  destroy() {\n    throw newRxError('DOC14');\n  }\n};\nexport function createRxDocumentConstructor(proto = basePrototype) {\n  var constructor = function RxDocumentConstructor(collection, docData) {\n    this.collection = collection;\n\n    // assume that this is always equal to the doc-data in the database\n    this._data = docData;\n    this._propertyCache = new Map();\n\n    /**\n     * because of the prototype-merge,\n     * we can not use the native instanceof operator\n     */\n    this.isInstanceOfRxDocument = true;\n  };\n  constructor.prototype = proto;\n  return constructor;\n}\nexport function createWithConstructor(constructor, collection, jsonData) {\n  var doc = new constructor(collection, jsonData);\n  runPluginHooks('createRxDocument', doc);\n  return doc;\n}\nexport function isRxDocument(obj) {\n  return typeof obj === 'object' && obj !== null && 'isInstanceOfRxDocument' in obj;\n}\nexport function beforeDocumentUpdateWrite(collection, newData, oldData) {\n  /**\n   * Meta values must always be merged\n   * instead of overwritten.\n   * This ensures that different plugins do not overwrite\n   * each others meta properties.\n   */\n  newData._meta = Object.assign({}, oldData._meta, newData._meta);\n\n  // ensure modifications are ok\n  if (overwritable.isDevMode()) {\n    collection.schema.validateChange(oldData, newData);\n  }\n  return collection._runHooks('pre', 'save', newData, oldData);\n}\n//# sourceMappingURL=rx-document.js.map","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  try {\n    return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n  } catch (e) {\n    return typeof fn === \"function\";\n  }\n}","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/wrapNativeSuper\";\n/**\n * here we use custom errors with the additional field 'parameters'\n */\n\nimport { overwritable } from \"./overwritable.js\";\n/**\n * transform an object of parameters to a presentable string\n */\nfunction parametersToString(parameters) {\n  var ret = '';\n  if (Object.keys(parameters).length === 0) return ret;\n  ret += 'Given parameters: {\\n';\n  ret += Object.keys(parameters).map(k => {\n    var paramStr = '[object Object]';\n    try {\n      if (k === 'errors') {\n        paramStr = parameters[k].map(err => JSON.stringify(err, Object.getOwnPropertyNames(err)));\n      } else {\n        paramStr = JSON.stringify(parameters[k], function (_k, v) {\n          return v === undefined ? null : v;\n        }, 2);\n      }\n    } catch (e) {}\n    return k + ':' + paramStr;\n  }).join('\\n');\n  ret += '}';\n  return ret;\n}\nfunction messageForError(message, code, parameters) {\n  return 'RxError (' + code + '):' + '\\n' + message + '\\n' + parametersToString(parameters);\n}\nexport var RxError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(RxError, _Error);\n  // always true, use this to detect if its an rxdb-error\n\n  function RxError(code, message, parameters = {}) {\n    var _this;\n    var mes = messageForError(message, code, parameters);\n    _this = _Error.call(this, mes) || this;\n    _this.code = code;\n    _this.message = mes;\n    _this.parameters = parameters;\n    _this.rxdb = true; // tag them as internal\n    return _this;\n  }\n  var _proto = RxError.prototype;\n  _proto.toString = function toString() {\n    return this.message;\n  };\n  _createClass(RxError, [{\n    key: \"name\",\n    get: function () {\n      return 'RxError (' + this.code + ')';\n    }\n  }, {\n    key: \"typeError\",\n    get: function () {\n      return false;\n    }\n  }]);\n  return RxError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport var RxTypeError = /*#__PURE__*/function (_TypeError) {\n  _inheritsLoose(RxTypeError, _TypeError);\n  // always true, use this to detect if its an rxdb-error\n\n  function RxTypeError(code, message, parameters = {}) {\n    var _this2;\n    var mes = messageForError(message, code, parameters);\n    _this2 = _TypeError.call(this, mes) || this;\n    _this2.code = code;\n    _this2.message = mes;\n    _this2.parameters = parameters;\n    _this2.rxdb = true; // tag them as internal\n    return _this2;\n  }\n  var _proto2 = RxTypeError.prototype;\n  _proto2.toString = function toString() {\n    return this.message;\n  };\n  _createClass(RxTypeError, [{\n    key: \"name\",\n    get: function () {\n      return 'RxTypeError (' + this.code + ')';\n    }\n  }, {\n    key: \"typeError\",\n    get: function () {\n      return true;\n    }\n  }]);\n  return RxTypeError;\n}( /*#__PURE__*/_wrapNativeSuper(TypeError));\nexport function newRxError(code, parameters) {\n  return new RxError(code, overwritable.tunnelErrorMessage(code), parameters);\n}\nexport function newRxTypeError(code, parameters) {\n  return new RxTypeError(code, overwritable.tunnelErrorMessage(code), parameters);\n}\n\n/**\n * Returns the error if it is a 409 conflict,\n * return false if it is another error.\n */\nexport function isBulkWriteConflictError(err) {\n  if (err && err.status === 409) {\n    return err;\n  } else {\n    return false;\n  }\n}\nvar STORAGE_WRITE_ERROR_CODE_TO_MESSAGE = {\n  409: 'document write conflict',\n  422: 'schema validation error',\n  510: 'attachment data missing'\n};\nexport function rxStorageWriteErrorToRxError(err) {\n  return newRxError('COL20', {\n    name: STORAGE_WRITE_ERROR_CODE_TO_MESSAGE[err.status],\n    document: err.documentId,\n    writeError: err\n  });\n}\n//# sourceMappingURL=rx-error.js.map","/**\n * Utility constants and functions\n */\nexport const MAX_INT = 2147483647;\nexport const MIN_INT = -2147483648;\nexport const MAX_LONG = Number.MAX_SAFE_INTEGER;\nexport const MIN_LONG = Number.MIN_SAFE_INTEGER;\n// special value to identify missing items. treated differently from undefined\nconst MISSING = Symbol(\"missing\");\nconst CYCLE_FOUND_ERROR = Object.freeze(new Error(\"mingo: cycle detected while processing object/array\"));\nconst ARRAY_PROTO = Object.getPrototypeOf([]);\nconst OBJECT_PROTO = Object.getPrototypeOf({});\nconst OBJECT_TAG = \"[object Object]\";\nconst OBJECT_TYPE_RE = /^\\[object ([a-zA-Z0-9]+)\\]$/;\nclass Null {\n}\nclass Undefined {\n}\nconst getConstructor = (v) => {\n    if (v === null)\n        return Null;\n    if (v === undefined)\n        return Undefined;\n    return v.constructor;\n};\n/**\n * Uses the simple hash method as described in Effective Java.\n * @see https://stackoverflow.com/a/113600/1370481\n * @param value The value to hash\n * @returns {number}\n */\nconst DEFAULT_HASH_FUNCTION = (value) => {\n    const s = stringify(value);\n    let hash = 0;\n    let i = s.length;\n    while (i)\n        hash = ((hash << 5) - hash) ^ s.charCodeAt(--i);\n    return hash >>> 0;\n};\n// no array, object, or function types\nconst JS_SIMPLE_TYPES = new Set([\n    \"null\",\n    \"undefined\",\n    \"boolean\",\n    \"number\",\n    \"string\",\n    \"date\",\n    \"regexp\"\n]);\nconst IMMUTABLE_TYPES_SET = new Set([Undefined, Null, Boolean, String, Number]);\n/** Convert simple value to string representation. */\nconst toString = (v) => v.toString(); // eslint-disable-line @typescript-eslint/no-base-to-string\n/** Convert a typed array to string representation. */\nconst typedArrayToString = (v) => `${getConstructor(v).name}[${v.toString()}]`; // eslint-disable-line @typescript-eslint/no-base-to-string\n/** Map of constructors to string converter functions */\nconst STRING_CONVERTERS = new Map([\n    [Number, toString],\n    [Boolean, toString],\n    [RegExp, toString],\n    [Function, toString],\n    [Symbol, toString],\n    [BigInt, (n) => \"0x\" + n.toString(16)],\n    [Date, (d) => d.toISOString()],\n    [String, JSON.stringify],\n    [Null, (_) => \"null\"],\n    [Undefined, (_) => \"undefined\"],\n    [Int8Array, typedArrayToString],\n    [Uint8Array, typedArrayToString],\n    [Uint8ClampedArray, typedArrayToString],\n    [Int16Array, typedArrayToString],\n    [Uint16Array, typedArrayToString],\n    [Int32Array, typedArrayToString],\n    [Uint32Array, typedArrayToString],\n    [Float32Array, typedArrayToString],\n    [Float64Array, typedArrayToString],\n    [BigInt64Array, typedArrayToString],\n    [BigUint64Array, typedArrayToString]\n]);\n/** MongoDB sort comparison order. https://www.mongodb.com/docs/manual/reference/bson-type-comparison-order */\nconst SORT_ORDER_BY_TYPE = {\n    null: 0,\n    undefined: 0,\n    number: 1,\n    string: 2,\n    object: 3,\n    array: 4,\n    boolean: 5,\n    date: 6,\n    regexp: 7,\n    function: 8\n};\n/**\n * Compare function which adheres to MongoDB comparison order.\n *\n * @param a The first value\n * @param b The second value\n * @returns {Number}\n */\nexport const compare = (a, b) => {\n    if (a === MISSING)\n        a = undefined;\n    if (b === MISSING)\n        b = undefined;\n    const [u, v] = [a, b].map(n => SORT_ORDER_BY_TYPE[getType(n).toLowerCase()]);\n    if (u !== v)\n        return u - v;\n    // number | string | date\n    if (u === 1 || u === 2 || u === 6) {\n        if (a < b)\n            return -1;\n        if (a > b)\n            return 1;\n        return 0;\n    }\n    // check for equivalence equality\n    if (isEqual(a, b))\n        return 0;\n    if (a < b)\n        return -1;\n    if (a > b)\n        return 1;\n    // if we get here we are comparing a type that does not make sense.\n    return 0;\n};\nexport function assert(condition, message) {\n    if (!condition)\n        throw new Error(message);\n}\nconst isTypedArray = (v) => {\n    const proto = Object.getPrototypeOf(getConstructor(v));\n    return proto && proto.name === \"TypedArray\";\n};\n/**\n * Deep clone an object. Value types and immutable objects are returned as is.\n */\nexport const cloneDeep = (obj) => {\n    if (IMMUTABLE_TYPES_SET.has(getConstructor(obj)))\n        return obj;\n    const cycle = new Set();\n    const clone = (val) => {\n        if (cycle.has(val))\n            throw CYCLE_FOUND_ERROR;\n        const ctor = getConstructor(val);\n        if (IMMUTABLE_TYPES_SET.has(ctor))\n            return val;\n        try {\n            // arrays\n            if (isArray(val)) {\n                cycle.add(val);\n                return val.map(clone);\n            }\n            // object literals\n            if (isObject(val)) {\n                cycle.add(val);\n                const res = {};\n                for (const k in val)\n                    res[k] = clone(val[k]);\n                return res;\n            }\n        }\n        finally {\n            cycle.delete(val);\n        }\n        // dates, regex, typed arrays\n        if (ctor === Date || ctor === RegExp || isTypedArray(val)) {\n            return new ctor(val);\n        }\n        return val;\n    };\n    return clone(obj);\n};\n/**\n * Returns the name of type as specified in the tag returned by a call to Object.prototype.toString\n * @param v A value\n */\nexport const getType = (v) => OBJECT_TYPE_RE.exec(Object.prototype.toString.call(v))[1];\nexport const isBoolean = (v) => typeof v === \"boolean\";\nexport const isString = (v) => typeof v === \"string\";\nexport const isSymbol = (v) => typeof v === \"symbol\";\nexport const isNumber = (v) => !isNaN(v) && typeof v === \"number\";\nexport const isBigInt = (v) => !isNaN(v) && typeof v === \"bigint\";\nexport const isNotNaN = (v) => !(isNaN(v) && typeof v === \"number\");\nexport const isArray = Array.isArray;\nexport const isObject = (v) => {\n    if (!v)\n        return false;\n    const proto = Object.getPrototypeOf(v);\n    return ((proto === OBJECT_PROTO || proto === null) &&\n        OBJECT_TAG === Object.prototype.toString.call(v));\n};\n//  objects, arrays, functions, date, custom object\nexport const isObjectLike = (v) => v === Object(v);\nexport const isDate = (v) => v instanceof Date;\nexport const isRegExp = (v) => v instanceof RegExp;\nexport const isFunction = (v) => typeof v === \"function\";\nexport const isNil = (v) => v === null || v === undefined;\nexport const inArray = (arr, item) => arr.includes(item);\nexport const notInArray = (arr, item) => !inArray(arr, item);\nexport const truthy = (arg, strict = true) => !!arg || (strict && arg === \"\");\nexport const isEmpty = (x) => isNil(x) ||\n    (isString(x) && !x) ||\n    (x instanceof Array && x.length === 0) ||\n    (isObject(x) && Object.keys(x).length === 0);\nexport const isMissing = (v) => v === MISSING;\n/** ensure a value is an array or wrapped within one. */\nexport const ensureArray = (x) => x instanceof Array ? x : [x];\nexport const has = (obj, prop) => !!obj && Object.prototype.hasOwnProperty.call(obj, prop);\nconst mergeable = (left, right) => (isObject(left) && isObject(right)) || (isArray(left) && isArray(right));\n/**\n * Deep merge objects or arrays.\n * When the inputs have unmergeable types, the  right hand value is returned.\n * If inputs are arrays and options.flatten is set, elements in the same position are merged together. Remaining elements are appended to the target object.\n * If options.flatten is false, the right hand value is just appended to the left-hand value.\n * @param target {Object|Array} the target to merge into\n * @param obj {Object|Array} the source object\n */\nexport function merge(target, obj, options) {\n    // default options\n    options = options || { flatten: false };\n    // take care of missing inputs\n    if (isMissing(target) || isNil(target))\n        return obj;\n    if (isMissing(obj) || isNil(obj))\n        return target;\n    // fail only on initial input.\n    if (!mergeable(target, obj)) {\n        if (options.skipValidation)\n            return obj || target;\n        throw Error(\"mismatched types. must both be array or object\");\n    }\n    // skip validation after initial input.\n    options.skipValidation = true;\n    if (isArray(target)) {\n        const result = target;\n        const input = obj;\n        if (options.flatten) {\n            let i = 0;\n            let j = 0;\n            while (i < result.length && j < input.length) {\n                result[i] = merge(result[i++], input[j++], options);\n            }\n            while (j < input.length) {\n                result.push(obj[j++]);\n            }\n        }\n        else {\n            into(result, input);\n        }\n    }\n    else {\n        for (const k in obj) {\n            target[k] = merge(target[k], obj[k], options);\n        }\n    }\n    return target;\n}\nfunction buildHashIndex(arr, hashFunction = DEFAULT_HASH_FUNCTION) {\n    const map = new Map();\n    arr.forEach((o, i) => {\n        const h = hashCode(o, hashFunction);\n        if (map.has(h)) {\n            if (!map.get(h).some(j => isEqual(arr[j], o))) {\n                map.get(h).push(i);\n            }\n        }\n        else {\n            map.set(h, [i]);\n        }\n    });\n    return map;\n}\n/**\n * Returns the intersection of multiple arrays.\n *\n * @param  {Array} input An array of arrays from which to find intersection.\n * @param  {Function} hashFunction Custom function to hash values, default the hashCode method\n * @return {Array} Array of intersecting values.\n */\nexport function intersection(input, hashFunction = DEFAULT_HASH_FUNCTION) {\n    // if any array is empty, there is no intersection\n    if (input.some(arr => arr.length == 0))\n        return [];\n    if (input.length === 1)\n        return Array.from(input);\n    // sort input arrays by to get smallest array\n    // const sorted = sortBy(input, (a: RawArray) => a.length) as RawArray[];\n    const sortedIndex = sortBy(input.map((a, i) => [i, a.length]), (a) => a[1]);\n    // get the smallest\n    const smallest = input[sortedIndex[0][0]];\n    // get hash index of smallest array\n    const map = buildHashIndex(smallest, hashFunction);\n    // hashIndex for remaining arrays.\n    const rmap = new Map();\n    // final intersection results and index of first occurrence.\n    const results = new Array();\n    map.forEach((v, k) => {\n        const lhs = v.map(j => smallest[j]);\n        const res = lhs.map(_ => 0);\n        // used to track first occurence of value in order of the original input array.\n        const stable = lhs.map(_ => [sortedIndex[0][0], 0]);\n        let found = false;\n        for (let i = 1; i < input.length; i++) {\n            const [currIndex, _] = sortedIndex[i];\n            const arr = input[currIndex];\n            if (!rmap.has(i))\n                rmap.set(i, buildHashIndex(arr));\n            // we found a match. let's confirm.\n            if (rmap.get(i).has(k)) {\n                const rhs = rmap\n                    .get(i)\n                    .get(k)\n                    .map(j => arr[j]);\n                // confirm the intersection with an equivalence check.\n                found = lhs\n                    .map((s, n) => rhs.some((t, m) => {\n                    // we expect only one to match here since these are just collisions.\n                    const p = res[n];\n                    if (isEqual(s, t)) {\n                        res[n]++;\n                        // track position of value ordering for stability.\n                        if (currIndex < stable[n][0]) {\n                            stable[n] = [currIndex, rmap.get(i).get(k)[m]];\n                        }\n                    }\n                    return p < res[n];\n                }))\n                    .some(Boolean);\n            }\n            // found nothing, so exclude value. this was just a hash collision.\n            if (!found)\n                return;\n        }\n        // extract value into result if we found an intersection.\n        // we find an intersection if the frequency counter matches the count of the remaining arrays.\n        if (found) {\n            into(results, res\n                .map((n, i) => {\n                return n === input.length - 1 ? [lhs[i], stable[i]] : MISSING;\n            })\n                .filter(n => n !== MISSING));\n        }\n    });\n    return results\n        .sort((a, b) => {\n        const [_i, [u, m]] = a;\n        const [_j, [v, n]] = b;\n        const r = compare(u, v);\n        if (r !== 0)\n            return r;\n        return compare(m, n);\n    })\n        .map(v => v[0]);\n}\n/**\n * Flatten the array\n *\n * @param {Array} xs The array to flatten\n * @param {Number} depth The number of nested lists to iterate\n */\nexport function flatten(xs, depth = 0) {\n    const arr = new Array();\n    function flatten2(ys, n) {\n        for (let i = 0, len = ys.length; i < len; i++) {\n            if (isArray(ys[i]) && (n > 0 || n < 0)) {\n                flatten2(ys[i], Math.max(-1, n - 1));\n            }\n            else {\n                arr.push(ys[i]);\n            }\n        }\n    }\n    flatten2(xs, depth);\n    return arr;\n}\n/** Returns all members of the value in an object literal. */\nconst getMembersOf = (value) => {\n    let [proto, names] = [\n        Object.getPrototypeOf(value),\n        Object.getOwnPropertyNames(value)\n    ];\n    // save effective prototype\n    let activeProto = proto;\n    // traverse the prototype hierarchy until we get property names or hit the bottom prototype.\n    while (!names.length && proto !== OBJECT_PROTO && proto !== ARRAY_PROTO) {\n        activeProto = proto;\n        names = Object.getOwnPropertyNames(proto);\n        proto = Object.getPrototypeOf(proto);\n    }\n    const o = {};\n    names.forEach(k => (o[k] = value[k]));\n    return [o, activeProto];\n};\n/**\n * Determine whether two values are the same or strictly equivalent.\n * Checking whether values are the same only applies to built in objects.\n * For user-defined objects this checks for only referential equality so\n * two different instances with the same values are not equal.\n *\n * @param  {*}  a The first value\n * @param  {*}  b The second value\n * @return {Boolean}   Result of comparison\n */\nexport function isEqual(a, b) {\n    const args = [[a, b]];\n    while (args.length > 0) {\n        [a, b] = args.pop();\n        // strictly equal must be equal. matches referentially equal values.\n        if (a === b)\n            continue;\n        // unequal types and functions (unless referentially equivalent) cannot be equal.\n        const ctor = getConstructor(a);\n        if (ctor !== getConstructor(b) || isFunction(a))\n            return false;\n        // string convertable types\n        if (STRING_CONVERTERS.has(ctor)) {\n            const str = STRING_CONVERTERS.get(ctor);\n            // eslint-disable-next-line @typescript-eslint/no-base-to-string\n            if (str(a) !== str(b))\n                return false;\n            // values are equal, so move next\n            continue;\n        }\n        // handle array and object types\n        if (ctor === Array || ctor === Object) {\n            const ka = Object.keys(a);\n            const kb = Object.keys(b);\n            if (ka.length !== kb.length)\n                return false;\n            if (new Set(ka.concat(kb)).size != ka.length)\n                return false;\n            for (const k of ka)\n                args.push([a[k], b[k]]);\n            // move next\n            continue;\n        }\n        // user-defined type detected.\n        // we don't try to compare user-defined types (even though we could...shhhh).\n        return false;\n    }\n    // nothing left to compare\n    return !args.length;\n}\n/**\n * Return a new unique version of the collection\n * @param  {Array} input The input collection\n * @return {Array}\n */\nexport function unique(input, hashFunction = DEFAULT_HASH_FUNCTION) {\n    const result = input.map(_ => MISSING);\n    buildHashIndex(input, hashFunction).forEach((v, _) => {\n        v.forEach(i => (result[i] = input[i]));\n    });\n    return result.filter(v => v !== MISSING);\n}\n/**\n * Encode value to string using a simple non-colliding stable scheme.\n * Handles user-defined types by processing keys on first non-empty prototype.\n * If a user-defined type provides a \"toJSON\" function, it is used.\n *\n * @param value The value to convert to a string representation.\n * @returns {String}\n */\nexport function stringify(value) {\n    const cycle = new Set();\n    // stringify with cycle check\n    const str = (v) => {\n        const ctor = getConstructor(v);\n        // string convertable types\n        if (STRING_CONVERTERS.has(ctor)) {\n            return STRING_CONVERTERS.get(ctor)(v);\n        }\n        const tag = ctor === Object ? \"\" : ctor.name;\n        // handle JSONable objects.\n        if (isFunction(v[\"toJSON\"])) {\n            return `${tag}(${JSON.stringify(v)})`;\n        }\n        // handle cycles\n        if (cycle.has(v))\n            throw CYCLE_FOUND_ERROR;\n        cycle.add(v);\n        try {\n            // handle array\n            if (ctor === Array) {\n                return \"[\" + v.map(str).join(\",\") + \"]\";\n            }\n            // handle user-defined object\n            if (ctor !== Object) {\n                // handle user-defined types or object literals.\n                const [members, _] = getMembersOf(v);\n                // custom type derived from array.\n                if (isArray(v)) {\n                    // include other members as part of array elements.\n                    return `${tag}${str([...v, members])}`;\n                }\n                // get members as literal\n                v = members;\n            }\n            const objKeys = Object.keys(v);\n            objKeys.sort();\n            return (`${tag}{` +\n                objKeys.map(k => `${k}:${str(v[k])}`).join(\",\") +\n                \"}\");\n        }\n        finally {\n            cycle.delete(v);\n        }\n    };\n    // convert to string\n    return str(value);\n}\n/**\n * Generate hash code\n * This selected function is the result of benchmarking various hash functions.\n * This version performs well and can hash 10^6 documents in ~3s with on average 100 collisions.\n *\n * @param value\n * @returns {number|null}\n */\nexport function hashCode(value, hashFunction) {\n    hashFunction = hashFunction || DEFAULT_HASH_FUNCTION;\n    if (isNil(value))\n        return null;\n    return hashFunction(value).toString();\n}\n/**\n * Returns a (stably) sorted copy of list, ranked in ascending order by the results of running each value through iteratee\n *\n * This implementation treats null/undefined sort keys as less than every other type\n *\n * @param {Array}   collection\n * @param {Function} keyFn The sort key function used to resolve sort keys\n * @param {Function} comparator The comparator function to use for comparing keys. Defaults to standard comparison via `compare(...)`\n * @return {Array} Returns a new sorted array by the given key and comparator function\n */\nexport function sortBy(collection, keyFn, comparator = compare) {\n    if (isEmpty(collection))\n        return collection;\n    const sorted = new Array();\n    const result = new Array();\n    for (let i = 0; i < collection.length; i++) {\n        const obj = collection[i];\n        const key = keyFn(obj, i);\n        if (isNil(key)) {\n            result.push(obj);\n        }\n        else {\n            sorted.push([key, obj]);\n        }\n    }\n    // use native array sorting but enforce stableness\n    sorted.sort((a, b) => comparator(a[0], b[0]));\n    return into(result, sorted.map((o) => o[1]));\n}\n/**\n * Groups the collection into sets by the returned key\n *\n * @param collection\n * @param keyFn {Function} to compute the group key of an item in the collection\n * @returns {GroupByOutput}\n */\nexport function groupBy(collection, keyFn, hashFunction = DEFAULT_HASH_FUNCTION) {\n    if (collection.length < 1)\n        return new Map();\n    // map of hash to collided values\n    const lookup = new Map();\n    // map of raw key values to objects.\n    const result = new Map();\n    for (let i = 0; i < collection.length; i++) {\n        const obj = collection[i];\n        const key = keyFn(obj, i);\n        const hash = hashCode(key, hashFunction);\n        if (hash === null) {\n            if (result.has(null)) {\n                result.get(null).push(obj);\n            }\n            else {\n                result.set(null, [obj]);\n            }\n        }\n        else {\n            // find if we can match a hash for which the value is equivalent.\n            // this is used to deal with collisions.\n            const existingKey = lookup.has(hash)\n                ? lookup.get(hash).find(k => isEqual(k, key))\n                : null;\n            // collision detected or first time seeing key\n            if (isNil(existingKey)) {\n                // collision detected or first entry so we create a new group.\n                result.set(key, [obj]);\n                // upload the lookup with the collided key\n                if (lookup.has(hash)) {\n                    lookup.get(hash).push(key);\n                }\n                else {\n                    lookup.set(hash, [key]);\n                }\n            }\n            else {\n                // key exists\n                result.get(existingKey).push(obj);\n            }\n        }\n    }\n    return result;\n}\n// max elements to push.\n// See argument limit https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply\nconst MAX_ARRAY_PUSH = 50000;\n/**\n * Merge elements into the dest\n *\n * @param {*} target The target object\n * @param {*} rest The array of elements to merge into dest\n */\nexport function into(target, ...rest) {\n    if (target instanceof Array) {\n        return rest.reduce(((acc, arr) => {\n            // push arrary in batches to handle large inputs\n            let i = Math.ceil(arr.length / MAX_ARRAY_PUSH);\n            let begin = 0;\n            while (i-- > 0) {\n                Array.prototype.push.apply(acc, arr.slice(begin, begin + MAX_ARRAY_PUSH));\n                begin += MAX_ARRAY_PUSH;\n            }\n            return acc;\n        }), target);\n    }\n    else {\n        // merge objects. same behaviour as Object.assign\n        return rest.filter(isObjectLike).reduce((acc, item) => {\n            Object.assign(acc, item);\n            return acc;\n        }, target);\n    }\n}\n/**\n * This is a generic memoization function\n *\n * This implementation uses a cache independent of the function being memoized\n * to allow old values to be garbage collected when the memoized function goes out of scope.\n *\n * @param {*} fn The function object to memoize\n */\nexport function memoize(fn, hashFunction = DEFAULT_HASH_FUNCTION) {\n    return ((memo) => {\n        return (...args) => {\n            const key = hashCode(args, hashFunction) || \"\";\n            if (!has(memo, key)) {\n                memo[key] = fn.apply(this, args);\n            }\n            return memo[key];\n        };\n    })({\n    /* storage */\n    });\n}\n// mingo internal\n/**\n * Retrieve the value of a given key on an object\n * @param obj\n * @param key\n * @returns {*}\n * @private\n */\nfunction getValue(obj, key) {\n    return isObjectLike(obj) ? obj[key] : undefined;\n}\n/**\n * Unwrap a single element array to specified depth\n * @param {Array} arr\n * @param {Number} depth\n */\nfunction unwrap(arr, depth) {\n    if (depth < 1)\n        return arr;\n    while (depth-- && arr.length === 1)\n        arr = arr[0];\n    return arr;\n}\n/**\n * Resolve the value of the field (dot separated) on the given object\n * @param obj {Object} the object context\n * @param selector {String} dot separated path to field\n * @returns {*}\n */\nexport function resolve(obj, selector, options) {\n    let depth = 0;\n    function resolve2(o, path) {\n        let value = o;\n        for (let i = 0; i < path.length; i++) {\n            const field = path[i];\n            const isText = /^\\d+$/.exec(field) === null;\n            // using instanceof to aid typescript compiler\n            if (isText && value instanceof Array) {\n                // On the first iteration, we check if we received a stop flag.\n                // If so, we stop to prevent iterating over a nested array value\n                // on consecutive object keys in the selector.\n                if (i === 0 && depth > 0)\n                    break;\n                depth += 1;\n                // only look at the rest of the path\n                const subpath = path.slice(i);\n                value = value.reduce((acc, item) => {\n                    const v = resolve2(item, subpath);\n                    if (v !== undefined)\n                        acc.push(v);\n                    return acc;\n                }, []);\n                break;\n            }\n            else {\n                value = getValue(value, field);\n            }\n            if (value === undefined)\n                break;\n        }\n        return value;\n    }\n    const result = JS_SIMPLE_TYPES.has(getType(obj).toLowerCase())\n        ? obj\n        : resolve2(obj, selector.split(\".\"));\n    return result instanceof Array && (options === null || options === void 0 ? void 0 : options.unwrapArray)\n        ? unwrap(result, depth)\n        : result;\n}\n/**\n * Returns the full object to the resolved value given by the selector.\n * This function excludes empty values as they aren't practically useful.\n *\n * @param obj {Object} the object context\n * @param selector {String} dot separated path to field\n */\nexport function resolveGraph(obj, selector, options) {\n    const names = selector.split(\".\");\n    const key = names[0];\n    // get the next part of the selector\n    const next = names.slice(1).join(\".\");\n    const isIndex = /^\\d+$/.exec(key) !== null;\n    const hasNext = names.length > 1;\n    let result;\n    let value;\n    if (obj instanceof Array) {\n        if (isIndex) {\n            result = getValue(obj, Number(key));\n            if (hasNext) {\n                result = resolveGraph(result, next, options);\n            }\n            result = [result];\n        }\n        else {\n            result = [];\n            for (const item of obj) {\n                value = resolveGraph(item, selector, options);\n                if (options === null || options === void 0 ? void 0 : options.preserveMissing) {\n                    if (value === undefined) {\n                        value = MISSING;\n                    }\n                    result.push(value);\n                }\n                else if (value !== undefined) {\n                    result.push(value);\n                }\n            }\n        }\n    }\n    else {\n        value = getValue(obj, key);\n        if (hasNext) {\n            value = resolveGraph(value, next, options);\n        }\n        if (value === undefined)\n            return undefined;\n        result = (options === null || options === void 0 ? void 0 : options.preserveKeys) ? Object.assign({}, obj) : {};\n        result[key] = value;\n    }\n    return result;\n}\n/**\n * Filter out all MISSING values from the object in-place\n *\n * @param obj The object to filter\n */\nexport function filterMissing(obj) {\n    if (obj instanceof Array) {\n        for (let i = obj.length - 1; i >= 0; i--) {\n            if (obj[i] === MISSING) {\n                obj.splice(i, 1);\n            }\n            else {\n                filterMissing(obj[i]);\n            }\n        }\n    }\n    else if (isObject(obj)) {\n        for (const k in obj) {\n            if (has(obj, k)) {\n                filterMissing(obj[k]);\n            }\n        }\n    }\n}\nconst NUMBER_RE = /^\\d+$/;\n/**\n * Walk the object graph and execute the given transform function\n *\n * @param  {Object|Array} obj   The object to traverse.\n * @param  {String} selector    The selector to navigate.\n * @param  {Callback} fn Callback to execute for value at the end the traversal.\n * @param  {WalkOptions} options The opetions to use for the function.\n * @return {*}\n */\nexport function walk(obj, selector, fn, options) {\n    const names = selector.split(\".\");\n    const key = names[0];\n    const next = names.slice(1).join(\".\");\n    if (names.length === 1) {\n        if (isObject(obj) || (isArray(obj) && NUMBER_RE.test(key))) {\n            fn(obj, key);\n        }\n    }\n    else {\n        // force the rest of the graph while traversing\n        if ((options === null || options === void 0 ? void 0 : options.buildGraph) && isNil(obj[key])) {\n            obj[key] = {};\n        }\n        // get the next item\n        const item = obj[key];\n        // nothing more to do\n        if (!item)\n            return;\n        // we peek to see if next key is an array index.\n        const isNextArrayIndex = !!(names.length > 1 && NUMBER_RE.test(names[1]));\n        // if we have an array value but the next key is not an index and the 'descendArray' option is set,\n        // we walk each item in the array separately. This allows for handling traversing keys for objects\n        // nested within an array.\n        //\n        // Eg: Given { array: [ {k:1}, {k:2}, {k:3} ] }\n        //  - individual objecs can be traversed with \"array.k\"\n        //  - a specific object can be traversed with \"array.1\"\n        if (item instanceof Array && (options === null || options === void 0 ? void 0 : options.descendArray) && !isNextArrayIndex) {\n            item.forEach(((e) => walk(e, next, fn, options)));\n        }\n        else {\n            walk(item, next, fn, options);\n        }\n    }\n}\n/**\n * Set the value of the given object field\n *\n * @param obj {Object|Array} the object context\n * @param selector {String} path to field\n * @param value {*} the value to set. if it is function, it is invoked with the old value and must return the new value.\n */\nexport function setValue(obj, selector, value) {\n    walk(obj, selector, ((item, key) => {\n        item[key] = isFunction(value) ? value(item[key]) : value;\n    }), { buildGraph: true });\n}\n/**\n * Removes an element from the container.\n * If the selector resolves to an array and the leaf is a non-numeric key,\n * the remove operation will be performed on objects of the array.\n *\n * @param obj {ArrayOrObject} object or array\n * @param selector {String} dot separated path to element to remove\n */\nexport function removeValue(obj, selector, options) {\n    walk(obj, selector, ((item, key) => {\n        if (item instanceof Array) {\n            if (/^\\d+$/.test(key)) {\n                item.splice(parseInt(key), 1);\n            }\n            else if (options && options.descendArray) {\n                for (const elem of item) {\n                    if (isObject(elem)) {\n                        delete elem[key];\n                    }\n                }\n            }\n        }\n        else if (isObject(item)) {\n            delete item[key];\n        }\n    }), options);\n}\nconst OPERATOR_NAME_PATTERN = /^\\$[a-zA-Z0-9_]+$/;\n/**\n * Check whether the given name passes for an operator. We assume AnyVal field name starting with '$' is an operator.\n * This is cheap and safe to do since keys beginning with '$' should be reserved for internal use.\n * @param {String} name\n */\nexport function isOperator(name) {\n    return OPERATOR_NAME_PATTERN.test(name);\n}\n/**\n * Simplify expression for easy evaluation with query operators map\n * @param expr\n * @returns {*}\n */\nexport function normalize(expr) {\n    // normalized primitives\n    if (JS_SIMPLE_TYPES.has(getType(expr).toLowerCase())) {\n        return isRegExp(expr) ? { $regex: expr } : { $eq: expr };\n    }\n    // normalize object expression. using ObjectLike handles custom types\n    if (isObjectLike(expr)) {\n        const exprObj = expr;\n        // no valid query operator found, so we do simple comparison\n        if (!Object.keys(exprObj).some(isOperator)) {\n            return { $eq: expr };\n        }\n        // ensure valid regex\n        if (has(expr, \"$regex\")) {\n            const newExpr = Object.assign({}, expr);\n            newExpr[\"$regex\"] = new RegExp(expr[\"$regex\"], expr[\"$options\"]);\n            delete newExpr[\"$options\"];\n            return newExpr;\n        }\n    }\n    return expr;\n}\n/**\n * Find the insert index for the given key in a sorted array.\n *\n * @param {*} sorted The sorted array to search\n * @param {*} item The search key\n */\nexport function findInsertIndex(sorted, item) {\n    // uses binary search\n    let lo = 0;\n    let hi = sorted.length - 1;\n    while (lo <= hi) {\n        const mid = Math.round(lo + (hi - lo) / 2);\n        if (compare(item, sorted[mid]) < 0) {\n            hi = mid - 1;\n        }\n        else if (compare(item, sorted[mid]) > 0) {\n            lo = mid + 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return lo;\n}\n","import { assert, has, isArray, isFunction, isNil, isObject, isObjectLike, isOperator, isString, resolve } from \"./util\";\n/**\n * This controls how input and output documents are processed to meet different application needs.\n * Each mode has different trade offs for; immutability, reference sharing, and performance.\n */\nexport var ProcessingMode;\n(function (ProcessingMode) {\n    /**\n     * Clone inputs prior to processing, and the outputs if some objects graphs may be shared.\n     * Use this option to keep input collection immutable and to get distinct output objects.\n     *\n     * Note: This option is expensive and reduces performance.\n     */\n    ProcessingMode[\"CLONE_ALL\"] = \"CLONE_ALL\";\n    /**\n     * Clones inputs prior to processing.\n     * This option will return output objects with shared graphs in their path if specific operators are used.\n     * Use this option to keep the input collection immutable.\n     *\n     */\n    ProcessingMode[\"CLONE_INPUT\"] = \"CLONE_INPUT\";\n    /**\n     * Clones the output to return distinct objects with no shared paths.\n     * This option modifies the input collection and during processing.\n     */\n    ProcessingMode[\"CLONE_OUTPUT\"] = \"CLONE_OUTPUT\";\n    /**\n     * Turn off cloning and modifies the input collection as needed.\n     * This option will also return output objects with shared paths in their graph when specific operators are used.\n     * This option provides the greatest speedup for the biggest tradeoff.\n     * When using the aggregation pipeline, you can use the \"$out\" operator to collect immutable intermediate results.\n     *\n     * @default\n     */\n    ProcessingMode[\"CLONE_OFF\"] = \"CLONE_OFF\";\n})(ProcessingMode || (ProcessingMode = {}));\n/** Custom type to facilitate type checking for global options */\nexport class ComputeOptions {\n    constructor(_opts, \n    /** Reference to the root object when processing subgraphs of the object. */\n    _root, _local, \n    /** The current time in milliseconds. Remains the same throughout all stages of the aggregation pipeline. */\n    timestamp = Date.now()) {\n        this._opts = _opts;\n        this._root = _root;\n        this._local = _local;\n        this.timestamp = timestamp;\n        this.update(_root, _local);\n    }\n    /**\n     * Initialize new ComputeOptions.\n     *\n     * @param options\n     * @param root\n     * @param local\n     * @returns {ComputeOptions}\n     */\n    static init(options, root, local) {\n        return options instanceof ComputeOptions\n            ? new ComputeOptions(options._opts, isNil(options.root) ? root : options.root, Object.assign({}, options.local, local))\n            : new ComputeOptions(options, root, local);\n    }\n    /** Updates the internal mutable state. */\n    update(root, local) {\n        var _a;\n        // NOTE: this is done for efficiency to avoid creating too many intermediate options objects.\n        this._root = root;\n        this._local = local\n            ? Object.assign({}, local, {\n                variables: Object.assign({}, (_a = this._local) === null || _a === void 0 ? void 0 : _a.variables, local === null || local === void 0 ? void 0 : local.variables)\n            })\n            : local;\n        return this;\n    }\n    getOptions() {\n        return Object.freeze(Object.assign(Object.assign({}, this._opts), { context: Context.from(this._opts.context) }));\n    }\n    get root() {\n        return this._root;\n    }\n    get local() {\n        return this._local;\n    }\n    get idKey() {\n        return this._opts.idKey;\n    }\n    get collation() {\n        var _a;\n        return (_a = this._opts) === null || _a === void 0 ? void 0 : _a.collation;\n    }\n    get processingMode() {\n        var _a;\n        return ((_a = this._opts) === null || _a === void 0 ? void 0 : _a.processingMode) || ProcessingMode.CLONE_OFF;\n    }\n    get useStrictMode() {\n        var _a;\n        return (_a = this._opts) === null || _a === void 0 ? void 0 : _a.useStrictMode;\n    }\n    get scriptEnabled() {\n        var _a;\n        return (_a = this._opts) === null || _a === void 0 ? void 0 : _a.scriptEnabled;\n    }\n    get useGlobalContext() {\n        var _a;\n        return (_a = this._opts) === null || _a === void 0 ? void 0 : _a.useGlobalContext;\n    }\n    get hashFunction() {\n        var _a;\n        return (_a = this._opts) === null || _a === void 0 ? void 0 : _a.hashFunction;\n    }\n    get collectionResolver() {\n        var _a;\n        return (_a = this._opts) === null || _a === void 0 ? void 0 : _a.collectionResolver;\n    }\n    get jsonSchemaValidator() {\n        var _a;\n        return (_a = this._opts) === null || _a === void 0 ? void 0 : _a.jsonSchemaValidator;\n    }\n    get variables() {\n        var _a;\n        return (_a = this._opts) === null || _a === void 0 ? void 0 : _a.variables;\n    }\n    get context() {\n        var _a;\n        return (_a = this._opts) === null || _a === void 0 ? void 0 : _a.context;\n    }\n}\n/**\n * Creates an Option from another where required keys are initialized.\n * @param options Options\n */\nexport function initOptions(options) {\n    return options instanceof ComputeOptions\n        ? options.getOptions()\n        : Object.freeze(Object.assign(Object.assign({ idKey: \"_id\", scriptEnabled: true, useStrictMode: true, useGlobalContext: true, processingMode: ProcessingMode.CLONE_OFF }, options), { context: (options === null || options === void 0 ? void 0 : options.context)\n                ? Context.from(options === null || options === void 0 ? void 0 : options.context)\n                : Context.init({}) }));\n}\n/**\n * The different groups of operators\n */\nexport var OperatorType;\n(function (OperatorType) {\n    OperatorType[\"ACCUMULATOR\"] = \"accumulator\";\n    OperatorType[\"EXPRESSION\"] = \"expression\";\n    OperatorType[\"PIPELINE\"] = \"pipeline\";\n    OperatorType[\"PROJECTION\"] = \"projection\";\n    OperatorType[\"QUERY\"] = \"query\";\n    OperatorType[\"WINDOW\"] = \"window\";\n})(OperatorType || (OperatorType = {}));\nexport class Context {\n    constructor(ops) {\n        this.operators = {\n            [OperatorType.ACCUMULATOR]: {},\n            [OperatorType.EXPRESSION]: {},\n            [OperatorType.PIPELINE]: {},\n            [OperatorType.PROJECTION]: {},\n            [OperatorType.QUERY]: {},\n            [OperatorType.WINDOW]: {}\n        };\n        for (const [type, operators] of Object.entries(ops)) {\n            this.addOperators(type, operators);\n        }\n    }\n    static init(ops = {}) {\n        return new Context(ops);\n    }\n    static from(ctx) {\n        return new Context(ctx.operators);\n    }\n    addOperators(type, ops) {\n        for (const [name, fn] of Object.entries(ops)) {\n            if (!this.getOperator(type, name)) {\n                this.operators[type][name] = fn;\n            }\n        }\n        return this;\n    }\n    // register\n    addAccumulatorOps(ops) {\n        return this.addOperators(OperatorType.ACCUMULATOR, ops);\n    }\n    addExpressionOps(ops) {\n        return this.addOperators(OperatorType.EXPRESSION, ops);\n    }\n    addQueryOps(ops) {\n        return this.addOperators(OperatorType.QUERY, ops);\n    }\n    addPipelineOps(ops) {\n        return this.addOperators(OperatorType.PIPELINE, ops);\n    }\n    addProjectionOps(ops) {\n        return this.addOperators(OperatorType.PROJECTION, ops);\n    }\n    addWindowOps(ops) {\n        return this.addOperators(OperatorType.WINDOW, ops);\n    }\n    // getters\n    getOperator(type, name) {\n        return type in this.operators ? this.operators[type][name] || null : null;\n    }\n}\n// global context\nconst GLOBAL_CONTEXT = Context.init();\n/**\n * Register fully specified operators for the given operator class.\n *\n * @param type The operator type\n * @param operators Map of the operators\n */\nexport function useOperators(type, operators) {\n    for (const [name, fn] of Object.entries(operators)) {\n        assert(isFunction(fn) && isOperator(name), `'${name}' is not a valid operator`);\n        const currentFn = getOperator(type, name, null);\n        assert(!currentFn || fn === currentFn, `${name} already exists for '${type}' operators. Cannot change operator function once registered.`);\n    }\n    // toss the operator salad :)\n    switch (type) {\n        case OperatorType.ACCUMULATOR:\n            GLOBAL_CONTEXT.addAccumulatorOps(operators);\n            break;\n        case OperatorType.EXPRESSION:\n            GLOBAL_CONTEXT.addExpressionOps(operators);\n            break;\n        case OperatorType.PIPELINE:\n            GLOBAL_CONTEXT.addPipelineOps(operators);\n            break;\n        case OperatorType.PROJECTION:\n            GLOBAL_CONTEXT.addProjectionOps(operators);\n            break;\n        case OperatorType.QUERY:\n            GLOBAL_CONTEXT.addQueryOps(operators);\n            break;\n        case OperatorType.WINDOW:\n            GLOBAL_CONTEXT.addWindowOps(operators);\n            break;\n    }\n}\n/**\n * Overrides the current global context with this new one.\n *\n * @param context The new context to override the global one with.\n */\n// export const setGlobalContext = (context: Context): void => {\n//   GLOBAL_CONTEXT = context;\n// };\n/**\n * Returns the operator function or undefined if it is not found\n * @param type Type of operator\n * @param operator Name of the operator\n */\nexport function getOperator(type, operator, options) {\n    const { context: ctx, useGlobalContext: fallback } = options || {};\n    const fn = ctx ? ctx.getOperator(type, operator) : null;\n    return !fn && fallback ? GLOBAL_CONTEXT.getOperator(type, operator) : fn;\n}\n/* eslint-disable unused-imports/no-unused-vars-ts */\n/**\n * Implementation of system variables\n * @type {Object}\n */\nconst systemVariables = {\n    $$ROOT(_obj, _expr, options) {\n        return options.root;\n    },\n    $$CURRENT(obj, _expr, _options) {\n        return obj;\n    },\n    $$REMOVE(_obj, _expr, _options) {\n        return undefined;\n    },\n    $$NOW(_obj, _expr, options) {\n        return new Date(options.timestamp);\n    }\n};\n/**\n * Implementation of $redact variables\n *\n * Each function accepts 3 arguments (obj, expr, options)\n *\n * @type {Object}\n */\nconst redactVariables = {\n    $$KEEP(obj, _expr, _options) {\n        return obj;\n    },\n    $$PRUNE(_obj, _expr, _options) {\n        return undefined;\n    },\n    $$DESCEND(obj, expr, options) {\n        // traverse nested documents iff there is a $cond\n        if (!has(expr, \"$cond\"))\n            return obj;\n        let result;\n        for (const [key, current] of Object.entries(obj)) {\n            if (isObjectLike(current)) {\n                if (current instanceof Array) {\n                    const array = [];\n                    for (let elem of current) {\n                        if (isObject(elem)) {\n                            elem = redact(elem, expr, options.update(elem));\n                        }\n                        if (!isNil(elem)) {\n                            array.push(elem);\n                        }\n                    }\n                    result = array;\n                }\n                else {\n                    result = redact(current, expr, options.update(current));\n                }\n                if (isNil(result)) {\n                    delete obj[key]; // pruned result\n                }\n                else {\n                    obj[key] = result;\n                }\n            }\n        }\n        return obj;\n    }\n};\n/* eslint-enable unused-imports/no-unused-vars-ts */\n/**\n * Computes the value of the expression on the object for the given operator\n *\n * @param obj the current object from the collection\n * @param expr the expression for the given field\n * @param operator the operator to resolve the field with\n * @param options {Object} extra options\n * @returns {*}\n */\nexport function computeValue(obj, expr, operator, options) {\n    var _a;\n    // ensure valid options exist on first invocation\n    const copts = ComputeOptions.init(options, obj);\n    operator = operator || \"\";\n    if (isOperator(operator)) {\n        // if the field of the object is a valid operator\n        const callExpression = getOperator(OperatorType.EXPRESSION, operator, options);\n        if (callExpression)\n            return callExpression(obj, expr, copts);\n        // we also handle $group accumulator operators\n        const callAccumulator = getOperator(OperatorType.ACCUMULATOR, operator, options);\n        if (callAccumulator) {\n            // if object is not an array, first try to compute using the expression\n            if (!(obj instanceof Array)) {\n                obj = computeValue(obj, expr, null, copts);\n                expr = null;\n            }\n            // validate that we have an array\n            assert(obj instanceof Array, `'${operator}' target must be an array.`);\n            // for accumulators, we use the global options since the root is specific to each element within array.\n            return callAccumulator(obj, expr, \n            // reset the root object for accumulators.\n            copts.update(null, copts.local));\n        }\n        // operator was not found\n        throw new Error(`operator '${operator}' is not registered`);\n    }\n    // if expr is a string and begins with \"$$\", then we have a variable.\n    //  this can be one of; redact variable, system variable, user-defined variable.\n    //  we check and process them in that order.\n    //\n    // if expr begins only a single \"$\", then it is a path to a field on the object.\n    if (isString(expr) && expr.length > 0 && expr[0] === \"$\") {\n        // we return redact variables as literals\n        if (has(redactVariables, expr)) {\n            return expr;\n        }\n        // default to root for resolving path.\n        let context = copts.root;\n        // handle selectors with explicit prefix\n        const arr = expr.split(\".\");\n        if (has(systemVariables, arr[0])) {\n            // set 'root' only the first time it is required to be used for all subsequent calls\n            // if it already available on the options, it will be used\n            context = systemVariables[arr[0]](obj, null, copts);\n            expr = expr.slice(arr[0].length + 1); //  +1 for '.'\n        }\n        else if (arr[0].slice(0, 2) === \"$$\") {\n            // handle user-defined variables\n            context = Object.assign({}, copts.variables, // global vars\n            // current item is added before local variables because the binding may be changed.\n            { this: obj }, (_a = copts.local) === null || _a === void 0 ? void 0 : _a.variables // local vars\n            );\n            const prefix = arr[0].slice(2);\n            assert(has(context, prefix), `Use of undefined variable: ${prefix}`);\n            expr = expr.slice(2);\n        }\n        else {\n            // 'expr' is a path to a field on the object.\n            expr = expr.slice(1);\n        }\n        if (expr === \"\")\n            return context;\n        return resolve(context, expr);\n    }\n    // check and return value if already in a resolved state\n    if (isArray(expr)) {\n        return expr.map((item) => computeValue(obj, item, null, copts));\n    }\n    else if (isObject(expr)) {\n        const result = {};\n        for (const [key, val] of Object.entries(expr)) {\n            result[key] = computeValue(obj, val, key, copts);\n            // must run ONLY one aggregate operator per expression\n            // if so, return result of the computed value\n            if ([OperatorType.EXPRESSION, OperatorType.ACCUMULATOR].some(t => !!getOperator(t, key, options))) {\n                // there should be only one operator\n                assert(Object.keys(expr).length === 1, \"Invalid aggregation expression '\" + JSON.stringify(expr) + \"'\");\n                return result[key];\n            }\n        }\n        return result;\n    }\n    return expr;\n}\n/**\n * Redact an object\n * @param  {Object} obj The object to redact\n * @param  {*} expr The redact expression\n * @param  {*} options  Options for value\n * @return {*} returns the result of the redacted object\n */\nexport function redact(obj, expr, options) {\n    const result = computeValue(obj, expr, null, options);\n    return has(redactVariables, result)\n        ? redactVariables[result](obj, expr, options)\n        : result;\n}\n","/**\n * Returns an iterator\n * @param {*} source An iterable source (Array, Function, Generator, or Iterator)\n */\nexport function Lazy(source) {\n    return source instanceof Iterator ? source : new Iterator(source);\n}\nexport function compose(...iterators) {\n    let index = 0;\n    return Lazy(() => {\n        while (index < iterators.length) {\n            const o = iterators[index].next();\n            if (!o.done)\n                return o;\n            index++;\n        }\n        return { done: true };\n    });\n}\n/**\n * Checks whether the given object is compatible with a generator i.e Object{next:Function}\n * @param {*} o An object\n */\nfunction isGenerator(o) {\n    return (!!o && typeof o === \"object\" && (o === null || o === void 0 ? void 0 : o.next) instanceof Function);\n}\nfunction dropItem(array, i) {\n    const rest = array.slice(i + 1);\n    array.splice(i);\n    Array.prototype.push.apply(array, rest);\n}\n// stop iteration error\nconst DONE = new Error();\n// Lazy function actions\nvar Action;\n(function (Action) {\n    Action[Action[\"MAP\"] = 0] = \"MAP\";\n    Action[Action[\"FILTER\"] = 1] = \"FILTER\";\n    Action[Action[\"TAKE\"] = 2] = \"TAKE\";\n    Action[Action[\"DROP\"] = 3] = \"DROP\";\n})(Action || (Action = {}));\nfunction createCallback(nextFn, iteratees, buffer) {\n    let done = false;\n    let index = -1;\n    let bufferIndex = 0; // index for the buffer\n    return function (storeResult) {\n        // special hack to collect all values into buffer\n        try {\n            outer: while (!done) {\n                let o = nextFn();\n                index++;\n                let i = -1;\n                const size = iteratees.length;\n                let innerDone = false;\n                while (++i < size) {\n                    const r = iteratees[i];\n                    switch (r.action) {\n                        case Action.MAP:\n                            o = r.func(o, index);\n                            break;\n                        case Action.FILTER:\n                            if (!r.func(o, index))\n                                continue outer;\n                            break;\n                        case Action.TAKE:\n                            --r.count;\n                            if (!r.count)\n                                innerDone = true;\n                            break;\n                        case Action.DROP:\n                            --r.count;\n                            if (!r.count)\n                                dropItem(iteratees, i);\n                            continue outer;\n                        default:\n                            break outer;\n                    }\n                }\n                done = innerDone;\n                if (storeResult) {\n                    buffer[bufferIndex++] = o;\n                }\n                else {\n                    return { value: o, done: false };\n                }\n            }\n        }\n        catch (e) {\n            if (e !== DONE)\n                throw e;\n        }\n        done = true;\n        return { done };\n    };\n}\n/**\n * A lazy collection iterator yields a single value at a time upon request.\n */\nexport class Iterator {\n    /**\n     * @param {*} source An iterable object or function.\n     *    Array - return one element per cycle\n     *    Object{next:Function} - call next() for the next value (this also handles generator functions)\n     *    Function - call to return the next value\n     * @param {Function} fn An optional transformation function\n     */\n    constructor(source) {\n        this.iteratees = [];\n        this.yieldedValues = [];\n        this.isDone = false;\n        let nextVal;\n        if (source instanceof Function) {\n            // make iterable\n            source = { next: source };\n        }\n        if (isGenerator(source)) {\n            const src = source;\n            nextVal = () => {\n                const o = src.next();\n                if (o.done)\n                    throw DONE;\n                return o.value;\n            };\n        }\n        else if (source instanceof Array) {\n            const data = source;\n            const size = data.length;\n            let index = 0;\n            nextVal = () => {\n                if (index < size)\n                    return data[index++];\n                throw DONE;\n            };\n        }\n        else if (!(source instanceof Function)) {\n            throw new Error(`Lazy must be initialized with an array, generator, or function.`);\n        }\n        // create next function\n        this.getNext = createCallback(nextVal, this.iteratees, this.yieldedValues);\n    }\n    /**\n     * Add an iteratee to this lazy sequence\n     */\n    push(action, value) {\n        if (typeof value === \"function\") {\n            this.iteratees.push({ action, func: value });\n        }\n        else if (typeof value === \"number\") {\n            this.iteratees.push({ action, count: value });\n        }\n        return this;\n    }\n    next() {\n        return this.getNext();\n    }\n    // Iteratees methods\n    /**\n     * Transform each item in the sequence to a new value\n     * @param {Function} f\n     */\n    map(f) {\n        return this.push(Action.MAP, f);\n    }\n    /**\n     * Select only items matching the given predicate\n     * @param {Function} pred\n     */\n    filter(predicate) {\n        return this.push(Action.FILTER, predicate);\n    }\n    /**\n     * Take given numbe for values from sequence\n     * @param {Number} n A number greater than 0\n     */\n    take(n) {\n        return n > 0 ? this.push(Action.TAKE, n) : this;\n    }\n    /**\n     * Drop a number of values from the sequence\n     * @param {Number} n Number of items to drop greater than 0\n     */\n    drop(n) {\n        return n > 0 ? this.push(Action.DROP, n) : this;\n    }\n    // Transformations\n    /**\n     * Returns a new lazy object with results of the transformation\n     * The entire sequence is realized.\n     *\n     * @param {Callback<Source, RawArray>} fn Tranform function of type (Array) => (Any)\n     */\n    transform(fn) {\n        const self = this;\n        let iter;\n        return Lazy(() => {\n            if (!iter) {\n                iter = Lazy(fn(self.value()));\n            }\n            return iter.next();\n        });\n    }\n    // Terminal methods\n    /**\n     * Returns the fully realized values of the iterators.\n     * The return value will be an array unless `lazy.first()` was used.\n     * The realized values are cached for subsequent calls.\n     */\n    value() {\n        if (!this.isDone) {\n            this.isDone = this.getNext(true).done;\n        }\n        return this.yieldedValues;\n    }\n    /**\n     * Execute the funcion for each value. Will stop when an execution returns false.\n     * @param {Function} f\n     * @returns {Boolean} false iff `f` return false for AnyVal execution, otherwise true\n     */\n    each(f) {\n        for (;;) {\n            const o = this.next();\n            if (o.done)\n                break;\n            if (f(o.value) === false)\n                return false;\n        }\n        return true;\n    }\n    /**\n     * Returns the reduction of sequence according the reducing function\n     *\n     * @param {*} f a reducing function\n     * @param {*} initialValue\n     */\n    reduce(f, initialValue) {\n        let o = this.next();\n        if (initialValue === undefined && !o.done) {\n            initialValue = o.value;\n            o = this.next();\n        }\n        while (!o.done) {\n            initialValue = f(initialValue, o.value);\n            o = this.next();\n        }\n        return initialValue;\n    }\n    /**\n     * Returns the number of matched items in the sequence\n     */\n    size() {\n        return this.reduce(((acc, _) => ++acc), 0);\n    }\n    [Symbol.iterator]() {\n        /* eslint-disable @typescript-eslint/no-unsafe-return */\n        return this;\n    }\n}\n","import { getOperator, initOptions, OperatorType, ProcessingMode } from \"./core\";\nimport { Lazy } from \"./lazy\";\nimport { assert, cloneDeep, intersection, isEmpty } from \"./util\";\n/**\n * Provides functionality for the mongoDB aggregation pipeline\n *\n * @param pipeline an Array of pipeline operators\n * @param options An optional Options to pass the aggregator\n * @constructor\n */\nexport class Aggregator {\n    constructor(pipeline, options) {\n        this.pipeline = pipeline;\n        this.options = initOptions(options);\n    }\n    /**\n     * Returns an `Lazy` iterator for processing results of pipeline\n     *\n     * @param {*} collection An array or iterator object\n     * @returns {Iterator} an iterator object\n     */\n    stream(collection) {\n        let iterator = Lazy(collection);\n        const mode = this.options.processingMode;\n        if (mode == ProcessingMode.CLONE_ALL ||\n            mode == ProcessingMode.CLONE_INPUT) {\n            iterator.map(cloneDeep);\n        }\n        const pipelineOperators = new Array();\n        if (!isEmpty(this.pipeline)) {\n            // run aggregation pipeline\n            for (const operator of this.pipeline) {\n                const operatorKeys = Object.keys(operator);\n                const opName = operatorKeys[0];\n                const call = getOperator(OperatorType.PIPELINE, opName, this.options);\n                assert(operatorKeys.length === 1 && !!call, `invalid pipeline operator ${opName}`);\n                pipelineOperators.push(opName);\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                iterator = call(iterator, operator[opName], this.options);\n            }\n        }\n        // operators that may share object graphs of inputs.\n        // we only need to clone the output for these since the objects will already be distinct for other operators.\n        if (mode == ProcessingMode.CLONE_OUTPUT ||\n            (mode == ProcessingMode.CLONE_ALL &&\n                !!intersection([[\"$group\", \"$unwind\"], pipelineOperators]).length)) {\n            iterator.map(cloneDeep);\n        }\n        return iterator;\n    }\n    /**\n     * Return the results of the aggregation as an array.\n     *\n     * @param {*} collection\n     * @param {*} query\n     */\n    run(collection) {\n        return this.stream(collection).value();\n    }\n}\n","import { Aggregator } from \"./aggregator\";\nimport { compose, Lazy } from \"./lazy\";\nimport { isObject } from \"./util\";\n/**\n * Cursor to iterate and perform filtering on matched objects.\n * This object must not be used directly. A cursor may be obtaine from calling `find()` on an instance of `Query`.\n *\n * @param collection The input source of the collection\n * @param predicate A predicate function to test documents\n * @param projection A projection criteria\n * @param options Options\n * @constructor\n */\nexport class Cursor {\n    constructor(source, predicate, projection, options) {\n        this.source = source;\n        this.predicate = predicate;\n        this.projection = projection;\n        this.options = options;\n        this.operators = [];\n        this.result = null;\n        this.buffer = [];\n    }\n    /** Returns the iterator from running the query */\n    fetch() {\n        if (this.result)\n            return this.result;\n        // add projection operator\n        if (isObject(this.projection)) {\n            this.operators.push({ $project: this.projection });\n        }\n        // filter collection\n        this.result = Lazy(this.source).filter(this.predicate);\n        if (this.operators.length > 0) {\n            this.result = new Aggregator(this.operators, this.options).stream(this.result);\n        }\n        return this.result;\n    }\n    /** Returns an iterator with the buffered data included */\n    fetchAll() {\n        const buffered = Lazy([...this.buffer]);\n        this.buffer = [];\n        return compose(buffered, this.fetch());\n    }\n    /**\n     * Return remaining objects in the cursor as an array. This method exhausts the cursor\n     * @returns {Array}\n     */\n    all() {\n        return this.fetchAll().value();\n    }\n    /**\n     * Returns the number of objects return in the cursor. This method exhausts the cursor\n     * @returns {Number}\n     */\n    count() {\n        return this.all().length;\n    }\n    /**\n     * Returns a cursor that begins returning results only after passing or skipping a number of documents.\n     * @param {Number} n the number of results to skip.\n     * @return {Cursor} Returns the cursor, so you can chain this call.\n     */\n    skip(n) {\n        this.operators.push({ $skip: n });\n        return this;\n    }\n    /**\n     * Constrains the size of a cursor's result set.\n     * @param {Number} n the number of results to limit to.\n     * @return {Cursor} Returns the cursor, so you can chain this call.\n     */\n    limit(n) {\n        this.operators.push({ $limit: n });\n        return this;\n    }\n    /**\n     * Returns results ordered according to a sort specification.\n     * @param {Object} modifier an object of key and values specifying the sort order. 1 for ascending and -1 for descending\n     * @return {Cursor} Returns the cursor, so you can chain this call.\n     */\n    sort(modifier) {\n        this.operators.push({ $sort: modifier });\n        return this;\n    }\n    /**\n     * Specifies the collation for the cursor returned by the `mingo.Query.find`\n     * @param {*} spec\n     */\n    collation(spec) {\n        this.options = Object.assign(Object.assign({}, this.options), { collation: spec });\n        return this;\n    }\n    /**\n     * Returns the next document in a cursor.\n     * @returns {Object | Boolean}\n     */\n    next() {\n        // yield value obtains in hasNext()\n        if (this.buffer.length > 0) {\n            return this.buffer.pop();\n        }\n        const o = this.fetch().next();\n        if (o.done)\n            return;\n        return o.value;\n    }\n    /**\n     * Returns true if the cursor has documents and can be iterated.\n     * @returns {boolean}\n     */\n    hasNext() {\n        // there is a value in the buffer\n        if (this.buffer.length > 0)\n            return true;\n        const o = this.fetch().next();\n        if (o.done)\n            return false;\n        this.buffer.push(o.value);\n        return true;\n    }\n    /**\n     * Applies a function to each document in a cursor and collects the return values in an array.\n     * @param fn\n     * @returns {Array}\n     */\n    map(fn) {\n        return this.all().map(fn);\n    }\n    /**\n     * Applies a JavaScript function for every document in a cursor.\n     * @param fn\n     */\n    forEach(fn) {\n        this.all().forEach(fn);\n    }\n    [Symbol.iterator]() {\n        return this.fetchAll();\n    }\n}\n","import { getOperator, initOptions, OperatorType } from \"./core\";\nimport { Cursor } from \"./cursor\";\nimport { assert, inArray, isObject, isOperator, normalize } from \"./util\";\n/**\n * An object used to filter input documents\n *\n * @param {Object} condition The condition for constructing predicates\n * @param {Options} options Options for use by operators\n * @constructor\n */\nexport class Query {\n    constructor(condition, options) {\n        this.condition = condition;\n        this.options = initOptions(options);\n        this.compiled = [];\n        this.compile();\n    }\n    compile() {\n        assert(isObject(this.condition), `query criteria must be an object: ${JSON.stringify(this.condition)}`);\n        const whereOperator = {};\n        for (const [field, expr] of Object.entries(this.condition)) {\n            if (\"$where\" === field) {\n                Object.assign(whereOperator, { field: field, expr: expr });\n            }\n            else if (inArray([\"$and\", \"$or\", \"$nor\", \"$expr\", \"$jsonSchema\"], field)) {\n                this.processOperator(field, field, expr);\n            }\n            else {\n                // normalize expression\n                assert(!isOperator(field), `unknown top level operator: ${field}`);\n                for (const [operator, val] of Object.entries(normalize(expr))) {\n                    this.processOperator(field, operator, val);\n                }\n            }\n            if (whereOperator.field) {\n                this.processOperator(whereOperator.field, whereOperator.field, whereOperator.expr);\n            }\n        }\n    }\n    processOperator(field, operator, value) {\n        const call = getOperator(OperatorType.QUERY, operator, this.options);\n        if (!call) {\n            throw new Error(`unknown operator ${operator}`);\n        }\n        const fn = call(field, value, this.options);\n        this.compiled.push(fn);\n    }\n    /**\n     * Checks if the object passes the query criteria. Returns true if so, false otherwise.\n     *\n     * @param obj The object to test\n     * @returns {boolean} True or false\n     */\n    test(obj) {\n        for (let i = 0, len = this.compiled.length; i < len; i++) {\n            if (!this.compiled[i](obj)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Returns a cursor to select matching documents from the input source.\n     *\n     * @param source A source providing a sequence of documents\n     * @param projection An optional projection criteria\n     * @returns {Cursor} A Cursor for iterating over the results\n     */\n    find(collection, projection) {\n        return new Cursor(collection, ((x) => this.test(x)), projection || {}, this.options);\n    }\n    /**\n     * Remove matched documents from the collection returning the remainder\n     *\n     * @param collection An array of documents\n     * @returns {Array} A new array with matching elements removed\n     */\n    remove(collection) {\n        return collection.reduce((acc, obj) => {\n            if (!this.test(obj))\n                acc.push(obj);\n            return acc;\n        }, []);\n    }\n}\n","import { groupBy, isEqual } from \"../../util\";\nimport { $push } from \"../accumulator\";\nimport { MILLIS_PER_DAY } from \"../expression/date/_internal\";\nimport { isUnbounded } from \"../pipeline/_internal\";\n// millis map to diffirent time units\nexport const MILLIS_PER_UNIT = {\n    week: MILLIS_PER_DAY * 7,\n    day: MILLIS_PER_DAY,\n    hour: MILLIS_PER_DAY / 24,\n    minute: 60000,\n    second: 1000,\n    millisecond: 1\n};\n// internal cache to store precomputed series once to avoid O(N^2) calls to over the collection\nconst memo = new WeakMap();\n/**\n * Caches all computed values in a window sequence for reuse.\n * This is only useful for operations with unbounded documents.\n */\nexport function withMemo(collection, expr, cacheFn, fn) {\n    // no caching done for bounded inputs\n    if (!isUnbounded(expr.parentExpr.output[expr.field].window)) {\n        return fn(cacheFn());\n    }\n    // first time using collection\n    if (!memo.has(collection)) {\n        memo.set(collection, { [expr.field]: cacheFn() });\n    }\n    const data = memo.get(collection);\n    // subsequent computations over the same collection.\n    if (data[expr.field] === undefined) {\n        data[expr.field] = cacheFn();\n    }\n    let failed = false;\n    try {\n        return fn(data[expr.field]);\n    }\n    catch (e) {\n        failed = true;\n    }\n    finally {\n        // cleanup on failure or last element in collection.\n        if (failed || expr.documentNumber === collection.length) {\n            delete data[expr.field];\n            if (Object.keys(data).length === 0)\n                memo.delete(collection);\n        }\n    }\n}\n/** Returns the position of a document in the $setWindowFields stage partition. */\nexport function rank(_, collection, expr, options, dense) {\n    return withMemo(collection, expr, () => {\n        const sortKey = \"$\" + Object.keys(expr.parentExpr.sortBy)[0];\n        const values = $push(collection, sortKey, options);\n        const groups = groupBy(values, ((_, n) => values[n]), options.hashFunction);\n        return { values, groups };\n    }, input => {\n        const { values, groups: partitions } = input;\n        // same number of paritions as length means all sort keys are unique\n        if (partitions.size == collection.length) {\n            return expr.documentNumber;\n        }\n        const current = values[expr.documentNumber - 1];\n        let i = 0;\n        let offset = 0;\n        // partition keys are already dense so just return the value on match\n        for (const key of partitions.keys()) {\n            if (isEqual(current, key)) {\n                return dense ? i + 1 : offset + 1;\n            }\n            i++;\n            offset += partitions.get(key).length;\n        }\n        // should be unreachable\n        throw new Error(\"rank: invalid return value. please submit a bug report.\");\n    });\n}\n","import { ComputeOptions, computeValue } from \"../../core\";\nimport { assert, groupBy, has } from \"../../util\";\n// lookup key for grouping\nconst ID_KEY = \"_id\";\n/**\n * Groups documents together for the purpose of calculating aggregate values based on a collection of documents.\n *\n * @param collection\n * @param expr\n * @param options\n * @returns {Array}\n */\nexport const $group = (collection, expr, options) => {\n    assert(has(expr, ID_KEY), \"a group specification must include an _id\");\n    const idExpr = expr[ID_KEY];\n    const copts = ComputeOptions.init(options);\n    return collection.transform(((coll) => {\n        const partitions = groupBy(coll, obj => computeValue(obj, idExpr, null, options), options.hashFunction);\n        // remove the group key\n        expr = Object.assign({}, expr);\n        delete expr[ID_KEY];\n        let i = -1;\n        const partitionKeys = Array.from(partitions.keys());\n        const size = partitions.size;\n        return () => {\n            if (++i === size)\n                return { done: true };\n            const groupId = partitionKeys[i];\n            const obj = {};\n            // exclude undefined key value\n            if (groupId !== undefined) {\n                obj[ID_KEY] = groupId;\n            }\n            // compute remaining keys in expression\n            for (const [key, val] of Object.entries(expr)) {\n                obj[key] = computeValue(partitions.get(groupId), val, key, copts.update(null, { groupId }));\n            }\n            return { value: obj, done: false };\n        };\n    }));\n};\n","import { compare, groupBy, into, isEmpty, isObject, isString, resolve } from \"../../util\";\n/**\n * Takes all input documents and returns them in a stream of sorted documents.\n *\n * @param collection\n * @param sortKeys\n * @param  {Object} options\n * @returns {*}\n */\nexport const $sort = (collection, sortKeys, options) => {\n    if (isEmpty(sortKeys) || !isObject(sortKeys))\n        return collection;\n    let cmp = compare;\n    // check for collation spec on the options\n    const collationSpec = options.collation;\n    // use collation comparator if provided\n    if (isObject(collationSpec) && isString(collationSpec.locale)) {\n        cmp = collationComparator(collationSpec);\n    }\n    return collection.transform((coll) => {\n        const modifiers = Object.keys(sortKeys);\n        for (const key of modifiers.reverse()) {\n            const groups = groupBy(coll, (obj) => resolve(obj, key), options.hashFunction);\n            const sortedKeys = Array.from(groups.keys()).sort(cmp);\n            if (sortKeys[key] === -1)\n                sortedKeys.reverse();\n            // reuse collection so the data is available for the next iteration of the sort modifiers.\n            coll = [];\n            sortedKeys.reduce((acc, key) => into(acc, groups.get(key)), coll);\n        }\n        return coll;\n    });\n};\n// MongoDB collation strength to JS localeCompare sensitivity mapping.\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare\nconst COLLATION_STRENGTH = {\n    // Only strings that differ in base letters compare as unequal. Examples: a ≠ b, a = á, a = A.\n    1: \"base\",\n    //  Only strings that differ in base letters or accents and other diacritic marks compare as unequal.\n    // Examples: a ≠ b, a ≠ á, a = A.\n    2: \"accent\",\n    // Strings that differ in base letters, accents and other diacritic marks, or case compare as unequal.\n    // Other differences may also be taken into consideration. Examples: a ≠ b, a ≠ á, a ≠ A\n    3: \"variant\"\n    // case - Only strings that differ in base letters or case compare as unequal. Examples: a ≠ b, a = á, a ≠ A.\n};\n/**\n * Creates a comparator function for the given collation spec. See https://docs.mongodb.com/manual/reference/collation/\n *\n * @param spec {Object} The MongoDB collation spec.\n * {\n *   locale: string,\n *   caseLevel: boolean,\n *   caseFirst: string,\n *   strength: int,\n *   numericOrdering: boolean,\n *   alternate: string,\n *   maxVariable: never, // unsupported\n *   backwards: never // unsupported\n * }\n */\nfunction collationComparator(spec) {\n    const localeOpt = {\n        sensitivity: COLLATION_STRENGTH[spec.strength || 3],\n        caseFirst: spec.caseFirst === \"off\" ? \"false\" : spec.caseFirst || \"false\",\n        numeric: spec.numericOrdering || false,\n        ignorePunctuation: spec.alternate === \"shifted\"\n    };\n    // when caseLevel is true for strength  1:base and 2:accent, bump sensitivity to the nearest that supports case comparison\n    if ((spec.caseLevel || false) === true) {\n        if (localeOpt.sensitivity === \"base\")\n            localeOpt.sensitivity = \"case\";\n        if (localeOpt.sensitivity === \"accent\")\n            localeOpt.sensitivity = \"variant\";\n    }\n    const collator = new Intl.Collator(spec.locale, localeOpt);\n    return (a, b) => {\n        // non strings\n        if (!isString(a) || !isString(b))\n            return compare(a, b);\n        // only for strings\n        const i = collator.compare(a, b);\n        if (i < 0)\n            return -1;\n        if (i > 0)\n            return 1;\n        return 0;\n    };\n}\n","// $setWindowFields -  https://docs.mongodb.com/manual/reference/operator/aggregation/setWindowFields/\nimport { getOperator, initOptions, OperatorType } from \"../../core\";\nimport { compose, Lazy } from \"../../lazy\";\nimport { assert, isNumber, isOperator, isString } from \"../../util\";\nimport { $function } from \"../expression/custom/function\";\nimport { $dateAdd } from \"../expression/date/dateAdd\";\nimport { isUnbounded } from \"./_internal\";\nimport { $addFields } from \"./addFields\";\nimport { $group } from \"./group\";\nimport { $sort } from \"./sort\";\n// Operators that require 'sortBy' option.\nconst SORT_REQUIRED_OPS = new Set([\n    \"$denseRank\",\n    \"$documentNumber\",\n    \"$first\",\n    \"$last\",\n    \"$linearFill\",\n    \"$rank\",\n    \"$shift\"\n]);\n// Operators that require unbounded 'window' option.\nconst WINDOW_UNBOUNDED_OPS = new Set([\n    \"$denseRank\",\n    \"$expMovingAvg\",\n    \"$linearFill\",\n    \"$locf\",\n    \"$rank\",\n    \"$shift\"\n]);\n/**\n * Randomly selects the specified number of documents from its input. The given iterator must have finite values\n *\n * @param  {Iterator} collection\n * @param  {Object} expr\n * @param  {Options} options\n * @return {*}\n */\nexport const $setWindowFields = (collection, expr, options) => {\n    options = initOptions(options);\n    options.context.addExpressionOps({ $function });\n    // validate inputs early since this can be an expensive operation.\n    for (const outputExpr of Object.values(expr.output)) {\n        const keys = Object.keys(outputExpr);\n        const op = keys.find(isOperator);\n        assert(!!getOperator(OperatorType.WINDOW, op, options) ||\n            !!getOperator(OperatorType.ACCUMULATOR, op, options), `'${op}' is not a valid window operator`);\n        assert(keys.length > 0 &&\n            keys.length <= 2 &&\n            (keys.length == 1 || keys.includes(\"window\")), \"'output' option should have a single window operator.\");\n        if (outputExpr === null || outputExpr === void 0 ? void 0 : outputExpr.window) {\n            const { documents, range } = outputExpr.window;\n            assert((!!documents && !range) ||\n                (!documents && !!range) ||\n                (!documents && !range), \"'window' option supports only one of 'documents' or 'range'.\");\n        }\n    }\n    // we sort first if required\n    if (expr.sortBy) {\n        collection = $sort(collection, expr.sortBy, options);\n    }\n    // then partition collection\n    collection = $group(collection, {\n        _id: expr.partitionBy,\n        items: { $push: \"$$CURRENT\" }\n    }, options);\n    // transform values\n    return collection.transform(((partitions) => {\n        // let iteratorIndex = 0;\n        const iterators = [];\n        const outputConfig = [];\n        for (const [field, outputExpr] of Object.entries(expr.output)) {\n            const op = Object.keys(outputExpr).find(isOperator);\n            const config = {\n                operatorName: op,\n                func: {\n                    left: getOperator(OperatorType.ACCUMULATOR, op, options),\n                    right: getOperator(OperatorType.WINDOW, op, options)\n                },\n                args: outputExpr[op],\n                field: field,\n                window: outputExpr.window\n            };\n            // sortBy option required for specific operators or bounded window.\n            assert(!!expr.sortBy || !(SORT_REQUIRED_OPS.has(op) || !config.window), `${SORT_REQUIRED_OPS.has(op) ? `'${op}'` : \"bounded window operation\"} requires a sortBy.`);\n            // window must be unbounded for specific operators.\n            assert(!config.window || !WINDOW_UNBOUNDED_OPS.has(op), `${op} does not accept a 'window' field.`);\n            outputConfig.push(config);\n        }\n        // each parition maintains its own closure to process the documents in the window.\n        partitions.forEach(((group) => {\n            // get the items to process\n            const items = group.items;\n            // create an iterator per group.\n            // we need the index of each document so we track it using a special field.\n            let iterator = Lazy(items);\n            // results map\n            const windowResultMap = {};\n            for (const config of outputConfig) {\n                const { func, args, field, window } = config;\n                const makeResultFunc = (getItemsFn) => {\n                    // closure for object index within the partition\n                    let index = -1;\n                    return (obj) => {\n                        ++index;\n                        // process accumulator function\n                        if (func.left) {\n                            return func.left(getItemsFn(obj, index), args, options);\n                        }\n                        else if (func.right) {\n                            // OR process 'window' function\n                            return func.right(obj, getItemsFn(obj, index), {\n                                parentExpr: expr,\n                                inputExpr: args,\n                                documentNumber: index + 1,\n                                field\n                            }, \n                            // must use raw options only since it operates over a collection.\n                            options);\n                        }\n                    };\n                };\n                if (window) {\n                    const { documents, range, unit } = window;\n                    // TODO: fix the meaning of numeric values in range.\n                    //  See definition: https://www.mongodb.com/docs/manual/reference/operator/aggregation/setWindowFields/#std-label-setWindowFields-range\n                    //  - A number to add to the value of the sortBy field for the current document.\n                    //  - A document is in the window if the sortBy field value is inclusively within the lower and upper boundaries.\n                    // TODO: Need to reconcile the two above statments from the doc to implement 'range' option correctly.\n                    const boundary = documents || range;\n                    if (!isUnbounded(window)) {\n                        const [begin, end] = boundary;\n                        const toBeginIndex = (currentIndex) => {\n                            if (begin == \"current\")\n                                return currentIndex;\n                            if (begin == \"unbounded\")\n                                return 0;\n                            return Math.max(begin + currentIndex, 0);\n                        };\n                        const toEndIndex = (currentIndex) => {\n                            if (end == \"current\")\n                                return currentIndex + 1;\n                            if (end == \"unbounded\")\n                                return items.length;\n                            return end + currentIndex + 1;\n                        };\n                        const getItems = (current, index) => {\n                            // handle string boundaries or documents\n                            if (!!documents || boundary.every(isString)) {\n                                return items.slice(toBeginIndex(index), toEndIndex(index));\n                            }\n                            // handle range with numeric boundary values\n                            const sortKey = Object.keys(expr.sortBy)[0];\n                            let lower;\n                            let upper;\n                            if (unit) {\n                                // we are dealing with datetimes\n                                const getTime = (amount) => {\n                                    return $dateAdd(current, {\n                                        startDate: new Date(current[sortKey]),\n                                        unit,\n                                        amount\n                                    }, options).getTime();\n                                };\n                                lower = isNumber(begin) ? getTime(begin) : -Infinity;\n                                upper = isNumber(end) ? getTime(end) : Infinity;\n                            }\n                            else {\n                                const currentValue = current[sortKey];\n                                lower = isNumber(begin) ? currentValue + begin : -Infinity;\n                                upper = isNumber(end) ? currentValue + end : Infinity;\n                            }\n                            let array = items;\n                            if (begin == \"current\")\n                                array = items.slice(index);\n                            if (end == \"current\")\n                                array = items.slice(0, index + 1);\n                            // look within the boundary and filter down\n                            return array.filter((o) => {\n                                const n = +o[sortKey];\n                                return n >= lower && n <= upper;\n                            });\n                        };\n                        windowResultMap[field] = makeResultFunc(getItems);\n                    }\n                }\n                // default action is to utilize the entire set of items\n                if (!windowResultMap[field]) {\n                    windowResultMap[field] = makeResultFunc(_ => items);\n                }\n                // invoke add fields to get the desired behaviour using a custom function.\n                iterator = $addFields(iterator, {\n                    [field]: {\n                        $function: {\n                            body: (obj) => windowResultMap[field](obj),\n                            args: [\"$$CURRENT\"]\n                        }\n                    }\n                }, options);\n            }\n            // add to iterator list\n            iterators.push(iterator);\n        }));\n        return compose(...iterators);\n    }));\n};\n","/**\n * Predicates used for Query and Expression operators.\n */\nimport { computeValue } from \"../core\";\nimport { Query } from \"../query\";\nimport { compare as mingoCmp, ensureArray, flatten, getType, inArray, intersection, isArray, isBoolean, isDate, isEmpty, isEqual, isNil, isNumber, isObject, isOperator, isRegExp, isString, MAX_INT, MAX_LONG, MIN_INT, MIN_LONG, resolve, truthy } from \"../util\";\n/**\n * Returns a query operator created from the predicate\n *\n * @param predicate Predicate function\n */\nexport function createQueryOperator(predicate) {\n    const f = (selector, value, options) => {\n        const opts = { unwrapArray: true };\n        const depth = Math.max(1, selector.split(\".\").length - 1);\n        return (obj) => {\n            // value of field must be fully resolved.\n            const lhs = resolve(obj, selector, opts);\n            return predicate(lhs, value, Object.assign(Object.assign({}, options), { depth }));\n        };\n    };\n    f.op = \"query\";\n    return f; // as QueryOperator;\n}\n/**\n * Returns an expression operator created from the predicate\n *\n * @param predicate Predicate function\n */\nexport function createExpressionOperator(predicate) {\n    return (obj, expr, options) => {\n        const args = computeValue(obj, expr, null, options);\n        return predicate(...args);\n    };\n}\n/**\n * Checks that two values are equal.\n *\n * @param a         The lhs operand as resolved from the object by the given selector\n * @param b         The rhs operand provided by the user\n * @returns {*}\n */\nexport function $eq(a, b, options) {\n    // start with simple equality check\n    if (isEqual(a, b))\n        return true;\n    // https://docs.mongodb.com/manual/tutorial/query-for-null-fields/\n    if (isNil(a) && isNil(b))\n        return true;\n    // check\n    if (a instanceof Array) {\n        const eq = isEqual.bind(null, b);\n        return a.some(eq) || flatten(a, options === null || options === void 0 ? void 0 : options.depth).some(eq);\n    }\n    return false;\n}\n/**\n * Matches all values that are not equal to the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nexport function $ne(a, b, options) {\n    return !$eq(a, b, options);\n}\n/**\n * Matches any of the values that exist in an array specified in the query.\n *\n * @param a\n * @param b\n * @returns {*}\n */\nexport function $in(a, b, options) {\n    // queries for null should be able to find undefined fields\n    if (isNil(a))\n        return b.some(v => v === null);\n    return intersection([ensureArray(a), b], options === null || options === void 0 ? void 0 : options.hashFunction).length > 0;\n}\n/**\n * Matches values that do not exist in an array specified to the query.\n *\n * @param a\n * @param b\n * @returns {*|boolean}\n */\nexport function $nin(a, b, options) {\n    return !$in(a, b, options);\n}\n/**\n * Matches values that are less than the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nexport function $lt(a, b, options) {\n    return compare(a, b, (x, y) => mingoCmp(x, y) < 0);\n}\n/**\n * Matches values that are less than or equal to the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nexport function $lte(a, b, options) {\n    return compare(a, b, (x, y) => mingoCmp(x, y) <= 0);\n}\n/**\n * Matches values that are greater than the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nexport function $gt(a, b, options) {\n    return compare(a, b, (x, y) => mingoCmp(x, y) > 0);\n}\n/**\n * Matches values that are greater than or equal to the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nexport function $gte(a, b, options) {\n    return compare(a, b, (x, y) => mingoCmp(x, y) >= 0);\n}\n/**\n * Performs a modulo operation on the value of a field and selects documents with a specified result.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nexport function $mod(a, b, options) {\n    return ensureArray(a).some(((x) => b.length === 2 && x % b[0] === b[1]));\n}\n/**\n * Selects documents where values match a specified regular expression.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nexport function $regex(a, b, options) {\n    const lhs = ensureArray(a);\n    const match = (x) => isString(x) && truthy(b.exec(x), options === null || options === void 0 ? void 0 : options.useStrictMode);\n    return lhs.some(match) || flatten(lhs, 1).some(match);\n}\n/**\n * Matches documents that have the specified field.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nexport function $exists(a, b, options) {\n    return (((b === false || b === 0) && a === undefined) ||\n        ((b === true || b === 1) && a !== undefined));\n}\n/**\n * Matches arrays that contain all elements specified in the query.\n *\n * @param values\n * @param queries\n * @returns boolean\n */\nexport function $all(values, queries, options) {\n    if (!isArray(values) ||\n        !isArray(queries) ||\n        !values.length ||\n        !queries.length) {\n        return false;\n    }\n    let matched = true;\n    for (const query of queries) {\n        // no need to check all the queries.\n        if (!matched)\n            break;\n        if (isObject(query) && inArray(Object.keys(query), \"$elemMatch\")) {\n            matched = $elemMatch(values, query[\"$elemMatch\"], options);\n        }\n        else if (query instanceof RegExp) {\n            matched = values.some(s => typeof s === \"string\" && query.test(s));\n        }\n        else {\n            matched = values.some(v => isEqual(query, v));\n        }\n    }\n    return matched;\n}\n/**\n * Selects documents if the array field is a specified size.\n *\n * @param a\n * @param b\n * @returns {*|boolean}\n */\nexport function $size(a, b, options) {\n    return Array.isArray(a) && a.length === b;\n}\nfunction isNonBooleanOperator(name) {\n    return isOperator(name) && [\"$and\", \"$or\", \"$nor\"].indexOf(name) === -1;\n}\n/**\n * Selects documents if element in the array field matches all the specified $elemMatch condition.\n *\n * @param a {Array} element to match against\n * @param b {Object} subquery\n */\nexport function $elemMatch(a, b, options) {\n    // should return false for non-matching input\n    if (isArray(a) && !isEmpty(a)) {\n        let format = (x) => x;\n        let criteria = b;\n        // If we find a boolean operator in the subquery, we fake a field to point to it. This is an\n        // attempt to ensure that it is a valid criteria. We cannot make this substitution for operators\n        // like $and/$or/$nor; as otherwise, this faking will break our query.\n        if (Object.keys(b).every(isNonBooleanOperator)) {\n            criteria = { temp: b };\n            format = x => ({ temp: x });\n        }\n        const query = new Query(criteria, options);\n        for (let i = 0, len = a.length; i < len; i++) {\n            if (query.test(format(a[i]))) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n// helper functions\nconst isNull = (a) => a === null;\nconst isInt = (a) => isNumber(a) &&\n    a >= MIN_INT &&\n    a <= MAX_INT &&\n    a.toString().indexOf(\".\") === -1;\nconst isLong = (a) => isNumber(a) &&\n    a >= MIN_LONG &&\n    a <= MAX_LONG &&\n    a.toString().indexOf(\".\") === -1;\n/** Mapping of type to predicate */\nconst compareFuncs = {\n    array: isArray,\n    bool: isBoolean,\n    boolean: isBoolean,\n    date: isDate,\n    decimal: isNumber,\n    double: isNumber,\n    int: isInt,\n    long: isLong,\n    number: isNumber,\n    null: isNull,\n    object: isObject,\n    regex: isRegExp,\n    regexp: isRegExp,\n    string: isString,\n    // added for completeness\n    undefined: isNil,\n    function: (_) => {\n        throw new Error(\"unsupported type key `function`.\");\n    },\n    // Mongo identifiers\n    1: isNumber,\n    2: isString,\n    3: isObject,\n    4: isArray,\n    6: isNil,\n    8: isBoolean,\n    9: isDate,\n    10: isNull,\n    11: isRegExp,\n    16: isInt,\n    18: isLong,\n    19: isNumber //decimal\n};\n/**\n * Selects documents if a field is of the specified type.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction compareType(a, b, _) {\n    const f = compareFuncs[b];\n    return f ? f(a) : false;\n}\n/**\n * Selects documents if a field is of the specified type.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nexport function $type(a, b, options) {\n    return Array.isArray(b)\n        ? b.findIndex(t => compareType(a, t, options)) >= 0\n        : compareType(a, b, options);\n}\nfunction compare(a, b, f) {\n    return ensureArray(a).some(x => getType(x) === getType(b) && f(x, b));\n}\n","// Array Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#array-expression-operators\nimport { $nin as __nin, createExpressionOperator } from \"../../_predicates\";\n/**\n * Returns a boolean indicating whether a specified value is not an array.\n * Note: This expression operator is missing from the documentation\n *\n * @param {Object} obj\n * @param {Array} expr\n */\nexport const $nin = createExpressionOperator(__nin);\n","import { computeValue } from \"../../../core\";\nimport { assert, isArray, isNil, isNumber } from \"../../../util\";\nexport const bitwise = (op, compute) => (obj, expr, options) => {\n    assert(isArray(expr), `${op}: expression must be an array.`);\n    const nums = computeValue(obj, expr, null, options);\n    if (nums.some(isNil))\n        return null;\n    assert(nums.every(isNumber), `${op}: expression must evalue to array of numbers.`);\n    return compute(nums);\n};\n","// Bitwise Operators: https://www.mongodb.com/docs/manual/reference/operator/aggregation/bitAnd/#mongodb-expression-exp\nimport { bitwise } from \"./_internal\";\n/**\n * Returns the result of a bitwise and operation on an array of int or long values.\n *\n * @param obj RawObject from collection\n * @param expr Right hand side expression of operator\n * @returns {Number}\n */\nexport const $bitAnd = bitwise(\"$bitAnd\", nums => nums.reduce((a, b) => a & b, -1));\n","// Bitwise Operators: https://www.mongodb.com/docs/manual/reference/operator/aggregation/bitOr/#mongodb-expression-exp\nimport { bitwise } from \"./_internal\";\n/**\n * Returns the result of a bitwise or operation on an array of int or long values.\n *\n * @param obj RawObject from collection\n * @param expr Right hand side expression of operator\n * @returns {Number}\n */\nexport const $bitOr = bitwise(\"$bitOr\", nums => nums.reduce((a, b) => a | b, 0));\n","// Bitwise Operators: https://www.mongodb.com/docs/manual/reference/operator/aggregation/bitNot/#mongodb-expression-exp\nimport { bitwise } from \"./_internal\";\n/**\n * Returns the result of a bitwise xor (exclusive or) operation on an array of int and long values.\n *\n * @param obj RawObject from collection\n * @param expr Right hand side expression of operator\n * @returns {Number}\n */\nexport const $bitXor = bitwise(\"$bitXor\", nums => nums.reduce((a, b) => a ^ b, 0));\n","// Comparison Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#comparison-expression-operators\nimport { $eq as __eq, createExpressionOperator } from \"../../_predicates\";\n/**\n * Matches values that are equal to a specified value.\n */\nexport const $eq = createExpressionOperator(__eq);\n","// Comparison Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#comparison-expression-operators\nimport { $gt as __gt, createExpressionOperator } from \"../../_predicates\";\n/**\n * Matches values that are greater than a specified value.\n */\nexport const $gt = createExpressionOperator(__gt);\n","// Comparison Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#comparison-expression-operators\nimport { $gte as __gte, createExpressionOperator } from \"../../_predicates\";\n/**\n * \tMatches values that are greater than or equal to a specified value.\n */\nexport const $gte = createExpressionOperator(__gte);\n","// Comparison Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#comparison-expression-operators\nimport { $lt as __lt, createExpressionOperator } from \"../../_predicates\";\n/**\n * Matches values that are less than the value specified in the query.\n */\nexport const $lt = createExpressionOperator(__lt);\n","// Comparison Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#comparison-expression-operators\nimport { $lte as __lte, createExpressionOperator } from \"../../_predicates\";\n/**\n * Matches values that are less than or equal to the value specified in the query.\n */\nexport const $lte = createExpressionOperator(__lte);\n","// Comparison Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#comparison-expression-operators\nimport { $ne as __ne, createExpressionOperator } from \"../../_predicates\";\n/**\n * Matches all values that are not equal to the value specified in the query.\n */\nexport const $ne = createExpressionOperator(__ne);\n","// Date Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#date-expression-operators\nimport { computeValue } from \"../../../core\";\nimport { DATE_PART_INTERVAL, isLeapYear, MINUTES_PER_HOUR, parseTimezone } from \"./_internal\";\nconst DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nconst getDaysInMonth = (date) => {\n    return date.month == 2 && isLeapYear(date.year)\n        ? 29\n        : DAYS_IN_MONTH[date.month - 1];\n};\n/**\n * Constructs and returns a Date object given the date’s constituent properties.\n *\n * @param obj The document\n * @param expr The date expression\n * @param options Options\n */\nexport const $dateFromParts = (obj, expr, options) => {\n    const args = computeValue(obj, expr, null, options);\n    const minuteOffset = parseTimezone(args.timezone);\n    // assign default and adjust value ranges of the different parts\n    for (let i = DATE_PART_INTERVAL.length - 1, remainder = 0; i >= 0; i--) {\n        const datePartInterval = DATE_PART_INTERVAL[i];\n        const k = datePartInterval[0];\n        const min = datePartInterval[1];\n        const max = datePartInterval[2];\n        // add remainder from previous part. units should already be correct\n        let part = (args[k] || 0) + remainder;\n        // reset remainder now that it's been used.\n        remainder = 0;\n        // 1. compute the remainder for the next part\n        // 2. adjust the current part to a valid range\n        // 3. assign back to 'args'\n        const limit = max + 1;\n        // invert timezone to adjust the hours to UTC\n        if (k == \"hour\")\n            part += Math.floor(minuteOffset / MINUTES_PER_HOUR) * -1;\n        if (k == \"minute\")\n            part += (minuteOffset % MINUTES_PER_HOUR) * -1;\n        // smaller than lower bound\n        if (part < min) {\n            const delta = min - part;\n            remainder = -1 * Math.ceil(delta / limit);\n            part = limit - (delta % limit);\n        }\n        else if (part > max) {\n            // offset with the 'min' value to adjust non-zero date parts correctly\n            part += min;\n            remainder = Math.trunc(part / limit);\n            part %= limit;\n        }\n        // reassign\n        args[k] = part;\n    }\n    // adjust end of month to correctly handle overflows\n    args.day = Math.min(args.day, getDaysInMonth(args));\n    return new Date(Date.UTC(args.year, args.month - 1, args.day, args.hour, args.minute, args.second, args.millisecond));\n};\n","// Date Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#date-expression-operators\nimport { computeValue } from \"../../../core\";\nimport { assert, isNil, isObject } from \"../../../util\";\nimport { adjustDate, DATE_FORMAT, DATE_SYM_TABLE, MINUTES_PER_HOUR, parseTimezone, regexQuote, regexStrip } from \"./_internal\";\nconst buildMap = (letters, sign) => {\n    const h = {};\n    letters.split(\"\").forEach((v, i) => (h[v] = sign * (i + 1)));\n    return h;\n};\nconst TZ_LETTER_OFFSETS = Object.assign(Object.assign(Object.assign({}, buildMap(\"ABCDEFGHIKLM\", 1)), buildMap(\"NOPQRSTUVWXY\", -1)), { Z: 0 });\n/**\n * Converts a date/time string to a date object.\n * @param obj\n * @param expr\n */\nexport const $dateFromString = (obj, expr, options) => {\n    const args = computeValue(obj, expr, null, options);\n    args.format = args.format || DATE_FORMAT;\n    args.onNull = args.onNull || null;\n    let dateString = args.dateString;\n    if (isNil(dateString))\n        return args.onNull;\n    // collect all separators of the format string\n    const separators = args.format.split(/%[YGmdHMSLuVzZ]/);\n    separators.reverse();\n    const matches = args.format.match(/(%%|%Y|%G|%m|%d|%H|%M|%S|%L|%u|%V|%z|%Z)/g);\n    const dateParts = {};\n    // holds the valid regex of parts that matches input date string\n    let expectedPattern = \"\";\n    for (let i = 0, len = matches.length; i < len; i++) {\n        const formatSpecifier = matches[i];\n        const props = DATE_SYM_TABLE[formatSpecifier];\n        if (isObject(props)) {\n            // get pattern and alias from table\n            const m = props.re.exec(dateString);\n            // get the next separtor\n            const delimiter = separators.pop() || \"\";\n            if (m !== null) {\n                // store and cut out matched part\n                dateParts[props.name] = /^\\d+$/.exec(m[0]) ? parseInt(m[0]) : m[0];\n                dateString =\n                    dateString.substr(0, m.index) +\n                        dateString.substr(m.index + m[0].length);\n                // construct expected pattern\n                expectedPattern +=\n                    regexQuote(delimiter) + regexStrip(props.re.toString());\n            }\n            else {\n                dateParts[props.name] = null;\n            }\n        }\n    }\n    // 1. validate all required date parts exists\n    // 2. validate original dateString against expected pattern.\n    if (isNil(dateParts.year) ||\n        isNil(dateParts.month) ||\n        isNil(dateParts.day) ||\n        !new RegExp(\"^\" + expectedPattern + \"[A-Z]?$\").exec(args.dateString)) {\n        return args.onError;\n    }\n    const m = args.dateString.match(/([A-Z])$/);\n    assert(\n    // only one of in-date timeone or timezone argument but not both.\n    !(m && args.timezone), `$dateFromString: you cannot pass in a date/time string with time zone information ('${m && m[0]}') together with a timezone argument`);\n    const minuteOffset = m\n        ? TZ_LETTER_OFFSETS[m[0]] * MINUTES_PER_HOUR\n        : parseTimezone(args.timezone);\n    // create the date. month is 0-based in Date\n    const d = new Date(Date.UTC(dateParts.year, dateParts.month - 1, dateParts.day, 0, 0, 0));\n    if (!isNil(dateParts.hour))\n        d.setUTCHours(dateParts.hour);\n    if (!isNil(dateParts.minute))\n        d.setUTCMinutes(dateParts.minute);\n    if (!isNil(dateParts.second))\n        d.setUTCSeconds(dateParts.second);\n    if (!isNil(dateParts.millisecond))\n        d.setUTCMilliseconds(dateParts.millisecond);\n    // adjust to the correct represention for UTC\n    adjustDate(d, -minuteOffset);\n    return d;\n};\n","/**\n * String Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#string-expression-operators\n */\nimport { computeValue } from \"../../../core\";\nimport { assert, isNumber, isString } from \"../../../util\";\nconst UTF8_MASK = [0xc0, 0xe0, 0xf0];\n// encodes a unicode code point to a utf8 byte sequence\n// https://encoding.spec.whatwg.org/#utf-8\nfunction toUtf8(n) {\n    if (n < 0x80)\n        return [n];\n    let count = (n < 0x0800 && 1) || (n < 0x10000 && 2) || 3;\n    const offset = UTF8_MASK[count - 1];\n    const utf8 = [(n >> (6 * count)) + offset];\n    while (count > 0)\n        utf8.push(0x80 | ((n >> (6 * --count)) & 0x3f));\n    return utf8;\n}\nfunction utf8Encode(s) {\n    const buf = [];\n    for (let i = 0, len = s.length; i < len; i++) {\n        buf.push(toUtf8(s.codePointAt(i)));\n    }\n    return buf;\n}\n/**\n * Returns a substring of a string, starting at a specified index position and including the specified number of characters.\n * The index is zero-based.\n *\n * @param obj\n * @param expr\n * @returns {string}\n */\nexport const $substrBytes = (obj, expr, options) => {\n    const args = computeValue(obj, expr, null, options);\n    const s = args[0];\n    const index = args[1];\n    const count = args[2];\n    assert(isString(s) &&\n        isNumber(index) &&\n        index >= 0 &&\n        isNumber(count) &&\n        count >= 0, \"$substrBytes: invalid arguments\");\n    const buf = utf8Encode(s);\n    const validIndex = [];\n    let acc = 0;\n    for (let i = 0; i < buf.length; i++) {\n        validIndex.push(acc);\n        acc += buf[i].length;\n    }\n    const begin = validIndex.indexOf(index);\n    const end = validIndex.indexOf(index + count);\n    assert(begin > -1 && end > -1, \"$substrBytes: invalid range, start or end index is a UTF-8 continuation byte.\");\n    return s.substring(begin, end);\n};\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { computeValue } from \"../../../core\";\nconst FIXED_POINTS = {\n    undefined: null,\n    null: null,\n    NaN: NaN,\n    Infinity: new Error(),\n    \"-Infinity\": new Error()\n};\n/**\n * Returns an operator for a given trignometric function\n *\n * @param f The trignometric function\n */\nexport function createTrignometryOperator(f, fixedPoints = FIXED_POINTS) {\n    const fp = Object.assign({}, FIXED_POINTS, fixedPoints);\n    const keySet = new Set(Object.keys(fp));\n    return (obj, expr, options) => {\n        const n = computeValue(obj, expr, null, options);\n        if (keySet.has(`${n}`)) {\n            const res = fp[`${n}`];\n            if (res instanceof Error) {\n                throw new Error(`cannot apply $${f.name} to -inf, value must in (-inf,inf)`);\n            }\n            return res;\n        }\n        return f(n);\n    };\n}\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the inverse cosine (arc cosine) of a value in radians. */\nexport const $acos = createTrignometryOperator(Math.acos, {\n    Infinity: Infinity,\n    0: new Error(),\n});\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the inverse hyperbolic cosine (hyperbolic arc cosine) of a value in radians. */\nexport const $acosh = createTrignometryOperator(Math.acosh, {\n    Infinity: Infinity,\n    0: new Error(),\n});\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the inverse sin (arc sine) of a value in radians. */\nexport const $asin = createTrignometryOperator(Math.asin);\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the inverse hyperbolic sine (hyperbolic arc sine) of a value in radians. */\nexport const $asinh = createTrignometryOperator(Math.asinh, {\n    Infinity: Infinity,\n    \"-Infinity\": -Infinity,\n});\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the inverse tangent (arc tangent) of a value in radians. */\nexport const $atan = createTrignometryOperator(Math.atan);\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the inverse hyperbolic tangent (hyperbolic arc tangent) of a value in radians. */\nexport const $atanh = createTrignometryOperator(Math.atanh, {\n    1: Infinity,\n    \"-1\": -Infinity,\n});\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the cosine of a value that is measured in radians. */\nexport const $cos = createTrignometryOperator(Math.cos);\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the hyperbolic cosine of a value that is measured in radians. */\nexport const $cosh = createTrignometryOperator(Math.cosh, {\n    \"-Infinity\": Infinity,\n    Infinity: Infinity,\n    // [Math.PI]: -1,\n});\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\nconst RADIANS_FACTOR = Math.PI / 180;\n/** Converts a value from degrees to radians. */\nexport const $degreesToRadians = createTrignometryOperator((n) => n * RADIANS_FACTOR, {\n    Infinity: Infinity,\n    \"-Infinity\": Infinity,\n});\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\nconst DEGREES_FACTOR = 180 / Math.PI;\n/** Converts a value from radians to degrees. */\nexport const $radiansToDegrees = createTrignometryOperator((n) => n * DEGREES_FACTOR, {\n    Infinity: Infinity,\n    \"-Infinity\": -Infinity,\n});\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the sine of a value that is measured in radians. */\nexport const $sin = createTrignometryOperator(Math.sin);\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the hyperbolic sine of a value that is measured in radians. */\nexport const $sinh = createTrignometryOperator(Math.sinh, {\n    \"-Infinity\": -Infinity,\n    Infinity: Infinity,\n});\n","// Trignometry Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators\nimport { createTrignometryOperator } from \"./_internal\";\n/** Returns the tangent of a value that is measured in radians. */\nexport const $tan = createTrignometryOperator(Math.tan);\n","/**\n * Type Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#type-expression-operators\n */\nimport { computeValue } from \"../../../core\";\nimport { isNil, isString } from \"../../../util\";\n/**\n * Converts a value to a boolean.\n *\n * @param obj\n * @param expr\n */\nexport const $toBool = (obj, expr, options) => {\n    const val = computeValue(obj, expr, null, options);\n    if (isNil(val))\n        return null;\n    if (isString(val))\n        return true;\n    return Boolean(val);\n};\n","import { ComputeOptions, computeValue, getOperator, OperatorType } from \"../../core\";\nimport { assert, ensureArray, filterMissing, has, inArray, into, isEmpty, isNil, isNumber, isObject, isOperator, isString, merge, notInArray, removeValue, resolveGraph, setValue } from \"../../util\";\n/**\n * Reshapes a document stream.\n * $project can rename, add, or remove fields as well as create computed values and sub-documents.\n *\n * @param collection\n * @param expr\n * @param opt\n * @returns {Array}\n */\nexport const $project = (collection, expr, options) => {\n    if (isEmpty(expr))\n        return collection;\n    // result collection\n    let expressionKeys = Object.keys(expr);\n    let idOnlyExcluded = false;\n    // validate inclusion and exclusion\n    validateExpression(expr, options);\n    const ID_KEY = options.idKey;\n    if (inArray(expressionKeys, ID_KEY)) {\n        const id = expr[ID_KEY];\n        if (id === 0 || id === false) {\n            expressionKeys = expressionKeys.filter(notInArray.bind(null, [ID_KEY]));\n            idOnlyExcluded = expressionKeys.length == 0;\n        }\n    }\n    else {\n        // if not specified the add the ID field\n        expressionKeys.push(ID_KEY);\n    }\n    const copts = ComputeOptions.init(options);\n    return collection.map(((obj) => processObject(obj, expr, copts.update(obj), expressionKeys, idOnlyExcluded)));\n};\n/**\n * Process the expression value for $project operators\n *\n * @param {Object} obj The object to use as options\n * @param {Object} expr The experssion object of $project operator\n * @param {Array} expressionKeys The key in the 'expr' object\n * @param {Boolean} idOnlyExcluded Boolean value indicating whether only the ID key is excluded\n */\nfunction processObject(obj, expr, options, expressionKeys, idOnlyExcluded) {\n    let newObj = {};\n    let foundSlice = false;\n    let foundExclusion = false;\n    const dropKeys = [];\n    if (idOnlyExcluded) {\n        dropKeys.push(options.idKey);\n    }\n    for (const key of expressionKeys) {\n        // final computed value of the key\n        let value = undefined;\n        // expression to associate with key\n        const subExpr = expr[key];\n        if (key !== options.idKey && inArray([0, false], subExpr)) {\n            foundExclusion = true;\n        }\n        if (key === options.idKey && isEmpty(subExpr)) {\n            // tiny optimization here to skip over id\n            value = obj[key];\n        }\n        else if (isString(subExpr)) {\n            value = computeValue(obj, subExpr, key, options);\n        }\n        else if (inArray([1, true], subExpr)) {\n            // For direct projections, we use the resolved object value\n        }\n        else if (subExpr instanceof Array) {\n            value = subExpr.map(v => {\n                const r = computeValue(obj, v, null, options);\n                if (isNil(r))\n                    return null;\n                return r;\n            });\n        }\n        else if (isObject(subExpr)) {\n            const subExprObj = subExpr;\n            const subExprKeys = Object.keys(subExpr);\n            const operator = subExprKeys.length == 1 ? subExprKeys[0] : \"\";\n            // first try a projection operator\n            const call = getOperator(OperatorType.PROJECTION, operator, options);\n            if (call) {\n                // apply the projection operator on the operator expression for the key\n                if (operator === \"$slice\") {\n                    // $slice is handled differently for aggregation and projection operations\n                    if (ensureArray(subExprObj[operator]).every(isNumber)) {\n                        // $slice for projection operation\n                        value = call(obj, subExprObj[operator], key, options);\n                        foundSlice = true;\n                    }\n                    else {\n                        // $slice for aggregation operation\n                        value = computeValue(obj, subExprObj, key, options);\n                    }\n                }\n                else {\n                    value = call(obj, subExprObj[operator], key, options);\n                }\n            }\n            else if (isOperator(operator)) {\n                // compute if operator key\n                value = computeValue(obj, subExprObj[operator], operator, options);\n            }\n            else if (has(obj, key)) {\n                // compute the value for the sub expression for the key\n                validateExpression(subExprObj, options);\n                let target = obj[key];\n                if (target instanceof Array) {\n                    value = target.map((o) => processObject(o, subExprObj, options, subExprKeys, false));\n                }\n                else {\n                    target = isObject(target) ? target : obj;\n                    value = processObject(target, subExprObj, options, subExprKeys, false);\n                }\n            }\n            else {\n                // compute the value for the sub expression for the key\n                value = computeValue(obj, subExpr, null, options);\n            }\n        }\n        else {\n            dropKeys.push(key);\n            continue;\n        }\n        // get value with object graph\n        const objPathGraph = resolveGraph(obj, key, {\n            preserveMissing: true\n        });\n        // add the value at the path\n        if (objPathGraph !== undefined) {\n            merge(newObj, objPathGraph, {\n                flatten: true\n            });\n        }\n        // if computed add/or remove accordingly\n        if (notInArray([0, 1, false, true], subExpr)) {\n            if (value === undefined) {\n                removeValue(newObj, key, { descendArray: true });\n            }\n            else {\n                setValue(newObj, key, value);\n            }\n        }\n    }\n    // filter out all missing values preserved to support correct merging\n    filterMissing(newObj);\n    // For the following cases we include all keys on the object that were not explicitly excluded.\n    //\n    // 1. projection included $slice operator\n    // 2. some fields were explicitly excluded\n    // 3. only the id field was excluded\n    if (foundSlice || foundExclusion || idOnlyExcluded) {\n        newObj = into({}, obj, newObj);\n        if (dropKeys.length > 0) {\n            for (const k of dropKeys) {\n                removeValue(newObj, k, { descendArray: true });\n            }\n        }\n    }\n    return newObj;\n}\n/**\n * Validate inclusion and exclusion values in expression\n *\n * @param {Object} expr The expression given for the projection\n */\nfunction validateExpression(expr, options) {\n    const check = [false, false];\n    for (const [k, v] of Object.entries(expr)) {\n        if (k === (options === null || options === void 0 ? void 0 : options.idKey))\n            return;\n        if (v === 0 || v === false) {\n            check[0] = true;\n        }\n        else if (v === 1 || v === true) {\n            check[1] = true;\n        }\n        assert(!(check[0] && check[1]), \"Projection cannot have a mix of inclusion and exclusion.\");\n    }\n}\n","import { ComputeOptions, redact } from \"../../core\";\n/**\n * Restricts the contents of the documents based on information stored in the documents themselves.\n *\n * https://docs.mongodb.com/manual/reference/operator/aggregation/redact/\n */\nexport const $redact = (collection, expr, options) => {\n    const copts = ComputeOptions.init(options);\n    return collection.map(((obj) => redact(obj, expr, copts.update(obj))));\n};\n","// Query Logical Operators: https://docs.mongodb.com/manual/reference/operator/query-logical/\nimport { Query } from \"../../../query\";\nimport { assert, isArray } from \"../../../util\";\n/**\n * Joins query clauses with a logical AND returns all documents that match the conditions of both clauses.\n *\n * @param selector\n * @param rhs\n * @returns {Function}\n */\nexport const $and = (_, rhs, options) => {\n    assert(isArray(rhs), \"Invalid expression: $and expects value to be an Array.\");\n    const queries = rhs.map(expr => new Query(expr, options));\n    return (obj) => queries.every(q => q.test(obj));\n};\n","// Query Logical Operators: https://docs.mongodb.com/manual/reference/operator/query-logical/\nimport { Query } from \"../../../query\";\nimport { assert, isArray } from \"../../../util\";\n/**\n * Joins query clauses with a logical OR returns all documents that match the conditions of either clause.\n *\n * @param selector\n * @param rhs\n * @returns {Function}\n */\nexport const $or = (_, rhs, options) => {\n    assert(isArray(rhs), \"Invalid expression. $or expects value to be an Array\");\n    const queries = rhs.map(expr => new Query(expr, options));\n    return (obj) => queries.some(q => q.test(obj));\n};\n","// Query Logical Operators: https://docs.mongodb.com/manual/reference/operator/query-logical/\nimport { assert, isArray } from \"../../../util\";\nimport { $or } from \"./or\";\n/**\n * Joins query clauses with a logical NOR returns all documents that fail to match both clauses.\n *\n * @param selector\n * @param rhs\n * @returns {Function}\n */\nexport const $nor = (_, rhs, options) => {\n    assert(isArray(rhs), \"Invalid expression. $nor expects value to be an array.\");\n    const f = $or(\"$or\", rhs, options);\n    return (obj) => !f(obj);\n};\n","// Query Logical Operators: https://docs.mongodb.com/manual/reference/operator/query-logical/\nimport { Query } from \"../../../query\";\nimport { normalize } from \"../../../util\";\n/**\n * Inverts the effect of a query expression and returns documents that do not match the query expression.\n *\n * @param selector\n * @param rhs\n * @returns {Function}\n */\nexport const $not = (selector, rhs, options) => {\n    const criteria = {};\n    criteria[selector] = normalize(rhs);\n    const query = new Query(criteria, options);\n    return (obj) => !query.test(obj);\n};\n","// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nimport { $eq as __eq, createQueryOperator } from \"../../_predicates\";\n/**\n * Matches values that are equal to a specified value.\n */\nexport const $eq = createQueryOperator(__eq);\n","// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nimport { $gt as __gt, createQueryOperator } from \"../../_predicates\";\n/**\n * Matches values that are greater than a specified value.\n */\nexport const $gt = createQueryOperator(__gt);\n","// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nimport { $gte as __gte, createQueryOperator } from \"../../_predicates\";\n/**\n * \tMatches values that are greater than or equal to a specified value.\n */\nexport const $gte = createQueryOperator(__gte);\n","// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nimport { $in as __in, createQueryOperator } from \"../../_predicates\";\n/**\n * Matches any of the values that exist in an array specified in the query.\n */\nexport const $in = createQueryOperator(__in);\n","// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nimport { $lt as __lt, createQueryOperator } from \"../../_predicates\";\n/**\n * Matches values that are less than the value specified in the query.\n */\nexport const $lt = createQueryOperator(__lt);\n","// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nimport { $lte as __lte, createQueryOperator } from \"../../_predicates\";\n/**\n * Matches values that are less than or equal to the value specified in the query.\n */\nexport const $lte = createQueryOperator(__lte);\n","// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nimport { $ne as __ne, createQueryOperator } from \"../../_predicates\";\n/**\n * Matches all values that are not equal to the value specified in the query.\n */\nexport const $ne = createQueryOperator(__ne);\n","// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nimport { $nin as __nin, createQueryOperator } from \"../../_predicates\";\n/**\n * Matches values that do not exist in an array specified to the query.\n */\nexport const $nin = createQueryOperator(__nin);\n","// Query Evaluation Operators: https://docs.mongodb.com/manual/reference/operator/query-evaluation/\nimport { $mod as __mod, createQueryOperator } from \"../../_predicates\";\n/**\n * Performs a modulo operation on the value of a field and selects documents with a specified result.\n */\nexport const $mod = createQueryOperator(__mod);\n","// Query Evaluation Operators: https://docs.mongodb.com/manual/reference/operator/query-evaluation/\nimport { $regex as __regex, createQueryOperator } from \"../../_predicates\";\n/**\n * Selects documents where values match a specified regular expression.\n */\nexport const $regex = createQueryOperator(__regex);\n","// Query Array Operators: https://docs.mongodb.com/manual/reference/operator/query-array/\nimport { $all as __all, createQueryOperator } from \"../../_predicates\";\n/**\n * Matches arrays that contain all elements specified in the query.\n */\nexport const $all = createQueryOperator(__all);\n","// Query Array Operators: https://docs.mongodb.com/manual/reference/operator/query-array/\nimport { $elemMatch as __elemMatch, createQueryOperator, } from \"../../_predicates\";\n/**\n * Selects documents if element in the array field matches all the specified $elemMatch conditions.\n */\nexport const $elemMatch = createQueryOperator(__elemMatch);\n","// Query Array Operators: https://docs.mongodb.com/manual/reference/operator/query-array/\nimport { $size as __size, createQueryOperator } from \"../../_predicates\";\n/**\n * Selects documents if the array field is a specified size.\n */\nexport const $size = createQueryOperator(__size);\n","// Query Element Operators: https://docs.mongodb.com/manual/reference/operator/query-element/\nimport { $exists as __exists, createQueryOperator } from \"../../_predicates\";\n/**\n * Matches documents that have the specified field.\n */\nexport const $exists = createQueryOperator(__exists);\n","// Query Element Operators: https://docs.mongodb.com/manual/reference/operator/query-element/\nimport { $type as __type, createQueryOperator } from \"../../_predicates\";\n/**\n * Selects documents if a field is of the specified type.\n */\nexport const $type = createQueryOperator(__type);\n","import { useOperators, OperatorType } from 'mingo/core';\nimport { Query } from 'mingo/query';\nimport { $project, $sort } from 'mingo/operators/pipeline';\nimport { $and, $not, $or, $nor } from 'mingo/operators/query/logical';\nimport { $eq, $ne, $gt, $gte, $lt, $lte, $nin, $in } from 'mingo/operators/query/comparison';\nimport { $regex, $mod } from 'mingo/operators/query/evaluation';\nimport { $elemMatch, $size } from 'mingo/operators/query/array';\nimport { $exists, $type } from 'mingo/operators/query/element';\nvar mingoInitDone = false;\n\n/**\n * The MongoDB query library is huge and we do not need all the operators.\n * If you add an operator here, make sure that you properly add a test in\n * the file /test/unit/rx-storage-query-correctness.test.ts\n *\n * @link https://github.com/kofrasa/mingo#es6\n */\nexport function getMingoQuery(selector) {\n  if (!mingoInitDone) {\n    useOperators(OperatorType.PIPELINE, {\n      $sort,\n      $project\n    });\n    useOperators(OperatorType.QUERY, {\n      $and,\n      $eq,\n      $elemMatch,\n      $exists,\n      $gt,\n      $gte,\n      $in,\n      $lt,\n      $lte,\n      $ne,\n      $nin,\n      $mod,\n      $nor,\n      $not,\n      $or,\n      $regex,\n      $size,\n      $type\n    });\n    mingoInitDone = true;\n  }\n  return new Query(selector);\n}\n//# sourceMappingURL=rx-query-mingo.js.map","import { LOGICAL_OPERATORS } from \"./query-planner.js\";\nimport { getPrimaryFieldOfPrimaryKey } from \"./rx-schema-helper.js\";\nimport { clone, firstPropertyNameOfObject, toArray, isMaybeReadonlyArray, flatClone, objectPathMonad } from \"./plugins/utils/index.js\";\nimport { compare as mingoSortComparator } from 'mingo/util';\nimport { newRxError } from \"./rx-error.js\";\nimport { getMingoQuery } from \"./rx-query-mingo.js\";\n\n/**\n * Normalize the query to ensure we have all fields set\n * and queries that represent the same query logic are detected as equal by the caching.\n */\nexport function normalizeMangoQuery(schema, mangoQuery) {\n  var primaryKey = getPrimaryFieldOfPrimaryKey(schema.primaryKey);\n  mangoQuery = flatClone(mangoQuery);\n  var normalizedMangoQuery = clone(mangoQuery);\n  if (typeof normalizedMangoQuery.skip !== 'number') {\n    normalizedMangoQuery.skip = 0;\n  }\n  if (!normalizedMangoQuery.selector) {\n    normalizedMangoQuery.selector = {};\n  } else {\n    normalizedMangoQuery.selector = normalizedMangoQuery.selector;\n    /**\n     * In mango query, it is possible to have an\n     * equals comparison by directly assigning a value\n     * to a property, without the '$eq' operator.\n     * Like:\n     * selector: {\n     *   foo: 'bar'\n     * }\n     * For normalization, we have to normalize this\n     * so our checks can perform properly.\n     *\n     *\n     * TODO this must work recursive with nested queries that\n     * contain multiple selectors via $and or $or etc.\n     */\n    Object.entries(normalizedMangoQuery.selector).forEach(([field, matcher]) => {\n      if (typeof matcher !== 'object' || matcher === null) {\n        normalizedMangoQuery.selector[field] = {\n          $eq: matcher\n        };\n      }\n    });\n  }\n\n  /**\n   * Ensure that if an index is specified,\n   * the primaryKey is inside of it.\n   */\n  if (normalizedMangoQuery.index) {\n    var indexAr = toArray(normalizedMangoQuery.index);\n    if (!indexAr.includes(primaryKey)) {\n      indexAr.push(primaryKey);\n    }\n    normalizedMangoQuery.index = indexAr;\n  }\n\n  /**\n   * To ensure a deterministic sorting,\n   * we have to ensure the primary key is always part\n   * of the sort query.\n   * Primary sorting is added as last sort parameter,\n   * similar to how we add the primary key to indexes that do not have it.\n   *\n   */\n  if (!normalizedMangoQuery.sort) {\n    /**\n     * If no sort is given at all,\n     * we can assume that the user does not care about sort order at al.\n     *\n     * we cannot just use the primary key as sort parameter\n     * because it would likely cause the query to run over the primary key index\n     * which has a bad performance in most cases.\n     */\n    if (normalizedMangoQuery.index) {\n      normalizedMangoQuery.sort = normalizedMangoQuery.index.map(field => {\n        return {\n          [field]: 'asc'\n        };\n      });\n    } else {\n      /**\n       * Find the index that best matches the fields with the logical operators\n       */\n      if (schema.indexes) {\n        var fieldsWithLogicalOperator = new Set();\n        Object.entries(normalizedMangoQuery.selector).forEach(([field, matcher]) => {\n          var hasLogical = false;\n          if (typeof matcher === 'object' && matcher !== null) {\n            hasLogical = !!Object.keys(matcher).find(operator => LOGICAL_OPERATORS.has(operator));\n          } else {\n            hasLogical = true;\n          }\n          if (hasLogical) {\n            fieldsWithLogicalOperator.add(field);\n          }\n        });\n        var currentFieldsAmount = -1;\n        var currentBestIndexForSort;\n        schema.indexes.forEach(index => {\n          var useIndex = isMaybeReadonlyArray(index) ? index : [index];\n          var firstWrongIndex = useIndex.findIndex(indexField => !fieldsWithLogicalOperator.has(indexField));\n          if (firstWrongIndex > 0 && firstWrongIndex > currentFieldsAmount) {\n            currentFieldsAmount = firstWrongIndex;\n            currentBestIndexForSort = useIndex;\n          }\n        });\n        if (currentBestIndexForSort) {\n          normalizedMangoQuery.sort = currentBestIndexForSort.map(field => {\n            return {\n              [field]: 'asc'\n            };\n          });\n        }\n      }\n\n      /**\n       * Fall back to the primary key as sort order\n       * if no better one has been found\n       */\n      if (!normalizedMangoQuery.sort) {\n        normalizedMangoQuery.sort = [{\n          [primaryKey]: 'asc'\n        }];\n      }\n    }\n  } else {\n    var isPrimaryInSort = normalizedMangoQuery.sort.find(p => firstPropertyNameOfObject(p) === primaryKey);\n    if (!isPrimaryInSort) {\n      normalizedMangoQuery.sort = normalizedMangoQuery.sort.slice(0);\n      normalizedMangoQuery.sort.push({\n        [primaryKey]: 'asc'\n      });\n    }\n  }\n  return normalizedMangoQuery;\n}\n\n/**\n * Returns the sort-comparator,\n * which is able to sort documents in the same way\n * a query over the db would do.\n */\nexport function getSortComparator(schema, query) {\n  if (!query.sort) {\n    throw newRxError('SNH', {\n      query\n    });\n  }\n  var sortParts = [];\n  query.sort.forEach(sortBlock => {\n    var key = Object.keys(sortBlock)[0];\n    var direction = Object.values(sortBlock)[0];\n    sortParts.push({\n      key,\n      direction,\n      getValueFn: objectPathMonad(key)\n    });\n  });\n  var fun = (a, b) => {\n    for (var i = 0; i < sortParts.length; ++i) {\n      var sortPart = sortParts[i];\n      var valueA = sortPart.getValueFn(a);\n      var valueB = sortPart.getValueFn(b);\n      if (valueA !== valueB) {\n        var ret = sortPart.direction === 'asc' ? mingoSortComparator(valueA, valueB) : mingoSortComparator(valueB, valueA);\n        return ret;\n      }\n    }\n  };\n  return fun;\n}\n\n/**\n * Returns a function\n * that can be used to check if a document\n * matches the query.\n */\nexport function getQueryMatcher(_schema, query) {\n  if (!query.sort) {\n    throw newRxError('SNH', {\n      query\n    });\n  }\n  var mingoQuery = getMingoQuery(query.selector);\n  var fun = doc => {\n    if (doc._deleted) {\n      return false;\n    }\n    return mingoQuery.test(doc);\n  };\n  return fun;\n}\n//# sourceMappingURL=rx-query-helper.js.map","import { Observable } from '../Observable';\nexport var EMPTY = new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map","import { pushAtSortPosition } from 'array-push-at-sort-position';\nexport const doNothing = (_input) => { };\nexport const insertFirst = (input) => {\n    input.previousResults.unshift(input.changeEvent.doc);\n    if (input.keyDocumentMap) {\n        input.keyDocumentMap.set(input.changeEvent.id, input.changeEvent.doc);\n    }\n};\nexport const insertLast = (input) => {\n    input.previousResults.push(input.changeEvent.doc);\n    if (input.keyDocumentMap) {\n        input.keyDocumentMap.set(input.changeEvent.id, input.changeEvent.doc);\n    }\n};\nexport const removeFirstItem = (input) => {\n    const first = input.previousResults.shift();\n    if (input.keyDocumentMap && first) {\n        input.keyDocumentMap.delete(first[input.queryParams.primaryKey]);\n    }\n};\nexport const removeLastItem = (input) => {\n    const last = input.previousResults.pop();\n    if (input.keyDocumentMap && last) {\n        input.keyDocumentMap.delete(last[input.queryParams.primaryKey]);\n    }\n};\nexport const removeFirstInsertLast = (input) => {\n    removeFirstItem(input);\n    insertLast(input);\n};\nexport const removeLastInsertFirst = (input) => {\n    removeLastItem(input);\n    insertFirst(input);\n};\nexport const removeFirstInsertFirst = (input) => {\n    removeFirstItem(input);\n    insertFirst(input);\n};\nexport const removeLastInsertLast = (input) => {\n    removeLastItem(input);\n    insertLast(input);\n};\nexport const removeExisting = (input) => {\n    if (input.keyDocumentMap) {\n        input.keyDocumentMap.delete(input.changeEvent.id);\n    }\n    // find index of document\n    const primary = input.queryParams.primaryKey;\n    const results = input.previousResults;\n    for (let i = 0; i < results.length; i++) {\n        const item = results[i];\n        // remove\n        // console.dir(item);\n        if (item[primary] === input.changeEvent.id) {\n            results.splice(i, 1);\n            break;\n        }\n    }\n};\nexport const replaceExisting = (input) => {\n    // find index of document\n    const doc = input.changeEvent.doc;\n    const primary = input.queryParams.primaryKey;\n    const results = input.previousResults;\n    for (let i = 0; i < results.length; i++) {\n        const item = results[i];\n        // replace\n        if (item[primary] === input.changeEvent.id) {\n            results[i] = doc;\n            if (input.keyDocumentMap) {\n                input.keyDocumentMap.set(input.changeEvent.id, doc);\n            }\n            break;\n        }\n    }\n};\n/**\n * this function always returns wrong results\n * it must be later optimised out\n * otherwise there is something broken\n */\nexport const alwaysWrong = (input) => {\n    const wrongHuman = {\n        _id: 'wrongHuman' + new Date().getTime()\n    };\n    input.previousResults.length = 0; // clear array\n    input.previousResults.push(wrongHuman);\n    if (input.keyDocumentMap) {\n        input.keyDocumentMap.clear();\n        input.keyDocumentMap.set(wrongHuman._id, wrongHuman);\n    }\n};\nexport const insertAtSortPosition = (input) => {\n    const docId = input.changeEvent.id;\n    const doc = input.changeEvent.doc;\n    if (input.keyDocumentMap) {\n        if (input.keyDocumentMap.has(docId)) {\n            /**\n             * If document is already in results,\n             * we cannot add it again because it would throw on non-deterministic ordering.\n             */\n            return;\n        }\n        input.keyDocumentMap.set(docId, doc);\n    }\n    else {\n        const isDocInResults = input.previousResults.find((d) => d[input.queryParams.primaryKey] === docId);\n        /**\n         * If document is already in results,\n         * we cannot add it again because it would throw on non-deterministic ordering.\n         */\n        if (isDocInResults) {\n            return;\n        }\n    }\n    pushAtSortPosition(input.previousResults, doc, input.queryParams.sortComparator, 0);\n};\nexport const removeExistingAndInsertAtSortPosition = (input) => {\n    removeExisting(input);\n    insertAtSortPosition(input);\n};\nexport const runFullQueryAgain = (_input) => {\n    throw new Error('Action runFullQueryAgain must be implemented by yourself');\n};\nexport const unknownAction = (_input) => {\n    throw new Error('Action unknownAction should never be called');\n};\n//# sourceMappingURL=action-functions.js.map","/**\n * copied and adapted from npm 'binary-search-insert'\n * @link https://www.npmjs.com/package/binary-search-insert\n */\nexport function pushAtSortPosition(array, item, compareFunction, low) {\n  var length = array.length;\n  var high = length - 1;\n  var mid = 0;\n\n  /**\n   * Optimization shortcut.\n   */\n  if (length === 0) {\n    array.push(item);\n    return 0;\n  }\n\n  /**\n   * So we do not have to get the ret[mid] doc again\n   * at the last we store it here.\n   */\n  var lastMidDoc;\n  while (low <= high) {\n    // https://github.com/darkskyapp/binary-search\n    // http://googleresearch.blogspot.com/2006/06/extra-extra-read-all-about-it-nearly.html\n    mid = low + (high - low >> 1);\n    lastMidDoc = array[mid];\n    if (compareFunction(lastMidDoc, item) <= 0.0) {\n      // searching too low\n      low = mid + 1;\n    } else {\n      // searching too high\n      high = mid - 1;\n    }\n  }\n  if (compareFunction(lastMidDoc, item) <= 0.0) {\n    mid++;\n  }\n\n  /**\n   * Insert at correct position\n   */\n  array.splice(mid, 0, item);\n  return mid;\n}","import { doNothing, insertFirst, insertLast, removeFirstItem, removeLastItem, removeFirstInsertLast, removeLastInsertFirst, removeExisting, replaceExisting, alwaysWrong, insertAtSortPosition, removeExistingAndInsertAtSortPosition, runFullQueryAgain, unknownAction, removeFirstInsertFirst, removeLastInsertLast } from './action-functions.js';\n/**\n * all actions ordered by performance-cost\n * cheapest first\n * TODO run tests on which is really the fastest\n */\nexport const orderedActionList = [\n    'doNothing',\n    'insertFirst',\n    'insertLast',\n    'removeFirstItem',\n    'removeLastItem',\n    'removeFirstInsertLast',\n    'removeLastInsertFirst',\n    'removeFirstInsertFirst',\n    'removeLastInsertLast',\n    'removeExisting',\n    'replaceExisting',\n    'alwaysWrong',\n    'insertAtSortPosition',\n    'removeExistingAndInsertAtSortPosition',\n    'runFullQueryAgain',\n    'unknownAction'\n];\nexport const actionFunctions = {\n    doNothing,\n    insertFirst,\n    insertLast,\n    removeFirstItem,\n    removeLastItem,\n    removeFirstInsertLast,\n    removeLastInsertFirst,\n    removeFirstInsertFirst,\n    removeLastInsertLast,\n    removeExisting,\n    replaceExisting,\n    alwaysWrong,\n    insertAtSortPosition,\n    removeExistingAndInsertAtSortPosition,\n    runFullQueryAgain,\n    unknownAction\n};\n//# sourceMappingURL=index.js.map","export function booleanStringToBoolean(str) {\n    if (str === '1') {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function booleanToBooleanString(b) {\n    if (b) {\n        return '1';\n    }\n    else {\n        return '0';\n    }\n}\nexport function oppositeBoolean(input) {\n    if (input === '1') {\n        return '0';\n    }\n    else {\n        return '1';\n    }\n}\nexport function lastChar(str) {\n    return str.slice(-1);\n}\n/**\n * @link https://stackoverflow.com/a/1349426\n */\nfunction makeid(length = 6) {\n    let result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    const charactersLength = characters.length;\n    for (let i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n}\nconst nodeIdPrefix = makeid(4);\nlet lastIdGen = 0;\nexport function nextNodeId() {\n    const ret = 'node_' + nodeIdPrefix + '_' + lastIdGen;\n    lastIdGen++;\n    return ret;\n}\n/**\n * @link https://stackoverflow.com/a/16155417\n */\nexport function decimalToPaddedBinary(decimal, padding) {\n    const binary = (decimal >>> 0).toString(2);\n    const padded = binary.padStart(padding, '0');\n    return padded;\n}\nexport function oppositeBinary(i) {\n    if (i === '1') {\n        return '0';\n    }\n    else if (i === '0') {\n        return '1';\n    }\n    else {\n        throw new Error('non-binary given');\n    }\n}\nexport function binaryToDecimal(binary) {\n    return parseInt(binary, 2);\n}\nexport function minBinaryWithLength(length) {\n    return new Array(length).fill(0).map(() => '0').join('');\n}\nexport function maxBinaryWithLength(length) {\n    return new Array(length).fill(0).map(() => '1').join('');\n}\nexport function getNextStateSet(stateSet) {\n    const decimal = binaryToDecimal(stateSet);\n    const increase = decimal + 1;\n    const binary = decimalToPaddedBinary(increase, stateSet.length);\n    return binary;\n}\nexport function firstKeyOfMap(map) {\n    const iterator1 = map.keys();\n    return iterator1.next().value;\n}\n/**\n * Shuffles array in place. ES6 version\n * @link https://stackoverflow.com/a/6274381\n */\nexport function shuffleArray(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n}\nexport function lastOfArray(ar) {\n    return ar[ar.length - 1];\n}\n/**\n * @link https://stackoverflow.com/a/6259536\n */\nexport function splitStringToChunks(str, chunkSize) {\n    const chunks = [];\n    for (let i = 0, charsLength = str.length; i < charsLength; i += chunkSize) {\n        chunks.push(str.substring(i, i + chunkSize));\n    }\n    return chunks;\n}\n//# sourceMappingURL=util.js.map","/*\nlet t = 0;\nwhile (t < 10000) {\n    const char = String.fromCharCode(t);\n    console.log(t + ' : ' + char);\n    t++;\n}\n*/\n/*\n\nTo have a really small string representation, we have to hack some stuff\nwhich makes is complicated but effective.\n\nRules for the string:\n- The string starts with a number like '23' that defines how many leaf-nodes we have\n- leaf nodes consist of two chars like 'ab'\n    - the first char is the id\n    - the second the value is a number you can get via String.charCodeAt()\n- Internal nodes have four chars like 'abcd'\n    - the first char is the id\n    - the second char is the id of the 0-branch\n    - the third char is the id of the 1-branch\n    - the last char is the id of the boolean-function (= level)\n- The last 3 chars of the string is the root node like 'abc'\n    - it looks like the internal-node but without the id (first char)\n\n*/\n// we use this because 39 is the quotes which causes problems\nexport const CHAR_CODE_OFFSET = 40; // String.fromCharCode(33) === ')'\nexport function getCharOfLevel(level) {\n    const charCode = CHAR_CODE_OFFSET + level;\n    return String.fromCharCode(charCode);\n}\nexport function getNumberOfChar(char) {\n    const charCode = char.charCodeAt(0);\n    return charCode - CHAR_CODE_OFFSET;\n}\nexport function getCharOfValue(value) {\n    const charCode = CHAR_CODE_OFFSET + value;\n    return String.fromCharCode(charCode);\n}\nexport const FIRST_CHAR_CODE_FOR_ID = 97; // String.fromCharCode(97) === 'a'\nexport function getNextCharId(lastCode) {\n    // jump these codes because they look strange\n    if (lastCode >= 128 && lastCode <= 160) {\n        lastCode = 161;\n    }\n    const char = String.fromCharCode(lastCode);\n    return {\n        char,\n        nextCode: lastCode + 1\n    };\n}\n//# sourceMappingURL=string-format.js.map","export function lastOfArray(ar) {\n    return ar[ar.length - 1];\n}\n/**\n * @link https://stackoverflow.com/a/5915122\n */\nexport function randomOfArray(items) {\n    return items[Math.floor(Math.random() * items.length)];\n}\nexport function shuffleArray(arr) {\n    return arr.slice().sort(() => (Math.random() - 0.5));\n}\n/**\n * normalizes sort-field\n * in: '-age'\n * out: 'age'\n */\nexport function normalizeSortField(field) {\n    if (field.startsWith('-')) {\n        return field.substr(1);\n    }\n    else {\n        return field;\n    }\n}\nexport function getSortFieldsOfQuery(query) {\n    if (!query.sort) {\n        // if no sort-order is set, use the primary key\n        return ['_id'];\n    }\n    return query.sort.map(maybeArray => {\n        if (Array.isArray(maybeArray)) {\n            return maybeArray[0].map((field) => normalizeSortField(field));\n        }\n        else {\n            return normalizeSortField(maybeArray);\n        }\n    });\n}\n/**\n *  @link https://stackoverflow.com/a/1431113\n */\nexport function replaceCharAt(str, index, replacement) {\n    return str.substr(0, index) + replacement + str.substr(index + replacement.length);\n}\nexport function mapToObject(map) {\n    const ret = {};\n    map.forEach((value, key) => {\n        ret[key] = value;\n    });\n    return ret;\n}\nexport function objectToMap(object) {\n    const ret = new Map();\n    Object.entries(object).forEach(([k, v]) => {\n        ret.set(k, v);\n    });\n    return ret;\n}\nexport function cloneMap(map) {\n    const ret = new Map();\n    map.forEach((value, key) => {\n        ret[key] = value;\n    });\n    return ret;\n}\n/**\n * does a flat copy on the objects,\n * is about 3 times faster then using deepClone\n * @link https://jsperf.com/object-rest-spread-vs-clone/2\n */\nexport function flatClone(obj) {\n    return Object.assign({}, obj);\n}\nexport function ensureNotFalsy(obj) {\n    if (!obj) {\n        throw new Error('ensureNotFalsy() is falsy');\n    }\n    return obj;\n}\nexport function mergeSets(sets) {\n    let ret = new Set();\n    sets.forEach(set => {\n        ret = new Set([...ret, ...set]);\n    });\n    return ret;\n}\n/**\n * @link https://stackoverflow.com/a/12830454/3443137\n */\nexport function roundToTwoDecimals(num) {\n    return parseFloat(num.toFixed(2));\n}\nexport function isObject(value) {\n    const type = typeof value;\n    return value !== null && (type === 'object' || type === 'function');\n}\nexport function getProperty(object, path, value) {\n    if (Array.isArray(path)) {\n        path = path.join('.');\n    }\n    if (!isObject(object) || typeof path !== 'string') {\n        return value === undefined ? object : value;\n    }\n    const pathArray = path.split('.');\n    if (pathArray.length === 0) {\n        return value;\n    }\n    for (let index = 0; index < pathArray.length; index++) {\n        const key = pathArray[index];\n        if (isStringIndex(object, key)) {\n            object = index === pathArray.length - 1 ? undefined : null;\n        }\n        else {\n            object = object[key];\n        }\n        if (object === undefined || object === null) {\n            // `object` is either `undefined` or `null` so we want to stop the loop, and\n            // if this is not the last bit of the path, and\n            // if it didn't return `undefined`\n            // it would return `null` if `object` is `null`\n            // but we want `get({foo: null}, 'foo.bar')` to equal `undefined`, or the supplied value, not `null`\n            if (index !== pathArray.length - 1) {\n                return value;\n            }\n            break;\n        }\n    }\n    return object === undefined ? value : object;\n}\nfunction isStringIndex(object, key) {\n    if (typeof key !== 'number' && Array.isArray(object)) {\n        const index = Number.parseInt(key, 10);\n        return Number.isInteger(index) && object[index] === object[key];\n    }\n    return false;\n}\n//# sourceMappingURL=util.js.map","import { getProperty, lastOfArray } from '../util.js';\nexport const hasLimit = (input) => {\n    return !!input.queryParams.limit;\n};\nexport const isFindOne = (input) => {\n    return input.queryParams.limit === 1;\n};\nexport const hasSkip = (input) => {\n    if (input.queryParams.skip && input.queryParams.skip > 0) {\n        return true;\n    }\n    else {\n        return false;\n    }\n};\nexport const isDelete = (input) => {\n    return input.changeEvent.operation === 'DELETE';\n};\nexport const isInsert = (input) => {\n    return input.changeEvent.operation === 'INSERT';\n};\nexport const isUpdate = (input) => {\n    return input.changeEvent.operation === 'UPDATE';\n};\nexport const wasLimitReached = (input) => {\n    return hasLimit(input) && input.previousResults.length >= input.queryParams.limit;\n};\nexport const sortParamsChanged = (input) => {\n    const sortFields = input.queryParams.sortFields;\n    const prev = input.changeEvent.previous;\n    const doc = input.changeEvent.doc;\n    if (!doc) {\n        return false;\n    }\n    if (!prev) {\n        return true;\n    }\n    for (let i = 0; i < sortFields.length; i++) {\n        const field = sortFields[i];\n        const beforeData = getProperty(prev, field);\n        const afterData = getProperty(doc, field);\n        if (beforeData !== afterData) {\n            return true;\n        }\n    }\n    return false;\n};\nexport const wasInResult = (input) => {\n    const id = input.changeEvent.id;\n    if (input.keyDocumentMap) {\n        const has = input.keyDocumentMap.has(id);\n        return has;\n    }\n    else {\n        const primary = input.queryParams.primaryKey;\n        const results = input.previousResults;\n        for (let i = 0; i < results.length; i++) {\n            const item = results[i];\n            if (item[primary] === id) {\n                return true;\n            }\n        }\n        return false;\n    }\n};\nexport const wasFirst = (input) => {\n    const first = input.previousResults[0];\n    if (first && first[input.queryParams.primaryKey] === input.changeEvent.id) {\n        return true;\n    }\n    else {\n        return false;\n    }\n};\nexport const wasLast = (input) => {\n    const last = lastOfArray(input.previousResults);\n    if (last && last[input.queryParams.primaryKey] === input.changeEvent.id) {\n        return true;\n    }\n    else {\n        return false;\n    }\n};\nexport const wasSortedBeforeFirst = (input) => {\n    const prev = input.changeEvent.previous;\n    if (!prev) {\n        return false;\n    }\n    const first = input.previousResults[0];\n    if (!first) {\n        return false;\n    }\n    /**\n     * If the changed document is the same as the first,\n     * we cannot sort-compare them, because it might end in a non-deterministic\n     * sort order. Because both document could be equal.\n     * So instead we have to return true.\n     */\n    if (first[input.queryParams.primaryKey] === input.changeEvent.id) {\n        return true;\n    }\n    const comp = input.queryParams.sortComparator(prev, first);\n    return comp < 0;\n};\nexport const wasSortedAfterLast = (input) => {\n    const prev = input.changeEvent.previous;\n    if (!prev) {\n        return false;\n    }\n    const last = lastOfArray(input.previousResults);\n    if (!last) {\n        return false;\n    }\n    if (last[input.queryParams.primaryKey] === input.changeEvent.id) {\n        return true;\n    }\n    const comp = input.queryParams.sortComparator(prev, last);\n    return comp > 0;\n};\nexport const isSortedBeforeFirst = (input) => {\n    const doc = input.changeEvent.doc;\n    if (!doc) {\n        return false;\n    }\n    const first = input.previousResults[0];\n    if (!first) {\n        return false;\n    }\n    if (first[input.queryParams.primaryKey] === input.changeEvent.id) {\n        return true;\n    }\n    const comp = input.queryParams.sortComparator(doc, first);\n    return comp < 0;\n};\nexport const isSortedAfterLast = (input) => {\n    const doc = input.changeEvent.doc;\n    if (!doc) {\n        return false;\n    }\n    const last = lastOfArray(input.previousResults);\n    if (!last) {\n        return false;\n    }\n    if (last[input.queryParams.primaryKey] === input.changeEvent.id) {\n        return true;\n    }\n    const comp = input.queryParams.sortComparator(doc, last);\n    return comp > 0;\n};\nexport const wasMatching = (input) => {\n    const prev = input.changeEvent.previous;\n    if (!prev) {\n        return false;\n    }\n    return input.queryParams.queryMatcher(prev);\n};\nexport const doesMatchNow = (input) => {\n    const doc = input.changeEvent.doc;\n    if (!doc) {\n        return false;\n    }\n    const ret = input.queryParams.queryMatcher(doc);\n    return ret;\n};\nexport const wasResultsEmpty = (input) => {\n    return input.previousResults.length === 0;\n};\n//# sourceMappingURL=state-resolver.js.map","import { hasLimit, isFindOne, hasSkip, wasResultsEmpty, isDelete, isInsert, isUpdate, wasLimitReached, sortParamsChanged, wasInResult, wasFirst, wasLast, wasSortedBeforeFirst, wasSortedAfterLast, isSortedBeforeFirst, isSortedAfterLast, wasMatching, doesMatchNow } from './state-resolver.js';\nexport * from './state-resolver.js';\n/**\n * all states ordered by performance-cost\n * cheapest first\n * TODO run tests on which is really the fastest\n */\nexport const orderedStateList = [\n    'isInsert',\n    'isUpdate',\n    'isDelete',\n    'hasLimit',\n    'isFindOne',\n    'hasSkip',\n    'wasResultsEmpty',\n    'wasLimitReached',\n    'wasFirst',\n    'wasLast',\n    'sortParamsChanged',\n    'wasInResult',\n    'wasSortedBeforeFirst',\n    'wasSortedAfterLast',\n    'isSortedBeforeFirst',\n    'isSortedAfterLast',\n    'wasMatching',\n    'doesMatchNow'\n];\nexport const stateResolveFunctions = {\n    isInsert,\n    isUpdate,\n    isDelete,\n    hasLimit,\n    isFindOne,\n    hasSkip,\n    wasResultsEmpty,\n    wasLimitReached,\n    wasFirst,\n    wasLast,\n    sortParamsChanged,\n    wasInResult,\n    wasSortedBeforeFirst,\n    wasSortedAfterLast,\n    isSortedBeforeFirst,\n    isSortedAfterLast,\n    wasMatching,\n    doesMatchNow\n};\nexport const stateResolveFunctionByIndex = {\n    0: isInsert,\n    1: isUpdate,\n    2: isDelete,\n    3: hasLimit,\n    4: isFindOne,\n    5: hasSkip,\n    6: wasResultsEmpty,\n    7: wasLimitReached,\n    8: wasFirst,\n    9: wasLast,\n    10: sortParamsChanged,\n    11: wasInResult,\n    12: wasSortedBeforeFirst,\n    13: wasSortedAfterLast,\n    14: isSortedBeforeFirst,\n    15: isSortedAfterLast,\n    16: wasMatching,\n    17: doesMatchNow\n};\nexport function resolveState(stateName, input) {\n    const fn = stateResolveFunctions[stateName];\n    if (!fn) {\n        throw new Error('resolveState() has no function for ' + stateName);\n    }\n    return fn(input);\n}\nexport function getStateSet(input) {\n    let set = '';\n    for (let i = 0; i < orderedStateList.length; i++) {\n        const name = orderedStateList[i];\n        const value = resolveState(name, input);\n        const add = value ? '1' : '0';\n        set += add;\n    }\n    return set;\n}\nexport function logStateSet(stateSet) {\n    orderedStateList.forEach((state, index) => {\n        console.log('state: ' + state + ' : ' + stateSet[index]);\n    });\n}\n//# sourceMappingURL=index.js.map","import { minimalStringToSimpleBdd, resolveWithSimpleBdd } from 'binary-decision-diagram';\nimport { stateResolveFunctionByIndex } from '../states/index.js';\nexport const minimalBddString = '14a1b,c+d2e5f0g/h.i4j*k-l)m(n6obh9pce9qnh9rad9scm9tae9uan9vbf9wbe9xbn9ycg9zck9{cn9|nd9}ne9~nf9ng9¡nm9¢nk9£mh9¤mi9¥mj9¦mk9§ml9¨mn9©mc8ª¤{8«¥z8¬¨s8­¨n8®mn8¯¨¡8°¨m8±pz7²ª«7³{z7´­®7µ}n7¶¤¥7·¨m7¸wo6¹µ}6ºnq6»²¬6¼tu6½wx6¾´¯6¿µn6À®¯6Á¶§6Â·£6Ã¶¨6Ä·¨6Åm¦6Æm¨6Ç¤¥5È¨m5Ém©4Êm®4ËÇ§4ÌÈ£4ÍÇ¬4ÎÃ»4ÏÈ¯4ÐÄ¾4Ñm¦4Òm¯4ÓÆÀ4Ôma3Õmn3ÖÉa3×Ên3ØËr3ÙÁt3ÚÌ|3ÛÂ¹3ÜÍr3ÝÎ¼3ÞÏ|3ßÐ¿3àØÙ2áv¸2ây±2ãÚÛ2ä~º2åµ2æÜÝ2çv½2èy³2éz{2êÞß2ë~n2ìn2íÑÅ2îÒÓ2ï¢n2ðÔb1ñÕn1òÖb1ó×n1ôàá1õâz1öãä1÷æç1øèé1ùêë1úðc0ûñn0üòc0ýón0þmn0ÿÊn0Āôõ0āöå0Ă÷ø0ăùì0Ąíï0ąîï0Ćúû/ćüý/ĈĀā/ĉĂă/ĊÁÂ/ċÃÄ/Čúm.čüm.ĎĆm.ďćm.Đþm.đÿm.ĒĀ§.ēĂ°.ĔĈ§.ĕĉ°.ĖĄ§.ėą°.ĘÁ§.ęÃ¨.ĚĊ§.ěċ¨.ĜÅ§.ĝÆ¨.ĞČč-ğĎď-ĠĐđ-ġĒē-ĢĔĕ-ģĖė-ĤĘę-ĥĚě-ĦĜĝ-ħğĠ,ĨĢģ,ĩĥĦ,ĪĞħ+īġĨ+ĬĤĩ+ĭĪī)ĭĬ(';\nlet simpleBdd;\nexport function getSimpleBdd() {\n    if (!simpleBdd) {\n        simpleBdd = minimalStringToSimpleBdd(minimalBddString);\n    }\n    return simpleBdd;\n}\nexport const resolveInput = (input) => {\n    return resolveWithSimpleBdd(getSimpleBdd(), stateResolveFunctionByIndex, input);\n};\n//# sourceMappingURL=bdd.generated.js.map","import { splitStringToChunks } from '../util.js';\nimport { getNumberOfChar } from './string-format.js';\nexport function minimalStringToSimpleBdd(str) {\n    const nodesById = new Map();\n    // parse leaf nodes\n    const leafNodeAmount = parseInt(str.charAt(0) + str.charAt(1), 10);\n    const lastLeafNodeChar = (2 + leafNodeAmount * 2);\n    const leafNodeChars = str.substring(2, lastLeafNodeChar);\n    const leafNodeChunks = splitStringToChunks(leafNodeChars, 2);\n    for (let i = 0; i < leafNodeChunks.length; i++) {\n        const chunk = leafNodeChunks[i];\n        const id = chunk.charAt(0);\n        const value = getNumberOfChar(chunk.charAt(1));\n        nodesById.set(id, value);\n    }\n    // parse internal nodes\n    const internalNodeChars = str.substring(lastLeafNodeChar, str.length - 3);\n    const internalNodeChunks = splitStringToChunks(internalNodeChars, 4);\n    for (let i = 0; i < internalNodeChunks.length; i++) {\n        const chunk = internalNodeChunks[i];\n        const id = chunk.charAt(0);\n        const idOf0Branch = chunk.charAt(1);\n        const idOf1Branch = chunk.charAt(2);\n        const level = getNumberOfChar(chunk.charAt(3));\n        if (!nodesById.has(idOf0Branch)) {\n            throw new Error('missing node with id ' + idOf0Branch);\n        }\n        if (!nodesById.has(idOf1Branch)) {\n            throw new Error('missing node with id ' + idOf1Branch);\n        }\n        const node0 = nodesById.get(idOf0Branch);\n        const node1 = nodesById.get(idOf1Branch);\n        const node = {\n            l: level, // level is first for prettier json output\n            0: node0,\n            1: node1\n        };\n        nodesById.set(id, node);\n    }\n    // parse root node\n    const last3 = str.slice(-3);\n    const idOf0 = last3.charAt(0);\n    const idOf1 = last3.charAt(1);\n    const levelOfRoot = getNumberOfChar(last3.charAt(2));\n    const nodeOf0 = nodesById.get(idOf0);\n    const nodeOf1 = nodesById.get(idOf1);\n    const rootNode = {\n        l: levelOfRoot,\n        0: nodeOf0,\n        1: nodeOf1,\n    };\n    return rootNode;\n}\n//# sourceMappingURL=minimal-string-to-simple-bdd.js.map","import { booleanToBooleanString } from '../util.js';\nexport function resolveWithSimpleBdd(simpleBdd, fns, input) {\n    let currentNode = simpleBdd;\n    let currentLevel = simpleBdd.l;\n    while (true) {\n        const booleanResult = fns[currentLevel](input);\n        const branchKey = booleanToBooleanString(booleanResult);\n        currentNode = currentNode[branchKey];\n        if (typeof currentNode === 'number' || typeof currentNode === 'string') {\n            return currentNode;\n        }\n        else {\n            currentLevel = currentNode.l;\n        }\n    }\n}\n//# sourceMappingURL=resolve-with-simple-bdd.js.map","import { getStateSet } from './states/index.js';\nimport { actionFunctions, orderedActionList } from './actions/index.js';\nimport { resolveInput } from './bdd/bdd.generated.js';\nexport * from './states/index.js';\nexport * from './util.js';\nexport function calculateActionFromMap(stateSetToActionMap, input) {\n    const stateSet = getStateSet(input);\n    const actionName = stateSetToActionMap.get(stateSet);\n    if (!actionName) {\n        return {\n            action: 'runFullQueryAgain',\n            stateSet\n        };\n    }\n    else {\n        return {\n            action: actionName,\n            stateSet\n        };\n    }\n}\nexport function calculateActionName(input) {\n    const resolvedActionId = resolveInput(input);\n    return orderedActionList[resolvedActionId];\n}\nexport function calculateActionFunction(input) {\n    const actionName = calculateActionName(input);\n    return actionFunctions[actionName];\n}\n/**\n * for performance reasons,\n * @mutates the input\n * @returns the new results\n */\nexport function runAction(action, queryParams, changeEvent, previousResults, keyDocumentMap) {\n    const fn = actionFunctions[action];\n    fn({\n        queryParams,\n        changeEvent,\n        previousResults,\n        keyDocumentMap\n    });\n    return previousResults;\n}\n//# sourceMappingURL=index.js.map","import { calculateActionName, runAction } from 'event-reduce-js';\nimport { rxChangeEventToEventReduceChangeEvent } from \"./rx-change-event.js\";\nimport { arrayFilterNotEmpty, clone, ensureNotFalsy, getFromMapOrCreate } from \"./plugins/utils/index.js\";\nimport { getQueryMatcher, getSortComparator, normalizeMangoQuery } from \"./rx-query-helper.js\";\nexport function getSortFieldsOfQuery(primaryKey, query) {\n  if (!query.sort || query.sort.length === 0) {\n    return [primaryKey];\n  } else {\n    return query.sort.map(part => Object.keys(part)[0]);\n  }\n}\nexport var RXQUERY_QUERY_PARAMS_CACHE = new WeakMap();\nexport function getQueryParams(rxQuery) {\n  return getFromMapOrCreate(RXQUERY_QUERY_PARAMS_CACHE, rxQuery, () => {\n    var collection = rxQuery.collection;\n    var normalizedMangoQuery = normalizeMangoQuery(collection.storageInstance.schema, clone(rxQuery.mangoQuery));\n    var primaryKey = collection.schema.primaryPath;\n\n    /**\n     * Create a custom sort comparator\n     * that uses the hooks to ensure\n     * we send for example compressed documents to be sorted by compressed queries.\n     */\n    var sortComparator = getSortComparator(collection.schema.jsonSchema, normalizedMangoQuery);\n    var useSortComparator = (docA, docB) => {\n      var sortComparatorData = {\n        docA,\n        docB,\n        rxQuery\n      };\n      return sortComparator(sortComparatorData.docA, sortComparatorData.docB);\n    };\n\n    /**\n     * Create a custom query matcher\n     * that uses the hooks to ensure\n     * we send for example compressed documents to match compressed queries.\n     */\n    var queryMatcher = getQueryMatcher(collection.schema.jsonSchema, normalizedMangoQuery);\n    var useQueryMatcher = doc => {\n      var queryMatcherData = {\n        doc,\n        rxQuery\n      };\n      return queryMatcher(queryMatcherData.doc);\n    };\n    var ret = {\n      primaryKey: rxQuery.collection.schema.primaryPath,\n      skip: normalizedMangoQuery.skip,\n      limit: normalizedMangoQuery.limit,\n      sortFields: getSortFieldsOfQuery(primaryKey, normalizedMangoQuery),\n      sortComparator: useSortComparator,\n      queryMatcher: useQueryMatcher\n    };\n    return ret;\n  });\n}\nexport function calculateNewResults(rxQuery, rxChangeEvents) {\n  if (!rxQuery.collection.database.eventReduce) {\n    return {\n      runFullQueryAgain: true\n    };\n  }\n  var queryParams = getQueryParams(rxQuery);\n  var previousResults = ensureNotFalsy(rxQuery._result).docsData.slice(0);\n  var previousResultsMap = ensureNotFalsy(rxQuery._result).docsDataMap;\n  var changed = false;\n  var eventReduceEvents = rxChangeEvents.map(cE => rxChangeEventToEventReduceChangeEvent(cE)).filter(arrayFilterNotEmpty);\n  var foundNonOptimizeable = eventReduceEvents.find(eventReduceEvent => {\n    var stateResolveFunctionInput = {\n      queryParams,\n      changeEvent: eventReduceEvent,\n      previousResults,\n      keyDocumentMap: previousResultsMap\n    };\n    var actionName = calculateActionName(stateResolveFunctionInput);\n    if (actionName === 'runFullQueryAgain') {\n      return true;\n    } else if (actionName !== 'doNothing') {\n      changed = true;\n      runAction(actionName, queryParams, eventReduceEvent, previousResults, previousResultsMap);\n      return false;\n    }\n  });\n  if (foundNonOptimizeable) {\n    return {\n      runFullQueryAgain: true\n    };\n  } else {\n    return {\n      runFullQueryAgain: false,\n      changed,\n      newResults: previousResults\n    };\n  }\n}\n//# sourceMappingURL=event-reduce.js.map","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport { mapDocumentsDataToCacheDocs } from \"./doc-cache.js\";\nimport { now, overwriteGetterForCaching } from \"./plugins/utils/index.js\";\n/**\n * RxDB needs the query results in multiple formats.\n * Sometimes as a Map or an array with only the documentData.\n * For better performance we work with this class\n * that initializes stuff lazily so that\n * we can directly work with the query results after RxQuery.exec()\n */\nexport var RxQuerySingleResult = /*#__PURE__*/function () {\n  /**\n   * Time at which the current _result state was created.\n   * Used to determine if the result set has changed since X\n   * so that we do not emit the same result multiple times on subscription.\n   */\n\n  function RxQuerySingleResult(collection,\n  // only used internally, do not use outside, use this.docsData instead\n  docsDataFromStorageInstance,\n  // can be overwritten for count-queries\n  count) {\n    this.time = now();\n    this.collection = collection;\n    this.count = count;\n    this.documents = mapDocumentsDataToCacheDocs(this.collection._docCache, docsDataFromStorageInstance);\n  }\n\n  /**\n   * Instead of using the newResultData in the result cache,\n   * we directly use the objects that are stored in the RxDocument\n   * to ensure we do not store the same data twice and fill up the memory.\n   * @overwrites itself with the actual value\n   */\n  _createClass(RxQuerySingleResult, [{\n    key: \"docsData\",\n    get: function () {\n      return overwriteGetterForCaching(this, 'docsData', this.documents.map(d => d._data));\n    }\n\n    // A key->document map, used in the event reduce optimization.\n  }, {\n    key: \"docsDataMap\",\n    get: function () {\n      var map = new Map();\n      this.documents.forEach(d => {\n        map.set(d.primary, d._data);\n      });\n      return overwriteGetterForCaching(this, 'docsDataMap', map);\n    }\n  }, {\n    key: \"docsMap\",\n    get: function () {\n      var map = new Map();\n      var documents = this.documents;\n      for (var i = 0; i < documents.length; i++) {\n        var doc = documents[i];\n        map.set(doc.primary, doc);\n      }\n      return overwriteGetterForCaching(this, 'docsMap', map);\n    }\n  }]);\n  return RxQuerySingleResult;\n}();\n//# sourceMappingURL=rx-query-single-result.js.map","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport { BehaviorSubject, firstValueFrom, merge } from 'rxjs';\nimport { mergeMap, filter, map, startWith, distinctUntilChanged, shareReplay } from 'rxjs/operators';\nimport { sortObject, pluginMissing, overwriteGetterForCaching, now, PROMISE_RESOLVE_FALSE, RXJS_SHARE_REPLAY_DEFAULTS, ensureNotFalsy, areRxDocumentArraysEqual, appendToArray } from \"./plugins/utils/index.js\";\nimport { newRxError } from \"./rx-error.js\";\nimport { runPluginHooks } from \"./hooks.js\";\nimport { calculateNewResults } from \"./event-reduce.js\";\nimport { triggerCacheReplacement } from \"./query-cache.js\";\nimport { getQueryMatcher, normalizeMangoQuery } from \"./rx-query-helper.js\";\nimport { RxQuerySingleResult } from \"./rx-query-single-result.js\";\nvar _queryCount = 0;\nvar newQueryID = function () {\n  return ++_queryCount;\n};\nexport var RxQueryBase = /*#__PURE__*/function () {\n  /**\n   * Some stats then are used for debugging and cache replacement policies\n   */\n\n  // used in the query-cache to determine if the RxQuery can be cleaned up.\n\n  // used to count the subscribers to the query\n\n  /**\n   * Contains the current result state\n   * or null if query has not run yet.\n   */\n\n  function RxQueryBase(op, mangoQuery, collection,\n  // used by some plugins\n  other = {}) {\n    this.id = newQueryID();\n    this._execOverDatabaseCount = 0;\n    this._creationTime = now();\n    this._lastEnsureEqual = 0;\n    this.uncached = false;\n    this.refCount$ = new BehaviorSubject(null);\n    this._result = null;\n    this._latestChangeEvent = -1;\n    this._lastExecStart = 0;\n    this._lastExecEnd = 0;\n    this._ensureEqualQueue = PROMISE_RESOLVE_FALSE;\n    this.op = op;\n    this.mangoQuery = mangoQuery;\n    this.collection = collection;\n    this.other = other;\n    if (!mangoQuery) {\n      this.mangoQuery = _getDefaultQuery();\n    }\n    this.isFindOneByIdQuery = isFindOneByIdQuery(this.collection.schema.primaryPath, mangoQuery);\n  }\n  var _proto = RxQueryBase.prototype;\n  /**\n   * Returns an observable that emits the results\n   * This should behave like an rxjs-BehaviorSubject which means:\n   * - Emit the current result-set on subscribe\n   * - Emit the new result-set when an RxChangeEvent comes in\n   * - Do not emit anything before the first result-set was created (no null)\n   */\n  /**\n   * set the new result-data as result-docs of the query\n   * @param newResultData json-docs that were received from the storage\n   */\n  _proto._setResultData = function _setResultData(newResultData) {\n    if (typeof newResultData === 'number') {\n      this._result = new RxQuerySingleResult(this.collection, [], newResultData);\n      return;\n    } else if (newResultData instanceof Map) {\n      newResultData = Array.from(newResultData.values());\n    }\n    var newQueryResult = new RxQuerySingleResult(this.collection, newResultData, newResultData.length);\n    this._result = newQueryResult;\n  }\n\n  /**\n   * executes the query on the database\n   * @return results-array with document-data\n   */;\n  _proto._execOverDatabase = async function _execOverDatabase() {\n    this._execOverDatabaseCount = this._execOverDatabaseCount + 1;\n    this._lastExecStart = now();\n    if (this.op === 'count') {\n      var preparedQuery = this.getPreparedQuery();\n      var result = await this.collection.storageInstance.count(preparedQuery);\n      if (result.mode === 'slow' && !this.collection.database.allowSlowCount) {\n        throw newRxError('QU14', {\n          collection: this.collection,\n          queryObj: this.mangoQuery\n        });\n      } else {\n        return result.count;\n      }\n    }\n    if (this.op === 'findByIds') {\n      var ids = ensureNotFalsy(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in;\n      var ret = new Map();\n      var mustBeQueried = [];\n      // first try to fill from docCache\n      ids.forEach(id => {\n        var docData = this.collection._docCache.getLatestDocumentDataIfExists(id);\n        if (docData) {\n          if (!docData._deleted) {\n            var doc = this.collection._docCache.getCachedRxDocument(docData);\n            ret.set(id, doc);\n          }\n        } else {\n          mustBeQueried.push(id);\n        }\n      });\n      // everything which was not in docCache must be fetched from the storage\n      if (mustBeQueried.length > 0) {\n        var docs = await this.collection.storageInstance.findDocumentsById(mustBeQueried, false);\n        docs.forEach(docData => {\n          var doc = this.collection._docCache.getCachedRxDocument(docData);\n          ret.set(doc.primary, doc);\n        });\n      }\n      return ret;\n    }\n    var docsPromise = queryCollection(this);\n    return docsPromise.then(docs => {\n      this._lastExecEnd = now();\n      return docs;\n    });\n  }\n\n  /**\n   * Execute the query\n   * To have an easier implementations,\n   * just subscribe and use the first result\n   */;\n  _proto.exec = function exec(throwIfMissing) {\n    if (throwIfMissing && this.op !== 'findOne') {\n      throw newRxError('QU9', {\n        collection: this.collection.name,\n        query: this.mangoQuery,\n        op: this.op\n      });\n    }\n\n    /**\n     * run _ensureEqual() here,\n     * this will make sure that errors in the query which throw inside of the RxStorage,\n     * will be thrown at this execution context and not in the background.\n     */\n    return _ensureEqual(this).then(() => firstValueFrom(this.$)).then(result => {\n      if (!result && throwIfMissing) {\n        throw newRxError('QU10', {\n          collection: this.collection.name,\n          query: this.mangoQuery,\n          op: this.op\n        });\n      } else {\n        return result;\n      }\n    });\n  }\n\n  /**\n   * cached call to get the queryMatcher\n   * @overwrites itself with the actual value\n   */;\n  /**\n   * returns a string that is used for equal-comparisons\n   * @overwrites itself with the actual value\n   */\n  _proto.toString = function toString() {\n    var stringObj = sortObject({\n      op: this.op,\n      query: this.mangoQuery,\n      other: this.other\n    }, true);\n    var value = JSON.stringify(stringObj);\n    this.toString = () => value;\n    return value;\n  }\n\n  /**\n   * returns the prepared query\n   * which can be send to the storage instance to query for documents.\n   * @overwrites itself with the actual value.\n   */;\n  _proto.getPreparedQuery = function getPreparedQuery() {\n    var hookInput = {\n      rxQuery: this,\n      // can be mutated by the hooks so we have to deep clone first.\n      mangoQuery: normalizeMangoQuery(this.collection.schema.jsonSchema, this.mangoQuery)\n    };\n    runPluginHooks('prePrepareQuery', hookInput);\n    var value = this.collection.database.storage.statics.prepareQuery(this.collection.schema.jsonSchema, hookInput.mangoQuery);\n    this.getPreparedQuery = () => value;\n    return value;\n  }\n\n  /**\n   * returns true if the document matches the query,\n   * does not use the 'skip' and 'limit'\n   */;\n  _proto.doesDocumentDataMatch = function doesDocumentDataMatch(docData) {\n    // if doc is deleted, it cannot match\n    if (docData._deleted) {\n      return false;\n    }\n    return this.queryMatcher(docData);\n  }\n\n  /**\n   * deletes all found documents\n   * @return promise with deleted documents\n   */;\n  _proto.remove = function remove() {\n    return this.exec().then(docs => {\n      if (Array.isArray(docs)) {\n        // TODO use a bulk operation instead of running .remove() on each document\n        return Promise.all(docs.map(doc => doc.remove()));\n      } else {\n        return docs.remove();\n      }\n    });\n  }\n\n  /**\n   * helper function to transform RxQueryBase to RxQuery type\n   */;\n  /**\n   * updates all found documents\n   * @overwritten by plugin (optional)\n   */\n  _proto.update = function update(_updateObj) {\n    throw pluginMissing('update');\n  }\n\n  // we only set some methods of query-builder here\n  // because the others depend on these ones\n  ;\n  _proto.where = function where(_queryObj) {\n    throw pluginMissing('query-builder');\n  };\n  _proto.sort = function sort(_params) {\n    throw pluginMissing('query-builder');\n  };\n  _proto.skip = function skip(_amount) {\n    throw pluginMissing('query-builder');\n  };\n  _proto.limit = function limit(_amount) {\n    throw pluginMissing('query-builder');\n  };\n  _createClass(RxQueryBase, [{\n    key: \"$\",\n    get: function () {\n      if (!this._$) {\n        var results$ = this.collection.$.pipe(\n        /**\n         * Performance shortcut.\n         * Changes to local documents are not relevant for the query.\n         */\n        filter(changeEvent => !changeEvent.isLocal),\n        /**\n         * Start once to ensure the querying also starts\n         * when there where no changes.\n         */\n        startWith(null),\n        // ensure query results are up to date.\n        mergeMap(() => _ensureEqual(this)),\n        // use the current result set, written by _ensureEqual().\n        map(() => this._result),\n        // do not run stuff above for each new subscriber, only once.\n        shareReplay(RXJS_SHARE_REPLAY_DEFAULTS),\n        // do not proceed if result set has not changed.\n        distinctUntilChanged((prev, curr) => {\n          if (prev && prev.time === ensureNotFalsy(curr).time) {\n            return true;\n          } else {\n            return false;\n          }\n        }), filter(result => !!result),\n        /**\n         * Map the result set to a single RxDocument or an array,\n         * depending on query type\n         */\n        map(result => {\n          var useResult = ensureNotFalsy(result);\n          if (this.op === 'count') {\n            return useResult.count;\n          } else if (this.op === 'findOne') {\n            // findOne()-queries emit RxDocument or null\n            return useResult.documents.length === 0 ? null : useResult.documents[0];\n          } else if (this.op === 'findByIds') {\n            return useResult.docsMap;\n          } else {\n            // find()-queries emit RxDocument[]\n            // Flat copy the array so it won't matter if the user modifies it.\n            return useResult.documents.slice(0);\n          }\n        }));\n        this._$ = merge(results$,\n        /**\n         * Also add the refCount$ to the query observable\n         * to allow us to count the amount of subscribers.\n         */\n        this.refCount$.pipe(filter(() => false)));\n      }\n      return this._$;\n    }\n\n    // stores the changeEvent-number of the last handled change-event\n\n    // time stamps on when the last full exec over the database has run\n    // used to properly handle events that happen while the find-query is running\n\n    /**\n     * ensures that the exec-runs\n     * are not run in parallel\n     */\n  }, {\n    key: \"queryMatcher\",\n    get: function () {\n      var schema = this.collection.schema.jsonSchema;\n      var normalizedQuery = normalizeMangoQuery(this.collection.schema.jsonSchema, this.mangoQuery);\n      return overwriteGetterForCaching(this, 'queryMatcher', getQueryMatcher(schema, normalizedQuery));\n    }\n  }, {\n    key: \"asRxQuery\",\n    get: function () {\n      return this;\n    }\n  }]);\n  return RxQueryBase;\n}();\nexport function _getDefaultQuery() {\n  return {\n    selector: {}\n  };\n}\n\n/**\n * run this query through the QueryCache\n */\nexport function tunnelQueryCache(rxQuery) {\n  return rxQuery.collection._queryCache.getByQuery(rxQuery);\n}\nexport function createRxQuery(op, queryObj, collection, other) {\n  runPluginHooks('preCreateRxQuery', {\n    op,\n    queryObj,\n    collection,\n    other\n  });\n  var ret = new RxQueryBase(op, queryObj, collection, other);\n\n  // ensure when created with same params, only one is created\n  ret = tunnelQueryCache(ret);\n  triggerCacheReplacement(collection);\n  return ret;\n}\n\n/**\n * Check if the current results-state is in sync with the database\n * which means that no write event happened since the last run.\n * @return false if not which means it should re-execute\n */\nfunction _isResultsInSync(rxQuery) {\n  var currentLatestEventNumber = rxQuery.asRxQuery.collection._changeEventBuffer.counter;\n  if (rxQuery._latestChangeEvent >= currentLatestEventNumber) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * wraps __ensureEqual()\n * to ensure it does not run in parallel\n * @return true if has changed, false if not\n */\nfunction _ensureEqual(rxQuery) {\n  // Optimisation shortcut\n  if (rxQuery.collection.database.destroyed || _isResultsInSync(rxQuery)) {\n    return PROMISE_RESOLVE_FALSE;\n  }\n  rxQuery._ensureEqualQueue = rxQuery._ensureEqualQueue.then(() => __ensureEqual(rxQuery));\n  return rxQuery._ensureEqualQueue;\n}\n\n/**\n * ensures that the results of this query is equal to the results which a query over the database would give\n * @return true if results have changed\n */\nfunction __ensureEqual(rxQuery) {\n  rxQuery._lastEnsureEqual = now();\n\n  /**\n   * Optimisation shortcuts\n   */\n  if (\n  // db is closed\n  rxQuery.collection.database.destroyed ||\n  // nothing happened since last run\n  _isResultsInSync(rxQuery)) {\n    return PROMISE_RESOLVE_FALSE;\n  }\n  var ret = false;\n  var mustReExec = false; // if this becomes true, a whole execution over the database is made\n  if (rxQuery._latestChangeEvent === -1) {\n    // have not executed yet -> must run\n    mustReExec = true;\n  }\n\n  /**\n   * try to use EventReduce to calculate the new results\n   */\n  if (!mustReExec) {\n    var missedChangeEvents = rxQuery.asRxQuery.collection._changeEventBuffer.getFrom(rxQuery._latestChangeEvent + 1);\n    if (missedChangeEvents === null) {\n      // changeEventBuffer is of bounds -> we must re-execute over the database\n      mustReExec = true;\n    } else {\n      rxQuery._latestChangeEvent = rxQuery.asRxQuery.collection._changeEventBuffer.counter;\n      var runChangeEvents = rxQuery.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(missedChangeEvents);\n      if (rxQuery.op === 'count') {\n        // 'count' query\n        var previousCount = ensureNotFalsy(rxQuery._result).count;\n        var newCount = previousCount;\n        runChangeEvents.forEach(cE => {\n          var didMatchBefore = cE.previousDocumentData && rxQuery.doesDocumentDataMatch(cE.previousDocumentData);\n          var doesMatchNow = rxQuery.doesDocumentDataMatch(cE.documentData);\n          if (!didMatchBefore && doesMatchNow) {\n            newCount++;\n          }\n          if (didMatchBefore && !doesMatchNow) {\n            newCount--;\n          }\n        });\n        if (newCount !== previousCount) {\n          ret = true; // true because results changed\n          rxQuery._setResultData(newCount);\n        }\n      } else {\n        // 'find' or 'findOne' query\n        var eventReduceResult = calculateNewResults(rxQuery, runChangeEvents);\n        if (eventReduceResult.runFullQueryAgain) {\n          // could not calculate the new results, execute must be done\n          mustReExec = true;\n        } else if (eventReduceResult.changed) {\n          // we got the new results, we do not have to re-execute, mustReExec stays false\n          ret = true; // true because results changed\n          rxQuery._setResultData(eventReduceResult.newResults);\n        }\n      }\n    }\n  }\n\n  // oh no we have to re-execute the whole query over the database\n  if (mustReExec) {\n    return rxQuery._execOverDatabase().then(newResultData => {\n      /**\n       * The RxStorage is defined to always first emit events and then return\n       * on bulkWrite() calls. So here we have to use the counter AFTER the execOverDatabase()\n       * has been run, not the one from before.\n       */\n      rxQuery._latestChangeEvent = rxQuery.collection._changeEventBuffer.counter;\n\n      // A count query needs a different has-changed check.\n      if (typeof newResultData === 'number') {\n        if (!rxQuery._result || newResultData !== rxQuery._result.count) {\n          ret = true;\n          rxQuery._setResultData(newResultData);\n        }\n        return ret;\n      }\n      if (!rxQuery._result || !areRxDocumentArraysEqual(rxQuery.collection.schema.primaryPath, newResultData, rxQuery._result.docsData)) {\n        ret = true; // true because results changed\n        rxQuery._setResultData(newResultData);\n      }\n      return ret;\n    });\n  }\n  return Promise.resolve(ret); // true if results have changed\n}\n\n/**\n * Runs the query over the storage instance\n * of the collection.\n * Does some optimizations to ensure findById is used\n * when specific queries are used.\n */\nexport async function queryCollection(rxQuery) {\n  var docs = [];\n  var collection = rxQuery.collection;\n\n  /**\n   * Optimizations shortcut.\n   * If query is find-one-document-by-id,\n   * then we do not have to use the slow query() method\n   * but instead can use findDocumentsById()\n   */\n  if (rxQuery.isFindOneByIdQuery) {\n    if (Array.isArray(rxQuery.isFindOneByIdQuery)) {\n      var docIds = rxQuery.isFindOneByIdQuery;\n      docIds = docIds.filter(docId => {\n        // first try to fill from docCache\n        var docData = rxQuery.collection._docCache.getLatestDocumentDataIfExists(docId);\n        if (docData) {\n          if (!docData._deleted) {\n            docs.push(docData);\n          }\n          return false;\n        } else {\n          return true;\n        }\n      });\n      // otherwise get from storage\n      if (docIds.length > 0) {\n        var docsFromStorage = await collection.storageInstance.findDocumentsById(docIds, false);\n        appendToArray(docs, docsFromStorage);\n      }\n    } else {\n      var docId = rxQuery.isFindOneByIdQuery;\n\n      // first try to fill from docCache\n      var docData = rxQuery.collection._docCache.getLatestDocumentDataIfExists(docId);\n      if (!docData) {\n        // otherwise get from storage\n        var fromStorageList = await collection.storageInstance.findDocumentsById([docId], false);\n        if (fromStorageList[0]) {\n          docData = fromStorageList[0];\n        }\n      }\n      if (docData && !docData._deleted) {\n        docs.push(docData);\n      }\n    }\n  } else {\n    var preparedQuery = rxQuery.getPreparedQuery();\n    var queryResult = await collection.storageInstance.query(preparedQuery);\n    docs = queryResult.documents;\n  }\n  return docs;\n}\n\n/**\n * Returns true if the given query\n * selects exactly one document by its id.\n * Used to optimize performance because these kind of\n * queries do not have to run over an index and can use get-by-id instead.\n * Returns false if no query of that kind.\n * Returns the document id otherwise.\n */\nexport function isFindOneByIdQuery(primaryPath, query) {\n  // must have exactly one operator which must be $eq || $in\n  if (!query.skip && query.selector && Object.keys(query.selector).length === 1 && query.selector[primaryPath]) {\n    var value = query.selector[primaryPath];\n    if (typeof value === 'string') {\n      return value;\n    } else if (Object.keys(value).length === 1 && typeof value.$eq === 'string') {\n      return value.$eq;\n    }\n\n    // same with $in string arrays\n    if (Object.keys(value).length === 1 && Array.isArray(value.$eq) &&\n    // must only contain strings\n    !value.$eq.find(r => typeof r !== 'string')) {\n      return value.$eq;\n    }\n  }\n  return false;\n}\nexport function isRxQuery(obj) {\n  return obj instanceof RxQueryBase;\n}\n//# sourceMappingURL=rx-query.js.map","import { mergeAll } from '../operators/mergeAll';\nimport { innerFrom } from './innerFrom';\nimport { EMPTY } from './empty';\nimport { popNumber, popScheduler } from '../util/args';\nimport { from } from './from';\nexport function merge() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(args);\n    var concurrent = popNumber(args, Infinity);\n    var sources = args;\n    return !sources.length\n        ?\n            EMPTY\n        : sources.length === 1\n            ?\n                innerFrom(sources[0])\n            :\n                mergeAll(concurrent)(from(sources, scheduler));\n}\n//# sourceMappingURL=merge.js.map","export var REGEX_ALL_DOTS = /\\./g;\nexport var REGEX_ALL_PIPES = /\\|/g;\n//# sourceMappingURL=utils-regex.js.map","import { newRxError } from \"./rx-error.js\";\nimport { appendToArray, ensureNotFalsy, flatClone, getProperty, isMaybeReadonlyArray, REGEX_ALL_DOTS, RX_META_LWT_MINIMUM, sortObject, trimDots } from \"./plugins/utils/index.js\";\n/**\n * Helper function to create a valid RxJsonSchema\n * with a given version.\n */\nexport function getPseudoSchemaForVersion(version, primaryKey) {\n  var pseudoSchema = fillWithDefaultSettings({\n    version,\n    type: 'object',\n    primaryKey: primaryKey,\n    properties: {\n      [primaryKey]: {\n        type: 'string',\n        maxLength: 100\n      }\n    },\n    required: [primaryKey]\n  });\n  return pseudoSchema;\n}\n\n/**\n * Returns the sub-schema for a given path\n */\nexport function getSchemaByObjectPath(rxJsonSchema, path) {\n  var usePath = path;\n  usePath = usePath.replace(REGEX_ALL_DOTS, '.properties.');\n  usePath = 'properties.' + usePath;\n  usePath = trimDots(usePath);\n  var ret = getProperty(rxJsonSchema, usePath);\n  return ret;\n}\nexport function fillPrimaryKey(primaryPath, jsonSchema, documentData) {\n  // optimization shortcut.\n  if (typeof jsonSchema.primaryKey === 'string') {\n    return documentData;\n  }\n  var newPrimary = getComposedPrimaryKeyOfDocumentData(jsonSchema, documentData);\n  var existingPrimary = documentData[primaryPath];\n  if (existingPrimary && existingPrimary !== newPrimary) {\n    throw newRxError('DOC19', {\n      args: {\n        documentData,\n        existingPrimary,\n        newPrimary\n      },\n      schema: jsonSchema\n    });\n  }\n  documentData[primaryPath] = newPrimary;\n  return documentData;\n}\nexport function getPrimaryFieldOfPrimaryKey(primaryKey) {\n  if (typeof primaryKey === 'string') {\n    return primaryKey;\n  } else {\n    return primaryKey.key;\n  }\n}\nexport function getLengthOfPrimaryKey(schema) {\n  var primaryPath = getPrimaryFieldOfPrimaryKey(schema.primaryKey);\n  var schemaPart = getSchemaByObjectPath(schema, primaryPath);\n  return ensureNotFalsy(schemaPart.maxLength);\n}\n\n/**\n * Returns the composed primaryKey of a document by its data.\n */\nexport function getComposedPrimaryKeyOfDocumentData(jsonSchema, documentData) {\n  if (typeof jsonSchema.primaryKey === 'string') {\n    return documentData[jsonSchema.primaryKey];\n  }\n  var compositePrimary = jsonSchema.primaryKey;\n  return compositePrimary.fields.map(field => {\n    var value = getProperty(documentData, field);\n    if (typeof value === 'undefined') {\n      throw newRxError('DOC18', {\n        args: {\n          field,\n          documentData\n        }\n      });\n    }\n    return value;\n  }).join(compositePrimary.separator);\n}\n\n/**\n * Normalize the RxJsonSchema.\n * We need this to ensure everything is set up properly\n * and we have the same hash on schemas that represent the same value but\n * have different json.\n *\n * - Orders the schemas attributes by alphabetical order\n * - Adds the primaryKey to all indexes that do not contain the primaryKey\n * - We need this for deterministic sort order on all queries, which is required for event-reduce to work.\n *\n * @return RxJsonSchema - ordered and filled\n */\nexport function normalizeRxJsonSchema(jsonSchema) {\n  var normalizedSchema = sortObject(jsonSchema, true);\n  return normalizedSchema;\n}\n\n/**\n * fills the schema-json with default-settings\n * @return cloned schemaObj\n */\nexport function fillWithDefaultSettings(schemaObj) {\n  schemaObj = flatClone(schemaObj);\n  var primaryPath = getPrimaryFieldOfPrimaryKey(schemaObj.primaryKey);\n  schemaObj.properties = flatClone(schemaObj.properties);\n\n  // additionalProperties is always false\n  schemaObj.additionalProperties = false;\n\n  // fill with key-compression-state ()\n  if (!schemaObj.hasOwnProperty('keyCompression')) {\n    schemaObj.keyCompression = false;\n  }\n\n  // indexes must be array\n  schemaObj.indexes = schemaObj.indexes ? schemaObj.indexes.slice(0) : [];\n\n  // required must be array\n  schemaObj.required = schemaObj.required ? schemaObj.required.slice(0) : [];\n\n  // encrypted must be array\n  schemaObj.encrypted = schemaObj.encrypted ? schemaObj.encrypted.slice(0) : [];\n\n  // add _rev\n  schemaObj.properties._rev = {\n    type: 'string',\n    minLength: 1\n  };\n\n  // add attachments\n  schemaObj.properties._attachments = {\n    type: 'object'\n  };\n\n  // add deleted flag\n  schemaObj.properties._deleted = {\n    type: 'boolean'\n  };\n\n  // add meta property\n  schemaObj.properties._meta = RX_META_SCHEMA;\n\n  /**\n   * meta fields are all required\n   */\n  schemaObj.required = schemaObj.required ? schemaObj.required.slice(0) : [];\n  schemaObj.required.push('_deleted');\n  schemaObj.required.push('_rev');\n  schemaObj.required.push('_meta');\n  schemaObj.required.push('_attachments');\n\n  // final fields are always required\n  var finalFields = getFinalFields(schemaObj);\n  appendToArray(schemaObj.required, finalFields);\n  schemaObj.required = schemaObj.required.filter(field => !field.includes('.')).filter((elem, pos, arr) => arr.indexOf(elem) === pos); // unique;\n\n  // version is 0 by default\n  schemaObj.version = schemaObj.version || 0;\n\n  /**\n   * Append primary key to indexes that do not contain the primaryKey.\n   * All indexes must have the primaryKey to ensure a deterministic sort order.\n   */\n  if (schemaObj.indexes) {\n    schemaObj.indexes = schemaObj.indexes.map(index => {\n      var arIndex = isMaybeReadonlyArray(index) ? index.slice(0) : [index];\n      if (!arIndex.includes(primaryPath)) {\n        var modifiedIndex = arIndex.slice(0);\n        modifiedIndex.push(primaryPath);\n        return modifiedIndex;\n      }\n      return arIndex;\n    });\n  }\n  return schemaObj;\n}\nexport var RX_META_SCHEMA = {\n  type: 'object',\n  properties: {\n    /**\n     * The last-write time.\n     * Unix time in milliseconds.\n     */\n    lwt: {\n      type: 'number',\n      /**\n       * We use 1 as minimum so that the value is never falsy.\n       */\n      minimum: RX_META_LWT_MINIMUM,\n      maximum: 1000000000000000,\n      multipleOf: 0.01\n    }\n  },\n  /**\n   * Additional properties are allowed\n   * and can be used by plugins to set various flags.\n   */\n  additionalProperties: true,\n  required: ['lwt']\n};\n\n/**\n * returns the final-fields of the schema\n * @return field-names of the final-fields\n */\nexport function getFinalFields(jsonSchema) {\n  var ret = Object.keys(jsonSchema.properties).filter(key => jsonSchema.properties[key].final);\n\n  // primary is also final\n  var primaryPath = getPrimaryFieldOfPrimaryKey(jsonSchema.primaryKey);\n  ret.push(primaryPath);\n\n  // fields of composite primary are final\n  if (typeof jsonSchema.primaryKey !== 'string') {\n    jsonSchema.primaryKey.fields.forEach(field => ret.push(field));\n  }\n  return ret;\n}\n\n/**\n * fills all unset fields with default-values if set\n * @hotPath\n */\nexport function fillObjectWithDefaults(rxSchema, obj) {\n  var defaultKeys = Object.keys(rxSchema.defaultValues);\n  for (var i = 0; i < defaultKeys.length; ++i) {\n    var key = defaultKeys[i];\n    if (!obj.hasOwnProperty(key) || typeof obj[key] === 'undefined') {\n      obj[key] = rxSchema.defaultValues[key];\n    }\n  }\n  return obj;\n}\nexport var DEFAULT_CHECKPOINT_SCHEMA = {\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string'\n    },\n    lwt: {\n      type: 'number'\n    }\n  },\n  required: ['id', 'lwt'],\n  additionalProperties: false\n};\n//# sourceMappingURL=rx-schema-helper.js.map","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport { overwriteGetterForCaching, isMaybeReadonlyArray, deepEqual } from \"./plugins/utils/index.js\";\nimport { newRxError } from \"./rx-error.js\";\nimport { runPluginHooks } from \"./hooks.js\";\nimport { fillWithDefaultSettings, getComposedPrimaryKeyOfDocumentData, getFinalFields, getPrimaryFieldOfPrimaryKey, getSchemaByObjectPath, normalizeRxJsonSchema } from \"./rx-schema-helper.js\";\nimport { overwritable } from \"./overwritable.js\";\nexport var RxSchema = /*#__PURE__*/function () {\n  function RxSchema(jsonSchema, hashFunction) {\n    this.jsonSchema = jsonSchema;\n    this.hashFunction = hashFunction;\n    this.indexes = getIndexes(this.jsonSchema);\n\n    // primary is always required\n    this.primaryPath = getPrimaryFieldOfPrimaryKey(this.jsonSchema.primaryKey);\n    this.finalFields = getFinalFields(this.jsonSchema);\n  }\n  var _proto = RxSchema.prototype;\n  /**\n   * checks if a given change on a document is allowed\n   * Ensures that:\n   * - final fields are not modified\n   * @throws {Error} if not valid\n   */\n  _proto.validateChange = function validateChange(dataBefore, dataAfter) {\n    this.finalFields.forEach(fieldName => {\n      if (!deepEqual(dataBefore[fieldName], dataAfter[fieldName])) {\n        throw newRxError('DOC9', {\n          dataBefore,\n          dataAfter,\n          fieldName,\n          schema: this.jsonSchema\n        });\n      }\n    });\n  }\n\n  /**\n   * creates the schema-based document-prototype,\n   * see RxCollection.getDocumentPrototype()\n   */;\n  _proto.getDocumentPrototype = function getDocumentPrototype() {\n    var proto = {};\n\n    /**\n     * On the top level, we know all keys\n     * and therefore do not have to create a new Proxy object\n     * for each document. Instead we define the getter in the prototype once.\n     */\n    var pathProperties = getSchemaByObjectPath(this.jsonSchema, '');\n    Object.keys(pathProperties).forEach(key => {\n      var fullPath = key;\n\n      // getter - value\n      proto.__defineGetter__(key, function () {\n        if (!this.get || typeof this.get !== 'function') {\n          /**\n           * When an object gets added to the state of a vuejs-component,\n           * it happens that this getter is called with another scope.\n           * To prevent errors, we have to return undefined in this case\n           */\n          return undefined;\n        }\n        var ret = this.get(fullPath);\n        return ret;\n      });\n      // getter - observable$\n      Object.defineProperty(proto, key + '$', {\n        get: function () {\n          return this.get$(fullPath);\n        },\n        enumerable: false,\n        configurable: false\n      });\n      // getter - populate_\n      Object.defineProperty(proto, key + '_', {\n        get: function () {\n          return this.populate(fullPath);\n        },\n        enumerable: false,\n        configurable: false\n      });\n    });\n    overwriteGetterForCaching(this, 'getDocumentPrototype', () => proto);\n    return proto;\n  };\n  _proto.getPrimaryOfDocumentData = function getPrimaryOfDocumentData(documentData) {\n    return getComposedPrimaryKeyOfDocumentData(this.jsonSchema, documentData);\n  };\n  _createClass(RxSchema, [{\n    key: \"version\",\n    get: function () {\n      return this.jsonSchema.version;\n    }\n  }, {\n    key: \"defaultValues\",\n    get: function () {\n      var values = {};\n      Object.entries(this.jsonSchema.properties).filter(([, v]) => v.hasOwnProperty('default')).forEach(([k, v]) => values[k] = v.default);\n      return overwriteGetterForCaching(this, 'defaultValues', values);\n    }\n\n    /**\n     * @overrides itself on the first call\n     *\n     * TODO this should be a pure function that\n     * caches the hash in a WeakMap.\n     */\n  }, {\n    key: \"hash\",\n    get: function () {\n      return overwriteGetterForCaching(this, 'hash', this.hashFunction(JSON.stringify(this.jsonSchema)));\n    }\n  }]);\n  return RxSchema;\n}();\nexport function getIndexes(jsonSchema) {\n  return (jsonSchema.indexes || []).map(index => isMaybeReadonlyArray(index) ? index : [index]);\n}\n\n/**\n * array with previous version-numbers\n */\nexport function getPreviousVersions(schema) {\n  var version = schema.version ? schema.version : 0;\n  var c = 0;\n  return new Array(version).fill(0).map(() => c++);\n}\nexport function createRxSchema(jsonSchema, hashFunction, runPreCreateHooks = true) {\n  if (runPreCreateHooks) {\n    runPluginHooks('preCreateRxSchema', jsonSchema);\n  }\n  var useJsonSchema = fillWithDefaultSettings(jsonSchema);\n  useJsonSchema = normalizeRxJsonSchema(useJsonSchema);\n  overwritable.deepFreezeWhenDevMode(useJsonSchema);\n  var schema = new RxSchema(useJsonSchema, hashFunction);\n  runPluginHooks('createRxSchema', schema);\n  return schema;\n}\nexport function isRxSchema(obj) {\n  return obj instanceof RxSchema;\n}\n\n/**\n * Used as helper function the generate the document type out of the schema via typescript.\n * @link https://github.com/pubkey/rxdb/discussions/3467\n */\nexport function toTypedRxJsonSchema(schema) {\n  return schema;\n}\n//# sourceMappingURL=rx-schema.js.map","/**\n * Helper functions for accessing the RxStorage instances.\n */\n\nimport { overwritable } from \"./overwritable.js\";\nimport { newRxError } from \"./rx-error.js\";\nimport { fillPrimaryKey, getPrimaryFieldOfPrimaryKey } from \"./rx-schema-helper.js\";\nimport { PROMISE_RESOLVE_TRUE, appendToArray, createRevision, ensureNotFalsy, flatClone, getDefaultRevision, getDefaultRxDocumentMeta, now, promiseWait, randomCouchString } from \"./plugins/utils/index.js\";\nimport { filter, map, startWith, switchMap } from 'rxjs';\nexport var INTERNAL_STORAGE_NAME = '_rxdb_internal';\nexport var RX_DATABASE_LOCAL_DOCS_STORAGE_NAME = 'rxdatabase_storage_local';\nexport async function getSingleDocument(storageInstance, documentId) {\n  var results = await storageInstance.findDocumentsById([documentId], false);\n  var doc = results[0];\n  if (doc) {\n    return doc;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Writes a single document,\n * throws RxStorageBulkWriteError on failure\n */\nexport async function writeSingle(instance, writeRow, context) {\n  var writeResult = await instance.bulkWrite([writeRow], context);\n  if (writeResult.error.length > 0) {\n    var error = writeResult.error[0];\n    throw error;\n  } else {\n    var ret = writeResult.success[0];\n    return ret;\n  }\n}\n\n/**\n * Observe the plain document data of a single document.\n * Do not forget to unsubscribe.\n */\nexport function observeSingle(storageInstance, documentId) {\n  var firstFindPromise = getSingleDocument(storageInstance, documentId);\n  var ret = storageInstance.changeStream().pipe(map(evBulk => evBulk.events.find(ev => ev.documentId === documentId)), filter(ev => !!ev), map(ev => Promise.resolve(ensureNotFalsy(ev).documentData)), startWith(firstFindPromise), switchMap(v => v), filter(v => !!v));\n  return ret;\n}\n\n/**\n * Checkpoints must be stackable over another.\n * This is required form some RxStorage implementations\n * like the sharding plugin, where a checkpoint only represents\n * the document state from some, but not all shards.\n */\nexport function stackCheckpoints(checkpoints) {\n  return Object.assign({}, ...checkpoints);\n}\nexport function storageChangeEventToRxChangeEvent(isLocal, rxStorageChangeEvent, rxCollection) {\n  var documentData = rxStorageChangeEvent.documentData;\n  var previousDocumentData = rxStorageChangeEvent.previousDocumentData;\n  var ret = {\n    documentId: rxStorageChangeEvent.documentId,\n    collectionName: rxCollection ? rxCollection.name : undefined,\n    isLocal,\n    operation: rxStorageChangeEvent.operation,\n    documentData: overwritable.deepFreezeWhenDevMode(documentData),\n    previousDocumentData: overwritable.deepFreezeWhenDevMode(previousDocumentData)\n  };\n  return ret;\n}\nexport function throwIfIsStorageWriteError(collection, documentId, writeData, error) {\n  if (error) {\n    if (error.status === 409) {\n      throw newRxError('CONFLICT', {\n        collection: collection.name,\n        id: documentId,\n        writeError: error,\n        data: writeData\n      });\n    } else if (error.status === 422) {\n      throw newRxError('VD2', {\n        collection: collection.name,\n        id: documentId,\n        writeError: error,\n        data: writeData\n      });\n    } else {\n      throw error;\n    }\n  }\n}\n\n/**\n * Analyzes a list of BulkWriteRows and determines\n * which documents must be inserted, updated or deleted\n * and which events must be emitted and which documents cause a conflict\n * and must not be written.\n * Used as helper inside of some RxStorage implementations.\n * @hotPath The performance of this function is critical\n */\nexport function categorizeBulkWriteRows(storageInstance, primaryPath,\n/**\n * Current state of the documents\n * inside of the storage. Used to determine\n * which writes cause conflicts.\n * This must be a Map for better performance.\n */\ndocsInDb,\n/**\n * The write rows that are passed to\n * RxStorageInstance().bulkWrite().\n */\nbulkWriteRows, context,\n/**\n * Used by some storages for better performance.\n * For example when get-by-id and insert/update can run in parallel.\n */\nonInsert, onUpdate) {\n  var hasAttachments = !!storageInstance.schema.attachments;\n  var bulkInsertDocs = [];\n  var bulkUpdateDocs = [];\n  var errors = [];\n  var eventBulkId = randomCouchString(10);\n  var eventBulk = {\n    id: eventBulkId,\n    events: [],\n    checkpoint: null,\n    context,\n    startTime: now(),\n    endTime: 0\n  };\n  var eventBulkEvents = eventBulk.events;\n  var attachmentsAdd = [];\n  var attachmentsRemove = [];\n  var attachmentsUpdate = [];\n  var hasDocsInDb = docsInDb.size > 0;\n  var newestRow;\n\n  /**\n   * @performance is really important in this loop!\n   */\n  var rowAmount = bulkWriteRows.length;\n  var _loop = function () {\n    var writeRow = bulkWriteRows[rowId];\n\n    // use these variables to have less property accesses\n    var document = writeRow.document;\n    var previous = writeRow.previous;\n    var docId = document[primaryPath];\n    var documentDeleted = document._deleted;\n    var previousDeleted = previous && previous._deleted;\n    var documentInDb = undefined;\n    if (hasDocsInDb) {\n      documentInDb = docsInDb.get(docId);\n    }\n    var attachmentError;\n    if (!documentInDb) {\n      /**\n       * It is possible to insert already deleted documents,\n       * this can happen on replication.\n       */\n      var insertedIsDeleted = documentDeleted ? true : false;\n      if (hasAttachments) {\n        Object.entries(document._attachments).forEach(([attachmentId, attachmentData]) => {\n          if (!attachmentData.data) {\n            attachmentError = {\n              documentId: docId,\n              isError: true,\n              status: 510,\n              writeRow,\n              attachmentId\n            };\n            errors.push(attachmentError);\n          } else {\n            attachmentsAdd.push({\n              documentId: docId,\n              attachmentId,\n              attachmentData: attachmentData,\n              digest: attachmentData.digest\n            });\n          }\n        });\n      }\n      if (!attachmentError) {\n        if (hasAttachments) {\n          bulkInsertDocs.push(stripAttachmentsDataFromRow(writeRow));\n          if (onInsert) {\n            onInsert(document);\n          }\n        } else {\n          bulkInsertDocs.push(writeRow);\n          if (onInsert) {\n            onInsert(document);\n          }\n        }\n        newestRow = writeRow;\n      }\n      if (!insertedIsDeleted) {\n        var event = {\n          documentId: docId,\n          operation: 'INSERT',\n          documentData: hasAttachments ? stripAttachmentsDataFromDocument(document) : document,\n          previousDocumentData: hasAttachments && previous ? stripAttachmentsDataFromDocument(previous) : previous\n        };\n        eventBulkEvents.push(event);\n      }\n    } else {\n      // update existing document\n      var revInDb = documentInDb._rev;\n\n      /**\n       * Check for conflict\n       */\n      if (!previous || !!previous && revInDb !== previous._rev) {\n        // is conflict error\n        var err = {\n          isError: true,\n          status: 409,\n          documentId: docId,\n          writeRow: writeRow,\n          documentInDb\n        };\n        errors.push(err);\n        return 1; // continue\n      }\n\n      // handle attachments data\n\n      var updatedRow = hasAttachments ? stripAttachmentsDataFromRow(writeRow) : writeRow;\n      if (hasAttachments) {\n        if (documentDeleted) {\n          /**\n           * Deleted documents must have cleared all their attachments.\n           */\n          if (previous) {\n            Object.keys(previous._attachments).forEach(attachmentId => {\n              attachmentsRemove.push({\n                documentId: docId,\n                attachmentId,\n                digest: ensureNotFalsy(previous)._attachments[attachmentId].digest\n              });\n            });\n          }\n        } else {\n          // first check for errors\n          Object.entries(document._attachments).find(([attachmentId, attachmentData]) => {\n            var previousAttachmentData = previous ? previous._attachments[attachmentId] : undefined;\n            if (!previousAttachmentData && !attachmentData.data) {\n              attachmentError = {\n                documentId: docId,\n                documentInDb: documentInDb,\n                isError: true,\n                status: 510,\n                writeRow,\n                attachmentId\n              };\n            }\n            return true;\n          });\n          if (!attachmentError) {\n            Object.entries(document._attachments).forEach(([attachmentId, attachmentData]) => {\n              var previousAttachmentData = previous ? previous._attachments[attachmentId] : undefined;\n              if (!previousAttachmentData) {\n                attachmentsAdd.push({\n                  documentId: docId,\n                  attachmentId,\n                  attachmentData: attachmentData,\n                  digest: attachmentData.digest\n                });\n              } else {\n                var newDigest = updatedRow.document._attachments[attachmentId].digest;\n                if (attachmentData.data &&\n                /**\n                 * Performance shortcut,\n                 * do not update the attachment data if it did not change.\n                 */\n                previousAttachmentData.digest !== newDigest) {\n                  attachmentsUpdate.push({\n                    documentId: docId,\n                    attachmentId,\n                    attachmentData: attachmentData,\n                    digest: attachmentData.digest\n                  });\n                }\n              }\n            });\n          }\n        }\n      }\n      if (attachmentError) {\n        errors.push(attachmentError);\n      } else {\n        if (hasAttachments) {\n          bulkUpdateDocs.push(stripAttachmentsDataFromRow(updatedRow));\n          if (onUpdate) {\n            onUpdate(document);\n          }\n        } else {\n          bulkUpdateDocs.push(updatedRow);\n          if (onUpdate) {\n            onUpdate(document);\n          }\n        }\n        newestRow = updatedRow;\n      }\n      var eventDocumentData = null;\n      var previousEventDocumentData = null;\n      var operation = null;\n      if (previousDeleted && !documentDeleted) {\n        operation = 'INSERT';\n        eventDocumentData = hasAttachments ? stripAttachmentsDataFromDocument(document) : document;\n      } else if (previous && !previousDeleted && !documentDeleted) {\n        operation = 'UPDATE';\n        eventDocumentData = hasAttachments ? stripAttachmentsDataFromDocument(document) : document;\n        previousEventDocumentData = previous;\n      } else if (documentDeleted) {\n        operation = 'DELETE';\n        eventDocumentData = ensureNotFalsy(document);\n        previousEventDocumentData = previous;\n      } else {\n        throw newRxError('SNH', {\n          args: {\n            writeRow\n          }\n        });\n      }\n      var _event = {\n        documentId: docId,\n        documentData: eventDocumentData,\n        previousDocumentData: previousEventDocumentData,\n        operation: operation\n      };\n      eventBulkEvents.push(_event);\n    }\n  };\n  for (var rowId = 0; rowId < rowAmount; rowId++) {\n    if (_loop()) continue;\n  }\n  return {\n    bulkInsertDocs,\n    bulkUpdateDocs,\n    newestRow,\n    errors,\n    eventBulk,\n    attachmentsAdd,\n    attachmentsRemove,\n    attachmentsUpdate\n  };\n}\nexport function stripAttachmentsDataFromRow(writeRow) {\n  return {\n    previous: writeRow.previous,\n    document: stripAttachmentsDataFromDocument(writeRow.document)\n  };\n}\nexport function getAttachmentSize(attachmentBase64String) {\n  return atob(attachmentBase64String).length;\n}\n\n/**\n * Used in custom RxStorage implementations.\n */\nexport function attachmentWriteDataToNormalData(writeData) {\n  var data = writeData.data;\n  if (!data) {\n    return writeData;\n  }\n  var ret = {\n    length: getAttachmentSize(data),\n    digest: writeData.digest,\n    type: writeData.type\n  };\n  return ret;\n}\nexport function stripAttachmentsDataFromDocument(doc) {\n  if (!doc._attachments || Object.keys(doc._attachments).length === 0) {\n    return doc;\n  }\n  var useDoc = flatClone(doc);\n  useDoc._attachments = {};\n  Object.entries(doc._attachments).forEach(([attachmentId, attachmentData]) => {\n    useDoc._attachments[attachmentId] = attachmentWriteDataToNormalData(attachmentData);\n  });\n  return useDoc;\n}\n\n/**\n * Flat clone the document data\n * and also the _meta field.\n * Used many times when we want to change the meta\n * during replication etc.\n */\nexport function flatCloneDocWithMeta(doc) {\n  var ret = flatClone(doc);\n  ret._meta = flatClone(doc._meta);\n  return ret;\n}\n/**\n * Wraps the normal storageInstance of a RxCollection\n * to ensure that all access is properly using the hooks\n * and other data transformations and also ensure that database.lockedRun()\n * is used properly.\n */\nexport function getWrappedStorageInstance(database, storageInstance,\n/**\n * The original RxJsonSchema\n * before it was mutated by hooks.\n */\nrxJsonSchema) {\n  overwritable.deepFreezeWhenDevMode(rxJsonSchema);\n  var primaryPath = getPrimaryFieldOfPrimaryKey(rxJsonSchema.primaryKey);\n  function transformDocumentDataFromRxDBToRxStorage(writeRow) {\n    var data = flatClone(writeRow.document);\n    data._meta = flatClone(data._meta);\n\n    /**\n     * Do some checks in dev-mode\n     * that would be too performance expensive\n     * in production.\n     */\n    if (overwritable.isDevMode()) {\n      // ensure that the primary key has not been changed\n      data = fillPrimaryKey(primaryPath, rxJsonSchema, data);\n\n      /**\n       * Ensure it can be structured cloned\n       */\n      try {\n        /**\n         * Notice that structuredClone() is not available\n         * in ReactNative, so we test for JSON.stringify() instead\n         * @link https://github.com/pubkey/rxdb/issues/5046#issuecomment-1827374498\n         */\n        if (typeof structuredClone === 'function') {\n          structuredClone(writeRow);\n        } else {\n          JSON.parse(JSON.stringify(writeRow));\n        }\n      } catch (err) {\n        throw newRxError('DOC24', {\n          collection: storageInstance.collectionName,\n          document: writeRow.document\n        });\n      }\n\n      /**\n       * Ensure that the new revision is higher\n       * then the previous one\n       */\n      if (writeRow.previous) {\n        // TODO run this in the dev-mode plugin\n        // const prev = parseRevision(writeRow.previous._rev);\n        // const current = parseRevision(writeRow.document._rev);\n        // if (current.height <= prev.height) {\n        //     throw newRxError('SNH', {\n        //         dataBefore: writeRow.previous,\n        //         dataAfter: writeRow.document,\n        //         args: {\n        //             prev,\n        //             current\n        //         }\n        //     });\n        // }\n      }\n\n      /**\n       * Ensure that _meta fields have been merged\n       * and not replaced.\n       * This is important so that when one plugin A\n       * sets a _meta field and another plugin B does a write\n       * to the document, it must be ensured that the\n       * field of plugin A was not removed.\n       */\n      if (writeRow.previous) {\n        Object.keys(writeRow.previous._meta).forEach(metaFieldName => {\n          if (!writeRow.document._meta.hasOwnProperty(metaFieldName)) {\n            throw newRxError('SNH', {\n              dataBefore: writeRow.previous,\n              dataAfter: writeRow.document\n            });\n          }\n        });\n      }\n    }\n    data._meta.lwt = now();\n\n    /**\n     * Yes we really want to set the revision here.\n     * If you make a plugin that relies on having its own revision\n     * stored into the storage, use this.originalStorageInstance.bulkWrite() instead.\n     */\n    data._rev = createRevision(database.token, writeRow.previous);\n    return {\n      document: data,\n      previous: writeRow.previous\n    };\n  }\n  var ret = {\n    originalStorageInstance: storageInstance,\n    schema: storageInstance.schema,\n    internals: storageInstance.internals,\n    collectionName: storageInstance.collectionName,\n    databaseName: storageInstance.databaseName,\n    options: storageInstance.options,\n    bulkWrite(rows, context) {\n      var toStorageWriteRows = rows.map(row => transformDocumentDataFromRxDBToRxStorage(row));\n      return database.lockedRun(() => storageInstance.bulkWrite(toStorageWriteRows, context))\n      /**\n       * The RxStorageInstance MUST NOT allow to insert already _deleted documents,\n       * without sending the previous document version.\n       * But for better developer experience, RxDB does allow to re-insert deleted documents.\n       * We do this by automatically fixing the conflict errors for that case\n       * by running another bulkWrite() and merging the results.\n       * @link https://github.com/pubkey/rxdb/pull/3839\n       */.then(writeResult => {\n        var useWriteResult = {\n          error: [],\n          success: writeResult.success.slice(0)\n        };\n        var reInsertErrors = writeResult.error.filter(error => {\n          if (error.status === 409 && !error.writeRow.previous && !error.writeRow.document._deleted && ensureNotFalsy(error.documentInDb)._deleted) {\n            return true;\n          }\n          useWriteResult.error.push(error);\n          return false;\n        });\n        if (reInsertErrors.length > 0) {\n          var reInserts = reInsertErrors.map(error => {\n            return {\n              previous: error.documentInDb,\n              document: Object.assign({}, error.writeRow.document, {\n                _rev: createRevision(database.token, error.documentInDb)\n              })\n            };\n          });\n          return database.lockedRun(() => storageInstance.bulkWrite(reInserts, context)).then(subResult => {\n            appendToArray(useWriteResult.error, subResult.error);\n            appendToArray(useWriteResult.success, subResult.success);\n            return useWriteResult;\n          });\n        }\n        return writeResult;\n      });\n    },\n    query(preparedQuery) {\n      return database.lockedRun(() => storageInstance.query(preparedQuery));\n    },\n    count(preparedQuery) {\n      return database.lockedRun(() => storageInstance.count(preparedQuery));\n    },\n    info() {\n      return database.lockedRun(() => storageInstance.info());\n    },\n    findDocumentsById(ids, deleted) {\n      return database.lockedRun(() => storageInstance.findDocumentsById(ids, deleted));\n    },\n    getAttachmentData(documentId, attachmentId, digest) {\n      return database.lockedRun(() => storageInstance.getAttachmentData(documentId, attachmentId, digest));\n    },\n    getChangedDocumentsSince(limit, checkpoint) {\n      return database.lockedRun(() => storageInstance.getChangedDocumentsSince(ensureNotFalsy(limit), checkpoint));\n    },\n    cleanup(minDeletedTime) {\n      return database.lockedRun(() => storageInstance.cleanup(minDeletedTime));\n    },\n    remove() {\n      database.storageInstances.delete(ret);\n      return database.lockedRun(() => storageInstance.remove());\n    },\n    close() {\n      database.storageInstances.delete(ret);\n      return database.lockedRun(() => storageInstance.close());\n    },\n    changeStream() {\n      return storageInstance.changeStream();\n    },\n    conflictResultionTasks() {\n      return storageInstance.conflictResultionTasks();\n    },\n    resolveConflictResultionTask(taskSolution) {\n      if (taskSolution.output.isEqual) {\n        return storageInstance.resolveConflictResultionTask(taskSolution);\n      }\n      var doc = Object.assign({}, taskSolution.output.documentData, {\n        _meta: getDefaultRxDocumentMeta(),\n        _rev: getDefaultRevision(),\n        _attachments: {}\n      });\n      var documentData = flatClone(doc);\n      delete documentData._meta;\n      delete documentData._rev;\n      delete documentData._attachments;\n      return storageInstance.resolveConflictResultionTask({\n        id: taskSolution.id,\n        output: {\n          isEqual: false,\n          documentData\n        }\n      });\n    }\n  };\n  database.storageInstances.add(ret);\n  return ret;\n}\n\n/**\n * Each RxStorage implementation should\n * run this method at the first step of createStorageInstance()\n * to ensure that the configuration is correct.\n */\nexport function ensureRxStorageInstanceParamsAreCorrect(params) {\n  if (params.schema.keyCompression) {\n    throw newRxError('UT5', {\n      args: {\n        params\n      }\n    });\n  }\n  if (hasEncryption(params.schema)) {\n    throw newRxError('UT6', {\n      args: {\n        params\n      }\n    });\n  }\n  if (params.schema.attachments && params.schema.attachments.compression) {\n    throw newRxError('UT7', {\n      args: {\n        params\n      }\n    });\n  }\n}\nexport function hasEncryption(jsonSchema) {\n  if (!!jsonSchema.encrypted && jsonSchema.encrypted.length > 0 || jsonSchema.attachments && jsonSchema.attachments.encrypted) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Wraps the storage and simluates\n * delays. Mostly used in tests.\n */\nexport function randomDelayStorage(input) {\n  var retStorage = {\n    name: 'random-delay-' + input.storage.name,\n    statics: input.storage.statics,\n    async createStorageInstance(params) {\n      await promiseWait(input.delayTimeBefore());\n      var storageInstance = await input.storage.createStorageInstance(params);\n      await promiseWait(input.delayTimeAfter());\n\n      // write still must be processed in order\n      var writeQueue = PROMISE_RESOLVE_TRUE;\n      return {\n        databaseName: storageInstance.databaseName,\n        internals: storageInstance.internals,\n        options: storageInstance.options,\n        schema: storageInstance.schema,\n        collectionName: storageInstance.collectionName,\n        async bulkWrite(a, b) {\n          writeQueue = writeQueue.then(async () => {\n            await promiseWait(input.delayTimeBefore());\n            var response = await storageInstance.bulkWrite(a, b);\n            await promiseWait(input.delayTimeAfter());\n            return response;\n          });\n          var ret = await writeQueue;\n          return ret;\n        },\n        async findDocumentsById(a, b) {\n          await promiseWait(input.delayTimeBefore());\n          var ret = await storageInstance.findDocumentsById(a, b);\n          await promiseWait(input.delayTimeAfter());\n          return ret;\n        },\n        async query(a) {\n          await promiseWait(input.delayTimeBefore());\n          var ret = await storageInstance.query(a);\n          return ret;\n        },\n        async count(a) {\n          await promiseWait(input.delayTimeBefore());\n          var ret = await storageInstance.count(a);\n          await promiseWait(input.delayTimeAfter());\n          return ret;\n        },\n        async info() {\n          await promiseWait(input.delayTimeBefore());\n          var ret = await storageInstance.info();\n          await promiseWait(input.delayTimeAfter());\n          return ret;\n        },\n        async getAttachmentData(a, b, c) {\n          await promiseWait(input.delayTimeBefore());\n          var ret = await storageInstance.getAttachmentData(a, b, c);\n          await promiseWait(input.delayTimeAfter());\n          return ret;\n        },\n        async getChangedDocumentsSince(a, b) {\n          await promiseWait(input.delayTimeBefore());\n          var ret = await storageInstance.getChangedDocumentsSince(a, b);\n          await promiseWait(input.delayTimeAfter());\n          return ret;\n        },\n        changeStream() {\n          return storageInstance.changeStream();\n        },\n        conflictResultionTasks() {\n          return storageInstance.conflictResultionTasks();\n        },\n        resolveConflictResultionTask(a) {\n          return storageInstance.resolveConflictResultionTask(a);\n        },\n        async cleanup(a) {\n          await promiseWait(input.delayTimeBefore());\n          var ret = await storageInstance.cleanup(a);\n          await promiseWait(input.delayTimeAfter());\n          return ret;\n        },\n        async close() {\n          await promiseWait(input.delayTimeBefore());\n          var ret = await storageInstance.close();\n          await promiseWait(input.delayTimeAfter());\n          return ret;\n        },\n        async remove() {\n          await promiseWait(input.delayTimeBefore());\n          var ret = await storageInstance.remove();\n          await promiseWait(input.delayTimeAfter());\n          return ret;\n        }\n      };\n    }\n  };\n  return retStorage;\n}\n//# sourceMappingURL=rx-storage-helper.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + {\"631\":\"1d891c4a9126871ed952\",\"651\":\"51743b380ecd45e506d8\"}[chunkId] + \".bundle.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkrxdb_quickstart\"] = self[\"webpackChunkrxdb_quickstart\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","/**\n * this handles how plugins are added to rxdb\n * basically it changes the internal prototypes\n * by passing them to the plugins-functions\n */\nimport { RxSchema } from \"./rx-schema.js\";\nimport { basePrototype as RxDocumentPrototype } from \"./rx-document.js\";\nimport { RxQueryBase } from \"./rx-query.js\";\nimport { RxCollectionBase } from \"./rx-collection.js\";\nimport { RxDatabaseBase } from \"./rx-database.js\";\nimport { overwritable } from \"./overwritable.js\";\nimport { HOOKS, runPluginHooks } from \"./hooks.js\";\nimport { newRxError, newRxTypeError } from \"./rx-error.js\";\n\n/**\n * prototypes that can be manipulated with a plugin\n */\nvar PROTOTYPES = {\n  RxSchema: RxSchema.prototype,\n  RxDocument: RxDocumentPrototype,\n  RxQuery: RxQueryBase.prototype,\n  RxCollection: RxCollectionBase.prototype,\n  RxDatabase: RxDatabaseBase.prototype\n};\nvar ADDED_PLUGINS = new Set();\nvar ADDED_PLUGIN_NAMES = new Set();\n\n/**\n * Add a plugin to the RxDB library.\n * Plugins are added globally and cannot be removed.\n */\nexport function addRxPlugin(plugin) {\n  runPluginHooks('preAddRxPlugin', {\n    plugin,\n    plugins: ADDED_PLUGINS\n  });\n\n  // do nothing if added before\n  if (ADDED_PLUGINS.has(plugin)) {\n    return;\n  } else {\n    // ensure no other plugin with the same name was already added\n    if (ADDED_PLUGIN_NAMES.has(plugin.name)) {\n      throw newRxError('PL3', {\n        name: plugin.name,\n        plugin\n      });\n    }\n    ADDED_PLUGINS.add(plugin);\n    ADDED_PLUGIN_NAMES.add(plugin.name);\n  }\n\n  /**\n   * To identify broken configurations,\n   * we only allow RxDB plugins to be passed into addRxPlugin().\n   */\n  if (!plugin.rxdb) {\n    throw newRxTypeError('PL1', {\n      plugin\n    });\n  }\n  if (plugin.init) {\n    plugin.init();\n  }\n\n  // prototype-overwrites\n  if (plugin.prototypes) {\n    Object.entries(plugin.prototypes).forEach(([name, fun]) => {\n      return fun(PROTOTYPES[name]);\n    });\n  }\n  // overwritable-overwrites\n  if (plugin.overwritable) {\n    Object.assign(overwritable, plugin.overwritable);\n  }\n  // extend-hooks\n  if (plugin.hooks) {\n    Object.entries(plugin.hooks).forEach(([name, hooksObj]) => {\n      if (hooksObj.after) {\n        HOOKS[name].push(hooksObj.after);\n      }\n      if (hooksObj.before) {\n        HOOKS[name].unshift(hooksObj.before);\n      }\n    });\n  }\n}\n//# sourceMappingURL=plugin.js.map","var isArray = Array.isArray;\nvar getPrototypeOf = Object.getPrototypeOf, objectProto = Object.prototype, getKeys = Object.keys;\nexport function argsArgArrayOrObject(args) {\n    if (args.length === 1) {\n        var first_1 = args[0];\n        if (isArray(first_1)) {\n            return { args: first_1, keys: null };\n        }\n        if (isPOJO(first_1)) {\n            var keys = getKeys(first_1);\n            return {\n                args: keys.map(function (key) { return first_1[key]; }),\n                keys: keys,\n            };\n        }\n    }\n    return { args: args, keys: null };\n}\nfunction isPOJO(obj) {\n    return obj && typeof obj === 'object' && getPrototypeOf(obj) === objectProto;\n}\n//# sourceMappingURL=argsArgArrayOrObject.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { map } from \"../operators/map\";\nvar isArray = Array.isArray;\nfunction callOrApply(fn, args) {\n    return isArray(args) ? fn.apply(void 0, __spreadArray([], __read(args))) : fn(args);\n}\nexport function mapOneOrManyArgs(fn) {\n    return map(function (args) { return callOrApply(fn, args); });\n}\n//# sourceMappingURL=mapOneOrManyArgs.js.map","import { Observable } from '../Observable';\nimport { argsArgArrayOrObject } from '../util/argsArgArrayOrObject';\nimport { from } from './from';\nimport { identity } from '../util/identity';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nimport { popResultSelector, popScheduler } from '../util/args';\nimport { createObject } from '../util/createObject';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function combineLatest() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(args);\n    var resultSelector = popResultSelector(args);\n    var _a = argsArgArrayOrObject(args), observables = _a.args, keys = _a.keys;\n    if (observables.length === 0) {\n        return from([], scheduler);\n    }\n    var result = new Observable(combineLatestInit(observables, scheduler, keys\n        ?\n            function (values) { return createObject(keys, values); }\n        :\n            identity));\n    return resultSelector ? result.pipe(mapOneOrManyArgs(resultSelector)) : result;\n}\nexport function combineLatestInit(observables, scheduler, valueTransform) {\n    if (valueTransform === void 0) { valueTransform = identity; }\n    return function (subscriber) {\n        maybeSchedule(scheduler, function () {\n            var length = observables.length;\n            var values = new Array(length);\n            var active = length;\n            var remainingFirstValues = length;\n            var _loop_1 = function (i) {\n                maybeSchedule(scheduler, function () {\n                    var source = from(observables[i], scheduler);\n                    var hasFirstValue = false;\n                    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                        values[i] = value;\n                        if (!hasFirstValue) {\n                            hasFirstValue = true;\n                            remainingFirstValues--;\n                        }\n                        if (!remainingFirstValues) {\n                            subscriber.next(valueTransform(values.slice()));\n                        }\n                    }, function () {\n                        if (!--active) {\n                            subscriber.complete();\n                        }\n                    }));\n                }, subscriber);\n            };\n            for (var i = 0; i < length; i++) {\n                _loop_1(i);\n            }\n        }, subscriber);\n    };\n}\nfunction maybeSchedule(scheduler, execute, subscription) {\n    if (scheduler) {\n        executeSchedule(subscription, scheduler, execute);\n    }\n    else {\n        execute();\n    }\n}\n//# sourceMappingURL=combineLatest.js.map","export function createObject(keys, values) {\n    return keys.reduce(function (result, key, i) { return ((result[key] = values[i]), result); }, {});\n}\n//# sourceMappingURL=createObject.js.map","import { getComposedPrimaryKeyOfDocumentData } from \"../rx-schema-helper.js\";\nimport { stackCheckpoints } from \"../rx-storage-helper.js\";\nimport { createRevision, ensureNotFalsy, getDefaultRevision, getDefaultRxDocumentMeta, now } from \"../plugins/utils/index.js\";\nexport async function getLastCheckpointDoc(state, direction) {\n  var checkpointDocId = getComposedPrimaryKeyOfDocumentData(state.input.metaInstance.schema, {\n    isCheckpoint: '1',\n    itemId: direction\n  });\n  var checkpointResult = await state.input.metaInstance.findDocumentsById([checkpointDocId], false);\n  var checkpointDoc = checkpointResult[0];\n  state.lastCheckpointDoc[direction] = checkpointDoc;\n  if (checkpointDoc) {\n    return checkpointDoc.checkpointData;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Sets the checkpoint,\n * automatically resolves conflicts that appear.\n */\nexport async function setCheckpoint(state, direction, checkpoint) {\n  state.checkpointQueue = state.checkpointQueue.then(async () => {\n    var previousCheckpointDoc = state.lastCheckpointDoc[direction];\n    if (checkpoint &&\n    /**\n     * If the replication is already canceled,\n     * we do not write a checkpoint\n     * because that could mean we write a checkpoint\n     * for data that has been fetched from the master\n     * but not been written to the child.\n     */\n    !state.events.canceled.getValue() && (\n    /**\n     * Only write checkpoint if it is different from before\n     * to have less writes to the storage.\n     */\n\n    !previousCheckpointDoc || JSON.stringify(previousCheckpointDoc.checkpointData) !== JSON.stringify(checkpoint))) {\n      var newDoc = {\n        id: '',\n        isCheckpoint: '1',\n        itemId: direction,\n        _deleted: false,\n        _attachments: {},\n        checkpointData: checkpoint,\n        _meta: getDefaultRxDocumentMeta(),\n        _rev: getDefaultRevision()\n      };\n      newDoc.id = getComposedPrimaryKeyOfDocumentData(state.input.metaInstance.schema, newDoc);\n      while (!state.events.canceled.getValue()) {\n        /**\n         * Instead of just storing the new checkpoint,\n         * we have to stack up the checkpoint with the previous one.\n         * This is required for plugins like the sharding RxStorage\n         * where the changeStream events only contain a Partial of the\n         * checkpoint.\n         */\n        if (previousCheckpointDoc) {\n          newDoc.checkpointData = stackCheckpoints([previousCheckpointDoc.checkpointData, newDoc.checkpointData]);\n        }\n        newDoc._meta.lwt = now();\n        newDoc._rev = createRevision(await state.checkpointKey, previousCheckpointDoc);\n        if (state.events.canceled.getValue()) {\n          return;\n        }\n        var result = await state.input.metaInstance.bulkWrite([{\n          previous: previousCheckpointDoc,\n          document: newDoc\n        }], 'replication-set-checkpoint');\n        var sucessDoc = result.success[0];\n        if (sucessDoc) {\n          state.lastCheckpointDoc[direction] = sucessDoc;\n          return;\n        } else {\n          var error = result.error[0];\n          if (error.status !== 409) {\n            throw error;\n          } else {\n            previousCheckpointDoc = ensureNotFalsy(error.documentInDb);\n            newDoc._rev = createRevision(await state.checkpointKey, previousCheckpointDoc);\n          }\n        }\n      }\n    }\n  });\n  await state.checkpointQueue;\n}\nexport async function getCheckpointKey(input) {\n  var hash = await input.hashFunction([input.identifier, input.forkInstance.databaseName, input.forkInstance.collectionName].join('||'));\n  return 'rx_storage_replication_' + hash;\n}\n//# sourceMappingURL=checkpoint.js.map","import { clone, createRevision, flatClone, getDefaultRevision, now } from \"../plugins/utils/index.js\";\nimport { stripAttachmentsDataFromDocument } from \"../rx-storage-helper.js\";\nexport function docStateToWriteDoc(databaseInstanceToken, hasAttachments, keepMeta, docState, previous) {\n  var docData = Object.assign({}, docState, {\n    _attachments: hasAttachments && docState._attachments ? docState._attachments : {},\n    _meta: keepMeta ? docState._meta : {\n      lwt: now()\n    },\n    _rev: keepMeta ? docState._rev : getDefaultRevision()\n  });\n  if (!docData._rev) {\n    docData._rev = createRevision(databaseInstanceToken, previous);\n  }\n  return docData;\n}\nexport function writeDocToDocState(writeDoc, keepAttachments, keepMeta) {\n  var ret = flatClone(writeDoc);\n  if (!keepAttachments) {\n    delete ret._attachments;\n  }\n  if (!keepMeta) {\n    delete ret._meta;\n    delete ret._rev;\n  }\n  return ret;\n}\nexport function stripAttachmentsDataFromMetaWriteRows(state, rows) {\n  if (!state.hasAttachments) {\n    return rows;\n  }\n  return rows.map(row => {\n    var document = clone(row.document);\n    document.docData = stripAttachmentsDataFromDocument(document.docData);\n    return {\n      document,\n      previous: row.previous\n    };\n  });\n}\nexport function getUnderlyingPersistentStorage(instance) {\n  while (true) {\n    if (instance.underlyingPersistentStorage) {\n      instance = instance.underlyingPersistentStorage;\n    } else {\n      return instance;\n    }\n  }\n}\n//# sourceMappingURL=helper.js.map","import { fillWithDefaultSettings, getComposedPrimaryKeyOfDocumentData, getLengthOfPrimaryKey } from \"../rx-schema-helper.js\";\nimport { flatCloneDocWithMeta } from \"../rx-storage-helper.js\";\nimport { getDefaultRevision, createRevision, now } from \"../plugins/utils/index.js\";\nexport var META_INSTANCE_SCHEMA_TITLE = 'RxReplicationProtocolMetaData';\nexport function getRxReplicationMetaInstanceSchema(replicatedDocumentsSchema, encrypted) {\n  var parentPrimaryKeyLength = getLengthOfPrimaryKey(replicatedDocumentsSchema);\n  var baseSchema = {\n    title: META_INSTANCE_SCHEMA_TITLE,\n    primaryKey: {\n      key: 'id',\n      fields: ['itemId', 'isCheckpoint'],\n      separator: '|'\n    },\n    type: 'object',\n    version: replicatedDocumentsSchema.version,\n    additionalProperties: false,\n    properties: {\n      id: {\n        type: 'string',\n        minLength: 1,\n        // add +1 for the '|' and +1 for the 'isCheckpoint' flag\n        maxLength: parentPrimaryKeyLength + 2\n      },\n      isCheckpoint: {\n        type: 'string',\n        enum: ['0', '1'],\n        minLength: 1,\n        maxLength: 1\n      },\n      itemId: {\n        type: 'string',\n        /**\n         * ensure that all values of RxStorageReplicationDirection ('DOWN' has 4 chars) fit into it\n         * because checkpoints use the itemId field for that.\n         */\n        maxLength: parentPrimaryKeyLength > 4 ? parentPrimaryKeyLength : 4\n      },\n      checkpointData: {\n        type: 'object',\n        additionalProperties: true\n      },\n      docData: {\n        type: 'object',\n        properties: replicatedDocumentsSchema.properties\n      },\n      isResolvedConflict: {\n        type: 'string'\n      }\n    },\n    keyCompression: replicatedDocumentsSchema.keyCompression,\n    required: ['id', 'isCheckpoint', 'itemId']\n  };\n  if (encrypted) {\n    baseSchema.encrypted = ['docData'];\n  }\n  var metaInstanceSchema = fillWithDefaultSettings(baseSchema);\n  return metaInstanceSchema;\n}\n\n/**\n * Returns the document states of what the fork instance\n * assumes to be the latest state on the master instance.\n */\nexport function getAssumedMasterState(state, docIds) {\n  return state.input.metaInstance.findDocumentsById(docIds.map(docId => {\n    var useId = getComposedPrimaryKeyOfDocumentData(state.input.metaInstance.schema, {\n      itemId: docId,\n      isCheckpoint: '0'\n    });\n    return useId;\n  }), true).then(metaDocs => {\n    var ret = {};\n    Object.values(metaDocs).forEach(metaDoc => {\n      ret[metaDoc.itemId] = {\n        docData: metaDoc.docData,\n        metaDocument: metaDoc\n      };\n    });\n    return ret;\n  });\n}\nexport async function getMetaWriteRow(state, newMasterDocState, previous, isResolvedConflict) {\n  var docId = newMasterDocState[state.primaryPath];\n  var newMeta = previous ? flatCloneDocWithMeta(previous) : {\n    id: '',\n    isCheckpoint: '0',\n    itemId: docId,\n    docData: newMasterDocState,\n    _attachments: {},\n    _deleted: false,\n    _rev: getDefaultRevision(),\n    _meta: {\n      lwt: 0\n    }\n  };\n  newMeta.docData = newMasterDocState;\n  newMeta.isResolvedConflict = isResolvedConflict;\n  newMeta._meta.lwt = now();\n  newMeta.id = getComposedPrimaryKeyOfDocumentData(state.input.metaInstance.schema, newMeta);\n  newMeta._rev = createRevision(await state.checkpointKey, previous);\n  return {\n    previous,\n    document: newMeta\n  };\n}\n//# sourceMappingURL=meta-instance.js.map","import { firstValueFrom, filter } from 'rxjs';\nimport { newRxError } from \"../rx-error.js\";\nimport { stackCheckpoints } from \"../rx-storage-helper.js\";\nimport { appendToArray, createRevision, ensureNotFalsy, flatClone, getDefaultRevision, now, parseRevision, PROMISE_RESOLVE_VOID } from \"../plugins/utils/index.js\";\nimport { getLastCheckpointDoc, setCheckpoint } from \"./checkpoint.js\";\nimport { stripAttachmentsDataFromMetaWriteRows, writeDocToDocState } from \"./helper.js\";\nimport { getAssumedMasterState, getMetaWriteRow } from \"./meta-instance.js\";\n\n/**\n * Writes all documents from the master to the fork.\n * The downstream has two operation modes\n * - Sync by iterating over the checkpoints via downstreamResyncOnce()\n * - Sync by listening to the changestream via downstreamProcessChanges()\n * We need this to be able to do initial syncs\n * and still can have fast event based sync when the client is not offline.\n */\nexport async function startReplicationDownstream(state) {\n  if (state.input.initialCheckpoint && state.input.initialCheckpoint.downstream) {\n    var checkpointDoc = await getLastCheckpointDoc(state, 'down');\n    if (!checkpointDoc) {\n      await setCheckpoint(state, 'down', state.input.initialCheckpoint.downstream);\n    }\n  }\n  var identifierHash = await state.input.hashFunction(state.input.identifier);\n  var replicationHandler = state.input.replicationHandler;\n\n  // used to detect which tasks etc can in it at which order.\n  var timer = 0;\n  var openTasks = [];\n  function addNewTask(task) {\n    state.stats.down.addNewTask = state.stats.down.addNewTask + 1;\n    var taskWithTime = {\n      time: timer++,\n      task\n    };\n    openTasks.push(taskWithTime);\n    state.streamQueue.down = state.streamQueue.down.then(() => {\n      var useTasks = [];\n      while (openTasks.length > 0) {\n        state.events.active.down.next(true);\n        var innerTaskWithTime = ensureNotFalsy(openTasks.shift());\n\n        /**\n         * If the task came in before the last time we started the pull\n         * from the master, then we can drop the task.\n         */\n        if (innerTaskWithTime.time < lastTimeMasterChangesRequested) {\n          continue;\n        }\n        if (innerTaskWithTime.task === 'RESYNC') {\n          if (useTasks.length === 0) {\n            useTasks.push(innerTaskWithTime.task);\n            break;\n          } else {\n            break;\n          }\n        }\n        useTasks.push(innerTaskWithTime.task);\n      }\n      if (useTasks.length === 0) return;\n      if (useTasks[0] === 'RESYNC') {\n        return downstreamResyncOnce();\n      } else {\n        return downstreamProcessChanges(useTasks);\n      }\n    }).then(() => {\n      state.events.active.down.next(false);\n      if (!state.firstSyncDone.down.getValue() && !state.events.canceled.getValue()) {\n        state.firstSyncDone.down.next(true);\n      }\n    });\n  }\n  addNewTask('RESYNC');\n\n  /**\n   * If a write on the master happens, we have to trigger the downstream.\n   * Only do this if not canceled yet, otherwise firstValueFrom errors\n   * when running on a completed observable.\n   */\n  if (!state.events.canceled.getValue()) {\n    var sub = replicationHandler.masterChangeStream$.subscribe(task => {\n      state.stats.down.masterChangeStreamEmit = state.stats.down.masterChangeStreamEmit + 1;\n      addNewTask(task);\n    });\n    firstValueFrom(state.events.canceled.pipe(filter(canceled => !!canceled))).then(() => sub.unsubscribe());\n  }\n\n  /**\n   * For faster performance, we directly start each write\n   * and then await all writes at the end.\n   */\n  var lastTimeMasterChangesRequested = -1;\n  async function downstreamResyncOnce() {\n    state.stats.down.downstreamResyncOnce = state.stats.down.downstreamResyncOnce + 1;\n    if (state.events.canceled.getValue()) {\n      return;\n    }\n    state.checkpointQueue = state.checkpointQueue.then(() => getLastCheckpointDoc(state, 'down'));\n    var lastCheckpoint = await state.checkpointQueue;\n    var promises = [];\n    while (!state.events.canceled.getValue()) {\n      lastTimeMasterChangesRequested = timer++;\n      var downResult = await replicationHandler.masterChangesSince(lastCheckpoint, state.input.pullBatchSize);\n      if (downResult.documents.length === 0) {\n        break;\n      }\n      lastCheckpoint = stackCheckpoints([lastCheckpoint, downResult.checkpoint]);\n      promises.push(persistFromMaster(downResult.documents, lastCheckpoint));\n\n      /**\n       * By definition we stop pull when the pulled documents\n       * do not fill up the pullBatchSize because we\n       * can assume that the remote has no more documents.\n       */\n      if (downResult.documents.length < state.input.pullBatchSize) {\n        break;\n      }\n    }\n    await Promise.all(promises);\n  }\n  function downstreamProcessChanges(tasks) {\n    state.stats.down.downstreamProcessChanges = state.stats.down.downstreamProcessChanges + 1;\n    var docsOfAllTasks = [];\n    var lastCheckpoint = null;\n    tasks.forEach(task => {\n      if (task === 'RESYNC') {\n        throw new Error('SNH');\n      }\n      appendToArray(docsOfAllTasks, task.documents);\n      lastCheckpoint = stackCheckpoints([lastCheckpoint, task.checkpoint]);\n    });\n    return persistFromMaster(docsOfAllTasks, ensureNotFalsy(lastCheckpoint));\n  }\n\n  /**\n   * It can happen that the calls to masterChangesSince() or the changeStream()\n   * are way faster then how fast the documents can be persisted.\n   * Therefore we merge all incoming downResults into the nonPersistedFromMaster object\n   * and process them together if possible.\n   * This often bundles up single writes and improves performance\n   * by processing the documents in bulks.\n   */\n  var persistenceQueue = PROMISE_RESOLVE_VOID;\n  var nonPersistedFromMaster = {\n    docs: {}\n  };\n  function persistFromMaster(docs, checkpoint) {\n    var primaryPath = state.primaryPath;\n    state.stats.down.persistFromMaster = state.stats.down.persistFromMaster + 1;\n\n    /**\n     * Add the new docs to the non-persistent list\n     */\n    docs.forEach(docData => {\n      var docId = docData[primaryPath];\n      nonPersistedFromMaster.docs[docId] = docData;\n    });\n    nonPersistedFromMaster.checkpoint = checkpoint;\n\n    /**\n     * Run in the queue\n     * with all open documents from nonPersistedFromMaster.\n     */\n    persistenceQueue = persistenceQueue.then(() => {\n      var downDocsById = nonPersistedFromMaster.docs;\n      nonPersistedFromMaster.docs = {};\n      var useCheckpoint = nonPersistedFromMaster.checkpoint;\n      var docIds = Object.keys(downDocsById);\n      if (state.events.canceled.getValue() || docIds.length === 0) {\n        return PROMISE_RESOLVE_VOID;\n      }\n      var writeRowsToFork = [];\n      var writeRowsToForkById = {};\n      var writeRowsToMeta = {};\n      var useMetaWriteRows = [];\n      return Promise.all([state.input.forkInstance.findDocumentsById(docIds, true), getAssumedMasterState(state, docIds)]).then(([currentForkStateList, assumedMasterState]) => {\n        var currentForkState = new Map();\n        currentForkStateList.forEach(doc => currentForkState.set(doc[primaryPath], doc));\n        return Promise.all(docIds.map(async docId => {\n          var forkStateFullDoc = currentForkState.get(docId);\n          var forkStateDocData = forkStateFullDoc ? writeDocToDocState(forkStateFullDoc, state.hasAttachments, false) : undefined;\n          var masterState = downDocsById[docId];\n          var assumedMaster = assumedMasterState[docId];\n          if (assumedMaster && forkStateFullDoc && assumedMaster.metaDocument.isResolvedConflict === forkStateFullDoc._rev) {\n            /**\n             * The current fork state represents a resolved conflict\n             * that first must be send to the master in the upstream.\n             * All conflicts are resolved by the upstream.\n             */\n            return PROMISE_RESOLVE_VOID;\n          }\n          var isAssumedMasterEqualToForkState = !assumedMaster || !forkStateDocData ? false : await state.input.conflictHandler({\n            realMasterState: assumedMaster.docData,\n            newDocumentState: forkStateDocData\n          }, 'downstream-check-if-equal-0').then(r => r.isEqual);\n          if (!isAssumedMasterEqualToForkState && assumedMaster && assumedMaster.docData._rev && forkStateFullDoc && forkStateFullDoc._meta[state.input.identifier] && parseRevision(forkStateFullDoc._rev).height === forkStateFullDoc._meta[state.input.identifier]) {\n            isAssumedMasterEqualToForkState = true;\n          }\n          if (forkStateFullDoc && assumedMaster && isAssumedMasterEqualToForkState === false || forkStateFullDoc && !assumedMaster) {\n            /**\n             * We have a non-upstream-replicated\n             * local write to the fork.\n             * This means we ignore the downstream of this document\n             * because anyway the upstream will first resolve the conflict.\n             */\n            return PROMISE_RESOLVE_VOID;\n          }\n          var areStatesExactlyEqual = !forkStateDocData ? false : await state.input.conflictHandler({\n            realMasterState: masterState,\n            newDocumentState: forkStateDocData\n          }, 'downstream-check-if-equal-1').then(r => r.isEqual);\n          if (forkStateDocData && areStatesExactlyEqual) {\n            /**\n             * Document states are exactly equal.\n             * This can happen when the replication is shut down\n             * unexpected like when the user goes offline.\n             *\n             * Only when the assumedMaster is different from the forkState,\n             * we have to patch the document in the meta instance.\n             */\n            if (!assumedMaster || isAssumedMasterEqualToForkState === false) {\n              useMetaWriteRows.push(await getMetaWriteRow(state, forkStateDocData, assumedMaster ? assumedMaster.metaDocument : undefined));\n            }\n            return PROMISE_RESOLVE_VOID;\n          }\n\n          /**\n           * All other master states need to be written to the forkInstance\n           * and metaInstance.\n           */\n          var newForkState = Object.assign({}, masterState, forkStateFullDoc ? {\n            _meta: flatClone(forkStateFullDoc._meta),\n            _attachments: state.hasAttachments && masterState._attachments ? masterState._attachments : {},\n            _rev: getDefaultRevision()\n          } : {\n            _meta: {\n              lwt: now()\n            },\n            _rev: getDefaultRevision(),\n            _attachments: state.hasAttachments && masterState._attachments ? masterState._attachments : {}\n          });\n          /**\n           * If the remote works with revisions,\n           * we store the height of the next fork-state revision\n           * inside of the documents meta data.\n           * By doing so we can filter it out in the upstream\n           * and detect the document as being equal to master or not.\n           * This is used for example in the CouchDB replication plugin.\n           */\n          if (masterState._rev) {\n            var nextRevisionHeight = !forkStateFullDoc ? 1 : parseRevision(forkStateFullDoc._rev).height + 1;\n            newForkState._meta[state.input.identifier] = nextRevisionHeight;\n            if (state.input.keepMeta) {\n              newForkState._rev = masterState._rev;\n            }\n          }\n          if (state.input.keepMeta && masterState._meta) {\n            newForkState._meta = masterState._meta;\n          }\n          var forkWriteRow = {\n            previous: forkStateFullDoc,\n            document: newForkState\n          };\n          forkWriteRow.document._rev = forkWriteRow.document._rev ? forkWriteRow.document._rev : createRevision(identifierHash, forkWriteRow.previous);\n          writeRowsToFork.push(forkWriteRow);\n          writeRowsToForkById[docId] = forkWriteRow;\n          writeRowsToMeta[docId] = await getMetaWriteRow(state, masterState, assumedMaster ? assumedMaster.metaDocument : undefined);\n        }));\n      }).then(async () => {\n        if (writeRowsToFork.length > 0) {\n          return state.input.forkInstance.bulkWrite(writeRowsToFork, await state.downstreamBulkWriteFlag).then(forkWriteResult => {\n            forkWriteResult.success.forEach(doc => {\n              var docId = doc[primaryPath];\n              state.events.processed.down.next(writeRowsToForkById[docId]);\n              useMetaWriteRows.push(writeRowsToMeta[docId]);\n            });\n            forkWriteResult.error.forEach(error => {\n              /**\n               * We do not have to care about downstream conflict errors here\n               * because on conflict, it will be solved locally and result in another write.\n               */\n              if (error.status === 409) {\n                return;\n              }\n              // other non-conflict errors must be handled\n              state.events.error.next(newRxError('RC_PULL', {\n                writeError: error\n              }));\n            });\n          });\n        }\n      }).then(() => {\n        if (useMetaWriteRows.length > 0) {\n          return state.input.metaInstance.bulkWrite(stripAttachmentsDataFromMetaWriteRows(state, useMetaWriteRows), 'replication-down-write-meta').then(metaWriteResult => {\n            metaWriteResult.error.forEach(writeError => {\n              state.events.error.next(newRxError('RC_PULL', {\n                id: writeError.documentId,\n                writeError\n              }));\n            });\n          });\n        }\n      }).then(() => {\n        /**\n         * For better performance we do not await checkpoint writes,\n         * but to ensure order on parallel checkpoint writes,\n         * we have to use a queue.\n         */\n        setCheckpoint(state, 'down', useCheckpoint);\n      });\n    }).catch(unhandledError => state.events.error.next(unhandledError));\n    return persistenceQueue;\n  }\n}\n//# sourceMappingURL=downstream.js.map","import { newRxError } from \"../../rx-error.js\";\nimport { ensureNotFalsy } from \"../utils/index.js\";\nexport function ensureSchemaSupportsAttachments(doc) {\n  var schemaJson = doc.collection.schema.jsonSchema;\n  if (!schemaJson.attachments) {\n    throw newRxError('AT1', {\n      link: 'https://pubkey.github.io/rxdb/rx-attachment.html'\n    });\n  }\n}\nexport function assignMethodsToAttachment(attachment) {\n  Object.entries(attachment.doc.collection.attachments).forEach(([funName, fun]) => {\n    Object.defineProperty(attachment, funName, {\n      get: () => fun.bind(attachment)\n    });\n  });\n}\n\n/**\n * Fill up the missing attachment.data of the newDocument\n * so that the new document can be send to somewhere else\n * which could then receive all required attachments data\n * that it did not have before.\n */\nexport async function fillWriteDataForAttachmentsChange(primaryPath, storageInstance, newDocument, originalDocument) {\n  if (!newDocument._attachments || originalDocument && !originalDocument._attachments) {\n    throw new Error('_attachments missing');\n  }\n  var docId = newDocument[primaryPath];\n  var originalAttachmentsIds = new Set(originalDocument && originalDocument._attachments ? Object.keys(originalDocument._attachments) : []);\n  await Promise.all(Object.entries(newDocument._attachments).map(async ([key, value]) => {\n    if ((!originalAttachmentsIds.has(key) || originalDocument && ensureNotFalsy(originalDocument._attachments)[key].digest !== value.digest) && !value.data) {\n      var attachmentDataString = await storageInstance.getAttachmentData(docId, key, value.digest);\n      value.data = attachmentDataString;\n    }\n  }));\n  return newDocument;\n}\n//# sourceMappingURL=attachments-utils.js.map","import { firstValueFrom, filter } from 'rxjs';\nimport { stackCheckpoints } from \"../rx-storage-helper.js\";\nimport { appendToArray, batchArray, clone, ensureNotFalsy, parseRevision, PROMISE_RESOLVE_FALSE } from \"../plugins/utils/index.js\";\nimport { getLastCheckpointDoc, setCheckpoint } from \"./checkpoint.js\";\nimport { resolveConflictError } from \"./conflicts.js\";\nimport { stripAttachmentsDataFromMetaWriteRows, writeDocToDocState } from \"./helper.js\";\nimport { getAssumedMasterState, getMetaWriteRow } from \"./meta-instance.js\";\nimport { fillWriteDataForAttachmentsChange } from \"../plugins/attachments/index.js\";\n\n/**\n * Writes all document changes from the fork to the master.\n * The upstream runs on two modes:\n * - For initial replication, a checkpoint-iteration is used\n * - For ongoing local writes, we just subscribe to the changeStream of the fork.\n *   In contrast to the master, the fork can be assumed to never loose connection,\n *   so we do not have to prepare for missed out events.\n */\nexport async function startReplicationUpstream(state) {\n  if (state.input.initialCheckpoint && state.input.initialCheckpoint.upstream) {\n    var checkpointDoc = await getLastCheckpointDoc(state, 'up');\n    if (!checkpointDoc) {\n      await setCheckpoint(state, 'up', state.input.initialCheckpoint.upstream);\n    }\n  }\n  var replicationHandler = state.input.replicationHandler;\n  state.streamQueue.up = state.streamQueue.up.then(() => {\n    return upstreamInitialSync().then(() => {\n      processTasks();\n    });\n  });\n\n  // used to detect which tasks etc can in it at which order.\n  var timer = 0;\n  var initialSyncStartTime = -1;\n  var openTasks = [];\n  var persistenceQueue = PROMISE_RESOLVE_FALSE;\n  var nonPersistedFromMaster = {\n    docs: {}\n  };\n  var sub = state.input.forkInstance.changeStream().subscribe(async eventBulk => {\n    // ignore writes that came from the downstream\n    if (eventBulk.context === (await state.downstreamBulkWriteFlag)) {\n      return;\n    }\n    state.stats.up.forkChangeStreamEmit = state.stats.up.forkChangeStreamEmit + 1;\n    openTasks.push({\n      task: eventBulk,\n      time: timer++\n    });\n    if (state.input.waitBeforePersist) {\n      return state.input.waitBeforePersist().then(() => processTasks());\n    } else {\n      return processTasks();\n    }\n  });\n  firstValueFrom(state.events.canceled.pipe(filter(canceled => !!canceled))).then(() => sub.unsubscribe());\n  async function upstreamInitialSync() {\n    state.stats.up.upstreamInitialSync = state.stats.up.upstreamInitialSync + 1;\n    if (state.events.canceled.getValue()) {\n      return;\n    }\n    state.checkpointQueue = state.checkpointQueue.then(() => getLastCheckpointDoc(state, 'up'));\n    var lastCheckpoint = await state.checkpointQueue;\n    var promises = new Set();\n    var _loop = async function () {\n      initialSyncStartTime = timer++;\n\n      /**\n       * Throttle the calls to\n       * forkInstance.getChangedDocumentsSince() so that\n       * if the pushing to the remote is slower compared to the\n       * pulling out of forkInstance, we do not block the UI too much\n       * and have a big memory spike with all forkInstance documents.\n       */\n      if (promises.size > 3) {\n        await Promise.race(Array.from(promises));\n      }\n      var upResult = await state.input.forkInstance.getChangedDocumentsSince(state.input.pushBatchSize, lastCheckpoint);\n      if (upResult.documents.length === 0) {\n        return 1; // break\n      }\n      lastCheckpoint = stackCheckpoints([lastCheckpoint, upResult.checkpoint]);\n      var promise = persistToMaster(upResult.documents, ensureNotFalsy(lastCheckpoint));\n      promises.add(promise);\n      promise.catch().then(() => promises.delete(promise));\n    };\n    while (!state.events.canceled.getValue()) {\n      if (await _loop()) break;\n    }\n\n    /**\n     * If we had conflicts during the initial sync,\n     * it means that we likely have new writes to the fork\n     * and so we have to run the initial sync again to upstream these new writes.\n     */\n    var resolvedPromises = await Promise.all(promises);\n    var hadConflicts = resolvedPromises.find(r => !!r);\n    if (hadConflicts) {\n      await upstreamInitialSync();\n    } else if (!state.firstSyncDone.up.getValue() && !state.events.canceled.getValue()) {\n      state.firstSyncDone.up.next(true);\n    }\n  }\n\n  /**\n   * Takes all open tasks an processes them at once.\n   */\n  function processTasks() {\n    if (state.events.canceled.getValue() || openTasks.length === 0) {\n      state.events.active.up.next(false);\n      return;\n    }\n    state.stats.up.processTasks = state.stats.up.processTasks + 1;\n    state.events.active.up.next(true);\n    state.streamQueue.up = state.streamQueue.up.then(() => {\n      /**\n       * Merge/filter all open tasks\n       */\n      var docs = [];\n      var checkpoint = {};\n      while (openTasks.length > 0) {\n        var taskWithTime = ensureNotFalsy(openTasks.shift());\n        /**\n         * If the task came in before the last time the initial sync fetching\n         * has run, we can ignore the task because the initial sync already processed\n         * these documents.\n         */\n        if (taskWithTime.time < initialSyncStartTime) {\n          continue;\n        }\n        appendToArray(docs, taskWithTime.task.events.map(r => {\n          return r.documentData;\n        }));\n        checkpoint = stackCheckpoints([checkpoint, taskWithTime.task.checkpoint]);\n      }\n      var promise = docs.length === 0 ? PROMISE_RESOLVE_FALSE : persistToMaster(docs, checkpoint);\n      return promise.then(() => {\n        if (openTasks.length === 0) {\n          state.events.active.up.next(false);\n        } else {\n          processTasks();\n        }\n      });\n    });\n  }\n\n  /**\n   * Returns true if had conflicts,\n   * false if not.\n   */\n  function persistToMaster(docs, checkpoint) {\n    state.stats.up.persistToMaster = state.stats.up.persistToMaster + 1;\n\n    /**\n     * Add the new docs to the non-persistent list\n     */\n    docs.forEach(docData => {\n      var docId = docData[state.primaryPath];\n      nonPersistedFromMaster.docs[docId] = docData;\n    });\n    nonPersistedFromMaster.checkpoint = checkpoint;\n    persistenceQueue = persistenceQueue.then(async () => {\n      if (state.events.canceled.getValue()) {\n        return false;\n      }\n      var upDocsById = nonPersistedFromMaster.docs;\n      nonPersistedFromMaster.docs = {};\n      var useCheckpoint = nonPersistedFromMaster.checkpoint;\n      var docIds = Object.keys(upDocsById);\n      if (docIds.length === 0) {\n        return false;\n      }\n      var assumedMasterState = await getAssumedMasterState(state, docIds);\n      var writeRowsToMaster = {};\n      var writeRowsToMasterIds = [];\n      var writeRowsToMeta = {};\n      var forkStateById = {};\n      await Promise.all(docIds.map(async docId => {\n        var fullDocData = upDocsById[docId];\n        forkStateById[docId] = fullDocData;\n        var docData = writeDocToDocState(fullDocData, state.hasAttachments, !!state.input.keepMeta);\n        var assumedMasterDoc = assumedMasterState[docId];\n\n        /**\n         * If the master state is equal to the\n         * fork state, we can assume that the document state is already\n         * replicated.\n         */\n        if (assumedMasterDoc &&\n        // if the isResolvedConflict is correct, we do not have to compare the documents.\n        assumedMasterDoc.metaDocument.isResolvedConflict !== fullDocData._rev && (await state.input.conflictHandler({\n          realMasterState: assumedMasterDoc.docData,\n          newDocumentState: docData\n        }, 'upstream-check-if-equal')).isEqual || (\n        /**\n         * If the master works with _rev fields,\n         * we use that to check if our current doc state\n         * is different from the assumedMasterDoc.\n         */\n\n        assumedMasterDoc && assumedMasterDoc.docData._rev && parseRevision(fullDocData._rev).height === fullDocData._meta[state.input.identifier])) {\n          return;\n        }\n        writeRowsToMasterIds.push(docId);\n        writeRowsToMaster[docId] = {\n          assumedMasterState: assumedMasterDoc ? assumedMasterDoc.docData : undefined,\n          newDocumentState: docData\n        };\n        writeRowsToMeta[docId] = await getMetaWriteRow(state, docData, assumedMasterDoc ? assumedMasterDoc.metaDocument : undefined);\n      }));\n      if (writeRowsToMasterIds.length === 0) {\n        return false;\n      }\n      var writeRowsArray = Object.values(writeRowsToMaster);\n      var conflictIds = new Set();\n      var conflictsById = {};\n\n      /**\n       * To always respect the push.batchSize,\n       * we have to split the write rows into batches\n       * to ensure that replicationHandler.masterWrite() is never\n       * called with more documents than what the batchSize limits.\n       */\n      var writeBatches = batchArray(writeRowsArray, state.input.pushBatchSize);\n      await Promise.all(writeBatches.map(async writeBatch => {\n        // enhance docs with attachments\n        if (state.hasAttachments) {\n          await Promise.all(writeBatch.map(async row => {\n            row.newDocumentState = await fillWriteDataForAttachmentsChange(state.primaryPath, state.input.forkInstance, clone(row.newDocumentState), row.assumedMasterState);\n          }));\n        }\n        var masterWriteResult = await replicationHandler.masterWrite(writeBatch);\n        masterWriteResult.forEach(conflictDoc => {\n          var id = conflictDoc[state.primaryPath];\n          conflictIds.add(id);\n          conflictsById[id] = conflictDoc;\n        });\n      }));\n      var useWriteRowsToMeta = [];\n      writeRowsToMasterIds.forEach(docId => {\n        if (!conflictIds.has(docId)) {\n          state.events.processed.up.next(writeRowsToMaster[docId]);\n          useWriteRowsToMeta.push(writeRowsToMeta[docId]);\n        }\n      });\n      if (state.events.canceled.getValue()) {\n        return false;\n      }\n      if (useWriteRowsToMeta.length > 0) {\n        await state.input.metaInstance.bulkWrite(stripAttachmentsDataFromMetaWriteRows(state, useWriteRowsToMeta), 'replication-up-write-meta');\n        // TODO what happens when we have conflicts here?\n      }\n\n      /**\n       * Resolve conflicts by writing a new document\n       * state to the fork instance and the 'real' master state\n       * to the meta instance.\n       * Non-409 errors will be detected by resolveConflictError()\n       */\n      var hadConflictWrites = false;\n      if (conflictIds.size > 0) {\n        state.stats.up.persistToMasterHadConflicts = state.stats.up.persistToMasterHadConflicts + 1;\n        var conflictWriteFork = [];\n        var conflictWriteMeta = {};\n        await Promise.all(Object.entries(conflictsById).map(([docId, realMasterState]) => {\n          var writeToMasterRow = writeRowsToMaster[docId];\n          var input = {\n            newDocumentState: writeToMasterRow.newDocumentState,\n            assumedMasterState: writeToMasterRow.assumedMasterState,\n            realMasterState\n          };\n          return resolveConflictError(state, input, forkStateById[docId]).then(async resolved => {\n            if (resolved) {\n              state.events.resolvedConflicts.next({\n                input,\n                output: resolved.output\n              });\n              conflictWriteFork.push({\n                previous: forkStateById[docId],\n                document: resolved.resolvedDoc\n              });\n              var assumedMasterDoc = assumedMasterState[docId];\n              conflictWriteMeta[docId] = await getMetaWriteRow(state, ensureNotFalsy(realMasterState), assumedMasterDoc ? assumedMasterDoc.metaDocument : undefined, resolved.resolvedDoc._rev);\n            }\n          });\n        }));\n        if (conflictWriteFork.length > 0) {\n          hadConflictWrites = true;\n          state.stats.up.persistToMasterConflictWrites = state.stats.up.persistToMasterConflictWrites + 1;\n          var forkWriteResult = await state.input.forkInstance.bulkWrite(conflictWriteFork, 'replication-up-write-conflict');\n          /**\n           * Errors in the forkWriteResult must not be handled\n           * because they have been caused by a write to the forkInstance\n           * in between which will anyway trigger a new upstream cycle\n           * that will then resolved the conflict again.\n           */\n          var useMetaWrites = [];\n          forkWriteResult.success.forEach(docData => {\n            var docId = docData[state.primaryPath];\n            useMetaWrites.push(conflictWriteMeta[docId]);\n          });\n          if (useMetaWrites.length > 0) {\n            await state.input.metaInstance.bulkWrite(stripAttachmentsDataFromMetaWriteRows(state, useMetaWrites), 'replication-up-write-conflict-meta');\n          }\n          // TODO what to do with conflicts while writing to the metaInstance?\n        }\n      }\n\n      /**\n       * For better performance we do not await checkpoint writes,\n       * but to ensure order on parallel checkpoint writes,\n       * we have to use a queue.\n       */\n      setCheckpoint(state, 'up', useCheckpoint);\n      return hadConflictWrites;\n    }).catch(unhandledError => {\n      state.events.error.next(unhandledError);\n      return false;\n    });\n    return persistenceQueue;\n  }\n}\n//# sourceMappingURL=upstream.js.map","/**\n * These files contain the replication protocol.\n * It can be used to replicated RxStorageInstances or RxCollections\n * or even to do a client(s)-server replication.\n */\n\nimport { BehaviorSubject, combineLatest, filter, firstValueFrom, mergeMap, Subject } from 'rxjs';\nimport { getPrimaryFieldOfPrimaryKey } from \"../rx-schema-helper.js\";\nimport { clone, ensureNotFalsy, flatClone, PROMISE_RESOLVE_VOID } from \"../plugins/utils/index.js\";\nimport { getCheckpointKey } from \"./checkpoint.js\";\nimport { startReplicationDownstream } from \"./downstream.js\";\nimport { docStateToWriteDoc, getUnderlyingPersistentStorage, writeDocToDocState } from \"./helper.js\";\nimport { startReplicationUpstream } from \"./upstream.js\";\nimport { fillWriteDataForAttachmentsChange } from \"../plugins/attachments/index.js\";\nexport * from \"./checkpoint.js\";\nexport * from \"./downstream.js\";\nexport * from \"./upstream.js\";\nexport * from \"./meta-instance.js\";\nexport * from \"./conflicts.js\";\nexport * from \"./helper.js\";\nexport function replicateRxStorageInstance(input) {\n  input = flatClone(input);\n  input.forkInstance = getUnderlyingPersistentStorage(input.forkInstance);\n  input.metaInstance = getUnderlyingPersistentStorage(input.metaInstance);\n  var checkpointKeyPromise = getCheckpointKey(input);\n  var state = {\n    primaryPath: getPrimaryFieldOfPrimaryKey(input.forkInstance.schema.primaryKey),\n    hasAttachments: !!input.forkInstance.schema.attachments,\n    input,\n    checkpointKey: checkpointKeyPromise,\n    downstreamBulkWriteFlag: checkpointKeyPromise.then(checkpointKey => 'replication-downstream-' + checkpointKey),\n    events: {\n      canceled: new BehaviorSubject(false),\n      active: {\n        down: new BehaviorSubject(true),\n        up: new BehaviorSubject(true)\n      },\n      processed: {\n        down: new Subject(),\n        up: new Subject()\n      },\n      resolvedConflicts: new Subject(),\n      error: new Subject()\n    },\n    stats: {\n      down: {\n        addNewTask: 0,\n        downstreamProcessChanges: 0,\n        downstreamResyncOnce: 0,\n        masterChangeStreamEmit: 0,\n        persistFromMaster: 0\n      },\n      up: {\n        forkChangeStreamEmit: 0,\n        persistToMaster: 0,\n        persistToMasterConflictWrites: 0,\n        persistToMasterHadConflicts: 0,\n        processTasks: 0,\n        upstreamInitialSync: 0\n      }\n    },\n    firstSyncDone: {\n      down: new BehaviorSubject(false),\n      up: new BehaviorSubject(false)\n    },\n    streamQueue: {\n      down: PROMISE_RESOLVE_VOID,\n      up: PROMISE_RESOLVE_VOID\n    },\n    checkpointQueue: PROMISE_RESOLVE_VOID,\n    lastCheckpointDoc: {}\n  };\n  startReplicationDownstream(state);\n  startReplicationUpstream(state);\n  return state;\n}\nexport function awaitRxStorageReplicationFirstInSync(state) {\n  return firstValueFrom(combineLatest([state.firstSyncDone.down.pipe(filter(v => !!v)), state.firstSyncDone.up.pipe(filter(v => !!v))])).then(() => {});\n}\nexport function awaitRxStorageReplicationInSync(replicationState) {\n  return Promise.all([replicationState.streamQueue.up, replicationState.streamQueue.down, replicationState.checkpointQueue]);\n}\nexport async function awaitRxStorageReplicationIdle(state) {\n  await awaitRxStorageReplicationFirstInSync(state);\n  while (true) {\n    var {\n      down,\n      up\n    } = state.streamQueue;\n    await Promise.all([up, down]);\n    /**\n     * If the Promises have not been reassigned\n     * after awaiting them, we know that the replication\n     * is in idle state at this point in time.\n     */\n    if (down === state.streamQueue.down && up === state.streamQueue.up) {\n      return;\n    }\n  }\n}\nexport function rxStorageInstanceToReplicationHandler(instance, conflictHandler, databaseInstanceToken,\n/**\n * If set to true,\n * the _meta.lwt from the pushed documents is kept.\n * (Used in the migration to ensure checkpoints are still valid)\n */\nkeepMeta = false) {\n  instance = getUnderlyingPersistentStorage(instance);\n  var hasAttachments = !!instance.schema.attachments;\n  var primaryPath = getPrimaryFieldOfPrimaryKey(instance.schema.primaryKey);\n  var replicationHandler = {\n    masterChangeStream$: instance.changeStream().pipe(mergeMap(async eventBulk => {\n      var ret = {\n        checkpoint: eventBulk.checkpoint,\n        documents: await Promise.all(eventBulk.events.map(async event => {\n          var docData = writeDocToDocState(event.documentData, hasAttachments, keepMeta);\n          if (hasAttachments) {\n            docData = await fillWriteDataForAttachmentsChange(primaryPath, instance, clone(docData),\n            /**\n             * Notice that the master never knows\n             * the client state of the document.\n             * Therefore we always send all attachments data.\n             */\n            undefined);\n          }\n          return docData;\n        }))\n      };\n      return ret;\n    })),\n    masterChangesSince(checkpoint, batchSize) {\n      return instance.getChangedDocumentsSince(batchSize, checkpoint).then(async result => {\n        return {\n          checkpoint: result.documents.length > 0 ? result.checkpoint : checkpoint,\n          documents: await Promise.all(result.documents.map(async plainDocumentData => {\n            var docData = writeDocToDocState(plainDocumentData, hasAttachments, keepMeta);\n            if (hasAttachments) {\n              docData = await fillWriteDataForAttachmentsChange(primaryPath, instance, clone(docData),\n              /**\n               * Notice the the master never knows\n               * the client state of the document.\n               * Therefore we always send all attachments data.\n               */\n              undefined);\n            }\n            return docData;\n          }))\n        };\n      });\n    },\n    async masterWrite(rows) {\n      var rowById = {};\n      rows.forEach(row => {\n        var docId = row.newDocumentState[primaryPath];\n        rowById[docId] = row;\n      });\n      var ids = Object.keys(rowById);\n      var masterDocsStateList = await instance.findDocumentsById(ids, true);\n      var masterDocsState = new Map();\n      masterDocsStateList.forEach(doc => masterDocsState.set(doc[primaryPath], doc));\n      var conflicts = [];\n      var writeRows = [];\n      await Promise.all(Object.entries(rowById).map(async ([id, row]) => {\n        var masterState = masterDocsState.get(id);\n        if (!masterState) {\n          writeRows.push({\n            document: docStateToWriteDoc(databaseInstanceToken, hasAttachments, keepMeta, row.newDocumentState)\n          });\n        } else if (masterState && !row.assumedMasterState) {\n          conflicts.push(writeDocToDocState(masterState, hasAttachments, keepMeta));\n        } else if ((await conflictHandler({\n          realMasterState: writeDocToDocState(masterState, hasAttachments, keepMeta),\n          newDocumentState: ensureNotFalsy(row.assumedMasterState)\n        }, 'rxStorageInstanceToReplicationHandler-masterWrite')).isEqual === true) {\n          writeRows.push({\n            previous: masterState,\n            document: docStateToWriteDoc(databaseInstanceToken, hasAttachments, keepMeta, row.newDocumentState, masterState)\n          });\n        } else {\n          conflicts.push(writeDocToDocState(masterState, hasAttachments, keepMeta));\n        }\n      }));\n      if (writeRows.length > 0) {\n        var result = await instance.bulkWrite(writeRows, 'replication-master-write');\n        result.error.forEach(err => {\n          if (err.status !== 409) {\n            throw new Error('non conflict error');\n          } else {\n            conflicts.push(writeDocToDocState(ensureNotFalsy(err.documentInDb), hasAttachments, keepMeta));\n          }\n        });\n      }\n      return conflicts;\n    }\n  };\n  return replicationHandler;\n}\nexport async function cancelRxStorageReplication(replicationState) {\n  replicationState.events.canceled.next(true);\n  replicationState.events.active.up.complete();\n  replicationState.events.active.down.complete();\n  replicationState.events.processed.up.complete();\n  replicationState.events.processed.down.complete();\n  replicationState.events.resolvedConflicts.complete();\n  replicationState.events.canceled.complete();\n  await replicationState.checkpointQueue;\n}\n//# sourceMappingURL=index.js.map","/**\n * returns true if the given object is a promise\n */\nexport function isPromise(obj) {\n  return obj && typeof obj.then === 'function';\n}\nexport var PROMISE_RESOLVED_FALSE = Promise.resolve(false);\nexport var PROMISE_RESOLVED_TRUE = Promise.resolve(true);\nexport var PROMISE_RESOLVED_VOID = Promise.resolve();\nexport function sleep(time, resolveWith) {\n  if (!time) time = 0;\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      return res(resolveWith);\n    }, time);\n  });\n}\nexport function randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n/**\n * https://stackoverflow.com/a/8084248\n */\nexport function randomToken() {\n  return Math.random().toString(36).substring(2);\n}\nvar lastMs = 0;\n\n/**\n * Returns the current unix time in micro-seconds,\n * WARNING: This is a pseudo-function\n * Performance.now is not reliable in webworkers, so we just make sure to never return the same time.\n * This is enough in browsers, and this function will not be used in nodejs.\n * The main reason for this hack is to ensure that BroadcastChannel behaves equal to production when it is used in fast-running unit tests.\n */\nexport function microSeconds() {\n  var ret = Date.now() * 1000; // milliseconds to microseconds\n  if (ret <= lastMs) {\n    ret = lastMs + 1;\n  }\n  lastMs = ret;\n  return ret;\n}\n\n/**\n * Check if WebLock API is supported.\n * @link https://developer.mozilla.org/en-US/docs/Web/API/Web_Locks_API\n */\nexport function supportsWebLockAPI() {\n  if (typeof navigator !== 'undefined' && typeof navigator.locks !== 'undefined' && typeof navigator.locks.request === 'function') {\n    return true;\n  } else {\n    return false;\n  }\n}","import { addBrowser } from './browser.js';\nimport { addNode } from './node.js';\n\n/**\n * Use the code directly to prevent import problems\n * with the detect-node package.\n * @link https://github.com/iliakan/detect-node/blob/master/index.js\n */\nvar isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\nvar USE_METHOD = isNode ? addNode : addBrowser;\nvar LISTENERS = new Set();\nvar startedListening = false;\nfunction startListening() {\n  if (startedListening) {\n    return;\n  }\n  startedListening = true;\n  USE_METHOD(runAll);\n}\nexport function add(fn) {\n  startListening();\n  if (typeof fn !== 'function') {\n    throw new Error('Listener is no function');\n  }\n  LISTENERS.add(fn);\n  var addReturn = {\n    remove: function remove() {\n      return LISTENERS[\"delete\"](fn);\n    },\n    run: function run() {\n      LISTENERS[\"delete\"](fn);\n      return fn();\n    }\n  };\n  return addReturn;\n}\nexport function runAll() {\n  var promises = [];\n  LISTENERS.forEach(function (fn) {\n    promises.push(fn());\n    LISTENERS[\"delete\"](fn);\n  });\n  return Promise.all(promises);\n}\nexport function removeAll() {\n  LISTENERS.clear();\n}\nexport function getSize() {\n  return LISTENERS.size;\n}","export function addNode(fn) {\n  process.on('exit', function () {\n    return fn();\n  });\n\n  /**\n   * on the following events,\n   * the process will not end if there are\n   * event-handlers attached,\n   * therefore we have to call process.exit()\n   */\n  process.on('beforeExit', function () {\n    return fn().then(function () {\n      return process.exit();\n    });\n  });\n  // catches ctrl+c event\n  process.on('SIGINT', function () {\n    return fn().then(function () {\n      return process.exit();\n    });\n  });\n  // catches uncaught exceptions\n  process.on('uncaughtException', function (err) {\n    return fn().then(function () {\n      console.trace(err);\n      process.exit(101);\n    });\n  });\n}","/* global WorkerGlobalScope */\n\nexport function addBrowser(fn) {\n  if (typeof WorkerGlobalScope === 'function' && self instanceof WorkerGlobalScope) {\n    /**\n     * Because killing a worker does directly stop the excution\n     * of the code, our only chance is to overwrite the close function\n     * which could work some times.\n     * @link https://stackoverflow.com/q/72903255/3443137\n     */\n    var oldClose = self.close.bind(self);\n    self.close = function () {\n      fn();\n      return oldClose();\n    };\n  } else {\n    /**\n     * if we are on react-native, there is no window.addEventListener\n     * @link https://github.com/pubkey/unload/issues/6\n     */\n    if (typeof window.addEventListener !== 'function') {\n      return;\n    }\n\n    /**\n     * for normal browser-windows, we use the beforeunload-event\n     */\n    window.addEventListener('beforeunload', function () {\n      fn();\n    }, true);\n\n    /**\n     * for iframes, we have to use the unload-event\n     * @link https://stackoverflow.com/q/47533670/3443137\n     */\n    window.addEventListener('unload', function () {\n      fn();\n    }, true);\n  }\n\n  /**\n   * TODO add fallback for safari-mobile\n   * @link https://stackoverflow.com/a/26193516/3443137\n   */\n}","import { add as unloadAdd } from 'unload';\n\n/**\n * sends and internal message over the broadcast-channel\n */\nexport function sendLeaderMessage(leaderElector, action) {\n  var msgJson = {\n    context: 'leader',\n    action: action,\n    token: leaderElector.token\n  };\n  return leaderElector.broadcastChannel.postInternal(msgJson);\n}\nexport function beLeader(leaderElector) {\n  leaderElector.isLeader = true;\n  leaderElector._hasLeader = true;\n  var unloadFn = unloadAdd(function () {\n    return leaderElector.die();\n  });\n  leaderElector._unl.push(unloadFn);\n  var isLeaderListener = function isLeaderListener(msg) {\n    if (msg.context === 'leader' && msg.action === 'apply') {\n      sendLeaderMessage(leaderElector, 'tell');\n    }\n    if (msg.context === 'leader' && msg.action === 'tell' && !leaderElector._dpLC) {\n      /**\n       * another instance is also leader!\n       * This can happen on rare events\n       * like when the CPU is at 100% for long time\n       * or the tabs are open very long and the browser throttles them.\n       * @link https://github.com/pubkey/broadcast-channel/issues/414\n       * @link https://github.com/pubkey/broadcast-channel/issues/385\n       */\n      leaderElector._dpLC = true;\n      leaderElector._dpL(); // message the lib user so the app can handle the problem\n      sendLeaderMessage(leaderElector, 'tell'); // ensure other leader also knows the problem\n    }\n  };\n\n  leaderElector.broadcastChannel.addEventListener('internal', isLeaderListener);\n  leaderElector._lstns.push(isLeaderListener);\n  return sendLeaderMessage(leaderElector, 'tell');\n}","import { randomToken } from './util.js';\nimport { sendLeaderMessage, beLeader } from './leader-election-util.js';\n\n/**\n * A faster version of the leader elector that uses the WebLock API\n * @link https://developer.mozilla.org/en-US/docs/Web/API/Web_Locks_API\n */\nexport var LeaderElectionWebLock = function LeaderElectionWebLock(broadcastChannel, options) {\n  var _this = this;\n  this.broadcastChannel = broadcastChannel;\n  broadcastChannel._befC.push(function () {\n    return _this.die();\n  });\n  this._options = options;\n  this.isLeader = false;\n  this.isDead = false;\n  this.token = randomToken();\n  this._lstns = [];\n  this._unl = [];\n  this._dpL = function () {}; // onduplicate listener\n  this._dpLC = false; // true when onduplicate called\n\n  this._wKMC = {}; // stuff for cleanup\n\n  // lock name\n  this.lN = 'pubkey-bc||' + broadcastChannel.method.type + '||' + broadcastChannel.name;\n};\nLeaderElectionWebLock.prototype = {\n  hasLeader: function hasLeader() {\n    var _this2 = this;\n    return navigator.locks.query().then(function (locks) {\n      var relevantLocks = locks.held ? locks.held.filter(function (lock) {\n        return lock.name === _this2.lN;\n      }) : [];\n      if (relevantLocks && relevantLocks.length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  },\n  awaitLeadership: function awaitLeadership() {\n    var _this3 = this;\n    if (!this._wLMP) {\n      this._wKMC.c = new AbortController();\n      var returnPromise = new Promise(function (res, rej) {\n        _this3._wKMC.res = res;\n        _this3._wKMC.rej = rej;\n      });\n      this._wLMP = new Promise(function (res) {\n        navigator.locks.request(_this3.lN, {\n          signal: _this3._wKMC.c.signal\n        }, function () {\n          // if the lock resolved, we can drop the abort controller\n          _this3._wKMC.c = undefined;\n          beLeader(_this3);\n          res();\n          return returnPromise;\n        })[\"catch\"](function () {});\n      });\n    }\n    return this._wLMP;\n  },\n  set onduplicate(_fn) {\n    // Do nothing because there are no duplicates in the WebLock version\n  },\n  die: function die() {\n    var _this4 = this;\n    this._lstns.forEach(function (listener) {\n      return _this4.broadcastChannel.removeEventListener('internal', listener);\n    });\n    this._lstns = [];\n    this._unl.forEach(function (uFn) {\n      return uFn.remove();\n    });\n    this._unl = [];\n    if (this.isLeader) {\n      this.isLeader = false;\n    }\n    this.isDead = true;\n    if (this._wKMC.res) {\n      this._wKMC.res();\n    }\n    if (this._wKMC.c) {\n      this._wKMC.c.abort('LeaderElectionWebLock.die() called');\n    }\n    return sendLeaderMessage(this, 'death');\n  }\n};","import { sleep, randomToken, PROMISE_RESOLVED_VOID, PROMISE_RESOLVED_TRUE, supportsWebLockAPI } from './util.js';\nimport { sendLeaderMessage, beLeader } from './leader-election-util.js';\nimport { LeaderElectionWebLock } from './leader-election-web-lock.js';\nvar LeaderElection = function LeaderElection(broadcastChannel, options) {\n  var _this = this;\n  this.broadcastChannel = broadcastChannel;\n  this._options = options;\n  this.isLeader = false;\n  this._hasLeader = false;\n  this.isDead = false;\n  this.token = randomToken();\n\n  /**\n   * Apply Queue,\n   * used to ensure we do not run applyOnce()\n   * in parallel.\n   */\n  this._aplQ = PROMISE_RESOLVED_VOID;\n  // amount of unfinished applyOnce() calls\n  this._aplQC = 0;\n\n  // things to clean up\n  this._unl = []; // _unloads\n  this._lstns = []; // _listeners\n  this._dpL = function () {}; // onduplicate listener\n  this._dpLC = false; // true when onduplicate called\n\n  /**\n   * Even when the own instance is not applying,\n   * we still listen to messages to ensure the hasLeader flag\n   * is set correctly.\n   */\n  var hasLeaderListener = function hasLeaderListener(msg) {\n    if (msg.context === 'leader') {\n      if (msg.action === 'death') {\n        _this._hasLeader = false;\n      }\n      if (msg.action === 'tell') {\n        _this._hasLeader = true;\n      }\n    }\n  };\n  this.broadcastChannel.addEventListener('internal', hasLeaderListener);\n  this._lstns.push(hasLeaderListener);\n};\nLeaderElection.prototype = {\n  hasLeader: function hasLeader() {\n    return Promise.resolve(this._hasLeader);\n  },\n  /**\n   * Returns true if the instance is leader,\n   * false if not.\n   * @async\n   */\n  applyOnce: function applyOnce(\n  // true if the applyOnce() call came from the fallbackInterval cycle\n  isFromFallbackInterval) {\n    var _this2 = this;\n    if (this.isLeader) {\n      return sleep(0, true);\n    }\n    if (this.isDead) {\n      return sleep(0, false);\n    }\n\n    /**\n     * Already applying more than once,\n     * -> wait for the apply queue to be finished.\n     */\n    if (this._aplQC > 1) {\n      return this._aplQ;\n    }\n\n    /**\n     * Add a new apply-run\n     */\n    var applyRun = function applyRun() {\n      /**\n       * Optimization shortcuts.\n       * Directly return if a previous run\n       * has already elected a leader.\n       */\n      if (_this2.isLeader) {\n        return PROMISE_RESOLVED_TRUE;\n      }\n      var stopCriteria = false;\n      var stopCriteriaPromiseResolve;\n      /**\n       * Resolves when a stop criteria is reached.\n       * Uses as a performance shortcut so we do not\n       * have to await the responseTime when it is already clear\n       * that the election failed.\n       */\n      var stopCriteriaPromise = new Promise(function (res) {\n        stopCriteriaPromiseResolve = function stopCriteriaPromiseResolve() {\n          stopCriteria = true;\n          res();\n        };\n      });\n      var handleMessage = function handleMessage(msg) {\n        if (msg.context === 'leader' && msg.token != _this2.token) {\n          if (msg.action === 'apply') {\n            // other is applying\n            if (msg.token > _this2.token) {\n              /**\n               * other has higher token\n               * -> stop applying and let other become leader.\n               */\n              stopCriteriaPromiseResolve();\n            }\n          }\n          if (msg.action === 'tell') {\n            // other is already leader\n            stopCriteriaPromiseResolve();\n            _this2._hasLeader = true;\n          }\n        }\n      };\n      _this2.broadcastChannel.addEventListener('internal', handleMessage);\n\n      /**\n       * If the applyOnce() call came from the fallbackInterval,\n       * we can assume that the election runs in the background and\n       * not critical process is waiting for it.\n       * When this is true, we give the other instances\n       * more time to answer to messages in the election cycle.\n       * This makes it less likely to elect duplicate leaders.\n       * But also it takes longer which is not a problem because we anyway\n       * run in the background.\n       */\n      var waitForAnswerTime = isFromFallbackInterval ? _this2._options.responseTime * 4 : _this2._options.responseTime;\n      return sendLeaderMessage(_this2, 'apply') // send out that this one is applying\n      .then(function () {\n        return Promise.race([sleep(waitForAnswerTime), stopCriteriaPromise.then(function () {\n          return Promise.reject(new Error());\n        })]);\n      })\n      // send again in case another instance was just created\n      .then(function () {\n        return sendLeaderMessage(_this2, 'apply');\n      })\n      // let others time to respond\n      .then(function () {\n        return Promise.race([sleep(waitForAnswerTime), stopCriteriaPromise.then(function () {\n          return Promise.reject(new Error());\n        })]);\n      })[\"catch\"](function () {}).then(function () {\n        _this2.broadcastChannel.removeEventListener('internal', handleMessage);\n        if (!stopCriteria) {\n          // no stop criteria -> own is leader\n          return beLeader(_this2).then(function () {\n            return true;\n          });\n        } else {\n          // other is leader\n          return false;\n        }\n      });\n    };\n    this._aplQC = this._aplQC + 1;\n    this._aplQ = this._aplQ.then(function () {\n      return applyRun();\n    }).then(function () {\n      _this2._aplQC = _this2._aplQC - 1;\n    });\n    return this._aplQ.then(function () {\n      return _this2.isLeader;\n    });\n  },\n  awaitLeadership: function awaitLeadership() {\n    if ( /* _awaitLeadershipPromise */\n    !this._aLP) {\n      this._aLP = _awaitLeadershipOnce(this);\n    }\n    return this._aLP;\n  },\n  set onduplicate(fn) {\n    this._dpL = fn;\n  },\n  die: function die() {\n    var _this3 = this;\n    this._lstns.forEach(function (listener) {\n      return _this3.broadcastChannel.removeEventListener('internal', listener);\n    });\n    this._lstns = [];\n    this._unl.forEach(function (uFn) {\n      return uFn.remove();\n    });\n    this._unl = [];\n    if (this.isLeader) {\n      this._hasLeader = false;\n      this.isLeader = false;\n    }\n    this.isDead = true;\n    return sendLeaderMessage(this, 'death');\n  }\n};\n\n/**\n * @param leaderElector {LeaderElector}\n */\nfunction _awaitLeadershipOnce(leaderElector) {\n  if (leaderElector.isLeader) {\n    return PROMISE_RESOLVED_VOID;\n  }\n  return new Promise(function (res) {\n    var resolved = false;\n    function finish() {\n      if (resolved) {\n        return;\n      }\n      resolved = true;\n      leaderElector.broadcastChannel.removeEventListener('internal', whenDeathListener);\n      res(true);\n    }\n\n    // try once now\n    leaderElector.applyOnce().then(function () {\n      if (leaderElector.isLeader) {\n        finish();\n      }\n    });\n\n    /**\n     * Try on fallbackInterval\n     * @recursive\n     */\n    var tryOnFallBack = function tryOnFallBack() {\n      return sleep(leaderElector._options.fallbackInterval).then(function () {\n        if (leaderElector.isDead || resolved) {\n          return;\n        }\n        if (leaderElector.isLeader) {\n          finish();\n        } else {\n          return leaderElector.applyOnce(true).then(function () {\n            if (leaderElector.isLeader) {\n              finish();\n            } else {\n              tryOnFallBack();\n            }\n          });\n        }\n      });\n    };\n    tryOnFallBack();\n\n    // try when other leader dies\n    var whenDeathListener = function whenDeathListener(msg) {\n      if (msg.context === 'leader' && msg.action === 'death') {\n        leaderElector._hasLeader = false;\n        leaderElector.applyOnce().then(function () {\n          if (leaderElector.isLeader) {\n            finish();\n          }\n        });\n      }\n    };\n    leaderElector.broadcastChannel.addEventListener('internal', whenDeathListener);\n    leaderElector._lstns.push(whenDeathListener);\n  });\n}\nfunction fillOptionsWithDefaults(options, channel) {\n  if (!options) options = {};\n  options = JSON.parse(JSON.stringify(options));\n  if (!options.fallbackInterval) {\n    options.fallbackInterval = 3000;\n  }\n  if (!options.responseTime) {\n    options.responseTime = channel.method.averageResponseTime(channel.options);\n  }\n  return options;\n}\nexport function createLeaderElection(channel, options) {\n  if (channel._leaderElector) {\n    throw new Error('BroadcastChannel already has a leader-elector');\n  }\n  options = fillOptionsWithDefaults(options, channel);\n  var elector = supportsWebLockAPI() ? new LeaderElectionWebLock(channel, options) : new LeaderElection(channel, options);\n  channel._befC.push(function () {\n    return elector.die();\n  });\n  channel._leaderElector = elector;\n  return elector;\n}","var isArray = Array.isArray;\nexport function argsOrArgArray(args) {\n    return args.length === 1 && isArray(args[0]) ? args[0] : args;\n}\n//# sourceMappingURL=argsOrArgArray.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { operate } from '../util/lift';\nimport { argsOrArgArray } from '../util/argsOrArgArray';\nimport { mergeAll } from './mergeAll';\nimport { popNumber, popScheduler } from '../util/args';\nimport { from } from '../observable/from';\nexport function merge() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(args);\n    var concurrent = popNumber(args, Infinity);\n    args = argsOrArgArray(args);\n    return operate(function (source, subscriber) {\n        mergeAll(concurrent)(from(__spreadArray([source], __read(args)), scheduler)).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=merge.js.map","import { microSeconds as micro, PROMISE_RESOLVED_VOID } from '../util.js';\nexport var microSeconds = micro;\nexport var type = 'native';\nexport function create(channelName) {\n  var state = {\n    time: micro(),\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n  };\n\n  state.bc.onmessage = function (msgEvent) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msgEvent.data);\n    }\n  };\n  return state;\n}\nexport function close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\nexport function postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return PROMISE_RESOLVED_VOID;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\nexport function onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  // Deno runtime\n  // eslint-disable-next-line\n  if (typeof globalThis !== 'undefined' && globalThis.Deno && globalThis.Deno.args) {\n    return true;\n  }\n\n  // Browser runtime\n  if ((typeof window !== 'undefined' || typeof self !== 'undefined') && typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\nexport function averageResponseTime() {\n  return 150;\n}\nexport var NativeMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","export function fillOptionsWithDefaults() {\n  var originalOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var options = JSON.parse(JSON.stringify(originalOptions));\n\n  // main\n  if (typeof options.webWorkerSupport === 'undefined') options.webWorkerSupport = true;\n\n  // indexed-db\n  if (!options.idb) options.idb = {};\n  //  after this time the messages get deleted\n  if (!options.idb.ttl) options.idb.ttl = 1000 * 45;\n  if (!options.idb.fallbackInterval) options.idb.fallbackInterval = 150;\n  //  handles abrupt db onclose events.\n  if (originalOptions.idb && typeof originalOptions.idb.onclose === 'function') options.idb.onclose = originalOptions.idb.onclose;\n\n  // localstorage\n  if (!options.localstorage) options.localstorage = {};\n  if (!options.localstorage.removeTimeout) options.localstorage.removeTimeout = 1000 * 60;\n\n  // custom methods\n  if (originalOptions.methods) options.methods = originalOptions.methods;\n\n  // node\n  if (!options.node) options.node = {};\n  if (!options.node.ttl) options.node.ttl = 1000 * 60 * 2; // 2 minutes;\n  /**\n   * On linux use 'ulimit -Hn' to get the limit of open files.\n   * On ubuntu this was 4096 for me, so we use half of that as maxParallelWrites default.\n   */\n  if (!options.node.maxParallelWrites) options.node.maxParallelWrites = 2048;\n  if (typeof options.node.useFastPath === 'undefined') options.node.useFastPath = true;\n  return options;\n}","/**\n * this method uses indexeddb to store the messages\n * There is currently no observerAPI for idb\n * @link https://github.com/w3c/IndexedDB/issues/51\n * \n * When working on this, ensure to use these performance optimizations:\n * @link https://rxdb.info/slow-indexeddb.html\n */\n\nimport { sleep, randomInt, randomToken, microSeconds as micro, PROMISE_RESOLVED_VOID } from '../util.js';\nexport var microSeconds = micro;\nimport { ObliviousSet } from 'oblivious-set';\nimport { fillOptionsWithDefaults } from '../options.js';\nvar DB_PREFIX = 'pubkey.broadcast-channel-0-';\nvar OBJECT_STORE_ID = 'messages';\n\n/**\n * Use relaxed durability for faster performance on all transactions.\n * @link https://nolanlawson.com/2021/08/22/speeding-up-indexeddb-reads-and-writes/\n */\nexport var TRANSACTION_SETTINGS = {\n  durability: 'relaxed'\n};\nexport var type = 'idb';\nexport function getIdb() {\n  if (typeof indexedDB !== 'undefined') return indexedDB;\n  if (typeof window !== 'undefined') {\n    if (typeof window.mozIndexedDB !== 'undefined') return window.mozIndexedDB;\n    if (typeof window.webkitIndexedDB !== 'undefined') return window.webkitIndexedDB;\n    if (typeof window.msIndexedDB !== 'undefined') return window.msIndexedDB;\n  }\n  return false;\n}\n\n/**\n * If possible, we should explicitly commit IndexedDB transactions\n * for better performance.\n * @link https://nolanlawson.com/2021/08/22/speeding-up-indexeddb-reads-and-writes/\n */\nexport function commitIndexedDBTransaction(tx) {\n  if (tx.commit) {\n    tx.commit();\n  }\n}\nexport function createDatabase(channelName) {\n  var IndexedDB = getIdb();\n\n  // create table\n  var dbName = DB_PREFIX + channelName;\n\n  /**\n   * All IndexedDB databases are opened without version\n   * because it is a bit faster, especially on firefox\n   * @link http://nparashuram.com/IndexedDB/perf/#Open%20Database%20with%20version\n   */\n  var openRequest = IndexedDB.open(dbName);\n  openRequest.onupgradeneeded = function (ev) {\n    var db = ev.target.result;\n    db.createObjectStore(OBJECT_STORE_ID, {\n      keyPath: 'id',\n      autoIncrement: true\n    });\n  };\n  return new Promise(function (res, rej) {\n    openRequest.onerror = function (ev) {\n      return rej(ev);\n    };\n    openRequest.onsuccess = function () {\n      res(openRequest.result);\n    };\n  });\n}\n\n/**\n * writes the new message to the database\n * so other readers can find it\n */\nexport function writeMessage(db, readerUuid, messageJson) {\n  var time = Date.now();\n  var writeObject = {\n    uuid: readerUuid,\n    time: time,\n    data: messageJson\n  };\n  var tx = db.transaction([OBJECT_STORE_ID], 'readwrite', TRANSACTION_SETTINGS);\n  return new Promise(function (res, rej) {\n    tx.oncomplete = function () {\n      return res();\n    };\n    tx.onerror = function (ev) {\n      return rej(ev);\n    };\n    var objectStore = tx.objectStore(OBJECT_STORE_ID);\n    objectStore.add(writeObject);\n    commitIndexedDBTransaction(tx);\n  });\n}\nexport function getAllMessages(db) {\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        ret.push(cursor.value);\n        //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n        cursor[\"continue\"]();\n      } else {\n        commitIndexedDBTransaction(tx);\n        res(ret);\n      }\n    };\n  });\n}\nexport function getMessagesHigherThan(db, lastCursorId) {\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  var keyRangeValue = IDBKeyRange.bound(lastCursorId + 1, Infinity);\n\n  /**\n   * Optimization shortcut,\n   * if getAll() can be used, do not use a cursor.\n   * @link https://rxdb.info/slow-indexeddb.html\n   */\n  if (objectStore.getAll) {\n    var getAllRequest = objectStore.getAll(keyRangeValue);\n    return new Promise(function (res, rej) {\n      getAllRequest.onerror = function (err) {\n        return rej(err);\n      };\n      getAllRequest.onsuccess = function (e) {\n        res(e.target.result);\n      };\n    });\n  }\n  function openCursor() {\n    // Occasionally Safari will fail on IDBKeyRange.bound, this\n    // catches that error, having it open the cursor to the first\n    // item. When it gets data it will advance to the desired key.\n    try {\n      keyRangeValue = IDBKeyRange.bound(lastCursorId + 1, Infinity);\n      return objectStore.openCursor(keyRangeValue);\n    } catch (e) {\n      return objectStore.openCursor();\n    }\n  }\n  return new Promise(function (res, rej) {\n    var openCursorRequest = openCursor();\n    openCursorRequest.onerror = function (err) {\n      return rej(err);\n    };\n    openCursorRequest.onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        if (cursor.value.id < lastCursorId + 1) {\n          cursor[\"continue\"](lastCursorId + 1);\n        } else {\n          ret.push(cursor.value);\n          cursor[\"continue\"]();\n        }\n      } else {\n        commitIndexedDBTransaction(tx);\n        res(ret);\n      }\n    };\n  });\n}\nexport function removeMessagesById(channelState, ids) {\n  if (channelState.closed) {\n    return Promise.resolve([]);\n  }\n  var tx = channelState.db.transaction(OBJECT_STORE_ID, 'readwrite', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  return Promise.all(ids.map(function (id) {\n    var deleteRequest = objectStore[\"delete\"](id);\n    return new Promise(function (res) {\n      deleteRequest.onsuccess = function () {\n        return res();\n      };\n    });\n  }));\n}\nexport function getOldMessages(db, ttl) {\n  var olderThen = Date.now() - ttl;\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        var msgObk = cursor.value;\n        if (msgObk.time < olderThen) {\n          ret.push(msgObk);\n          //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n          cursor[\"continue\"]();\n        } else {\n          // no more old messages,\n          commitIndexedDBTransaction(tx);\n          res(ret);\n        }\n      } else {\n        res(ret);\n      }\n    };\n  });\n}\nexport function cleanOldMessages(channelState) {\n  return getOldMessages(channelState.db, channelState.options.idb.ttl).then(function (tooOld) {\n    return removeMessagesById(channelState, tooOld.map(function (msg) {\n      return msg.id;\n    }));\n  });\n}\nexport function create(channelName, options) {\n  options = fillOptionsWithDefaults(options);\n  return createDatabase(channelName).then(function (db) {\n    var state = {\n      closed: false,\n      lastCursorId: 0,\n      channelName: channelName,\n      options: options,\n      uuid: randomToken(),\n      /**\n       * emittedMessagesIds\n       * contains all messages that have been emitted before\n       * @type {ObliviousSet}\n       */\n      eMIs: new ObliviousSet(options.idb.ttl * 2),\n      // ensures we do not read messages in parallel\n      writeBlockPromise: PROMISE_RESOLVED_VOID,\n      messagesCallback: null,\n      readQueuePromises: [],\n      db: db\n    };\n\n    /**\n     * Handle abrupt closes that do not originate from db.close().\n     * This could happen, for example, if the underlying storage is\n     * removed or if the user clears the database in the browser's\n     * history preferences.\n     */\n    db.onclose = function () {\n      state.closed = true;\n      if (options.idb.onclose) options.idb.onclose();\n    };\n\n    /**\n     * if service-workers are used,\n     * we have no 'storage'-event if they post a message,\n     * therefore we also have to set an interval\n     */\n    _readLoop(state);\n    return state;\n  });\n}\nfunction _readLoop(state) {\n  if (state.closed) return;\n  readNewMessages(state).then(function () {\n    return sleep(state.options.idb.fallbackInterval);\n  }).then(function () {\n    return _readLoop(state);\n  });\n}\nfunction _filterMessage(msgObj, state) {\n  if (msgObj.uuid === state.uuid) return false; // send by own\n  if (state.eMIs.has(msgObj.id)) return false; // already emitted\n  if (msgObj.data.time < state.messagesCallbackTime) return false; // older then onMessageCallback\n  return true;\n}\n\n/**\n * reads all new messages from the database and emits them\n */\nfunction readNewMessages(state) {\n  // channel already closed\n  if (state.closed) return PROMISE_RESOLVED_VOID;\n\n  // if no one is listening, we do not need to scan for new messages\n  if (!state.messagesCallback) return PROMISE_RESOLVED_VOID;\n  return getMessagesHigherThan(state.db, state.lastCursorId).then(function (newerMessages) {\n    var useMessages = newerMessages\n    /**\n     * there is a bug in iOS where the msgObj can be undefined sometimes\n     * so we filter them out\n     * @link https://github.com/pubkey/broadcast-channel/issues/19\n     */.filter(function (msgObj) {\n      return !!msgObj;\n    }).map(function (msgObj) {\n      if (msgObj.id > state.lastCursorId) {\n        state.lastCursorId = msgObj.id;\n      }\n      return msgObj;\n    }).filter(function (msgObj) {\n      return _filterMessage(msgObj, state);\n    }).sort(function (msgObjA, msgObjB) {\n      return msgObjA.time - msgObjB.time;\n    }); // sort by time\n    useMessages.forEach(function (msgObj) {\n      if (state.messagesCallback) {\n        state.eMIs.add(msgObj.id);\n        state.messagesCallback(msgObj.data);\n      }\n    });\n    return PROMISE_RESOLVED_VOID;\n  });\n}\nexport function close(channelState) {\n  channelState.closed = true;\n  channelState.db.close();\n}\nexport function postMessage(channelState, messageJson) {\n  channelState.writeBlockPromise = channelState.writeBlockPromise.then(function () {\n    return writeMessage(channelState.db, channelState.uuid, messageJson);\n  }).then(function () {\n    if (randomInt(0, 10) === 0) {\n      /* await (do not await) */\n      cleanOldMessages(channelState);\n    }\n  });\n  return channelState.writeBlockPromise;\n}\nexport function onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n  readNewMessages(channelState);\n}\nexport function canBeUsed() {\n  return !!getIdb();\n}\nexport function averageResponseTime(options) {\n  return options.idb.fallbackInterval * 2;\n}\nexport var IndexedDBMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","/**\n * A localStorage-only method which uses localstorage and its 'storage'-event\n * This does not work inside webworkers because they have no access to localstorage\n * This is basically implemented to support IE9 or your grandmother's toaster.\n * @link https://caniuse.com/#feat=namevalue-storage\n * @link https://caniuse.com/#feat=indexeddb\n */\n\nimport { ObliviousSet } from 'oblivious-set';\nimport { fillOptionsWithDefaults } from '../options.js';\nimport { sleep, randomToken, microSeconds as micro } from '../util.js';\nexport var microSeconds = micro;\nvar KEY_PREFIX = 'pubkey.broadcastChannel-';\nexport var type = 'localstorage';\n\n/**\n * copied from crosstab\n * @link https://github.com/tejacques/crosstab/blob/master/src/crosstab.js#L32\n */\nexport function getLocalStorage() {\n  var localStorage;\n  if (typeof window === 'undefined') return null;\n  try {\n    localStorage = window.localStorage;\n    localStorage = window['ie8-eventlistener/storage'] || window.localStorage;\n  } catch (e) {\n    // New versions of Firefox throw a Security exception\n    // if cookies are disabled. See\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1028153\n  }\n  return localStorage;\n}\nexport function storageKey(channelName) {\n  return KEY_PREFIX + channelName;\n}\n\n/**\n* writes the new message to the storage\n* and fires the storage-event so other readers can find it\n*/\nexport function postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    sleep().then(function () {\n      var key = storageKey(channelState.channelName);\n      var writeObj = {\n        token: randomToken(),\n        time: Date.now(),\n        data: messageJson,\n        uuid: channelState.uuid\n      };\n      var value = JSON.stringify(writeObj);\n      getLocalStorage().setItem(key, value);\n\n      /**\n       * StorageEvent does not fire the 'storage' event\n       * in the window that changes the state of the local storage.\n       * So we fire it manually\n       */\n      var ev = document.createEvent('Event');\n      ev.initEvent('storage', true, true);\n      ev.key = key;\n      ev.newValue = value;\n      window.dispatchEvent(ev);\n      res();\n    });\n  });\n}\nexport function addStorageEventListener(channelName, fn) {\n  var key = storageKey(channelName);\n  var listener = function listener(ev) {\n    if (ev.key === key) {\n      fn(JSON.parse(ev.newValue));\n    }\n  };\n  window.addEventListener('storage', listener);\n  return listener;\n}\nexport function removeStorageEventListener(listener) {\n  window.removeEventListener('storage', listener);\n}\nexport function create(channelName, options) {\n  options = fillOptionsWithDefaults(options);\n  if (!canBeUsed()) {\n    throw new Error('BroadcastChannel: localstorage cannot be used');\n  }\n  var uuid = randomToken();\n\n  /**\n   * eMIs\n   * contains all messages that have been emitted before\n   * @type {ObliviousSet}\n   */\n  var eMIs = new ObliviousSet(options.localstorage.removeTimeout);\n  var state = {\n    channelName: channelName,\n    uuid: uuid,\n    eMIs: eMIs // emittedMessagesIds\n  };\n\n  state.listener = addStorageEventListener(channelName, function (msgObj) {\n    if (!state.messagesCallback) return; // no listener\n    if (msgObj.uuid === uuid) return; // own message\n    if (!msgObj.token || eMIs.has(msgObj.token)) return; // already emitted\n    if (msgObj.data.time && msgObj.data.time < state.messagesCallbackTime) return; // too old\n\n    eMIs.add(msgObj.token);\n    state.messagesCallback(msgObj.data);\n  });\n  return state;\n}\nexport function close(channelState) {\n  removeStorageEventListener(channelState.listener);\n}\nexport function onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  var ls = getLocalStorage();\n  if (!ls) return false;\n  try {\n    var key = '__broadcastchannel_check';\n    ls.setItem(key, 'works');\n    ls.removeItem(key);\n  } catch (e) {\n    // Safari 10 in private mode will not allow write access to local\n    // storage and fail with a QuotaExceededError. See\n    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API#Private_Browsing_Incognito_modes\n    return false;\n  }\n  return true;\n}\nexport function averageResponseTime() {\n  var defaultTime = 120;\n  var userAgent = navigator.userAgent.toLowerCase();\n  if (userAgent.includes('safari') && !userAgent.includes('chrome')) {\n    // safari is much slower so this time is higher\n    return defaultTime * 2;\n  }\n  return defaultTime;\n}\nexport var LocalstorageMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","import { microSeconds as micro } from '../util.js';\nexport var microSeconds = micro;\nexport var type = 'simulate';\nvar SIMULATE_CHANNELS = new Set();\nexport function create(channelName) {\n  var state = {\n    time: microSeconds(),\n    name: channelName,\n    messagesCallback: null\n  };\n  SIMULATE_CHANNELS.add(state);\n  return state;\n}\nexport function close(channelState) {\n  SIMULATE_CHANNELS[\"delete\"](channelState);\n}\nexport var SIMULATE_DELAY_TIME = 5;\nexport function postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      var channelArray = Array.from(SIMULATE_CHANNELS);\n      channelArray.forEach(function (channel) {\n        if (channel.name === channelState.name &&\n        // has same name\n        channel !== channelState &&\n        // not own channel\n        !!channel.messagesCallback &&\n        // has subscribers\n        channel.time < messageJson.time // channel not created after postMessage() call\n        ) {\n          channel.messagesCallback(messageJson);\n        }\n      });\n      res();\n    }, SIMULATE_DELAY_TIME);\n  });\n}\nexport function onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  return true;\n}\nexport function averageResponseTime() {\n  return SIMULATE_DELAY_TIME;\n}\nexport var SimulateMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","import { NativeMethod } from './methods/native.js';\nimport { IndexedDBMethod } from './methods/indexed-db.js';\nimport { LocalstorageMethod } from './methods/localstorage.js';\nimport { SimulateMethod } from './methods/simulate.js';\n// the line below will be removed from es5/browser builds\n\n// order is important\nvar METHODS = [NativeMethod,\n// fastest\nIndexedDBMethod, LocalstorageMethod];\nexport function chooseMethod(options) {\n  var chooseMethods = [].concat(options.methods, METHODS).filter(Boolean);\n\n  // the line below will be removed from es5/browser builds\n\n  // directly chosen\n  if (options.type) {\n    if (options.type === 'simulate') {\n      // only use simulate-method if directly chosen\n      return SimulateMethod;\n    }\n    var ret = chooseMethods.find(function (m) {\n      return m.type === options.type;\n    });\n    if (!ret) throw new Error('method-type ' + options.type + ' not found');else return ret;\n  }\n\n  /**\n   * if no webworker support is needed,\n   * remove idb from the list so that localstorage will be chosen\n   */\n  if (!options.webWorkerSupport) {\n    chooseMethods = chooseMethods.filter(function (m) {\n      return m.type !== 'idb';\n    });\n  }\n  var useMethod = chooseMethods.find(function (method) {\n    return method.canBeUsed();\n  });\n  if (!useMethod) {\n    throw new Error(\"No usable method found in \" + JSON.stringify(METHODS.map(function (m) {\n      return m.type;\n    })));\n  } else {\n    return useMethod;\n  }\n}","import { isPromise, PROMISE_RESOLVED_FALSE, PROMISE_RESOLVED_VOID } from './util.js';\nimport { chooseMethod } from './method-chooser.js';\nimport { fillOptionsWithDefaults } from './options.js';\n\n/**\n * Contains all open channels,\n * used in tests to ensure everything is closed.\n */\nexport var OPEN_BROADCAST_CHANNELS = new Set();\nvar lastId = 0;\nexport var BroadcastChannel = function BroadcastChannel(name, options) {\n  // identifier of the channel to debug stuff\n  this.id = lastId++;\n  OPEN_BROADCAST_CHANNELS.add(this);\n  this.name = name;\n  if (ENFORCED_OPTIONS) {\n    options = ENFORCED_OPTIONS;\n  }\n  this.options = fillOptionsWithDefaults(options);\n  this.method = chooseMethod(this.options);\n\n  // isListening\n  this._iL = false;\n\n  /**\n   * _onMessageListener\n   * setting onmessage twice,\n   * will overwrite the first listener\n   */\n  this._onML = null;\n\n  /**\n   * _addEventListeners\n   */\n  this._addEL = {\n    message: [],\n    internal: []\n  };\n\n  /**\n   * Unsent message promises\n   * where the sending is still in progress\n   * @type {Set<Promise>}\n   */\n  this._uMP = new Set();\n\n  /**\n   * _beforeClose\n   * array of promises that will be awaited\n   * before the channel is closed\n   */\n  this._befC = [];\n\n  /**\n   * _preparePromise\n   */\n  this._prepP = null;\n  _prepareChannel(this);\n};\n\n// STATICS\n\n/**\n * used to identify if someone overwrites\n * window.BroadcastChannel with this\n * See methods/native.js\n */\nBroadcastChannel._pubkey = true;\n\n/**\n * clears the tmp-folder if is node\n * @return {Promise<boolean>} true if has run, false if not node\n */\nexport function clearNodeFolder(options) {\n  options = fillOptionsWithDefaults(options);\n  var method = chooseMethod(options);\n  if (method.type === 'node') {\n    return method.clearNodeFolder().then(function () {\n      return true;\n    });\n  } else {\n    return PROMISE_RESOLVED_FALSE;\n  }\n}\n\n/**\n * if set, this method is enforced,\n * no mather what the options are\n */\nvar ENFORCED_OPTIONS;\nexport function enforceOptions(options) {\n  ENFORCED_OPTIONS = options;\n}\n\n// PROTOTYPE\nBroadcastChannel.prototype = {\n  postMessage: function postMessage(msg) {\n    if (this.closed) {\n      throw new Error('BroadcastChannel.postMessage(): ' + 'Cannot post message after channel has closed ' +\n      /**\n       * In the past when this error appeared, it was really hard to debug.\n       * So now we log the msg together with the error so it at least\n       * gives some clue about where in your application this happens.\n       */\n      JSON.stringify(msg));\n    }\n    return _post(this, 'message', msg);\n  },\n  postInternal: function postInternal(msg) {\n    return _post(this, 'internal', msg);\n  },\n  set onmessage(fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n    _removeListenerObject(this, 'message', this._onML);\n    if (fn && typeof fn === 'function') {\n      this._onML = listenObj;\n      _addListenerObject(this, 'message', listenObj);\n    } else {\n      this._onML = null;\n    }\n  },\n  addEventListener: function addEventListener(type, fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n    _addListenerObject(this, type, listenObj);\n  },\n  removeEventListener: function removeEventListener(type, fn) {\n    var obj = this._addEL[type].find(function (obj) {\n      return obj.fn === fn;\n    });\n    _removeListenerObject(this, type, obj);\n  },\n  close: function close() {\n    var _this = this;\n    if (this.closed) {\n      return;\n    }\n    OPEN_BROADCAST_CHANNELS[\"delete\"](this);\n    this.closed = true;\n    var awaitPrepare = this._prepP ? this._prepP : PROMISE_RESOLVED_VOID;\n    this._onML = null;\n    this._addEL.message = [];\n    return awaitPrepare\n    // wait until all current sending are processed\n    .then(function () {\n      return Promise.all(Array.from(_this._uMP));\n    })\n    // run before-close hooks\n    .then(function () {\n      return Promise.all(_this._befC.map(function (fn) {\n        return fn();\n      }));\n    })\n    // close the channel\n    .then(function () {\n      return _this.method.close(_this._state);\n    });\n  },\n  get type() {\n    return this.method.type;\n  },\n  get isClosed() {\n    return this.closed;\n  }\n};\n\n/**\n * Post a message over the channel\n * @returns {Promise} that resolved when the message sending is done\n */\nfunction _post(broadcastChannel, type, msg) {\n  var time = broadcastChannel.method.microSeconds();\n  var msgObj = {\n    time: time,\n    type: type,\n    data: msg\n  };\n  var awaitPrepare = broadcastChannel._prepP ? broadcastChannel._prepP : PROMISE_RESOLVED_VOID;\n  return awaitPrepare.then(function () {\n    var sendPromise = broadcastChannel.method.postMessage(broadcastChannel._state, msgObj);\n\n    // add/remove to unsent messages list\n    broadcastChannel._uMP.add(sendPromise);\n    sendPromise[\"catch\"]().then(function () {\n      return broadcastChannel._uMP[\"delete\"](sendPromise);\n    });\n    return sendPromise;\n  });\n}\nfunction _prepareChannel(channel) {\n  var maybePromise = channel.method.create(channel.name, channel.options);\n  if (isPromise(maybePromise)) {\n    channel._prepP = maybePromise;\n    maybePromise.then(function (s) {\n      // used in tests to simulate slow runtime\n      /*if (channel.options.prepareDelay) {\n           await new Promise(res => setTimeout(res, this.options.prepareDelay));\n      }*/\n      channel._state = s;\n    });\n  } else {\n    channel._state = maybePromise;\n  }\n}\nfunction _hasMessageListeners(channel) {\n  if (channel._addEL.message.length > 0) return true;\n  if (channel._addEL.internal.length > 0) return true;\n  return false;\n}\nfunction _addListenerObject(channel, type, obj) {\n  channel._addEL[type].push(obj);\n  _startListening(channel);\n}\nfunction _removeListenerObject(channel, type, obj) {\n  channel._addEL[type] = channel._addEL[type].filter(function (o) {\n    return o !== obj;\n  });\n  _stopListening(channel);\n}\nfunction _startListening(channel) {\n  if (!channel._iL && _hasMessageListeners(channel)) {\n    // someone is listening, start subscribing\n\n    var listenerFn = function listenerFn(msgObj) {\n      channel._addEL[msgObj.type].forEach(function (listenerObject) {\n        if (msgObj.time >= listenerObject.time) {\n          listenerObject.fn(msgObj.data);\n        }\n      });\n    };\n    var time = channel.method.microSeconds();\n    if (channel._prepP) {\n      channel._prepP.then(function () {\n        channel._iL = true;\n        channel.method.onMessage(channel._state, listenerFn, time);\n      });\n    } else {\n      channel._iL = true;\n      channel.method.onMessage(channel._state, listenerFn, time);\n    }\n  }\n}\nfunction _stopListening(channel) {\n  if (channel._iL && !_hasMessageListeners(channel)) {\n    // no one is listening, stop subscribing\n    channel._iL = false;\n    var time = channel.method.microSeconds();\n    channel.method.onMessage(channel._state, null, time);\n  }\n}","/**\n * When a persistent RxStorage is used in more the one JavaScript process,\n * the even stream of the changestream() function must be broadcasted to the other\n * RxStorageInstances of the same databaseName+collectionName.\n *\n * In the past this was done by RxDB but it makes more sense to do this\n * at the RxStorage level so that the broadcasting etc can all happen inside of a WebWorker\n * and not on the main thread.\n * Also it makes it less complex to stack up different RxStorages onto each other\n * like what we do with the in-memory plugin.\n *\n * This is intended to be used inside of createStorageInstance() of a storage.\n * Do not use this if the storage anyway broadcasts the events like when using MongoDB\n * or in the future W3C might introduce a way to listen to IndexedDB changes.\n */\n\nimport { Subject } from 'rxjs';\nimport { mergeWith } from 'rxjs/operators';\nimport { BroadcastChannel } from 'broadcast-channel';\n\n/**\n * The broadcast-channel is reused by the databaseInstanceToken.\n * This is required so that it is easy to simulate multi-tab usage\n * in the test where different instances of the same RxDatabase must\n * have different broadcast channels.\n * But also it ensures that for each RxDatabase we only create a single\n * broadcast channel that can even be reused in the leader election plugin.\n *\n * TODO at the end of the unit tests,\n * we should ensure that all channels are closed and cleaned up.\n * Otherwise we have forgot something.\n */\nexport var BROADCAST_CHANNEL_BY_TOKEN = new Map();\nexport function getBroadcastChannelReference(storageName, databaseInstanceToken, databaseName, refObject) {\n  var state = BROADCAST_CHANNEL_BY_TOKEN.get(databaseInstanceToken);\n  if (!state) {\n    state = {\n      /**\n       * We have to use the databaseName instead of the databaseInstanceToken\n       * in the BroadcastChannel name because different instances must end with the same\n       * channel name to be able to broadcast messages between each other.\n       */\n      bc: new BroadcastChannel(['RxDB:', storageName, databaseName].join('|')),\n      refs: new Set()\n    };\n    BROADCAST_CHANNEL_BY_TOKEN.set(databaseInstanceToken, state);\n  }\n  state.refs.add(refObject);\n  return state.bc;\n}\nexport function removeBroadcastChannelReference(databaseInstanceToken, refObject) {\n  var state = BROADCAST_CHANNEL_BY_TOKEN.get(databaseInstanceToken);\n  if (!state) {\n    return;\n  }\n  state.refs.delete(refObject);\n  if (state.refs.size === 0) {\n    BROADCAST_CHANNEL_BY_TOKEN.delete(databaseInstanceToken);\n    return state.bc.close();\n  }\n}\nexport function addRxStorageMultiInstanceSupport(storageName, instanceCreationParams, instance,\n/**\n * If provided, that channel will be used\n * instead of an own one.\n */\nprovidedBroadcastChannel) {\n  if (!instanceCreationParams.multiInstance) {\n    return;\n  }\n  var broadcastChannel = providedBroadcastChannel ? providedBroadcastChannel : getBroadcastChannelReference(storageName, instanceCreationParams.databaseInstanceToken, instance.databaseName, instance);\n  var changesFromOtherInstances$ = new Subject();\n  var eventListener = msg => {\n    if (msg.storageName === storageName && msg.databaseName === instanceCreationParams.databaseName && msg.collectionName === instanceCreationParams.collectionName && msg.version === instanceCreationParams.schema.version) {\n      changesFromOtherInstances$.next(msg.eventBulk);\n    }\n  };\n  broadcastChannel.addEventListener('message', eventListener);\n  var oldChangestream$ = instance.changeStream();\n  var closed = false;\n  var sub = oldChangestream$.subscribe(eventBulk => {\n    if (closed) {\n      return;\n    }\n    broadcastChannel.postMessage({\n      storageName: storageName,\n      databaseName: instanceCreationParams.databaseName,\n      collectionName: instanceCreationParams.collectionName,\n      version: instanceCreationParams.schema.version,\n      eventBulk\n    });\n  });\n  instance.changeStream = function () {\n    return changesFromOtherInstances$.asObservable().pipe(mergeWith(oldChangestream$));\n  };\n  var oldClose = instance.close.bind(instance);\n  instance.close = async function () {\n    closed = true;\n    sub.unsubscribe();\n    broadcastChannel.removeEventListener('message', eventListener);\n    if (!providedBroadcastChannel) {\n      await removeBroadcastChannelReference(instanceCreationParams.databaseInstanceToken, instance);\n    }\n    return oldClose();\n  };\n  var oldRemove = instance.remove.bind(instance);\n  instance.remove = async function () {\n    closed = true;\n    sub.unsubscribe();\n    broadcastChannel.removeEventListener('message', eventListener);\n    if (!providedBroadcastChannel) {\n      await removeBroadcastChannelReference(instanceCreationParams.databaseInstanceToken, instance);\n    }\n    return oldRemove();\n  };\n}\n//# sourceMappingURL=rx-storage-multiinstance.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { merge } from './merge';\nexport function mergeWith() {\n    var otherSources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        otherSources[_i] = arguments[_i];\n    }\n    return merge.apply(void 0, __spreadArray([], __read(otherSources)));\n}\n//# sourceMappingURL=mergeWith.js.map","/**\n * this plugin adds the leader-election-capabilities to rxdb\n */\n\nimport { createLeaderElection } from 'broadcast-channel';\nimport { getBroadcastChannelReference, removeBroadcastChannelReference } from \"../../rx-storage-multiinstance.js\";\nimport { PROMISE_RESOLVE_TRUE, getFromMapOrCreate } from \"../utils/index.js\";\nvar LEADER_ELECTORS_OF_DB = new WeakMap();\nvar LEADER_ELECTOR_BY_BROADCAST_CHANNEL = new WeakMap();\n\n/**\n * Returns the leader elector of a broadcast channel.\n * Used to ensure we reuse the same elector for the channel each time.\n */\nexport function getLeaderElectorByBroadcastChannel(broadcastChannel) {\n  return getFromMapOrCreate(LEADER_ELECTOR_BY_BROADCAST_CHANNEL, broadcastChannel, () => createLeaderElection(broadcastChannel));\n}\n\n/**\n * @overwrites RxDatabase().leaderElector for caching\n */\nexport function getForDatabase() {\n  var broadcastChannel = getBroadcastChannelReference(this.storage.name, this.token, this.name, this);\n\n  /**\n   * Clean up the reference on RxDatabase.destroy()\n   */\n  var oldDestroy = this.destroy.bind(this);\n  this.destroy = function () {\n    removeBroadcastChannelReference(this.token, this);\n    return oldDestroy();\n  };\n  var elector = getLeaderElectorByBroadcastChannel(broadcastChannel);\n  if (!elector) {\n    elector = getLeaderElectorByBroadcastChannel(broadcastChannel);\n    LEADER_ELECTORS_OF_DB.set(this, elector);\n  }\n\n  /**\n   * Overwrite for caching\n   */\n  this.leaderElector = () => elector;\n  return elector;\n}\nexport function isLeader() {\n  if (!this.multiInstance) {\n    return true;\n  }\n  return this.leaderElector().isLeader;\n}\nexport function waitForLeadership() {\n  if (!this.multiInstance) {\n    return PROMISE_RESOLVE_TRUE;\n  } else {\n    return this.leaderElector().awaitLeadership().then(() => true);\n  }\n}\n\n/**\n * runs when the database gets destroyed\n */\nexport function onDestroy(db) {\n  var has = LEADER_ELECTORS_OF_DB.get(db);\n  if (has) {\n    has.die();\n  }\n}\nexport var rxdb = true;\nexport var prototypes = {\n  RxDatabase: proto => {\n    proto.leaderElector = getForDatabase;\n    proto.isLeader = isLeader;\n    proto.waitForLeadership = waitForLeadership;\n  }\n};\nexport var RxDBLeaderElectionPlugin = {\n  name: 'leader-election',\n  rxdb,\n  prototypes,\n  hooks: {\n    preDestroyRxDatabase: {\n      after: onDestroy\n    }\n  }\n};\n//# sourceMappingURL=index.js.map","import { flatClone } from \"../../plugins/utils/index.js\";\nimport { getComposedPrimaryKeyOfDocumentData } from \"../../rx-schema-helper.js\";\n\n// does nothing\nexport var DEFAULT_MODIFIER = d => Promise.resolve(d);\nexport function swapDefaultDeletedTodeletedField(deletedField, doc) {\n  if (deletedField === '_deleted') {\n    return doc;\n  } else {\n    doc = flatClone(doc);\n    var isDeleted = !!doc._deleted;\n    doc[deletedField] = isDeleted;\n    delete doc._deleted;\n    return doc;\n  }\n}\n\n/**\n * Must be run over all plain document data\n * that was pulled from the remote.\n * Used to fill up fields or modify the deleted field etc.\n */\nexport function handlePulledDocuments(collection, deletedField, docs) {\n  return docs.map(doc => {\n    var useDoc = flatClone(doc);\n\n    /**\n     * Swap out the deleted field\n     */\n    if (deletedField !== '_deleted') {\n      var isDeleted = !!useDoc[deletedField];\n      useDoc._deleted = isDeleted;\n      delete useDoc[deletedField];\n    } else {\n      // ensure we have a boolean.\n      useDoc._deleted = !!useDoc._deleted;\n    }\n\n    /**\n     * Fill up composed primary\n     */\n    var primaryPath = collection.schema.primaryPath;\n    useDoc[primaryPath] = getComposedPrimaryKeyOfDocumentData(collection.schema.jsonSchema, useDoc);\n    return useDoc;\n  });\n}\n\n/**\n * Like normal promiseWait()\n * but will skip the wait time if the online-state changes.\n */\nexport function awaitRetry(collection, retryTime) {\n  if (typeof window === 'undefined' || typeof window !== 'object' || typeof window.addEventListener === 'undefined' || navigator.onLine) {\n    return collection.promiseWait(retryTime);\n  }\n  var listener;\n  var onlineAgain = new Promise(res => {\n    listener = () => {\n      window.removeEventListener('online', listener);\n      res();\n    };\n    window.addEventListener('online', listener);\n  });\n  return Promise.race([onlineAgain, collection.promiseWait(retryTime)]).then(() => {\n    window.removeEventListener('online', listener);\n  });\n}\n//# sourceMappingURL=replication-helper.js.map","/**\n * This plugin contains the primitives to create\n * a RxDB client-server replication.\n * It is used in the other replication plugins\n * but also can be used as standalone with a custom replication handler.\n */\n\nimport { BehaviorSubject, combineLatest, filter, mergeMap, Subject } from 'rxjs';\nimport { RxDBLeaderElectionPlugin } from \"../leader-election/index.js\";\nimport { arrayFilterNotEmpty, ensureNotFalsy, errorToPlainJson, flatClone, getFromMapOrCreate, PROMISE_RESOLVE_FALSE, PROMISE_RESOLVE_TRUE, toArray } from \"../../plugins/utils/index.js\";\nimport { awaitRxStorageReplicationFirstInSync, awaitRxStorageReplicationInSync, cancelRxStorageReplication, getRxReplicationMetaInstanceSchema, replicateRxStorageInstance } from \"../../replication-protocol/index.js\";\nimport { newRxError } from \"../../rx-error.js\";\nimport { awaitRetry, DEFAULT_MODIFIER, swapDefaultDeletedTodeletedField, handlePulledDocuments } from \"./replication-helper.js\";\nimport { addConnectedStorageToCollection } from \"../../rx-database-internal-store.js\";\nimport { addRxPlugin } from \"../../plugin.js\";\nimport { hasEncryption } from \"../../rx-storage-helper.js\";\nimport { overwritable } from \"../../overwritable.js\";\nimport { runAsyncPluginHooks } from \"../../hooks.js\";\nexport var REPLICATION_STATE_BY_COLLECTION = new WeakMap();\nexport var RxReplicationState = /*#__PURE__*/function () {\n  function RxReplicationState(\n  /**\n   * The identifier, used to flag revisions\n   * and to identify which documents state came from the remote.\n   */\n  replicationIdentifier, collection, deletedField, pull, push, live, retryTime, autoStart) {\n    this.subs = [];\n    this.subjects = {\n      received: new Subject(),\n      // all documents that are received from the endpoint\n      sent: new Subject(),\n      // all documents that are send to the endpoint\n      error: new Subject(),\n      // all errors that are received from the endpoint, emits new Error() objects\n      canceled: new BehaviorSubject(false),\n      // true when the replication was canceled\n      active: new BehaviorSubject(false) // true when something is running, false when not\n    };\n    this.received$ = this.subjects.received.asObservable();\n    this.sent$ = this.subjects.sent.asObservable();\n    this.error$ = this.subjects.error.asObservable();\n    this.canceled$ = this.subjects.canceled.asObservable();\n    this.active$ = this.subjects.active.asObservable();\n    this.callOnStart = undefined;\n    this.remoteEvents$ = new Subject();\n    this.replicationIdentifier = replicationIdentifier;\n    this.collection = collection;\n    this.deletedField = deletedField;\n    this.pull = pull;\n    this.push = push;\n    this.live = live;\n    this.retryTime = retryTime;\n    this.autoStart = autoStart;\n    var replicationStates = getFromMapOrCreate(REPLICATION_STATE_BY_COLLECTION, collection, () => []);\n    replicationStates.push(this);\n\n    // stop the replication when the collection gets destroyed\n    this.collection.onDestroy.push(() => this.cancel());\n\n    // create getters for the observables\n    Object.keys(this.subjects).forEach(key => {\n      Object.defineProperty(this, key + '$', {\n        get: function () {\n          return this.subjects[key].asObservable();\n        }\n      });\n    });\n    var startPromise = new Promise(res => {\n      this.callOnStart = res;\n    });\n    this.startPromise = startPromise;\n  }\n  var _proto = RxReplicationState.prototype;\n  _proto.start = async function start() {\n    if (this.isStopped()) {\n      return;\n    }\n\n    // fill in defaults for pull & push\n    var pullModifier = this.pull && this.pull.modifier ? this.pull.modifier : DEFAULT_MODIFIER;\n    var pushModifier = this.push && this.push.modifier ? this.push.modifier : DEFAULT_MODIFIER;\n    var database = this.collection.database;\n    var metaInstanceCollectionName = 'rx-replication-meta-' + (await database.hashFunction([this.collection.name, this.replicationIdentifier].join('-')));\n    var metaInstanceSchema = getRxReplicationMetaInstanceSchema(this.collection.schema.jsonSchema, hasEncryption(this.collection.schema.jsonSchema));\n    var [metaInstance] = await Promise.all([this.collection.database.storage.createStorageInstance({\n      databaseName: database.name,\n      collectionName: metaInstanceCollectionName,\n      databaseInstanceToken: database.token,\n      multiInstance: database.multiInstance,\n      // TODO is this always false?\n      options: {},\n      schema: metaInstanceSchema,\n      password: database.password,\n      devMode: overwritable.isDevMode()\n    }), addConnectedStorageToCollection(this.collection, metaInstanceCollectionName, metaInstanceSchema)]);\n    this.metaInstance = metaInstance;\n    this.internalReplicationState = replicateRxStorageInstance({\n      pushBatchSize: this.push && this.push.batchSize ? this.push.batchSize : 100,\n      pullBatchSize: this.pull && this.pull.batchSize ? this.pull.batchSize : 100,\n      initialCheckpoint: {\n        upstream: this.push ? this.push.initialCheckpoint : undefined,\n        downstream: this.pull ? this.pull.initialCheckpoint : undefined\n      },\n      forkInstance: this.collection.storageInstance,\n      metaInstance: this.metaInstance,\n      hashFunction: database.hashFunction,\n      identifier: 'rxdbreplication' + this.replicationIdentifier,\n      conflictHandler: this.collection.conflictHandler,\n      replicationHandler: {\n        masterChangeStream$: this.remoteEvents$.asObservable().pipe(filter(_v => !!this.pull), mergeMap(async ev => {\n          if (ev === 'RESYNC') {\n            return ev;\n          }\n          var useEv = flatClone(ev);\n          useEv.documents = handlePulledDocuments(this.collection, this.deletedField, useEv.documents);\n          useEv.documents = await Promise.all(useEv.documents.map(d => pullModifier(d)));\n          return useEv;\n        })),\n        masterChangesSince: async (checkpoint, batchSize) => {\n          if (!this.pull) {\n            return {\n              checkpoint: null,\n              documents: []\n            };\n          }\n          /**\n           * Retries must be done here in the replication primitives plugin,\n           * because the replication protocol itself has no\n           * error handling.\n           */\n          var done = false;\n          var result = {};\n          while (!done && !this.isStopped()) {\n            try {\n              result = await this.pull.handler(checkpoint, batchSize);\n              done = true;\n            } catch (err) {\n              var emitError = newRxError('RC_PULL', {\n                checkpoint,\n                errors: toArray(err).map(er => errorToPlainJson(er)),\n                direction: 'pull'\n              });\n              this.subjects.error.next(emitError);\n              await awaitRetry(this.collection, ensureNotFalsy(this.retryTime));\n            }\n          }\n          if (this.isStopped()) {\n            return {\n              checkpoint: null,\n              documents: []\n            };\n          }\n          var useResult = flatClone(result);\n          useResult.documents = handlePulledDocuments(this.collection, this.deletedField, useResult.documents);\n          useResult.documents = await Promise.all(useResult.documents.map(d => pullModifier(d)));\n          return useResult;\n        },\n        masterWrite: async rows => {\n          if (!this.push) {\n            return [];\n          }\n          var done = false;\n          await runAsyncPluginHooks('preReplicationMasterWrite', {\n            rows,\n            collection: this.collection\n          });\n          var useRowsOrNull = await Promise.all(rows.map(async row => {\n            row.newDocumentState = await pushModifier(row.newDocumentState);\n            if (row.newDocumentState === null) {\n              return null;\n            }\n            if (row.assumedMasterState) {\n              row.assumedMasterState = await pushModifier(row.assumedMasterState);\n            }\n            if (this.deletedField !== '_deleted') {\n              row.newDocumentState = swapDefaultDeletedTodeletedField(this.deletedField, row.newDocumentState);\n              if (row.assumedMasterState) {\n                row.assumedMasterState = swapDefaultDeletedTodeletedField(this.deletedField, row.assumedMasterState);\n              }\n            }\n            return row;\n          }));\n          var useRows = useRowsOrNull.filter(arrayFilterNotEmpty);\n          var result = null;\n\n          // In case all the rows have been filtered and nothing has to be sent\n          if (useRows.length === 0) {\n            done = true;\n            result = [];\n          }\n          while (!done && !this.isStopped()) {\n            try {\n              result = await this.push.handler(useRows);\n              /**\n               * It is a common problem that people have wrongly behaving backend\n               * that do not return an array with the conflicts on push requests.\n               * So we run this check here to make it easier to debug.\n               * @link https://github.com/pubkey/rxdb/issues/4103\n               */\n              if (!Array.isArray(result)) {\n                throw newRxError('RC_PUSH_NO_AR', {\n                  pushRows: rows,\n                  direction: 'push',\n                  args: {\n                    result\n                  }\n                });\n              }\n              done = true;\n            } catch (err) {\n              var emitError = err.rxdb ? err : newRxError('RC_PUSH', {\n                pushRows: rows,\n                errors: toArray(err).map(er => errorToPlainJson(er)),\n                direction: 'push'\n              });\n              this.subjects.error.next(emitError);\n              await awaitRetry(this.collection, ensureNotFalsy(this.retryTime));\n            }\n          }\n          if (this.isStopped()) {\n            return [];\n          }\n          await runAsyncPluginHooks('preReplicationMasterWriteDocumentsHandle', {\n            result,\n            collection: this.collection\n          });\n          var conflicts = handlePulledDocuments(this.collection, this.deletedField, ensureNotFalsy(result));\n          return conflicts;\n        }\n      }\n    });\n    this.subs.push(this.internalReplicationState.events.error.subscribe(err => {\n      this.subjects.error.next(err);\n    }), this.internalReplicationState.events.processed.down.subscribe(row => this.subjects.received.next(row.document)), this.internalReplicationState.events.processed.up.subscribe(writeToMasterRow => {\n      this.subjects.sent.next(writeToMasterRow.newDocumentState);\n    }), combineLatest([this.internalReplicationState.events.active.down, this.internalReplicationState.events.active.up]).subscribe(([down, up]) => {\n      var isActive = down || up;\n      this.subjects.active.next(isActive);\n    }));\n    if (this.pull && this.pull.stream$ && this.live) {\n      this.subs.push(this.pull.stream$.subscribe({\n        next: ev => {\n          this.remoteEvents$.next(ev);\n        },\n        error: err => {\n          this.subjects.error.next(err);\n        }\n      }));\n    }\n\n    /**\n     * Non-live replications run once\n     * and then automatically get canceled.\n     */\n    if (!this.live) {\n      await awaitRxStorageReplicationFirstInSync(this.internalReplicationState);\n      await awaitRxStorageReplicationInSync(this.internalReplicationState);\n      await this.cancel();\n    }\n    this.callOnStart();\n  };\n  _proto.isStopped = function isStopped() {\n    if (this.subjects.canceled.getValue()) {\n      return true;\n    }\n    return false;\n  };\n  _proto.awaitInitialReplication = async function awaitInitialReplication() {\n    await this.startPromise;\n    return awaitRxStorageReplicationFirstInSync(ensureNotFalsy(this.internalReplicationState));\n  }\n\n  /**\n   * Returns a promise that resolves when:\n   * - All local data is replicated with the remote\n   * - No replication cycle is running or in retry-state\n   *\n   * WARNING: USing this function directly in a multi-tab browser application\n   * is dangerous because only the leading instance will ever be replicated,\n   * so this promise will not resolve in the other tabs.\n   * For multi-tab support you should set and observe a flag in a local document.\n   */;\n  _proto.awaitInSync = async function awaitInSync() {\n    await this.startPromise;\n    await awaitRxStorageReplicationFirstInSync(ensureNotFalsy(this.internalReplicationState));\n\n    /**\n     * Often awaitInSync() is called directly after a document write,\n     * like in the unit tests.\n     * So we first have to await the idleness to ensure that all RxChangeEvents\n     * are processed already.\n     */\n    await this.collection.database.requestIdlePromise();\n    await awaitRxStorageReplicationInSync(ensureNotFalsy(this.internalReplicationState));\n    return true;\n  };\n  _proto.reSync = function reSync() {\n    this.remoteEvents$.next('RESYNC');\n  };\n  _proto.emitEvent = function emitEvent(ev) {\n    this.remoteEvents$.next(ev);\n  };\n  _proto.cancel = async function cancel() {\n    if (this.isStopped()) {\n      return PROMISE_RESOLVE_FALSE;\n    }\n    var promises = [];\n    if (this.internalReplicationState) {\n      await cancelRxStorageReplication(this.internalReplicationState);\n    }\n    if (this.metaInstance) {\n      promises.push(ensureNotFalsy(this.internalReplicationState).checkpointQueue.then(() => ensureNotFalsy(this.metaInstance).close()));\n    }\n    this.subs.forEach(sub => sub.unsubscribe());\n    this.subjects.canceled.next(true);\n    this.subjects.active.complete();\n    this.subjects.canceled.complete();\n    this.subjects.error.complete();\n    this.subjects.received.complete();\n    this.subjects.sent.complete();\n    return Promise.all(promises);\n  };\n  return RxReplicationState;\n}();\nexport function replicateRxCollection({\n  replicationIdentifier,\n  collection,\n  deletedField = '_deleted',\n  pull,\n  push,\n  live = true,\n  retryTime = 1000 * 5,\n  waitForLeadership = true,\n  autoStart = true\n}) {\n  addRxPlugin(RxDBLeaderElectionPlugin);\n\n  /**\n   * It is a common error to forget to add these config\n   * objects. So we check here because it makes no sense\n   * to start a replication with neither push nor pull.\n   */\n  if (!pull && !push) {\n    throw newRxError('UT3', {\n      collection: collection.name,\n      args: {\n        replicationIdentifier\n      }\n    });\n  }\n  var replicationState = new RxReplicationState(replicationIdentifier, collection, deletedField, pull, push, live, retryTime, autoStart);\n  startReplicationOnLeaderShip(waitForLeadership, replicationState);\n  return replicationState;\n}\nexport function startReplicationOnLeaderShip(waitForLeadership, replicationState) {\n  /**\n   * Always await this Promise to ensure that the current instance\n   * is leader when waitForLeadership=true\n   */\n  var mustWaitForLeadership = waitForLeadership && replicationState.collection.database.multiInstance;\n  var waitTillRun = mustWaitForLeadership ? replicationState.collection.database.waitForLeadership() : PROMISE_RESOLVE_TRUE;\n  return waitTillRun.then(() => {\n    if (replicationState.isStopped()) {\n      return;\n    }\n    if (replicationState.autoStart) {\n      replicationState.start();\n    }\n  });\n}\n//# sourceMappingURL=index.js.map","import { filter, firstValueFrom, map } from 'rxjs';\n\n/**\n * To deterministically define which peer is master and\n * which peer is fork, we compare the storage tokens.\n * But we have to hash them before, to ensure that\n * a storageToken like 'aaaaaa' is not always the master\n * for all peers.\n */\nexport async function isMasterInWebRTCReplication(hashFunction, ownStorageToken, otherStorageToken) {\n  var isMaster = (await hashFunction([ownStorageToken, otherStorageToken].join('|'))) > (await hashFunction([otherStorageToken, ownStorageToken].join('|')));\n  return isMaster;\n}\n\n/**\n * Send a message to the peer and await the answer.\n * @throws with an EmptyErrorImpl if the peer connection\n * was closed before an answer was received.\n */\nexport function sendMessageAndAwaitAnswer(handler, peer, message) {\n  var requestId = message.id;\n  var answerPromise = firstValueFrom(handler.response$.pipe(filter(d => d.peer === peer), filter(d => d.response.id === requestId), map(d => d.response)));\n  handler.send(peer, message);\n  return answerPromise;\n}\n//# sourceMappingURL=webrtc-helper.js.map","import { BehaviorSubject, filter, firstValueFrom, map, Subject } from 'rxjs';\nimport { addRxPlugin } from \"../../plugin.js\";\nimport { rxStorageInstanceToReplicationHandler } from \"../../replication-protocol/index.js\";\nimport { ensureNotFalsy, getFromMapOrThrow, randomCouchString } from \"../../plugins/utils/index.js\";\nimport { RxDBLeaderElectionPlugin } from \"../leader-election/index.js\";\nimport { replicateRxCollection } from \"../replication/index.js\";\nimport { isMasterInWebRTCReplication, sendMessageAndAwaitAnswer } from \"./webrtc-helper.js\";\nimport { newRxError } from \"../../rx-error.js\";\nexport async function replicateWebRTC(options) {\n  var collection = options.collection;\n  addRxPlugin(RxDBLeaderElectionPlugin);\n\n  // fill defaults\n  if (options.pull) {\n    if (!options.pull.batchSize) {\n      options.pull.batchSize = 20;\n    }\n  }\n  if (options.push) {\n    if (!options.push.batchSize) {\n      options.push.batchSize = 20;\n    }\n  }\n  if (collection.database.multiInstance) {\n    await collection.database.waitForLeadership();\n  }\n\n  // used to easier debug stuff\n  var requestCounter = 0;\n  var requestFlag = randomCouchString(10);\n  function getRequestId() {\n    var count = requestCounter++;\n    return collection.database.token + '|' + requestFlag + '|' + count;\n  }\n  var storageToken = await collection.database.storageToken;\n  var pool = new RxWebRTCReplicationPool(collection, options, await options.connectionHandlerCreator(options));\n  pool.subs.push(pool.connectionHandler.error$.subscribe(err => pool.error$.next(err)), pool.connectionHandler.disconnect$.subscribe(peer => pool.removePeer(peer)));\n\n  /**\n   * Answer if someone requests our storage token\n   */\n  pool.subs.push(pool.connectionHandler.message$.pipe(filter(data => data.message.method === 'token')).subscribe(data => {\n    pool.connectionHandler.send(data.peer, {\n      id: data.message.id,\n      result: storageToken\n    });\n  }));\n  var connectSub = pool.connectionHandler.connect$.pipe(filter(() => !pool.canceled)).subscribe(async peer => {\n    if (options.isPeerValid) {\n      var isValid = await options.isPeerValid(peer);\n      if (!isValid) {\n        return;\n      }\n    }\n    var peerToken;\n    try {\n      var tokenResponse = await sendMessageAndAwaitAnswer(pool.connectionHandler, peer, {\n        id: getRequestId(),\n        method: 'token',\n        params: []\n      });\n      peerToken = tokenResponse.result;\n    } catch (error) {\n      /**\n       * If could not get the tokenResponse,\n       * just ignore that peer.\n       */\n      pool.error$.next(newRxError('RC_WEBRTC_PEER', {\n        error\n      }));\n      return;\n    }\n    var isMaster = await isMasterInWebRTCReplication(collection.database.hashFunction, storageToken, peerToken);\n    var replicationState;\n    if (isMaster) {\n      var masterHandler = pool.masterReplicationHandler;\n      var masterChangeStreamSub = masterHandler.masterChangeStream$.subscribe(ev => {\n        var streamResponse = {\n          id: 'masterChangeStream$',\n          result: ev\n        };\n        pool.connectionHandler.send(peer, streamResponse);\n      });\n\n      // clean up the subscription\n      pool.subs.push(masterChangeStreamSub, pool.connectionHandler.disconnect$.pipe(filter(p => p === peer)).subscribe(() => masterChangeStreamSub.unsubscribe()));\n      var messageSub = pool.connectionHandler.message$.pipe(filter(data => data.peer === peer), filter(data => data.message.method !== 'token')).subscribe(async data => {\n        var {\n          peer: msgPeer,\n          message\n        } = data;\n        /**\n         * If it is not a function,\n         * it means that the client requested the masterChangeStream$\n         */\n        var method = masterHandler[message.method].bind(masterHandler);\n        var result = await method(...message.params);\n        var response = {\n          id: message.id,\n          result\n        };\n        pool.connectionHandler.send(msgPeer, response);\n      });\n      pool.subs.push(messageSub);\n    } else {\n      replicationState = replicateRxCollection({\n        replicationIdentifier: [collection.name, options.topic, peerToken].join('||'),\n        collection: collection,\n        autoStart: true,\n        deletedField: '_deleted',\n        live: true,\n        retryTime: options.retryTime,\n        waitForLeadership: false,\n        pull: options.pull ? Object.assign({}, options.pull, {\n          async handler(lastPulledCheckpoint) {\n            var answer = await sendMessageAndAwaitAnswer(pool.connectionHandler, peer, {\n              method: 'masterChangesSince',\n              params: [lastPulledCheckpoint, ensureNotFalsy(options.pull).batchSize],\n              id: getRequestId()\n            });\n            return answer.result;\n          },\n          stream$: pool.connectionHandler.response$.pipe(filter(m => m.response.id === 'masterChangeStream$'), map(m => m.response.result))\n        }) : undefined,\n        push: options.push ? Object.assign({}, options.push, {\n          async handler(docs) {\n            var answer = await sendMessageAndAwaitAnswer(pool.connectionHandler, peer, {\n              method: 'masterWrite',\n              params: [docs],\n              id: getRequestId()\n            });\n            return answer.result;\n          }\n        }) : undefined\n      });\n    }\n    pool.addPeer(peer, replicationState);\n  });\n  pool.subs.push(connectSub);\n  return pool;\n}\n\n/**\n * Because the WebRTC replication runs between many instances,\n * we use a Pool instead of returning a single replication state.\n */\nexport var RxWebRTCReplicationPool = /*#__PURE__*/function () {\n  function RxWebRTCReplicationPool(collection, options, connectionHandler) {\n    this.peerStates$ = new BehaviorSubject(new Map());\n    this.canceled = false;\n    this.subs = [];\n    this.error$ = new Subject();\n    this.collection = collection;\n    this.options = options;\n    this.connectionHandler = connectionHandler;\n    this.collection.onDestroy.push(() => this.cancel());\n    this.masterReplicationHandler = rxStorageInstanceToReplicationHandler(collection.storageInstance, collection.conflictHandler, collection.database.token);\n  }\n  var _proto = RxWebRTCReplicationPool.prototype;\n  _proto.addPeer = function addPeer(peer,\n  // only if isMaster=false it has a replicationState\n  replicationState) {\n    var peerState = {\n      peer,\n      replicationState,\n      subs: []\n    };\n    this.peerStates$.next(this.peerStates$.getValue().set(peer, peerState));\n    if (replicationState) {\n      peerState.subs.push(replicationState.error$.subscribe(ev => this.error$.next(ev)));\n    }\n  };\n  _proto.removePeer = function removePeer(peer) {\n    var peerState = getFromMapOrThrow(this.peerStates$.getValue(), peer);\n    this.peerStates$.getValue().delete(peer);\n    this.peerStates$.next(this.peerStates$.getValue());\n    peerState.subs.forEach(sub => sub.unsubscribe());\n    if (peerState.replicationState) {\n      peerState.replicationState.cancel();\n    }\n  }\n\n  // often used in unit tests\n  ;\n  _proto.awaitFirstPeer = function awaitFirstPeer() {\n    return firstValueFrom(this.peerStates$.pipe(filter(peerStates => peerStates.size > 0)));\n  };\n  _proto.cancel = async function cancel() {\n    if (this.canceled) {\n      return;\n    }\n    this.canceled = true;\n    this.subs.forEach(sub => sub.unsubscribe());\n    Array.from(this.peerStates$.getValue().keys()).forEach(peer => {\n      this.removePeer(peer);\n    });\n    await this.connectionHandler.destroy();\n  };\n  return RxWebRTCReplicationPool;\n}();\nexport * from \"./webrtc-helper.js\";\nexport * from \"./signaling-server.js\";\nexport * from \"./webrtc-types.js\";\n// export * from './connection-handler-webtorrent';\n// export * from './connection-handler-p2pcf';\nexport * from \"./connection-handler-simple-peer.js\";\n//# sourceMappingURL=index.js.map","import { Subject } from 'rxjs';\nimport { ensureNotFalsy, getFromMapOrThrow, PROMISE_RESOLVE_VOID, promiseWait, randomCouchString } from \"../../plugins/utils/index.js\";\nimport { default as Peer } from 'simple-peer';\nimport { newRxError } from \"../../rx-error.js\";\nfunction sendMessage(ws, msg) {\n  ws.send(JSON.stringify(msg));\n}\nvar DEFAULT_SIGNALING_SERVER_HOSTNAME = 'signaling.rxdb.info';\nexport var DEFAULT_SIGNALING_SERVER = 'wss://' + DEFAULT_SIGNALING_SERVER_HOSTNAME + '/';\nvar defaultServerWarningShown = false;\nexport var SIMPLE_PEER_PING_INTERVAL = 1000 * 60 * 2;\n\n/**\n * Returns a connection handler that uses simple-peer and the signaling server.\n */\nexport function getConnectionHandlerSimplePeer({\n  signalingServerUrl,\n  wrtc,\n  webSocketConstructor\n}) {\n  signalingServerUrl = signalingServerUrl ? signalingServerUrl : DEFAULT_SIGNALING_SERVER;\n  webSocketConstructor = webSocketConstructor ? webSocketConstructor : WebSocket;\n  if (signalingServerUrl.includes(DEFAULT_SIGNALING_SERVER_HOSTNAME) && !defaultServerWarningShown) {\n    defaultServerWarningShown = true;\n    console.warn(['RxDB Warning: You are using the RxDB WebRTC replication plugin', 'but you did not specify your own signaling server url.', 'By default it will use a signaling server provided by RxDB at ' + DEFAULT_SIGNALING_SERVER, 'This server is made for demonstration purposes and tryouts. It is not reliable and might be offline at any time.', 'In production you must always use your own signaling server instead.', 'Learn how to run your own server at https://rxdb.info/replication-webrtc.html', 'Also leave a ⭐ at the RxDB github repo 🙏 https://github.com/pubkey/rxdb 🙏'].join(' '));\n  }\n  var creator = async options => {\n    var connect$ = new Subject();\n    var disconnect$ = new Subject();\n    var message$ = new Subject();\n    var response$ = new Subject();\n    var error$ = new Subject();\n    var peers = new Map();\n    var closed = false;\n    var ownPeerId;\n    var socket = undefined;\n    createSocket();\n\n    /**\n     * Send ping signals to the server.\n     */\n    (async () => {\n      while (true) {\n        await promiseWait(SIMPLE_PEER_PING_INTERVAL / 2);\n        if (closed) {\n          break;\n        }\n        if (socket) {\n          sendMessage(socket, {\n            type: 'ping'\n          });\n        }\n      }\n    })();\n\n    /**\n     * @recursive calls it self on socket disconnects\n     * so that when the user goes offline and online\n     * again, it will recreate the WebSocket connection.\n     */\n    function createSocket() {\n      if (closed) {\n        return;\n      }\n      socket = new webSocketConstructor(signalingServerUrl);\n      socket.onclose = () => createSocket();\n      socket.onopen = () => {\n        ensureNotFalsy(socket).onmessage = msgEvent => {\n          var msg = JSON.parse(msgEvent.data);\n          switch (msg.type) {\n            case 'init':\n              ownPeerId = msg.yourPeerId;\n              sendMessage(ensureNotFalsy(socket), {\n                type: 'join',\n                room: options.topic\n              });\n              break;\n            case 'joined':\n              /**\n               * PeerId is created by the signaling server\n               * to prevent spoofing it.\n               */\n              var createPeerConnection = function (remotePeerId) {\n                var disconnected = false;\n                var newSimplePeer = new Peer({\n                  initiator: remotePeerId > ownPeerId,\n                  wrtc,\n                  trickle: true\n                });\n                newSimplePeer.id = randomCouchString(10);\n                peers.set(remotePeerId, newSimplePeer);\n                newSimplePeer.on('signal', signal => {\n                  sendMessage(ensureNotFalsy(socket), {\n                    type: 'signal',\n                    senderPeerId: ownPeerId,\n                    receiverPeerId: remotePeerId,\n                    room: options.topic,\n                    data: signal\n                  });\n                });\n                newSimplePeer.on('data', messageOrResponse => {\n                  messageOrResponse = JSON.parse(messageOrResponse.toString());\n                  if (messageOrResponse.result) {\n                    response$.next({\n                      peer: newSimplePeer,\n                      response: messageOrResponse\n                    });\n                  } else {\n                    message$.next({\n                      peer: newSimplePeer,\n                      message: messageOrResponse\n                    });\n                  }\n                });\n                newSimplePeer.on('error', error => {\n                  error$.next(newRxError('RC_WEBRTC_PEER', {\n                    error\n                  }));\n                  newSimplePeer.destroy();\n                  if (!disconnected) {\n                    disconnected = true;\n                    disconnect$.next(newSimplePeer);\n                  }\n                });\n                newSimplePeer.on('connect', () => {\n                  connect$.next(newSimplePeer);\n                });\n                newSimplePeer.on('close', () => {\n                  if (!disconnected) {\n                    disconnected = true;\n                    disconnect$.next(newSimplePeer);\n                  }\n                  createPeerConnection(remotePeerId);\n                });\n              };\n              msg.otherPeerIds.forEach(remotePeerId => {\n                if (remotePeerId === ownPeerId || peers.has(remotePeerId)) {\n                  return;\n                } else {\n                  createPeerConnection(remotePeerId);\n                }\n              });\n              break;\n            case 'signal':\n              var peer = getFromMapOrThrow(peers, msg.senderPeerId);\n              peer.signal(msg.data);\n              break;\n          }\n        };\n      };\n    }\n    ;\n    var handler = {\n      error$,\n      connect$,\n      disconnect$,\n      message$,\n      response$,\n      async send(peer, message) {\n        await peer.send(JSON.stringify(message));\n      },\n      destroy() {\n        closed = true;\n        ensureNotFalsy(socket).close();\n        error$.complete();\n        connect$.complete();\n        disconnect$.complete();\n        message$.complete();\n        response$.complete();\n        return PROMISE_RESOLVE_VOID;\n      }\n    };\n    return handler;\n  };\n  return creator;\n}\n//# sourceMappingURL=connection-handler-simple-peer.js.map","import { INDEX_MIN } from \"../../query-planner.js\";\nimport { getQueryMatcher, getSortComparator } from \"../../rx-query-helper.js\";\nimport { dexieReplaceIfStartsWithPipe, DEXIE_DOCS_TABLE_NAME, fromDexieToStorage } from \"./dexie-helper.js\";\nexport function mapKeyForKeyRange(k) {\n  if (k === INDEX_MIN) {\n    return -Infinity;\n  } else {\n    return k;\n  }\n}\nexport function getKeyRangeByQueryPlan(queryPlan, IDBKeyRange) {\n  if (!IDBKeyRange) {\n    if (typeof window === 'undefined') {\n      throw new Error('IDBKeyRange missing');\n    } else {\n      IDBKeyRange = window.IDBKeyRange;\n    }\n  }\n  var startKeys = queryPlan.startKeys.map(mapKeyForKeyRange);\n  var endKeys = queryPlan.endKeys.map(mapKeyForKeyRange);\n  var ret;\n  /**\n   * If index has only one field,\n   * we have to pass the keys directly, not the key arrays.\n   */\n  if (queryPlan.index.length === 1) {\n    var equalKeys = startKeys[0] === endKeys[0];\n    ret = IDBKeyRange.bound(startKeys[0], endKeys[0], equalKeys ? false : !queryPlan.inclusiveStart, equalKeys ? false : !queryPlan.inclusiveEnd);\n  } else {\n    ret = IDBKeyRange.bound(startKeys, endKeys, !queryPlan.inclusiveStart, !queryPlan.inclusiveEnd);\n  }\n  return ret;\n}\n\n/**\n * Runs mango queries over the Dexie.js database.\n */\nexport async function dexieQuery(instance, preparedQuery) {\n  var state = await instance.internals;\n  var query = preparedQuery.query;\n  var skip = query.skip ? query.skip : 0;\n  var limit = query.limit ? query.limit : Infinity;\n  var skipPlusLimit = skip + limit;\n  var queryPlan = preparedQuery.queryPlan;\n  var queryMatcher = false;\n  if (!queryPlan.selectorSatisfiedByIndex) {\n    queryMatcher = getQueryMatcher(instance.schema, preparedQuery.query);\n  }\n  var keyRange = getKeyRangeByQueryPlan(queryPlan, state.dexieDb._options.IDBKeyRange);\n  var queryPlanFields = queryPlan.index;\n  var rows = [];\n  await state.dexieDb.transaction('r', state.dexieTable, async dexieTx => {\n    /**\n     * TODO here we use the native IndexedDB transaction\n     * to get the cursor.\n     * Instead we should not leave Dexie.js API and find\n     * a way to create the cursor with Dexie.js.\n     */\n    var tx = dexieTx.idbtrans;\n\n    // const nativeIndexedDB = state.dexieDb.backendDB();\n    // const trans = nativeIndexedDB.transaction([DEXIE_DOCS_TABLE_NAME], 'readonly');\n\n    var store = tx.objectStore(DEXIE_DOCS_TABLE_NAME);\n    var index;\n    if (queryPlanFields.length === 1 && queryPlanFields[0] === instance.primaryPath) {\n      index = store;\n    } else {\n      var indexName;\n      if (queryPlanFields.length === 1) {\n        indexName = dexieReplaceIfStartsWithPipe(queryPlanFields[0]);\n      } else {\n        indexName = '[' + queryPlanFields.map(field => dexieReplaceIfStartsWithPipe(field)).join('+') + ']';\n      }\n      index = store.index(indexName);\n    }\n    var cursorReq = index.openCursor(keyRange);\n    await new Promise(res => {\n      cursorReq.onsuccess = function (e) {\n        var cursor = e.target.result;\n        if (cursor) {\n          // We have a record in cursor.value\n          var docData = fromDexieToStorage(cursor.value);\n          if (!docData._deleted && (!queryMatcher || queryMatcher(docData))) {\n            rows.push(docData);\n          }\n\n          /**\n           * If we do not have to manually sort\n           * and have enough documents,\n           * we can abort iterating over the cursor\n           * because we already have every relevant document.\n           */\n          if (queryPlan.sortFieldsSameAsIndexFields && rows.length === skipPlusLimit) {\n            res();\n          } else {\n            cursor.continue();\n          }\n        } else {\n          // Iteration complete\n          res();\n        }\n      };\n    });\n  });\n  if (!queryPlan.sortFieldsSameAsIndexFields) {\n    var sortComparator = getSortComparator(instance.schema, preparedQuery.query);\n    rows = rows.sort(sortComparator);\n  }\n\n  // apply skip and limit boundaries.\n  rows = rows.slice(skip, skipPlusLimit);\n\n  /**\n   * Comment this in for debugging to check all fields in the database.\n   */\n  // const docsInDb = await state.dexieTable.filter(queryMatcher).toArray();\n  // let documents = docsInDb\n  //     .map(docData => stripDexieKey(docData))\n  //     .sort(sortComparator);\n  // if (preparedQuery.skip) {\n  //     documents = documents.slice(preparedQuery.skip);\n  // }\n  // if (preparedQuery.limit && documents.length > preparedQuery.limit) {\n  //     documents = documents.slice(0, preparedQuery.limit);\n  // }\n\n  return {\n    documents: rows\n  };\n}\nexport async function dexieCount(instance, preparedQuery) {\n  var state = await instance.internals;\n  var queryPlan = preparedQuery.queryPlan;\n  var queryPlanFields = queryPlan.index;\n  var keyRange = getKeyRangeByQueryPlan(queryPlan, state.dexieDb._options.IDBKeyRange);\n  var count = -1;\n  await state.dexieDb.transaction('r', state.dexieTable, async dexieTx => {\n    var tx = dexieTx.idbtrans;\n    var store = tx.objectStore(DEXIE_DOCS_TABLE_NAME);\n    var index;\n    if (queryPlanFields.length === 1 && queryPlanFields[0] === instance.primaryPath) {\n      index = store;\n    } else {\n      var indexName;\n      if (queryPlanFields.length === 1) {\n        indexName = dexieReplaceIfStartsWithPipe(queryPlanFields[0]);\n      } else {\n        indexName = '[' + queryPlanFields.map(field => dexieReplaceIfStartsWithPipe(field)).join('+') + ']';\n      }\n      index = store.index(indexName);\n    }\n    var request = index.count(keyRange);\n    count = await new Promise((res, rej) => {\n      request.onsuccess = function () {\n        res(request.result);\n      };\n      request.onerror = err => rej(err);\n    });\n  });\n  return count;\n}\n//# sourceMappingURL=dexie-query.js.map","import { Subject } from 'rxjs';\nimport { now, PROMISE_RESOLVE_VOID, RX_META_LWT_MINIMUM, sortDocumentsByLastWriteTime, lastOfArray, ensureNotFalsy, appendToArray } from \"../utils/index.js\";\nimport { closeDexieDb, fromDexieToStorage, fromStorageToDexie, getDexieDbWithTables, getDocsInDb, RX_STORAGE_NAME_DEXIE } from \"./dexie-helper.js\";\nimport { dexieCount, dexieQuery } from \"./dexie-query.js\";\nimport { getPrimaryFieldOfPrimaryKey } from \"../../rx-schema-helper.js\";\nimport { categorizeBulkWriteRows } from \"../../rx-storage-helper.js\";\nimport { addRxStorageMultiInstanceSupport } from \"../../rx-storage-multiinstance.js\";\nimport { newRxError } from \"../../rx-error.js\";\nvar instanceId = now();\nexport var RxStorageInstanceDexie = /*#__PURE__*/function () {\n  function RxStorageInstanceDexie(storage, databaseName, collectionName, schema, internals, options, settings) {\n    this.changes$ = new Subject();\n    this.instanceId = instanceId++;\n    this.storage = storage;\n    this.databaseName = databaseName;\n    this.collectionName = collectionName;\n    this.schema = schema;\n    this.internals = internals;\n    this.options = options;\n    this.settings = settings;\n    this.primaryPath = getPrimaryFieldOfPrimaryKey(this.schema.primaryKey);\n  }\n  var _proto = RxStorageInstanceDexie.prototype;\n  _proto.bulkWrite = async function bulkWrite(documentWrites, context) {\n    ensureNotClosed(this);\n\n    /**\n     * Check some assumptions to ensure RxDB\n     * does not call the storage with an invalid write.\n     */\n    documentWrites.forEach(row => {\n      // ensure revision is set\n      if (!row.document._rev || row.previous && !row.previous._rev) {\n        throw newRxError('SNH', {\n          args: {\n            row\n          }\n        });\n      }\n    });\n    var state = await this.internals;\n    var ret = {\n      success: [],\n      error: []\n    };\n    var documentKeys = documentWrites.map(writeRow => writeRow.document[this.primaryPath]);\n    var categorized;\n    await state.dexieDb.transaction('rw', state.dexieTable, state.dexieDeletedTable, async () => {\n      var docsInDbMap = new Map();\n      var docsInDbWithInternals = await getDocsInDb(this.internals, documentKeys);\n      docsInDbWithInternals.forEach(docWithDexieInternals => {\n        var doc = docWithDexieInternals ? fromDexieToStorage(docWithDexieInternals) : docWithDexieInternals;\n        if (doc) {\n          docsInDbMap.set(doc[this.primaryPath], doc);\n        }\n        return doc;\n      });\n      categorized = categorizeBulkWriteRows(this, this.primaryPath, docsInDbMap, documentWrites, context);\n      ret.error = categorized.errors;\n\n      /**\n       * Batch up the database operations\n       * so we can later run them in bulk.\n       */\n      var bulkPutDocs = [];\n      var bulkRemoveDocs = [];\n      var bulkPutDeletedDocs = [];\n      var bulkRemoveDeletedDocs = [];\n      categorized.bulkInsertDocs.forEach(row => {\n        ret.success.push(row.document);\n        bulkPutDocs.push(row.document);\n      });\n      categorized.bulkUpdateDocs.forEach(row => {\n        var docId = row.document[this.primaryPath];\n        ret.success.push(row.document);\n        if (row.document._deleted && row.previous && !row.previous._deleted) {\n          // newly deleted\n          bulkRemoveDocs.push(docId);\n          bulkPutDeletedDocs.push(row.document);\n        } else if (row.document._deleted && row.previous && row.previous._deleted) {\n          // deleted was modified but is still deleted\n          bulkPutDeletedDocs.push(row.document);\n        } else if (!row.document._deleted) {\n          // non-deleted was changed\n          bulkPutDocs.push(row.document);\n        } else {\n          throw newRxError('SNH', {\n            args: {\n              row\n            }\n          });\n        }\n      });\n      await Promise.all([bulkPutDocs.length > 0 ? state.dexieTable.bulkPut(bulkPutDocs.map(d => fromStorageToDexie(d))) : PROMISE_RESOLVE_VOID, bulkRemoveDocs.length > 0 ? state.dexieTable.bulkDelete(bulkRemoveDocs) : PROMISE_RESOLVE_VOID, bulkPutDeletedDocs.length > 0 ? state.dexieDeletedTable.bulkPut(bulkPutDeletedDocs.map(d => fromStorageToDexie(d))) : PROMISE_RESOLVE_VOID, bulkRemoveDeletedDocs.length > 0 ? state.dexieDeletedTable.bulkDelete(bulkRemoveDeletedDocs) : PROMISE_RESOLVE_VOID]);\n    });\n    categorized = ensureNotFalsy(categorized);\n    if (categorized.eventBulk.events.length > 0) {\n      var lastState = ensureNotFalsy(categorized.newestRow).document;\n      categorized.eventBulk.checkpoint = {\n        id: lastState[this.primaryPath],\n        lwt: lastState._meta.lwt\n      };\n      categorized.eventBulk.endTime = now();\n      this.changes$.next(categorized.eventBulk);\n    }\n    return ret;\n  };\n  _proto.findDocumentsById = async function findDocumentsById(ids, deleted) {\n    ensureNotClosed(this);\n    var state = await this.internals;\n    var ret = [];\n    await state.dexieDb.transaction('r', state.dexieTable, state.dexieDeletedTable, async () => {\n      var docsInDb;\n      if (deleted) {\n        docsInDb = await getDocsInDb(this.internals, ids);\n      } else {\n        docsInDb = await state.dexieTable.bulkGet(ids);\n      }\n      ids.forEach((id, idx) => {\n        var documentInDb = docsInDb[idx];\n        if (documentInDb && (!documentInDb._deleted || deleted)) {\n          ret.push(fromDexieToStorage(documentInDb));\n        }\n      });\n    });\n    return ret;\n  };\n  _proto.query = function query(preparedQuery) {\n    ensureNotClosed(this);\n    return dexieQuery(this, preparedQuery);\n  };\n  _proto.count = async function count(preparedQuery) {\n    if (preparedQuery.queryPlan.selectorSatisfiedByIndex) {\n      var result = await dexieCount(this, preparedQuery);\n      return {\n        count: result,\n        mode: 'fast'\n      };\n    } else {\n      var _result = await dexieQuery(this, preparedQuery);\n      return {\n        count: _result.documents.length,\n        mode: 'slow'\n      };\n    }\n  };\n  _proto.info = async function info() {\n    var state = await this.internals;\n    var ret = {\n      totalCount: -1\n    };\n    await state.dexieDb.transaction('r', state.dexieTable, state.dexieDeletedTable, async _dexieTx => {\n      var [nonDeleted, deleted] = await Promise.all([state.dexieTable.count(), state.dexieDeletedTable.count()]);\n      ret.totalCount = nonDeleted + deleted;\n    });\n    return ret;\n  };\n  _proto.getChangedDocumentsSince = async function getChangedDocumentsSince(limit, checkpoint) {\n    ensureNotClosed(this);\n    var sinceLwt = checkpoint ? checkpoint.lwt : RX_META_LWT_MINIMUM;\n    var sinceId = checkpoint ? checkpoint.id : '';\n    var state = await this.internals;\n    var [changedDocsNormal, changedDocsDeleted] = await Promise.all([state.dexieTable, state.dexieDeletedTable].map(async table => {\n      var query = table.where('[_meta.lwt+' + this.primaryPath + ']').above([sinceLwt, sinceId]).limit(limit);\n      var changedDocuments = await query.toArray();\n      return changedDocuments.map(d => fromDexieToStorage(d));\n    }));\n    var changedDocs = changedDocsNormal.slice(0);\n    appendToArray(changedDocs, changedDocsDeleted);\n    changedDocs = sortDocumentsByLastWriteTime(this.primaryPath, changedDocs);\n    changedDocs = changedDocs.slice(0, limit);\n    var lastDoc = lastOfArray(changedDocs);\n    return {\n      documents: changedDocs,\n      checkpoint: lastDoc ? {\n        id: lastDoc[this.primaryPath],\n        lwt: lastDoc._meta.lwt\n      } : checkpoint ? checkpoint : {\n        id: '',\n        lwt: 0\n      }\n    };\n  };\n  _proto.changeStream = function changeStream() {\n    ensureNotClosed(this);\n    return this.changes$.asObservable();\n  };\n  _proto.cleanup = async function cleanup(minimumDeletedTime) {\n    ensureNotClosed(this);\n    var state = await this.internals;\n    await state.dexieDb.transaction('rw', state.dexieDeletedTable, async () => {\n      var maxDeletionTime = now() - minimumDeletedTime;\n      var toRemove = await state.dexieDeletedTable.where('_meta.lwt').below(maxDeletionTime).toArray();\n      var removeIds = toRemove.map(doc => doc[this.primaryPath]);\n      await state.dexieDeletedTable.bulkDelete(removeIds);\n    });\n\n    /**\n     * TODO instead of deleting all deleted docs at once,\n     * only clean up some of them and return false if there are more documents to clean up.\n     * This ensures that when many documents have to be purged,\n     * we do not block the more important tasks too long.\n     */\n    return true;\n  };\n  _proto.getAttachmentData = function getAttachmentData(_documentId, _attachmentId, _digest) {\n    ensureNotClosed(this);\n    throw new Error('Attachments are not implemented in the dexie RxStorage. Make a pull request.');\n  };\n  _proto.remove = async function remove() {\n    ensureNotClosed(this);\n    var state = await this.internals;\n    await Promise.all([state.dexieDeletedTable.clear(), state.dexieTable.clear()]);\n    return this.close();\n  };\n  _proto.close = function close() {\n    if (this.closed) {\n      return this.closed;\n    }\n    this.closed = (async () => {\n      this.changes$.complete();\n      await closeDexieDb(this.internals);\n    })();\n    return this.closed;\n  };\n  _proto.conflictResultionTasks = function conflictResultionTasks() {\n    return new Subject();\n  };\n  _proto.resolveConflictResultionTask = async function resolveConflictResultionTask(_taskSolution) {};\n  return RxStorageInstanceDexie;\n}();\nexport async function createDexieStorageInstance(storage, params, settings) {\n  var internals = getDexieDbWithTables(params.databaseName, params.collectionName, settings, params.schema);\n  var instance = new RxStorageInstanceDexie(storage, params.databaseName, params.collectionName, params.schema, internals, params.options, settings);\n  await addRxStorageMultiInstanceSupport(RX_STORAGE_NAME_DEXIE, params, instance);\n  return Promise.resolve(instance);\n}\nfunction ensureNotClosed(instance) {\n  if (instance.closed) {\n    throw new Error('RxStorageInstanceDexie is closed ' + instance.databaseName + '-' + instance.collectionName);\n  }\n}\n//# sourceMappingURL=rx-storage-instance-dexie.js.map","import { ensureNoBooleanIndex, RxStorageDexieStatics, RX_STORAGE_NAME_DEXIE } from \"./dexie-helper.js\";\nimport { createDexieStorageInstance } from \"./rx-storage-instance-dexie.js\";\nimport { ensureRxStorageInstanceParamsAreCorrect } from \"../../rx-storage-helper.js\";\nexport var RxStorageDexie = /*#__PURE__*/function () {\n  function RxStorageDexie(settings) {\n    this.name = RX_STORAGE_NAME_DEXIE;\n    this.statics = RxStorageDexieStatics;\n    this.settings = settings;\n  }\n  var _proto = RxStorageDexie.prototype;\n  _proto.createStorageInstance = function createStorageInstance(params) {\n    ensureRxStorageInstanceParamsAreCorrect(params);\n    ensureNoBooleanIndex(params.schema);\n    return createDexieStorageInstance(this, params, this.settings);\n  };\n  return RxStorageDexie;\n}();\nexport function getRxStorageDexie(settings = {}) {\n  var storage = new RxStorageDexie(settings);\n  return storage;\n}\n//# sourceMappingURL=rx-storage-dexie.js.map","import {\n    RxCollection,\n    createRxDatabase,\n    defaultHashSha256,\n    addRxPlugin,\n    randomCouchString,\n    RxDocument,\n    RxJsonSchema,\n    deepEqual,\n    RxConflictHandler,\n    RXDB_VERSION,\n    RxStorage\n} from 'rxdb/plugins/core';\nimport { replicateWebRTC, getConnectionHandlerSimplePeer, SimplePeer } from 'rxdb/plugins/replication-webrtc';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\n\nexport type TodoDocType = {\n    id: string;\n    name: string;\n    state: 'open' | 'done';\n    lastChange: number;\n}\nexport type RxTodoDocument = RxDocument<TodoDocType>;\n\n// set by webpack as global\ndeclare var mode: 'production' | 'development';\nconsole.log('mode: ' + mode);\n\nlet storage: RxStorage<any, any> = getRxStorageDexie();\n\nexport const databasePromise = (async () => {\n    // import dev-mode plugins\n    if (mode === 'development') {\n        await import('rxdb/plugins/dev-mode').then(\n            module => addRxPlugin(module.RxDBDevModePlugin)\n        );\n        await import('rxdb/plugins/validate-ajv').then(\n            module => {\n                storage = module.wrappedValidateAjvStorage({ storage });\n            }\n        );\n    }\n\n    // ensure roomId exists\n    const roomId = window.location.hash;\n    if (!roomId || roomId.length < 5) {\n        window.location.hash = 'room-' + randomCouchString(10);\n        window.location.reload();\n    }\n    const roomHash = await defaultHashSha256(roomId);\n    const database = await createRxDatabase<{\n        todos: RxCollection<TodoDocType, {}>\n    }>({\n        name: 'tpdp-' + RXDB_VERSION.replace(/\\./g, '-') + '-' + roomHash.substring(0, 10),\n        storage\n    });\n\n    // handle replication conflicts (keep the document with the newest timestamp)\n    const conflictHandler: RxConflictHandler<TodoDocType> = async (input) => {\n        if (deepEqual(\n            input.newDocumentState,\n            input.realMasterState\n        )) {\n            return { isEqual: true };\n        }\n        return {\n            isEqual: false,\n            documentData: input.newDocumentState.lastChange > input.realMasterState.lastChange\n                ? input.newDocumentState\n                : input.realMasterState\n        };\n    };\n    await database.addCollections({\n        todos: {\n            schema: {\n                version: 0,\n                primaryKey: 'id',\n                type: 'object',\n                properties: {\n                    id: {\n                        type: 'string',\n                        maxLength: 20\n                    },\n                    name: {\n                        type: 'string'\n                    },\n                    state: {\n                        type: 'string',\n                        enum: [\n                            'open',\n                            'done'\n                        ],\n                        maxLength: 10\n                    },\n                    lastChange: {\n                        type: 'number',\n                        minimum: 0,\n                        maximum: 2701307494132,\n                        multipleOf: 1\n                    }\n                },\n                required: ['id', 'name', 'state', 'lastChange'],\n                indexes: [\n                    'state',\n                    ['state', 'lastChange']\n                ]\n            } as RxJsonSchema<TodoDocType>,\n            conflictHandler\n        }\n    });\n    database.todos.preSave(d => {\n        d.lastChange = Date.now();\n        return d;\n    }, true);\n    await database.todos.bulkInsert(\n        [\n            'touch your 👃 with your 👅',\n            'solve rubik\\'s cube 🎲 blindfolded',\n            'invent new 🍔'\n        ].map((name, idx) => ({\n            id: 'todo-' + idx,\n            name,\n            lastChange: 0,\n            state: 'open'\n        }))\n    );\n    replicateWebRTC<TodoDocType, SimplePeer>({\n        collection: database.todos,\n        connectionHandlerCreator: getConnectionHandlerSimplePeer({}),\n        topic: roomHash.substring(0, 10),\n        pull: {},\n        push: {},\n    }).then(replicationState => {\n        replicationState.error$.subscribe((err: any) => {\n            console.log('replication error:');\n            console.dir(err);\n        });\n        replicationState.peerStates$.subscribe(s => {\n            console.log('new peer states:');\n            console.dir(s);\n        });\n    });\n    return database;\n})();\n","import {\n    ensureNotFalsy,\n    randomCouchString\n} from 'rxdb/plugins/core';\nimport {\n    RxTodoDocument,\n    databasePromise\n} from './database.js';\nimport './style.css';\n\n(async () => {\n    const database = await databasePromise;\n\n    // update url in description text\n    getById('copy-url').innerHTML = window.location.href;\n\n    // render reactive todo list\n    const $todoList = getById('todo-list');\n    database.todos.find({\n        sort: [\n            { state: 'desc' },\n            { lastChange: 'desc' }\n        ]\n    }).$.subscribe(todos => {\n        $todoList.innerHTML = '';\n        todos.forEach(todo => $todoList.append(getHtmlByTodo(todo)));\n    });\n\n    // event: add todo\n    const $insertInput = getById<HTMLInputElement>('insert-todo');\n    const addTodo = async () => {\n        if ($insertInput.value.length < 1) { return; }\n        await database.todos.insert({\n            id: randomCouchString(10),\n            name: $insertInput.value,\n            state: 'open',\n            lastChange: Date.now()\n        });\n        $insertInput.value = '';\n    };\n    $insertInput.onkeydown = async (event) => {\n        if (isEnterEvent(event)) { addTodo(); }\n    }\n    $insertInput.onblur = () => addTodo();\n\n    // event: clear completed\n    getById('clear-completed').onclick = () => database.todos.find({ selector: { state: 'done' } }).remove();\n})();\n\nfunction getById<T = HTMLElement>(id: string): T { return ensureNotFalsy(document.getElementById(id)) as any; }\nconst escapeForHTML = (s: string) => s.replace(/[&<]/g, c => c === '&' ? '&amp;' : '&lt;');\nconst isEnterEvent = (ev: KeyboardEvent) => ev.code === 'Enter' || ev.keyCode === 13;\nfunction getHtmlByTodo(todo: RxTodoDocument): HTMLLIElement {\n    const $liElement = document.createElement('li');\n    const $viewDiv = document.createElement('div');\n    const $checkbox = document.createElement('input');\n    const $label = document.createElement('label');\n    const $deleteButton = document.createElement('button');\n    $liElement.append($viewDiv);\n    $viewDiv.append($checkbox);\n    $viewDiv.append($label);\n    $viewDiv.append($deleteButton);\n\n    // event: toggle todo state\n    $checkbox.onclick = () => todo.incrementalPatch({ state: todo.state === 'done' ? 'open' : 'done' });\n    $checkbox.type = 'checkbox';\n    $checkbox.classList.add('toggle');\n\n    // event: change todo name\n    $label.contentEditable = 'true';\n    const updateName = async () => {\n        let newName = $label.innerText || $label.textContent as string;\n        newName = newName.replace(/<br>/g, '').replace(/\\&nbsp;/g, ' ').trim();\n        if (newName !== todo.name) {\n            await todo.incrementalPatch({ name: newName });\n        }\n    }\n    $label.onblur = () => updateName();\n    $label.onkeyup = async (ev) => {\n        if (isEnterEvent(ev)) {\n            updateName();\n        }\n    }\n    $label.innerHTML = escapeForHTML(todo.name);\n\n    // event: delete todo\n    $deleteButton.classList.add('destroy');\n    $deleteButton.onclick = () => todo.remove();\n\n    if (todo.state === 'done') {\n        $liElement.classList.add('completed');\n        $checkbox.checked = true;\n    }\n\n    return $liElement;\n}\n"],"names":["inProgress","dataWebpackPrefix","exports","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","arr","Arr","_byteLength","curByte","len","revLookup","charCodeAt","fromByteArray","uint8","length","extraBytes","parts","maxChunkLength","len2","push","encodeChunk","lookup","join","Uint8Array","Array","code","Error","indexOf","start","end","num","output","base64","ieee754","customInspectSymbol","Symbol","Buffer","SlowBuffer","alloc","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","Object","setPrototypeOf","prototype","arg","encodingOrOffset","TypeError","allocUnsafe","from","value","string","encoding","isEncoding","actual","write","slice","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","buffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","b","obj","isBuffer","checked","undefined","numberIsNaN","type","isArray","data","fromObject","toPrimitive","assertSize","size","array","toString","mustMatch","arguments","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","this","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","m","bidirectionalIndexOf","val","dir","arrayIndexOf","call","lastIndexOf","indexSize","arrLength","valLength","String","read","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","Math","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","proto","foo","e","typedArraySupport","console","error","defineProperty","enumerable","get","poolSize","fill","allocUnsafeSlow","_isBuffer","compare","a","x","y","concat","list","pos","set","swap16","swap32","swap64","toLocaleString","equals","inspect","max","replace","trim","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","BigInt","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","constructor","super","writable","configurable","name","stack","message","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","floor","ERR_BUFFER_OUT_OF_BOUNDS","input","msg","received","isInteger","abs","INVALID_BASE64_RE","Infinity","leadSurrogate","split","base64clean","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","formatArgs","args","useColors","namespace","module","humanize","diff","color","splice","index","lastC","match","save","namespaces","storage","setItem","removeItem","load","r","getItem","process","env","DEBUG","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","RegExp","$1","localStorage","localstorage","destroy","warned","warn","colors","log","debug","formatters","v","JSON","stringify","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","Date","ms","prev","coerce","unshift","format","formatter","selectColor","extend","init","delimiter","newDebug","toNamespace","regexp","substring","default","disable","names","map","skips","enable","test","keys","forEach","key","hash","assign","props","err","_","ErrClass","create","getPrototypeOf","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","isNaN","EventEmitter","once","emitter","Promise","resolve","reject","errorListener","removeListener","resolver","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","emit","w","count","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","addEventListener","wrapListener","removeEventListener","setMaxListeners","getMaxListeners","doError","er","context","listeners","addListener","prependListener","prependOnceListener","position","originalListener","shift","pop","spliceOne","off","removeAllListeners","rawListeners","eventNames","globalThis","wrtc","RTCPeerConnection","mozRTCPeerConnection","webkitRTCPeerConnection","RTCSessionDescription","mozRTCSessionDescription","webkitRTCSessionDescription","RTCIceCandidate","mozRTCIceCandidate","webkitRTCIceCandidate","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","s","NaN","rt","LN2","ctor","superCtor","super_","TempCtor","h","plural","msAbs","isPlural","round","options","exec","parseFloat","parse","long","fmtLong","fmtShort","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","binding","cwd","chdir","umask","promise","queueMicrotask","g","cb","then","catch","MAX_BYTES","MAX_UINT32","crypto","msCrypto","getRandomValues","generated","codes","createErrorType","NodeError","_Base","subClass","superClass","arg1","arg2","arg3","__proto__","oneOf","expected","thing","determiner","search","this_len","endsWith","objectKeys","Duplex","Readable","Writable","method","allowHalfOpen","readable","onend","_writableState","ended","onEndNT","highWaterMark","getBuffer","_readableState","destroyed","PassThrough","Transform","_transform","chunk","ReadableState","EElistenerCount","Stream","OurUint8Array","debugUtil","debuglog","StringDecoder","createReadableStreamAsyncIterator","BufferList","destroyImpl","getHighWaterMark","_require$codes","ERR_STREAM_PUSH_AFTER_EOF","ERR_METHOD_NOT_IMPLEMENTED","ERR_STREAM_UNSHIFT_AFTER_END_EVENT","errorOrDestroy","kProxyEvents","stream","isDuplex","objectMode","readableObjectMode","pipes","pipesCount","flowing","endEmitted","reading","sync","needReadable","emittedReadable","readableListening","resumeScheduled","paused","emitClose","autoDestroy","defaultEncoding","awaitDrain","readingMore","decoder","_read","_destroy","readableAddChunk","addToFront","skipChunkCheck","emitReadable","emitReadable_","onEofChunk","chunkInvalid","_uint8ArrayToBuffer","addChunk","maybeReadMore","_undestroy","undestroy","isPaused","setEncoding","enc","p","head","content","next","clear","MAX_HWM","howMuchToRead","computeNewHighWaterMark","flow","maybeReadMore_","updateReadableListening","resume","nReadingNextTick","resume_","fromList","consume","endReadable","endReadableNT","wState","finished","xs","l","nOrig","doRead","pipe","dest","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","onclose","onfinish","ondrain","onerror","ondata","cleanedUp","needDrain","pipeOnDrain","pause","event","dests","ev","wrap","_this","asyncIterator","_fromList","iterable","opts","ERR_MULTIPLE_CALLBACK","ERR_TRANSFORM_ALREADY_TRANSFORMING","ERR_TRANSFORM_WITH_LENGTH_0","afterTransform","ts","_transformState","transforming","writecb","writechunk","rs","needTransform","writeencoding","transform","flush","_flush","prefinish","done","_write","err2","CorkedRequest","entry","finish","corkReq","callback","pendingcb","corkedRequestsFree","onCorkedFinish","WritableState","internalUtil","deprecate","realHasInstance","ERR_STREAM_CANNOT_PIPE","ERR_STREAM_DESTROYED","ERR_STREAM_NULL_VALUES","ERR_STREAM_WRITE_AFTER_END","ERR_UNKNOWN_ENCODING","nop","writableObjectMode","finalCalled","ending","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writelen","onwriteStateUpdate","finishMaybe","errorEmitted","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","writev","_writev","final","_final","doWrite","onwriteDrain","holder","allBuffers","isBuf","callFinal","need","rState","current","hasInstance","object","writeAfterEnd","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","_Object$setPrototypeO","_defineProperty","hint","prim","_toPrimitive","_toPropertyKey","kLastResolve","kLastReject","kError","kEnded","kLastPromise","kHandlePromise","kStream","createIterResult","readAndResolve","iter","onReadable","AsyncIteratorPrototype","ReadableStreamAsyncIteratorPrototype","lastPromise","wrapForNext","_this2","_Object$create","iterator","enumerableOnly","symbols","filter","getOwnPropertyDescriptor","_objectSpread","source","getOwnPropertyDescriptors","defineProperties","_defineProperties","descriptor","custom","instance","Constructor","_classCallCheck","tail","protoProps","staticProps","hasStrings","_getString","_getBuffer","nb","depth","customInspect","emitErrorAndCloseNT","emitErrorNT","emitCloseNT","readableDestroyed","writableDestroyed","ERR_STREAM_PREMATURE_CLOSE","eos","called","_len","_key","onlegacyfinish","writableEnded","readableEnded","onrequest","req","setHeader","abort","isRequest","ERR_MISSING_ARGS","to","streams","popCallback","destroys","closed","destroyer","reduce","ERR_INVALID_OPT_VALUE","duplexKey","hwm","highWaterMarkFrom","pipeline","BehaviorSubject","_super","_value","getValue","_subscribe","subscriber","subscription","_a","hasError","thrownError","_throwIfClosed","pipeFromArray","fns","identity","Observable","subscribe","lift","operator","observable","observerOrNext","complete","Subscriber","isFunction","isObserver","errorContext","add","_trySubscribe","sink","promiseCtor","getPromiseCtor","unsubscribe","operations","_i","toPromise","config","ObjectUnsubscribedError","Subject","currentObservers","observers","isStopped","subject","AnonymousSubject","e_1","_b","_c","e_1_1","return","_checkFinalizedStatuses","_innerSubscribe","Subscription","arrRemove","asObservable","destination","COMPLETE_NOTIFICATION","createNotification","kind","EMPTY_OBSERVER","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_error","_complete","_bind","thisArg","ConsumerObserver","partialObserver","handleUnhandledError","context_1","useDeprecatedNextContext","useDeprecatedSynchronousErrorHandling","reportUnhandledError","notification","onStoppedNotification","timeoutProvider","UnsubscriptionError","initialTeardown","_parentage","_finalizers","empty","e_2","_parentage_1","_parentage_1_1","remove","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","_hasParent","_addParent","parent","_removeParent","EMPTY","EMPTY_SUBSCRIPTION","isSubscription","onUnhandledError","EmptyError","firstValueFrom","hasConfig","defaultValue","observeOn","scheduler","delay","executeSchedule","subscribeOn","schedule","scheduleAsyncIterable","result","scheduled","isInteropObservable","innerFrom","scheduleObservable","isArrayLike","scheduleArray","isPromise","schedulePromise","isAsyncIterable","isIterable","scheduleIterable","isReadableStreamLike","scheduleReadableStreamLike","obs","fromAsyncIterable","iterable_1","iterable_1_1","readableStream","asyncIterable","asyncIterable_1","asyncIterable_1_1","label","trys","sent","createOperatorSubscriber","onNext","onComplete","onError","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","distinctUntilChanged","comparator","keySelector","defaultCompare","previousKey","currentKey","predicate","project","mergeAll","concurrent","mergeMap","resultSelector","ii","onBeforeNext","expand","innerSubScheduler","additionalFinalizer","active","isComplete","checkComplete","outerNext","doInnerSub","innerComplete","innerValue","_loop_1","bufferedValue","mergeInternals","dateTimestampProvider","now","delegate","ReplaySubject","_bufferSize","_windowTime","_timestampProvider","_buffer","_infiniteTimeWindow","_trimBuffer","adjustedBufferSize","handleReset","reset","onSubscriber","shareReplay","configOrBufferSize","windowTime","bufferSize","refCount","connector","resetOnError","resetOnComplete","_d","resetOnRefCountZero","wrapperSource","connection","resetConnection","hasCompleted","hasErrored","cancelReset","resetAndUnsubscribe","conn","share","concatAll","startWith","values","handle","popResultSelector","popScheduler","popNumber","item","createErrorClass","createImpl","ctorFunc","isRoot","errorThrown","captureError","parentSubscription","work","repeat","scheduleSubscription","readableStreamLikeToAsyncGenerator","reader","getReader","releaseLock","operate","hasLift","liftedSource","createInvalidObservableTypeError","copyProps","SafeBuffer","getBrowserRTC","randombytes","errCode","MAX_BUFFERED_AMOUNT","filterTrickle","sdp","Peer","_id","_debug","channelName","initiator","channelConfig","channelNegotiated","negotiated","offerOptions","answerOptions","sdpTransform","trickle","allowHalfTrickle","iceCompleteTimeout","destroying","_connected","remoteAddress","remoteFamily","remotePort","localAddress","localFamily","localPort","_wrtc","_pcReady","_channelReady","_iceComplete","_iceCompleteTimer","_channel","_pendingCandidates","_isNegotiating","_firstNegotiation","_batchedNegotiation","_queuedNegotiation","_sendersAwaitingStable","_senderMap","Map","_closingInterval","_remoteTracks","_remoteStreams","_chunk","_cb","_interval","_pc","_isReactNativeWebrtc","_peerConnectionId","oniceconnectionstatechange","_onIceStateChange","onicegatheringstatechange","onconnectionstatechange","_onConnectionStateChange","onsignalingstatechange","_onSignalingStateChange","onicecandidate","_onIceCandidate","peerIdentity","_setupData","channel","createDataChannel","ondatachannel","addStream","ontrack","_onTrack","_needsNegotiation","_onFinishBound","_onFinish","bufferedAmount","connected","readyState","address","port","family","signal","renegotiate","transceiverRequest","addTransceiver","candidate","remoteDescription","_addIceCandidate","setRemoteDescription","_createAnswer","iceCandidateObj","addIceCandidate","send","getTracks","track","addTrack","submap","sender","removed","replaceTrack","oldTrack","newTrack","removeTrack","removeStream","negotiate","_createOffer","clearInterval","close","onmessage","onopen","binaryType","bufferedAmountLowThreshold","_onChannelMessage","onbufferedamountlow","_onChannelBufferedAmountLow","_onChannelOpen","_onChannelClose","filename","lineno","colno","isClosing","setInterval","destroySoon","_startIceCompleteTimeout","createOffer","offer","sendOffer","localDescription","setLocalDescription","_requestMissingTransceivers","getTransceivers","transceiver","mid","requested","createAnswer","answer","sendAnswer","connectionState","iceConnectionState","iceGatheringState","_maybeReady","getStats","flattenValues","report","reports","stat","id","timestamp","_connecting","findCandidatePair","items","remoteCandidates","localCandidates","candidatePairs","foundSelectedCandidatePair","setSelectedCandidatePair","selectedCandidatePair","local","localCandidateId","ip","ipAddress","portNumber","googLocalAddress","remote","remoteCandidateId","googRemoteAddress","selectedCandidatePairId","googActiveConnection","selected","_onInterval","unref","signalingState","sdpMLineIndex","sdpMid","eventStream","some","remoteStream","WEBRTC_SUPPORT","iceServers","urls","sdpSemantics","nenc","retried","_normalizeEncoding","normalizeEncoding","text","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","total","utf8CheckIncomplete","trace","_typeof","o","_createClass","ObliviousSet","ttl","_to","has","obliviousSet","olderThen","delete","removeTooOldValues","DocumentCache","primaryPath","changes$","documentCreator","cacheItemByDocId","registry","FinalizationRegistry","docMeta","docId","cacheItem","byRev","revisionHeight","registerIdleTasks","changeEvent","documentId","documentData","_proto","getLatestDocumentData","getLatestDocumentDataIfExists","docCache","deepFreezeWhenDevMode","docData","_rev","getNewCacheItem","cachedRxDocumentWeakRef","cachedRxDocument","deref","createWeakRefWithFallback","registerIdlePromise","tasks","doc","register","primary","revision","getCachedRxDocumentMonad","mapDocumentsDataToCacheDocs","docsData","getCachedRxDocument","documents","WeakRef","HOOKS","preAddRxPlugin","preCreateRxDatabase","createRxDatabase","preCreateRxCollection","createRxCollection","postDestroyRxCollection","postRemoveRxCollection","preCreateRxSchema","createRxSchema","preCreateRxQuery","prePrepareQuery","createRxDocument","postCreateRxDocument","preCreateRxStorageInstance","preMigrateDocument","postMigrateDocument","preDestroyRxDatabase","postRemoveRxDatabase","preReplicationMasterWrite","preReplicationMasterWriteDocumentsHandle","runPluginHooks","hookKey","runAsyncPluginHooks","all","IncrementalWriteQueue","storageInstance","preWrite","postWrite","queueByDocId","isRunning","addWrite","lastKnownDocumentState","modifier","ar","triggerRun","async","writeRows","itemsById","entries","_docId","docs","newest","newestRevisionHeight","oldData","height","newData","previous","writeResult","bulkWrite","success","isConflict","reverse","documentInDb","rxError","modifierFromPublicToInternal","publicModifier","withoutMeta","_deleted","modified","reattachedMeta","_meta","_attachments","overwritable","isDevMode","tunnelErrorMessage","global","t","hasOwnProperty","u","f","setImmediate","isFrozen","k","P","K","O","WeakMap","S","A","C","D","I","B","T","toStringTag","location","href","F","M","N","q","$","U","L","V","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","W","_e","Y","z","failures","failedKeys","successCount","G","failuresByPos","_stack","H","Q","X","inner","Syntax","SyntaxError","Type","Range","J","Z","ee","te","ne","re","se","onsuccess","ie","oe","ae","ue","ModifyError","DexieError","BulkError","le","ce","he","de","subtle","digest","fe","pe","ye","me","ve","qe","MutationObserver","createElement","observe","attributes","setAttribute","ge","Oe","be","we","xe","ke","Ee","Pe","ref","unhandleds","onunhandled","ct","pgp","finalize","Ke","Se","Ae","Ce","onuncatched","_lib","_PSD","_stackHolder","_prev","_numPrev","_state","Be","Ie","je","Qe","et","Re","De","ut","Ne","onFulfilled","onRejected","psd","$e","_then","Te","Ue","_promise","Le","Fe","Me","Ve","We","st","finally","Timeout","it","tt","race","PSD","totalEchoes","newPSD","Je","usePSD","ot","rejectionMapper","follow","allSettled","status","reason","any","AggregateError","Ye","awaits","echoes","ze","Ge","He","Xe","PromiseProp","nthen","lt","gthen","Ze","ht","nt","at","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","defaultPrevented","dt","idbdb","openComplete","letThrough","_vip","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","_close","open","trans","_completion","dbOpenError","isBeingOpened","_options","autoOpen","dbReadyPromise","ft","pt","yt","mt","vt","gt","bt","_t","wt","lower","lowerOpen","upper","upperOpen","xt","kt","Et","_trans","_tx","schema","NotFound","idbtrans","db","transless","where","core","hook","fire","WhereClause","indexes","primKey","compound","every","keyPath","_maxKey","idxByName","_deps","indexedDB","cmp","multi","toCollection","and","each","toArray","Collection","orderBy","mapToClass","mappedClass","Set","readHook","defineClass","auto","mutate","numFailures","lastResult","update","modify","InvalidArgument","put","bulkGet","getMany","bulkAdd","allKeys","wantResults","results","bulkPut","bulkDelete","Pt","addEventType","subscribers","Kt","Ot","algorithm","or","justLimit","replayFilter","St","At","Ct","isPrimKey","primaryKey","getIndexByKeyPath","Schema","jt","openCursor","keysOnly","unique","query","Dt","stop","fail","_iterate","It","valueMapper","continue","Bt","Tt","Rt","Ft","_ctx","_addAlgorithm","clone","raw","sortBy","sort","advance","until","isMatch","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","outbound","extractKey","modifyChunkSize","cache","Mt","criteria","changeSpec","Nt","qt","$t","zt","Ut","Yt","Lt","Vt","toUpperCase","Wt","between","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWith","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","_min","_max","startsWithAnyOf","Gt","Ht","stopPropagation","preventDefault","Qt","Xt","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","mode","OpenFailed","transaction","storeNames","durability","chromeTransactionDurability","_reject","onabort","oncomplete","_resolve","storagemutated","mutatedParts","ReadOnly","_root","waitFor","_waitingFor","_waitingQueue","objectStore","_spinCount","_memoizedTables","Table","Jt","Zt","en","tn","only","nn","rn","sn","an","upperBound","lowerBound","bound","hasGetAll","objectStoreNames","tables","autoIncrement","isPrimaryKey","indexNames","multiEntry","_pos","getAll","getAllKeys","openKeyCursor","___id","continuePrimaryKey","MIN_KEY","MAX_KEY","un","_novip","IDBKeyRange","dbcore","_middlewares","ln","Transaction","cn","hn","_cfg","dn","_storeNames","pn","populate","_versions","mn","dbschema","vn","change","recreate","Upgrade","yn","deleteIndex","del","contentUpgrade","deleteObjectStore","contains","def","createObjectStore","createIndex","_hasGetAll","WorkerGlobalScope","gn","_parseStoresSpec","stores","storesSource","_allTables","upgrade","bn","_dbNamesDB","Un","addons","dbnames","_n","databases","wn","xn","userAgentData","En","throw","Pn","Kn","PrematureCommit","On","Sn","level","isVirtual","keyTail","keyLength","An","Cn","deleting","creating","updating","jn","Dn","_cache","In","Bn","Tn","Nn","Rn","Mn","up","qn","addKey","addKeys","$n","subscr","verno","dependencies","onReadyBeingFired","dbReadyResolve","cancelOpen","openCanceller","autoSchema","ready","vip","Version","_IDBKeyRange","newVersion","oldVersion","_fireOnBlocked","vcFired","use","_whenReady","unuse","onblocked","onupgradeneeded","allowEmptyDB","deleteDatabase","NoSuchDatabase","onversionchange","kn","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","SubTransaction","InvalidTable","Ln","Vn","Wn","zn","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","Gn","Hn","Qn","exists","getDatabaseNames","ignoreTransaction","spawn","currentTransaction","derive","override","Events","liveQuery","Fn","extendObservabilitySet","getByKeyPath","setByKeyPath","delByKeyPath","shallowClone","deepClone","getObjectDiff","asap","minKey","connections","errnames","semVer","maxKey","initCustomEvent","BroadcastChannel","postMessage","trig","random","changedParts","clients","matchAll","includeUncontrolled","newValue","serviceWorker","RxStorageDefaultStatics","prepareQuery","mutateableQuery","queryPlan","checkpointSchema","DEXIE_DOCS_TABLE_NAME","DEXIE_DELETED_DOCS_TABLE_NAME","DEXIE_CHANGES_TABLE_NAME","RX_STORAGE_NAME_DEXIE","RxStorageDexieStatics","DEXIE_STATE_DB_BY_NAME","REF_COUNT_PER_DEXIE_DB","getDexieDbWithTables","databaseName","collectionName","settings","dexieDbName","useSettings","dexieDb","dexieStoresSettings","getDexieStoreSchema","dexieTable","dexieDeletedTable","closeDexieDb","statePromise","newCount","ensureNoBooleanIndex","checkedFields","field","DEXIE_PIPE_SUBSTITUTE","dexieReplaceIfStartsWithPipe","part","withoutFirst","dexieReplaceIfStartsWithPipeRevert","fromStorageToDexie","row","fromDexieToStorage","rxJsonSchema","arIndex","getDocsInDb","internals","docIds","nonDeletedDocsInDb","deletedDocsInDb","docsInDb","idx","lastOfArray","batchArray","batchSize","batch","isMaybeReadonlyArray","arrayFilterNotEmpty","countUntilNotMatching","matchingFn","_item","appendToArray","amount","element","RX_META_LWT_MINIMUM","getDefaultRxDocumentMeta","lwt","getDefaultRevision","stripMetaDataFromDocument","areRxDocumentArraysEqual","ar1","ar2","row1","row2","sortDocumentsByLastWriteTime","getSortDocumentsByLastWriteTimeComparator","pluginMissing","pluginKey","keyParts","pluginName","errorToPlainJson","rxdb","parameters","freeze","ignoreUnknown","respectType","respectFunctionNames","respectFunctionProperties","unorderedObjects","unorderedArrays","unorderedSets","excludeKeys","excludeValues","replacer","nativeFunc","WordArray","words","sigBytes","encoder","Hex","wordArray","clamp","thatByte","ceil","hexChars","bite","Latin1","latin1Str","latin1StrLength","Utf8","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","_data","_nDataBytes","_minBufferSize","blockSize","_append","_doProcessBlock","_dataWords","_offset","_process","doFlush","processedWords","nBlocksReady","nWordsReady","nBytesReady","Hasher","messageUpdate","SHA256","_hash","H2","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","t1","nBitsTotal","nBitsLeft","defaultHashSha256","TextEncoder","encode","hashBuffer","getFromMapOrThrow","getFromMapOrCreate","creator","ifWasThere","deepEqual","isObject","disallowedKeys","digits","getPathSegments","path","currentSegment","currentPart","isIgnoring","character","isStringIndex","getProperty","pathArray","deepFreeze","prop","objectPathMonad","objectPath","splitLength","currentVal","flattenObject","ob","toReturn","flatObject","flatClone","firstPropertyNameOfObject","sortObject","noArraySort","localeCompare","overwriteGetterForCaching","getterName","ensureNotFalsy","RXJS_SHARE_REPLAY_DEFAULTS","promiseWait","PROMISE_RESOLVE_TRUE","PROMISE_RESOLVE_FALSE","PROMISE_RESOLVE_NULL","PROMISE_RESOLVE_VOID","requestIdlePromiseNoQueue","requestIdleCallback","idlePromiseQueue","requestIdlePromise","requestIdleCallbackIfAvailable","promiseSeries","initial","parseRevision","getHeightOfRevision","createRevision","databaseInstanceToken","previousDocData","previousRevision","RXDB_VERSION","COUCH_NAME_CHARS","randomCouchString","charAt","ucfirst","trimDots","isFolderPath","_lastNow","twoDecimals","toFixed","QueryCache","_map","getByQuery","rxQuery","stringRep","createQueryCache","uncacheRxQuery","queryCache","uncached","countRxQuerySubscribers","refCount$","tryToKeepMax","unExecutedLifetime","defaultCacheReplacementPolicy","_collection","minUnExecutedLifetime","maybeUncache","queriesInCache","_lastEnsureEqual","_creationTime","mustUncache","COLLECTIONS_WITH_RUNNING_CLEANUP","WeakSet","triggerCacheReplacement","rxCollection","cacheReplacementPolicy","_queryCache","INDEX_MAX","INDEX_MIN","MIN_VALUE","getQueryPlan","selector","currentBestQueryPlan","optimalSortIndexCompareString","sortField","hasDescSorting","find","currentBestQuality","inclusiveEnd","inclusiveStart","indexField","matcher","operators","matcherOpts","LOGICAL_OPERATORS","partialOpts","operatorValue","startKey","endKey","getMatcherQueryOpts","startKeys","opt","endKeys","sortFieldsSameAsIndexFields","selectorSatisfiedByIndex","isSelectorSatisfiedByIndex","quality","addQuality","pointsPerMatchingKey","nonMinKeyCount","keyValue","nonMaxKeyCount","equalKeyCount","pointsIfNoReSortMustBeDone","rateQueryPlan","LOWER_BOUND_LOGICAL_OPERATORS","UPPER_BOUND_LOGICAL_OPERATORS","prevLowerBoundaryField","hasNonMatchingOperator","fieldName","operation","op","prevUpperBoundaryField","hasMoreThenOneLowerBoundaryField","hasLowerLogicOp","hasMoreThenOneUpperBoundaryField","hasUpperLogicOp","selectorFields","defaultConflictHandler","_context","newDocumentState","realMasterState","isEqual","resolveConflictError","forkState","conflictHandler","conflictHandlerOutput","resolvedDoc","checkpointKey","getDocumentDataOfRxChangeEvent","rxChangeEvent","previousDocumentData","rxChangeEventToEventReduceChangeEvent","fillObjectDataBeforeInsert","jsonSchema","createRxCollectionStorageInstance","rxDatabase","storageInstanceCreationParams","multiInstance","createStorageInstance","removeCollectionStorages","databaseInternalStorage","password","hashFunction","relevantCollectionMetaDocs","statics","metaDoc","removeStorages","isCollection","connectedStorages","alreadyAdded","devMode","writeDoc","ChangeEventBuffer","collection","subs","counter","eventCounterMap","cE","isLocal","_handleChangeEvent","getArrayIndexByPointer","pointer","oldestEvent","oldestCounter","getFrom","currentIndex","nextEvent","runFrom","reduceByLastOfDoc","changeEvents","constructorForCollection","getDocumentPrototype","schemaProto","ormProto","methods","getDocumentOrmPrototype","baseProto","createNewRxDocument","getRxDocumentConstructor","_runHooksSync","HOOKS_WHEN","HOOKS_KEYS","hooksApplied","RxCollectionBase","database","internalStorageInstance","instanceCreationOptions","migrationStrategies","attachments","timeouts","incrementalWriteQueue","_incrementalUpsertQueues","synced","hooks","_subs","_docCache","checkpoint$","_changeEventBuffer","onDestroy","colProto","when","fnName","parallel","addHook","_applyHookFunctions","asRxCollection","prepare","_runHooks","collectionEventBulks$","eventBulks$","changeEventBulk","checkpoint","databaseStorageToken","storageToken","subDocs","changeStream","eventBulk","internal","databaseToken","token","endTime","startTime","$emit","conflictResultionTasks","task","resolveConflictResultionTask","cleanup","_minimumDeletedTime","migrationNeeded","getMigrationState","startMigration","migratePromise","insert","json","bulkInsert","isError","useDocs","hasHooks","insertRows","rxDocuments","docsMap","bulkRemove","ids","rxDocumentMap","findByIds","rxDocument","toMutableJSON","removeDocs","successIds","bulkUpsert","insertData","useJsonByDocId","useJson","insertResult","writeData","docDataInDb","newDoc","incrementalModify","upsert","bulkResult","incrementalUpsert","docDataFromCache","inserted","findOne","_incrementalUpsertEnsureRxDocumentExists","wasInserted","_innerDoc","_incrementalUpsertUpdate","queryObj","mangoQuery","$in","exportJSON","importJSON","_exportedJSON","insertCRDT","_updateObj","boundFun","runName","series","getHooks","time","collections","internalStore","autoMigrate","localDocuments","funName","INTERNAL_CONTEXT_COLLECTION","INTERNAL_CONTEXT_STORAGE_TOKEN","INTERNAL_STORE_SCHEMA","fields","separator","properties","maxLength","enum","additionalProperties","required","sharding","shards","getPrimaryKeyOfInternalDocument","getAllCollectionDocuments","storageStatics","getAllQueryPrepared","skip","STORAGE_TOKEN_DOCUMENT_KEY","STORAGE_TOKEN_DOCUMENT_ID","ensureStorageTokenDocumentExists","passwordHash","rxdbVersion","instanceToken","conflictError","databaseStateVersion","codeVersion","stateMajor","codeMajor","isDatabaseStateVersionCompatibleWithDatabaseCode","existingPasswordHash","storageTokenDocInDb","addConnectedStorageToCollection","storageCollectionName","collectionDocId","_collectionNamePrimary","collectionDoc","saveData","IdleQueue","parallels","_parallels","_qC","_iC","_lHN","_hPM","_pHM","_removeIdlePromise","idleQueue","_timeoutObj","_tryIdleCall","_tryIR","isIdle","_manRes","_resolveOneIdleCall","lock","unlock","wrapCall","maybePromise","prom","timeoutObj","cancelIdlePromise","cancelIdleCallback","_this3","USED_DATABASE_NAMES","RxDatabaseBase","eventReduce","cleanupPolicy","allowSlowCount","storageInstances","startupErrors","observable$","storageTokenDocument","emittedEventBulkIds","asRxDatabase","removeCollectionDoc","addCollections","collectionCreators","jsonSchemas","schemas","bulkPutDocs","useArgsByCollectionName","collectionNameWithVersion","collectionDocData","schemaHash","useArgs","hookData","putDocsResult","ensureNoStartupErrors","writeError","docInDb","previousSchemaHash","previousSchema","lockedRun","_collections","backup","leaderElector","isLeader","waitForLeadership","migrationStates","col","dbInternalsStorageInstance","createRxDatabaseStorageInstance","collectionDocs","collectionNames","removedCollectionNames","removeRxDatabase","ignoreDuplicate","link","throwIfDatabaseNameUsed","basePrototype","isInstanceOfRxDocument","deleted$","deleted","getLatest","latestDocData","get$","finalFields","schemaObj","refCollection","valuesIterator","objPath","_propertyCache","valueObj","Proxy","property","withMetaFields","incrementalUpdate","updateCRDT","putAttachment","getAttachment","allAttachments","allAttachments$","mutationFunction","_saveData","patch","incrementalPatch","beforeDocumentUpdateWrite","removedDocData","deletedData","incrementalRemove","createRxDocumentConstructor","createWithConstructor","jsonData","validateChange","_setPrototypeOf","_inheritsLoose","_getPrototypeOf","_construct","Parent","Class","construct","sham","Boolean","_wrapNativeSuper","Wrapper","messageForError","paramStr","_k","parametersToString","RxError","_Error","mes","RxTypeError","_TypeError","newRxError","newRxTypeError","isBulkWriteConflictError","STORAGE_WRITE_ERROR_CODE_TO_MESSAGE","rxStorageWriteErrorToRxError","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","MISSING","CYCLE_FOUND_ERROR","ARRAY_PROTO","OBJECT_PROTO","OBJECT_TYPE_RE","Null","Undefined","getConstructor","DEFAULT_HASH_FUNCTION","cycle","STRING_CONVERTERS","tag","members","getMembersOf","objKeys","JS_SIMPLE_TYPES","IMMUTABLE_TYPES_SET","typedArrayToString","toISOString","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","SORT_ORDER_BY_TYPE","null","number","boolean","date","function","condition","isTypedArray","isObjectLike","isRegExp","isMissing","mergeable","left","right","merge","flatten","skipValidation","buildHashIndex","sortedIndex","keyFn","sorted","smallest","rmap","lhs","stable","currIndex","rhs","_j","flatten2","ys","activeProto","ka","kb","existingKey","MAX_ARRAY_PUSH","rest","acc","begin","resolve2","subpath","unwrapArray","isIndex","hasNext","preserveMissing","preserveKeys","filterMissing","NUMBER_RE","walk","buildGraph","isNextArrayIndex","descendArray","elem","OPERATOR_NAME_PATTERN","normalize","expr","$regex","$eq","exprObj","newExpr","ProcessingMode","_opts","_local","root","variables","getOptions","Context","idKey","collation","processingMode","CLONE_OFF","useStrictMode","scriptEnabled","useGlobalContext","collectionResolver","jsonSchemaValidator","OperatorType","ops","ACCUMULATOR","EXPRESSION","PIPELINE","PROJECTION","QUERY","WINDOW","addOperators","ctx","getOperator","addAccumulatorOps","addExpressionOps","addQueryOps","addPipelineOps","addProjectionOps","addWindowOps","GLOBAL_CONTEXT","useOperators","currentFn","fallback","systemVariables","$$ROOT","_obj","_expr","$$CURRENT","$$REMOVE","$$NOW","redactVariables","$$KEEP","$$PRUNE","$$DESCEND","copts","callExpression","callAccumulator","prefix","dropItem","DONE","Action","nextVal","iteratees","yieldedValues","isDone","getNext","nextFn","bufferIndex","storeResult","outer","innerDone","action","MAP","func","FILTER","TAKE","DROP","createCallback","take","drop","initialValue","CLONE_ALL","CLONE_INPUT","pipelineOperators","operatorKeys","opName","CLONE_OUTPUT","Cursor","projection","fetch","$project","fetchAll","buffered","iterators","$skip","$limit","$sort","spec","compiled","compile","whereOperator","processOperator","sortKeys","collationSpec","locale","localeOpt","sensitivity","COLLATION_STRENGTH","strength","caseFirst","numeric","numericOrdering","ignorePunctuation","alternate","caseLevel","collator","Intl","Collator","collationComparator","coll","modifiers","groups","sortedKeys","createQueryOperator","createExpressionOperator","eq","$ne","$nin","$lt","$lte","$gt","$gte","isNonBooleanOperator","$elemMatch","temp","isNull","isInt","isLong","compareFuncs","bool","decimal","double","int","regex","compareType","bitwise","compute","nums","buildMap","letters","sign","FIXED_POINTS","createTrignometryOperator","fixedPoints","fp","keySet","acos","acosh","asin","asinh","atan","atanh","cos","cosh","RADIANS_FACTOR","PI","DEGREES_FACTOR","sin","sinh","tan","expressionKeys","idOnlyExcluded","validateExpression","ID_KEY","processObject","newObj","foundSlice","foundExclusion","dropKeys","subExpr","subExprObj","subExprKeys","objPathGraph","check","queries","$nor","strict","matched","findIndex","mingoInitDone","normalizeMangoQuery","normalizedMangoQuery","indexAr","isPrimaryInSort","fieldsWithLogicalOperator","currentBestIndexForSort","currentFieldsAmount","useIndex","firstWrongIndex","getSortComparator","sortParts","sortBlock","direction","getValueFn","sortPart","valueA","valueB","getQueryMatcher","_schema","mingoQuery","$and","$exists","$mod","$not","$or","$size","$type","insertFirst","previousResults","keyDocumentMap","insertLast","removeFirstItem","queryParams","removeLastItem","removeExisting","insertAtSortPosition","compareFunction","low","lastMidDoc","high","pushAtSortPosition","sortComparator","orderedActionList","doNothing","_input","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","replaceExisting","alwaysWrong","wrongHuman","getTime","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction","characters","makeid","splitStringToChunks","chunkSize","chunks","charsLength","CHAR_CODE_OFFSET","getNumberOfChar","char","hasLimit","isFindOne","hasSkip","isDelete","isInsert","isUpdate","wasLimitReached","sortParamsChanged","sortFields","wasInResult","wasFirst","wasLast","wasSortedBeforeFirst","wasSortedAfterLast","isSortedBeforeFirst","isSortedAfterLast","wasMatching","queryMatcher","doesMatchNow","wasResultsEmpty","stateResolveFunctionByIndex","simpleBdd","getSimpleBdd","nodesById","lastLeafNodeChar","leafNodeChunks","internalNodeChunks","idOf0Branch","idOf1Branch","node","last3","idOf0","idOf1","minimalStringToSimpleBdd","resolveInput","currentNode","currentLevel","resolveWithSimpleBdd","calculateActionName","resolvedActionId","RXQUERY_QUERY_PARAMS_CACHE","calculateNewResults","rxChangeEvents","docA","docB","sortComparatorData","getQueryParams","_result","previousResultsMap","docsDataMap","changed","foundNonOptimizeable","eventReduceEvent","actionName","runAction","newResults","RxQuerySingleResult","docsDataFromStorageInstance","_queryCount","RxQueryBase","other","_execOverDatabaseCount","_latestChangeEvent","_lastExecStart","_lastExecEnd","_ensureEqualQueue","isFindOneByIdQuery","_setResultData","newResultData","newQueryResult","_execOverDatabase","preparedQuery","getPreparedQuery","mustBeQueried","findDocumentsById","docsPromise","docsFromStorage","fromStorageList","queryResult","queryCollection","throwIfMissing","_ensureEqual","stringObj","hookInput","doesDocumentDataMatch","_queryObj","_params","_amount","_$","results$","useResult","sources","normalizedQuery","_getDefaultQuery","createRxQuery","_isResultsInSync","currentLatestEventNumber","asRxQuery","mustReExec","missedChangeEvents","runChangeEvents","previousCount","didMatchBefore","eventReduceResult","__ensureEqual","REGEX_ALL_DOTS","getSchemaByObjectPath","usePath","fillPrimaryKey","newPrimary","getComposedPrimaryKeyOfDocumentData","existingPrimary","getPrimaryFieldOfPrimaryKey","getLengthOfPrimaryKey","schemaPart","compositePrimary","normalizeRxJsonSchema","fillWithDefaultSettings","keyCompression","encrypted","minLength","RX_META_SCHEMA","getFinalFields","modifiedIndex","minimum","maximum","multipleOf","fillObjectWithDefaults","rxSchema","defaultKeys","defaultValues","DEFAULT_CHECKPOINT_SCHEMA","RxSchema","getIndexes","dataBefore","dataAfter","pathProperties","fullPath","__defineGetter__","getPrimaryOfDocumentData","getPreviousVersions","runPreCreateHooks","useJsonSchema","INTERNAL_STORAGE_NAME","getSingleDocument","writeSingle","writeRow","stackCheckpoints","checkpoints","storageChangeEventToRxChangeEvent","rxStorageChangeEvent","throwIfIsStorageWriteError","categorizeBulkWriteRows","bulkWriteRows","onInsert","onUpdate","newestRow","hasAttachments","bulkInsertDocs","bulkUpdateDocs","eventBulkEvents","attachmentsAdd","attachmentsRemove","attachmentsUpdate","hasDocsInDb","rowAmount","_loop","attachmentError","rowId","documentDeleted","previousDeleted","revInDb","updatedRow","stripAttachmentsDataFromRow","attachmentId","attachmentData","previousAttachmentData","newDigest","eventDocumentData","previousEventDocumentData","stripAttachmentsDataFromDocument","_event","insertedIsDeleted","useDoc","attachmentBase64String","atob","flatCloneDocWithMeta","getWrappedStorageInstance","originalStorageInstance","rows","toStorageWriteRows","structuredClone","metaFieldName","transformDocumentDataFromRxDBToRxStorage","useWriteResult","reInsertErrors","reInserts","subResult","info","getAttachmentData","getChangedDocumentsSince","minDeletedTime","taskSolution","ensureRxStorageInstanceParamsAreCorrect","params","hasEncryption","compression","extendStatics","__extends","__","__awaiter","_arguments","generator","fulfilled","step","rejected","__generator","body","verb","__values","__read","__spreadArray","pack","__await","__asyncGenerator","fulfill","settle","__asyncValues","SuppressedError","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","chunkId","promises","miniCssF","url","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","onScriptComplete","onload","doneFns","parentNode","removeChild","appendChild","scriptUrl","importScripts","currentScript","installedChunks","installedChunkData","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","PROTOTYPES","RxDocument","RxQuery","RxCollection","RxDatabase","ADDED_PLUGINS","ADDED_PLUGIN_NAMES","addRxPlugin","plugin","plugins","prototypes","hooksObj","after","before","objectProto","getKeys","argsArgArrayOrObject","first_1","mapOneOrManyArgs","callOrApply","combineLatest","observables","valueTransform","maybeSchedule","remainingFirstValues","hasFirstValue","combineLatestInit","createObject","execute","getLastCheckpointDoc","checkpointDocId","metaInstance","isCheckpoint","itemId","checkpointDoc","lastCheckpointDoc","checkpointData","setCheckpoint","checkpointQueue","previousCheckpointDoc","canceled","sucessDoc","docStateToWriteDoc","keepMeta","docState","writeDocToDocState","keepAttachments","stripAttachmentsDataFromMetaWriteRows","getUnderlyingPersistentStorage","underlyingPersistentStorage","getAssumedMasterState","metaDocs","metaDocument","getMetaWriteRow","newMasterDocState","isResolvedConflict","newMeta","startReplicationDownstream","initialCheckpoint","downstream","identifierHash","identifier","replicationHandler","timer","openTasks","addNewTask","stats","down","taskWithTime","streamQueue","useTasks","innerTaskWithTime","lastTimeMasterChangesRequested","downstreamResyncOnce","lastCheckpoint","downResult","masterChangesSince","pullBatchSize","persistFromMaster","downstreamProcessChanges","docsOfAllTasks","firstSyncDone","masterChangeStream$","masterChangeStreamEmit","persistenceQueue","nonPersistedFromMaster","downDocsById","useCheckpoint","writeRowsToFork","writeRowsToForkById","writeRowsToMeta","useMetaWriteRows","forkInstance","currentForkStateList","assumedMasterState","currentForkState","forkStateFullDoc","forkStateDocData","masterState","assumedMaster","isAssumedMasterEqualToForkState","areStatesExactlyEqual","newForkState","nextRevisionHeight","forkWriteRow","downstreamBulkWriteFlag","forkWriteResult","processed","metaWriteResult","unhandledError","fillWriteDataForAttachmentsChange","newDocument","originalDocument","originalAttachmentsIds","attachmentDataString","startReplicationUpstream","upstream","upstreamInitialSync","processTasks","initialSyncStartTime","forkChangeStreamEmit","waitBeforePersist","upResult","pushBatchSize","persistToMaster","upDocsById","writeRowsToMaster","writeRowsToMasterIds","forkStateById","fullDocData","assumedMasterDoc","writeRowsArray","conflictIds","conflictsById","writeBatches","writeBatch","masterWrite","conflictDoc","useWriteRowsToMeta","hadConflictWrites","persistToMasterHadConflicts","conflictWriteFork","conflictWriteMeta","writeToMasterRow","resolved","resolvedConflicts","persistToMasterConflictWrites","useMetaWrites","awaitRxStorageReplicationFirstInSync","awaitRxStorageReplicationInSync","replicationState","PROMISE_RESOLVED_TRUE","PROMISE_RESOLVED_VOID","sleep","resolveWith","randomToken","lastMs","microSeconds","USE_METHOD","exit","oldClose","LISTENERS","startedListening","runAll","sendLeaderMessage","msgJson","broadcastChannel","postInternal","beLeader","_hasLeader","unloadFn","die","_unl","isLeaderListener","_dpLC","_dpL","_lstns","LeaderElectionWebLock","_befC","isDead","_wKMC","lN","hasLeader","locks","relevantLocks","held","awaitLeadership","_wLMP","AbortController","returnPromise","rej","onduplicate","_fn","_this4","uFn","LeaderElection","_aplQ","_aplQC","hasLeaderListener","createLeaderElection","_leaderElector","fallbackInterval","responseTime","averageResponseTime","elector","applyOnce","isFromFallbackInterval","stopCriteriaPromiseResolve","stopCriteria","stopCriteriaPromise","handleMessage","waitForAnswerTime","applyRun","_aLP","whenDeathListener","tryOnFallBack","_awaitLeadershipOnce","argsOrArgArray","NativeMethod","messagesCallback","bc","subFns","msgEvent","channelState","onMessage","messageJson","canBeUsed","Deno","_pubkey","originalOptions","webWorkerSupport","idb","removeTimeout","maxParallelWrites","useFastPath","DB_PREFIX","OBJECT_STORE_ID","TRANSACTION_SETTINGS","getIdb","commitIndexedDBTransaction","tx","commit","getMessagesHigherThan","lastCursorId","keyRangeValue","getAllRequest","openCursorRequest","cursor","cleanOldMessages","msgObk","tooOld","deleteRequest","removeMessagesById","_readLoop","readNewMessages","newerMessages","useMessages","msgObj","uuid","eMIs","messagesCallbackTime","_filterMessage","msgObjA","msgObjB","IndexedDBMethod","IndexedDB","dbName","openRequest","createDatabase","writeBlockPromise","readQueuePromises","readerUuid","writeObject","writeMessage","KEY_PREFIX","getLocalStorage","storageKey","ls","LocalstorageMethod","addStorageEventListener","writeObj","defaultTime","SIMULATE_CHANNELS","SimulateMethod","METHODS","ENFORCED_OPTIONS","OPEN_BROADCAST_CHANNELS","lastId","chooseMethods","useMethod","_iL","_onML","_addEL","_uMP","_prepP","_post","sendPromise","_hasMessageListeners","_addListenerObject","listenerFn","listenerObject","_startListening","_removeListenerObject","_stopListening","listenObj","awaitPrepare","isClosed","BROADCAST_CHANNEL_BY_TOKEN","getBroadcastChannelReference","storageName","refObject","refs","removeBroadcastChannelReference","addRxStorageMultiInstanceSupport","instanceCreationParams","providedBroadcastChannel","changesFromOtherInstances$","eventListener","oldChangestream$","otherSources","mergeWith","oldRemove","LEADER_ELECTORS_OF_DB","LEADER_ELECTOR_BY_BROADCAST_CHANNEL","getLeaderElectorByBroadcastChannel","getForDatabase","oldDestroy","RxDBLeaderElectionPlugin","DEFAULT_MODIFIER","swapDefaultDeletedTodeletedField","deletedField","isDeleted","handlePulledDocuments","awaitRetry","retryTime","onLine","onlineAgain","REPLICATION_STATE_BY_COLLECTION","RxReplicationState","replicationIdentifier","pull","live","autoStart","subjects","received$","sent$","error$","canceled$","active$","callOnStart","remoteEvents$","cancel","startPromise","replicatedDocumentsSchema","parentPrimaryKeyLength","baseSchema","pullModifier","pushModifier","metaInstanceCollectionName","metaInstanceSchema","internalReplicationState","checkpointKeyPromise","getCheckpointKey","replicateRxStorageInstance","_v","useEv","emitError","useRows","pushRows","isActive","stream$","awaitInitialReplication","awaitInSync","reSync","emitEvent","cancelRxStorageReplication","replicateRxCollection","mustWaitForLeadership","waitTillRun","startReplicationOnLeaderShip","sendMessageAndAwaitAnswer","peer","requestId","answerPromise","response$","response","RxWebRTCReplicationPool","connectionHandler","peerStates$","masterReplicationHandler","plainDocumentData","rowById","masterDocsStateList","masterDocsState","conflicts","rxStorageInstanceToReplicationHandler","addPeer","peerState","removePeer","awaitFirstPeer","peerStates","sendMessage","ws","DEFAULT_SIGNALING_SERVER_HOSTNAME","DEFAULT_SIGNALING_SERVER","defaultServerWarningShown","getConnectionHandlerSimplePeer","signalingServerUrl","webSocketConstructor","WebSocket","ownPeerId","connect$","disconnect$","message$","peers","socket","createSocket","yourPeerId","room","topic","createPeerConnection","remotePeerId","disconnected","newSimplePeer","senderPeerId","receiverPeerId","messageOrResponse","otherPeerIds","SIMPLE_PEER_PING_INTERVAL","mapKeyForKeyRange","getKeyRangeByQueryPlan","equalKeys","dexieQuery","skipPlusLimit","keyRange","queryPlanFields","indexName","store","dexieTx","cursorReq","instanceId","RxStorageInstanceDexie","documentWrites","ensureNotClosed","categorized","documentKeys","docsInDbMap","docWithDexieInternals","bulkRemoveDocs","bulkPutDeletedDocs","bulkRemoveDeletedDocs","lastState","dexieCount","totalCount","nonDeleted","sinceLwt","sinceId","changedDocsNormal","changedDocsDeleted","changedDocs","lastDoc","minimumDeletedTime","maxDeletionTime","removeIds","_documentId","_attachmentId","_digest","_taskSolution","RxStorageDexie","createDexieStorageInstance","getRxStorageDexie","databasePromise","RxDBDevModePlugin","wrappedValidateAjvStorage","roomId","reload","roomHash","lastChange","todos","preSave","requestCounter","requestFlag","getRequestId","pool","connectionHandlerCreator","connectSub","peerToken","isPeerValid","ownStorageToken","otherStorageToken","isMasterInWebRTCReplication","masterHandler","masterChangeStreamSub","streamResponse","messageSub","msgPeer","lastPulledCheckpoint","replicateWebRTC","getById","getElementById","innerHTML","$todoList","todo","append","$liElement","$viewDiv","$checkbox","$label","$deleteButton","onclick","classList","contentEditable","updateName","newName","innerText","textContent","onblur","onkeyup","isEnterEvent","escapeForHTML","getHtmlByTodo","$insertInput","addTodo","onkeydown","keyCode"],"sourceRoot":""}